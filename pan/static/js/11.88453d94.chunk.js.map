{"version":3,"sources":["../node_modules/@material-ui/icons/esm/MenuBook.js","component/Share/ReadMe.js"],"names":["createSvgIcon","d","useStyles","makeStyles","theme","readMeContainer","marginTop","breakpoints","down","spacing","readMeHeader","padding","display","color","palette","text","secondary","readMeIcon","marginRight","content","border","height","borderTopLeftRadius","borderTopRightRadius","backgroundColor","background","paper","primary","default","type","ReadMe","props","classes","useTheme","useState","loading","setLoading","setContent","dispatch","useDispatch","ToggleSnackbar","useCallback","vertical","horizontal","msg","toggleSnackbar","$vm","React","createRef","useEffect","previewPath","file","path","name","API","get","share","key","encodeURIComponent","then","response","rawData","toString","catch","error","message","Paper","className","MenuBook","Typography","Divider","TextLoading","ref","style","boxShadow","borderRadius","value","onChange","preview","toolbar"],"mappings":"4MAEe,SAAAA,EAAA,GAA4B,gBAAoB,WAAgB,KAAmB,gBAAoB,OAAQ,CAC5HC,EAAG,0YACY,gBAAoB,OAAQ,CAC3CA,EAAG,2VACA,Y,mHCML,IAAMC,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,gBAAgB,aACZC,UAAW,IACVF,EAAMG,YAAYC,KAAK,MAAQ,CAC5BF,UAAWF,EAAMK,QAAQ,KAGjCC,aAAc,CACVC,QAAS,YACTC,QAAS,OACTC,MAAOT,EAAMU,QAAQC,KAAKC,WAE9BC,WAAY,CACRC,YAAa,GAEjBC,QAAS,GACT,UAAW,CAEP,iBAAkB,CACdC,OAAQ,kBAEZ,8CAA+C,CAC3CC,OAAQ,eAEZ,mCAAoC,CAChCC,oBAAqB,cACrBC,qBAAsB,eAE1B,qDAAsD,CAClDC,gBAAiBpB,EAAMU,QAAQW,WAAWC,MAAQ,aAClDb,MAAOT,EAAMU,QAAQC,KAAKY,QAAU,cAExC,2CAA4C,CACxCH,gBAAiBpB,EAAMU,QAAQW,WAAWG,QAAU,aACpDf,MAC2B,SAAvBT,EAAMU,QAAQe,KACR,kBACA,kCAGd,4CAA6C,CACzCL,gBAAiBpB,EAAMU,QAAQW,WAAWG,QAAU,cAExD,yCAA0C,CACtCf,MAC2B,SAAvBT,EAAMU,QAAQe,KACR,qBACA,sBAEd,gDAAiD,CAC7CL,gBAAiBpB,EAAMU,QAAQW,WAAWG,QAAU,mBAKjD,SAASE,EAAOC,GAC3B,IAAMC,EAAU9B,IACVE,EAAQ6B,cAFoB,EAIJC,oBAAS,GAJL,mBAI3BC,EAJ2B,KAIlBC,EAJkB,OAKJF,mBAAS,IALL,mBAK3Bf,EAL2B,KAKlBkB,EALkB,KAO5BC,EAAWC,cACXC,EAAiBC,uBACnB,SAACC,EAAUC,EAAYC,EAAK/B,GAA5B,OACIyB,EAASO,YAAeH,EAAUC,EAAYC,EAAK/B,MACvD,CAACyB,IAGCQ,EAAMC,IAAMC,YA+BlB,OA7BAC,qBAAU,WACNb,GAAW,GACX,IAAMc,EACkB,MAApBnB,EAAMoB,KAAKC,KACLrB,EAAMoB,KAAKC,KAAOrB,EAAMoB,KAAKE,KAC7BtB,EAAMoB,KAAKC,KAAO,IAAMrB,EAAMoB,KAAKE,KAC7CC,IAAIC,IACA,iBACIxB,EAAMyB,MAAMC,IACZ,SACAC,mBAAmBR,IAEtBS,MAAK,SAACC,GACHvB,EAAWuB,EAASC,QAAQC,eAE/BC,OAAM,SAACC,GACJxB,EACI,MACA,QACA,qDAAoBwB,EAAMC,QAC1B,YAGPN,MAAK,WACFvB,GAAW,QAGpB,CAACL,EAAMyB,MAAOzB,EAAMoB,OAGnB,kBAACe,EAAA,EAAD,CAAOC,UAAWnC,EAAQ3B,iBACtB,yBAAK8D,UAAWnC,EAAQtB,cACpB,kBAAC0D,EAAD,CAAUD,UAAWnC,EAAQf,aAC7B,kBAACoD,EAAA,EAAD,KAAatC,EAAMoB,KAAKE,OAG5B,kBAACiB,EAAA,EAAD,MACA,yBAAKH,UAAWnC,EAAQb,SACnBgB,GAAW,kBAACoC,EAAA,EAAD,OACVpC,GACE,kBAAC,IAAD,CACIqC,IAAK1B,EACL2B,MAAO,CACHC,UAAW,OACXC,aAAc,EACdnD,gBAAiBpB,EAAMU,QAAQW,WAAWC,OAE9CL,OAAQ,OACRuD,MAAOzD,EACP0D,SAAU,SAACD,GAAD,OAAWvC,EAAWuC,IAChCE,SAAO,EACPC,QAAS","file":"static/js/11.88453d94.chunk.js","sourcesContent":["import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99zM13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83zM17.5 14.33c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24z\"\n})), 'MenuBook');","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport { MenuBook } from \"@material-ui/icons\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport TextLoading from \"../Placeholder/TextLoading\";\r\nimport API from \"../../middleware/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport Editor from \"for-editor\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    readMeContainer: {\r\n        marginTop: 30,\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            marginTop: theme.spacing(2),\r\n        },\r\n    },\r\n    readMeHeader: {\r\n        padding: \"10px 16px\",\r\n        display: \"flex\",\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    readMeIcon: {\r\n        marginRight: 8,\r\n    },\r\n    content: {},\r\n    \"@global\": {\r\n        //如果嵌套主题，则应该定位[class * =“MuiButton-root”]。\r\n        \".for-container\": {\r\n            border: \"none!important\",\r\n        },\r\n        \".for-container .for-editor .for-editor-edit\": {\r\n            height: \"0!important\",\r\n        },\r\n        \".for-container > div:first-child\": {\r\n            borderTopLeftRadius: \"0!important\",\r\n            borderTopRightRadius: \"0!important\",\r\n        },\r\n        \".for-container .for-editor .for-panel .for-preview\": {\r\n            backgroundColor: theme.palette.background.paper + \"!important\",\r\n            color: theme.palette.text.primary + \"!important\",\r\n        },\r\n        \".for-container .for-markdown-preview pre\": {\r\n            backgroundColor: theme.palette.background.default + \"!important\",\r\n            color:\r\n                theme.palette.type === \"dark\"\r\n                    ? \"#fff !important\"\r\n                    : \"rgba(0, 0, 0, 0.87);!important\",\r\n        },\r\n\r\n        \".for-container .for-markdown-preview code\": {\r\n            backgroundColor: theme.palette.background.default + \"!important\",\r\n        },\r\n        \".for-container .for-markdown-preview a\": {\r\n            color:\r\n                theme.palette.type === \"dark\"\r\n                    ? \"#67aeff !important\"\r\n                    : \"#0366d6 !important\",\r\n        },\r\n        \".for-container .for-markdown-preview table th\": {\r\n            backgroundColor: theme.palette.background.default + \"!important\",\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function ReadMe(props) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [content, setContent] = useState(\"\");\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const $vm = React.createRef();\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        const previewPath =\r\n            props.file.path === \"/\"\r\n                ? props.file.path + props.file.name\r\n                : props.file.path + \"/\" + props.file.name;\r\n        API.get(\r\n            \"/share/readme/\" +\r\n                props.share.key +\r\n                \"?path=\" +\r\n                encodeURIComponent(previewPath)\r\n        )\r\n            .then((response) => {\r\n                setContent(response.rawData.toString());\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"无法读取 README 内容，\" + error.message,\r\n                    \"error\"\r\n                );\r\n            })\r\n            .then(() => {\r\n                setLoading(false);\r\n            });\r\n        // eslint-disable-next-line\r\n    }, [props.share, props.file]);\r\n\r\n    return (\r\n        <Paper className={classes.readMeContainer}>\r\n            <div className={classes.readMeHeader}>\r\n                <MenuBook className={classes.readMeIcon} />\r\n                <Typography>{props.file.name}</Typography>\r\n            </div>\r\n\r\n            <Divider />\r\n            <div className={classes.content}>\r\n                {loading && <TextLoading />}\r\n                {!loading && (\r\n                    <Editor\r\n                        ref={$vm}\r\n                        style={{\r\n                            boxShadow: \"none\",\r\n                            borderRadius: 4,\r\n                            backgroundColor: theme.palette.background.paper,\r\n                        }}\r\n                        height={\"100%\"}\r\n                        value={content}\r\n                        onChange={(value) => setContent(value)}\r\n                        preview\r\n                        toolbar={{}}\r\n                    />\r\n                )}\r\n            </div>\r\n        </Paper>\r\n    );\r\n}\r\n"],"sourceRoot":""}
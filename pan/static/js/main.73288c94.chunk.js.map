{"version":3,"sources":["middleware/Api.js","redux/explorer/action.ts","utils/page.js","middleware/Auth.ts","component/Dial/AutoHidden.js","redux/explorer/reducer.ts","component/Placeholder/TextLoading.js","utils/index.js","component/Navbar/DarkModeSwitcher.js","component/FileManager/Navigator/SubActions.js","component/Modals/Report.js","component/Modals/PurchaseShare.js","component/Dial/Save.js","component/Modals/Loading.js","component/Modals/Copy.js","component/Modals/CreateShare.js","component/Modals/Decompress.js","component/Modals/Compress.js","component/Modals/Relocate.js","component/FileManager/Modals.js","actions/explorer.js","actions/index.js","component/Viewer/Text.js","component/Viewer/Code.js","config.js","component/Common/Snackbar.js","component/Navbar/UserAvatarPopover.js","component/Navbar/PolicySwitcher.js","component/Navbar/UserAvatar.js","component/Navbar/Navbar.js","utils/datetime.js","component/Navbar/SearchBar.js","component/Navbar/StorageBar.js","component/Navbar/UserInfo.js","component/Navbar/FileTags.js","component/FileManager/TypeIcon.js","component/FileManager/ImgPreview.js","loader/utils.js","loader/index.js","component/Upload/FileList.js","component/Dial/Create.js","component/Upload/Uploader.js","serviceWorker.js","middleware/AuthRoute.js","component/Placeholder/PageLoading.js","component/Share/NotFound.js","middleware/Init.js","component/Common/ICPFooter.js","component/Placeholder/Captcha.js","hooks/normal.js","component/Login/ReCaptchaWrapper.js","component/Login/ReCaptcha.js","hooks/recaptcha.js","hooks/tcaptcha.js","hooks/useCaptcha.js","component/Login/LoginForm.js","redux/explorer/index.ts","component/FileManager/Navigator/PathButton.js","component/FileManager/Navigator/DropDownItem.js","component/FileManager/Navigator/DropDown.js","component/FileManager/Navigator/Navigator.js","component/FileManager/SmallIcon.js","component/FileManager/FileIcon.js","component/FileManager/Folder.js","component/FileManager/DnD/Preview.js","component/FileManager/DnD/DragLayer.js","component/FileManager/TableRow.js","component/FileManager/DnD/DropWarpper.js","component/FileManager/ObjectIcon.js","component/FileManager/ContextMenu.js","component/FileManager/Explorer.js","component/Placeholder/ListLoading.js","component/FileManager/Sidebar/SideDrawer.js","component/FileManager/FileManager.js","component/Viewer/Video.js","component/Share/SearchResult.js","component/Share/MyShare.js","component/Modals/SelectFile.js","component/Download/DownloadingCard.js","component/Download/FinishedCard.js","component/Dial/Aria2.js","component/Download/Download.js","component/Share/LockedFile.js","component/Share/Creator.js","component/Share/SharedFile.js","component/Share/SharedFolder.js","component/Share/SharePreload.js","component/Viewer/Doc.js","component/VAS/Quota.js","component/VAS/PackSelect.js","component/VAS/BuyQuota.js","component/Modals/CreateWebDAVAccount.js","component/Modals/CreateWebDAVMount.js","component/Setting/WebDAV.js","component/Setting/Tasks.js","component/Setting/Ifm.js","component/Setting/Profile.js","component/Setting/Authn.js","component/Modals/TimeZone.js","component/Setting/UserSetting.js","component/Login/QQ.js","component/Login/Register.js","component/Login/Apps.js","component/Login/Activication.js","component/Login/ResetForm.js","component/Login/Reset.js","component/Modals/SiteNotice.js","App.js","redux/viewUpdate/reducer.ts","reducers/index.js","component/Placeholder/ErrorBoundary.js","index.js","redux/combineReducers.ts","component/FileManager/PathSelector.js","redux/viewUpdate/action.ts"],"names":["baseURL","getBaseURL","instance","axios","create","withCredentials","crossDomain","AppError","message","code","error","this","stack","Error","prototype","Object","constructor","interceptors","response","use","rawData","data","undefined","Auth","signout","window","location","href","msg","Promise","reject","setFileList","list","type","setDirList","setSortMethod","method","setSideBar","open","sortMethodFuncs","sizePos","a","b","size","sizeRes","namePos","name","localeCompare","navigator","languages","language","numeric","ignorePunctuation","nameRev","timePos","Date","parse","date","timeRev","updateFileList","dispatch","getState","sortMethod","viewUpdate","dirList","filter","x","fileList","sortFunc","sort","changeSortMethod","explorer","toggleObjectInfoSidebar","closeContextMenu","statusHelper","isHomePage","path","isSharePage","startsWith","isAdminPage","isLoginPage","isMobile","innerWidth","isAuthenticated","authenticate","cb","SetUser","GetUser","JSON","localStorage","getItem","newUser","setItem","stringify","Check","anonymous","oldUser","id","SetPreference","key","value","preference","GetPreference","AutoHidden","children","enable","useState","hidden","setHidden","prev","scrollY","lastUpdate","useEffect","addEventListener","e","currentTarget","handleNavigation","in","initState","dndSignal","dndTarget","dndSource","selected","selectProps","isMultiple","withFolder","withFile","lastSelect","file","index","shiftSelectedIds","imgPreview","first","other","keywords","fileSave","sideBarOpen","checkSelectedProps","length","forEach","state","action","assign","target","source","addedSelected","targets","newSelected","fileIds","filteredSelected","includes","useStyles","makeStyles","theme","loader","width","padding","breakpoints","down","MyLoader","props","backgroundColor","dark","foregroundColor","className","TextLoading","useTheme","classes","palette","sizeToString","bytes","i","Math","floor","log","pow","toFixed","setCookie","days","setTime","getTime","document","cookie","setGetParameter","paramName","paramValue","url","indexOf","prefix","substring","suffix","history","pushState","allowSharePreview","shareInfo","allowPreview","userInfo","uid","checkGetParameters","field","changeThemeColor","color","querySelector","setAttribute","bufferDecode","Uint8Array","from","atob","c","charCodeAt","bufferEncode","btoa","String","fromCharCode","apply","replace","pathBack","folders","substr","split","slice","join","filePath","hex2bin","hex","parseInt","toString","padStart","pathJoin","parts","sep","separator","map","part","RegExp","basename","pathList","pop","filename","randomStr","result","characters","charactersLength","charAt","random","getNumber","base","conditions","v","isMac","platform","toUpperCase","vhCheck","vh","innerHeight","documentElement","style","setProperty","icon","opacity","DarkModeSwitcher","position","ThemeType","useSelector","siteConfig","useDispatch","ToggleThemeMode","useCallback","toggleDaylightMode","isDayLight","isDark","title","placement","classNames","onClick","sideButton","marginRight","sortOptions","SubActions","isSmall","share","inherit","viewMethod","explorerViewMethod","OpenLoadingDialog","changeViewMethod","ChangeSortMethod","OpenResaveDialog","openResaveDialog","SetShareUserPopover","setShareUserPopover","anchorSort","setAnchorSort","selectedIndex","setSelectedIndex","openReport","setOpenReport","toggleViewMethod","newMethod","toggleSnackbars","vertical","horizontal","toggleSnackbar","opensendgift","fontSize","anchorEl","Boolean","onClose","option","event","0","1","2","3","4","5","handleMenuItemClick","creator","nick","height","src","widthAnimation","shareUrl","minWidth","wrapper","margin","spacing","buttonProgress","secondary","light","top","left","flexCenter","alignItems","noFlex","display","scoreCalc","marginTop","Report","reason","setReason","des","setDes","loading","setLoading","ToggleSnackbar","setTimeout","aria-labelledby","maxWidth","fullWidth","component","aria-label","onChange","reportReasons","k","control","label","multiline","variant","rows","API","post","then","catch","disabled","PurchaseShareDialog","callback","score","autoFocus","fab","right","bottom","zIndex","badge","fabProgress","green","buttonSuccess","SaveButton","buttonClassname","clsx","status","avatar","blue","loadingContainer","marginLeft","LoadingDialog","modals","text","loadingText","Dialog","DialogContent","DialogContentText","CircularProgress","contentFix","CopyDialog","selectedPath","setSelectedPath","selectedPathName","setSelectedPathName","SetModalsLoading","setModalsLoading","RefreshFileList","refreshFileList","DialogTitle","PathSelector","presentPath","onSelect","folder","DialogActions","Button","preventDefault","dirs","items","push","src_dir","dst","modalsLoading","ExpansionPanel","withStyles","root","border","boxShadow","borderBottom","expanded","MuiExpansionPanel","ExpansionPanelSummary","content","MuiExpansionPanelSummary","ExpansionPanelDetails","background","default","MuiExpansionPanelDetails","CreatShare","scoreEnabled","score_enabled","scoreRate","share_score_rate","React","setExpanded","shareURL","setShareURL","password","downloads","expires","showPassword","values","setValues","expire","preview","shareOption","setShareOption","handleChange","prop","handleExpand","panel","isExpanded","handleCheck","Divider","List","aria-controls","ListItem","button","ListItemIcon","ListItemText","primary","ListItemSecondaryAction","Checkbox","checked","FormControl","InputLabel","htmlFor","OutlinedInput","endAdornment","InputAdornment","Tooltip","IconButton","edge","onMouseDown","on","onIcon","Visibility","offIcon","VisibilityOff","labelWidth","Select","labelId","MenuItem","Typography","inputProps","min","ceil","TextField","onFocus","select","readonly","submitFormBody","is_dir","DecompressDialog","CompressDialog","fileName","setFileName","input","RelocateDialog","selectedPolicy","setSelectedPolicy","policies","setPolicies","get","options","current","dst_policy_id","ModalsCompoment","newFolderName","newFileName","newName","secretShare","sharePwd","downloadURL","remoteDownloadPathSelect","purchaseCallback","handleInputChange","setState","newNameSuffix","downloaded","UNSAFE_componentWillReceiveProps","nextProps","dndSignale","modalsStatus","rename","getSource","pathHelper","pathname","scoreHandler","archiveDownload","Download","dragMove","group","shareFree","reqURL","downloadPath","encodeURIComponent","put","postBody","refreshStorage","submitRemove","delete","submitResave","shareKey","submitMove","patch","DragSelectedPath","closeAllModals","doMove","openLoadingDialog","submitRename","findIndex","new_name","submitCreateNewFolder","submitCreateNewFile","submitTorrentDownload","submitDownload","setMoveTarget","remoteDownloadNext","PurchaseShare","onSubmit","createNewFolder","createNewFile","copy","move","resave","remove","music","controls","remoteDownload","placeholder","torrentDownload","decompress","compress","relocate","Component","Modals","connect","withRouter","removeSelectedTargets","addSelectedTargets","setSelectedTarget","openPreview","router","isShare","changeContextMenu","user","shareDownload","previewPath","isPreviewable","showImgPreivew","openMusicDialog","selectFile","fileIndex","ctrlKey","metaKey","shiftKey","isMacbook","begin","end","max","newShiftSelected","setLastSelect","setShiftSelectedIds","setNavigator","navigatorLoading","navigateTo","navigateUp","pathSplit","newPath","drawerToggleAction","dragAndDrop","menuType","setNavigatorLoadingStatus","setNavigatorError","openCreateFolderDialog","openCreateFileDialog","setUserPopover","anchor","openRenameDialog","openMoveDialog","openRemoveDialog","openShareDialog","applyThemes","setSessionStatus","openRemoteDownloadDialog","openTorrentDownloadDialog","openDecompressDialog","openCompressDialog","openRelocateDialog","openGetSourceDialog","openCopyDialog","enableLoadUploader","searchMyFile","saveFile","setSiteConfig","config","layout","up","player","borderRadius","overflowX","TextViewer","setContent","setStatus","math","useRouteMatch","$vm","createRef","useLocation","query","URLSearchParams","search","useParams","SetSubTitle","changeSubTitle","params","requestURL","responseType","textdata","Buffer","toBase64","resolve","reader","FileReader","readAsDataURL","onload","onerror","save","addImg","$file","$img2Url","console","elevation","ref","onSave","toolbar","h1","h2","h3","h4","img","link","expand","undo","redo","subfield","MonacoEditor","lazy","editor","formControl","toobar","textAlign","CodeViewer","setSuffix","extension","codePreviewSuffix","Array","Set","keys","fallback","readOnly","extraEditorClassName","imgPreviewSuffix","msDocPreviewSuffix","audioPreviewSuffix","videoPreviewSuffix","pdfPreviewSuffix","editSuffix","json","php","py","bat","cpp","h","cs","css","dockerfile","go","html","ini","java","js","jsx","less","lua","sh","sql","xml","yaml","mediaType","audio","video","image","pdf","word","ppt","excel","torrent","zip","excute","android","python","policyTypeMap","local","remote","qiniu","upyun","oss","cos","onedrive","s3","toLowerCase","isTorrent","isCompressFile","taskStatus","taskType","taskProgress","getTaskStatus","getTaskType","getTaskProgress","variantIcon","success","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","MySnackbarContentWrapper","main","iconVariant","Icon","aria-describedby","close","SnackbarCompoment","snackbar","toggle","handleClose","anchorOrigin","autoHideDuration","AlertBar","UserAvatarPopoverCompoment","openURL","sigOut","reload","Popover","transformOrigin","visitorMenu","header","largeAvatarContainer","Avatar","largeAvatar","noWrap","nickname","user_name","Chip","UserAvatarPopover","userPopoverAnchorEl","uploadFromFile","policySelected","PolicySwitcher","setAnchorEl","switchTo","ListItemAvatar","UserAvatarCompoment","showUserInfo","returnHome","loginCheck","isLogin","mobileHidden","Grow","Home","UserAvatar","NavbarCompoment","componentDidMount","handleDrawerToggle","mobileOpen","loadUploader","openDownload","signOut","finally","UploaderRef","unlisten","listen","getCookie","arrcookie","arr","unescape","drawer","upDrawer","minStickDrawer","iconFix","webdav","_MEIQIA","iOS","process","browser","test","userAgent","appBar","menuButton","handleDesktopToggle","desktopOpen","menuButtonDesktop","menuIcon","subTitle","grow","sectionForFile","allowArchiveDownload","smUp","implementation","container","paper","drawerPaper","onOpen","disableDiscovery","ModalProps","keepMounted","xsDown","drawerPaperDesktop","drawerOpen","drawerClose","Navbar","withTheme","flexShrink","drawerDesktop","mixins","transition","transitions","easing","sharp","duration","enteringScreen","leavingScreen","flexGrow","nested","paddingLeft","extendedIcon","addButton","marginBottom","fabButton","badgeFix","dividerFix","folderShareIcon","verticalAlign","shareInfoContainer","textDecoration","shareAvatar","stickFooter","ownerInfo","overflowY","minHeight","dayjs","extend","utc","timezone","preferTimeZone","timeZone","refreshTimeZone","formatLocalTime","time","format","tz","validateTimeZone","configure","ignoreTags","keyMap","SEARCH","SearchBarCompoment","handlers","searchShare","blur","cancelSuggest","searchIcon","inputRoot","inputInput","onBlur","suggestBox","TransitionProps","timeout","square","SearchBar","shape","fade","common","white","pointerEvents","justifyContent","paddingTop","paddingRight","paddingBottom","StorageBarCompoment","percent","used","total","showExpand","firstLoad","updateStatus","refresh","onMouseEnter","onMouseLeave","storageContainer","detail","bar","StorageBar","storageRefresh","textFix","overflow","textOverflow","UserInfoCompoment","userNav","flexAvatar","avatarImg","storageCircle","nickName","groupName","UserInfo","backgroundImage","backgroundSize","transform","hiddenButton","subMenu","overFlow","whiteSpace","icons","Circle","CircleOutline","Heart","HeartOutline","Hexagon","HexagonOutline","Hexagram","HexagramOutline","Rhombus","RhombusOutline","Square","SquareOutline","Triangle","TriangleOutline","FolderHeartOutline","AddTag","FileTag","useHistory","tagOpen","setTagOpen","addTagModal","setAddTagModal","tagHover","setTagHover","tags","setTags","SearchMyFile","NavigateTo","onSuccess","tag","newTags","iconVideo","iconImg","iconAudio","iconDoc","expression","IconComponent","getIcon","AudioIcon","VideoIcon","ImageIcon","PdfIcon","FileWordBox","FilePowerpointBox","FileExcelBox","ScriptText","MagnetOn","ZipBox","WindowRestore","Android","FileShowIcon","LanguagePhp","LanguageGo","LanguagePython","LanguageC","LanguageCpp","LanguageJavascript","TypeIcon","fileSuffix","fileType","lighten","getColor","getColorValue","isUpload","iconClassName","ImagPreviewComponent","photoIndex","isOpen","firstOne","newImg","intro","images","visible","onIndexChange","n","ImgPreivew","isFunction","val","noop","newScript","scriptElem","createElement","hasOwnProperty","call","body","appendChild","keyIterator","cols","next","parallel","tasks","each","hasError","successed","ret","task","err","args","series","thunk","nextKey","nextThunk","isArray","iterator","loadedScript","pendingScripts","failedScript","addCache","entry","removeFailedScript","script","node","parentNode","removeChild","uploaderLoader","WrappedComponent","ScriptLoader","context","isScriptLoaded","isScriptLoadSucceed","_isMounted","scripts","onComplete","loadNewScript","taskComplete","callbacks","startLoadingScripts","policyType","onScriptLoaded","refs","wrappedInstance","defaultProps","hoistStatics","FileList","files","openFileList","cancelUpload","deQueue","reQueue","addNewFile","getElementsByClassName","click","getProgressBackground","darken","filesNow","fileID","f","splice","errMsg","ignoreMsg","Slide","direction","inRef","bind","enQueue","setComplete","setError","fullScreen","isWidthDown","TransitionComponent","Transition","AppBar","Toolbar","flex","dialogContent","minHight","item","progressContainer","progress","progressContent","listAction","plupload","formatSize","speed","loaded","errorStatus","successStatus","progressBar","wordBreak","withWidth","UploadButton","setOpen","queued","setQueued","OpenNewFolderDialog","OpenNewFileDialog","Queued","openUpload","uploadButton","contains","uploadClicked","Badge","badgeContent","invisible","Backdrop","SpeedDial","ariaLabel","tooltipTitle","SpeedDialIcon","openIcon","FabProps","SpeedDialAction","tooltipOpen","UploaderComponent","uploader","addFile","fileAdd","currntPath","enqueFiles","isDsStore","removeFile","relativePath","pathCache","Qiniu","runtimes","browse_button","drop_element","max_file_size","policy","maxSize","dragdrop","chunk_size","getChunkSize","saveType","filters","mime_types","allowedType","extensions","multi_selection","uptoken_url","uptoken","domain","max_retries","get_new_uptoken","auto_start","log_level","init","FilesAdded","BeforeUpload","QueueChanged","UploadProgress","UploadComplete","Fresh","FileUploaded","errTip","FilesRemoved","onError","setRef","Uploader","forwardRef","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","isLocalhost","hostname","match","AuthRoute","rest","render","to","PageLoading","emptyContainer","emptyInfoBig","ads","maxHeight","Notice","rel","initUserConfig","themes","enableUploaderLoad","uploadConfig","store","defaultTheme","preferListMethod","share_view_method","home_view_method","icp","ICPFooter","siteICPId","show","setShow","pageHelper","Link","primaryColor","secondaryColor","y","rx","ry","captchaPlacholder","NormalCaptcha","captchaRef","useStyle","captcha","setCaptcha","captchaData","setCaptchaData","refreshCaptcha","captchaCode","captchaContainer","required","Input","autoComplete","captchaPlaceholder","alt","ReCAPTCHA","handleExpired","handleErrored","handleRecaptchaRef","grecaptcha","_widgetId","getResponse","execute","_executeRequested","reset","onExpired","onErrored","token","sitekey","tabindex","stoken","hl","explicitRender","delayOfCaptchaIframeRemoving","temporaryNode","firstChild","elem","childProps","displayName","makeAsyncScriptLoader","callbackName","globalName","Recaptcha","reCaptchaKey","captcha_ReCaptchaKey","ReCaptcha","TCaptcha","isValidateRef","submitRef","appid","tcaptcha_captcha_app_id","onLoad","TencentCaptcha","res","ticket","randstr","isValidate","submit","defaultValidate","useCaptcha","captchaType","captcha_type","captchaLoading","setCaptchaLoading","captchaRefreshRef","useRef","normal","captchaParamsRef","CaptchaRender","validate","useNormalCaptcha","recaptcha","useRecaptcha","tcaptcha","useTCaptcha","flexDirection","form","buttonContainer","authnLink","LoginForm","email","setEmail","pwd","setPwd","useAuthn","setUseAuthn","twoFA","setTwoFA","faCode","setFACode","loginCaptcha","QQLogin","authn","ApplyThemes","SetSessionStatus","GetQueryString","reg","r","afterLogin","backurl","decodeURIComponent","removeItem","_QQLogin","Paper","login","userName","Password","credentials","credentialRequestOptions","publicKey","challenge","allowCredentials","listItem","assertion","authData","authenticatorData","clientDataJSON","rawId","sig","signature","userHandle","Fingerprint","VpnKey","actions","reducers","expandMore","active","textTransform","PathButton","inputRef","useDrop","accept","drop","more","collect","monitor","isOver","canDrop","isActive","last","DropDownItem","setActiveStatus","DropDown","timer","clearTimeout","shouldClose","element","NavigatorComponent","currentID","hiddenFolders","hiddenMode","anchorHidden","renderPath","onpopstate","navigateToPath","apiURL","parent","objects","pathTemp","checkOverFlow","redresh","componentDidUpdate","prevProps","prevStates","ms","drawerDesktopOpen","force","overflowInitLock","hasOverflowingChildren","offsetHeight","scrollHeight","offsetWidth","scrollWidth","showHiddenPath","performAction","newTarget","presentFolderMenu","Menu","disableAutoFocusItem","Archive","roundBorder","navigatorContainer","nav","rightIcon","optionContainer","Navigator","SmallIconCompoment","isSelected","ButtonBase","focusRipple","notSelected","onIconClick","iconSelected","iconNotSelected","isFolder","checkIcon","folderName","folderNameSelected","folderNameNotSelected","SmallIcon","divider","boxSizing","fontWeight","FileIconCompoment","showPicIcon","pic","hide","picPreview","afterLoad","beforeLoad","loadingAnimation","previewIcon","iconBig","fileInfo","shareFix","FileIcon","objectFit","Folder","dragging","cardDragged","diliverIcon","object","Preview","card","layerStyles","getItemStyles","initialOffset","currentOffset","pointerOffset","WebkitTransform","CustomDragLayer","useDragLayer","itemType","getItemType","getInitialSourceClientOffset","getSourceClientOffset","getInitialClientOffset","isDragging","renderItem","TableRowCompoment","tableIcon","TableRow","pref","onContextMenu","contextMenu","handleClick","onDoubleClick","handleDoubleClick","selectedShared","TableCell","dref","scope","tableRow","hideAuto","TableItem","userSelect","FolderDropWarpper","isListView","fixFlex","ObjectIcon","navigatorPath","ContextMenu","SetSelectedTarget","NavitateTo","DragAndDrop","OpenPreview","selectFileAction","enterFolder","handleIconClick","stopPropagation","useDrag","dropResult","getDropResult","canDrag","drag","getEmptyImage","captureDraggingState","StyledListItemIcon","ContextMenuCompoment","X","Y","setPoint","clientY","clientX","openArchiveDownload","clickUpload","renderMenuItems","visibleCount","condition","dense","allowRemoteDownload","menuOpen","anchorReference","anchorPosition","Unarchive","InfoOutlined","propover","contextType","contextOpen","ExplorerCompoment","ClickAway","dataset","clickaway","DELETE_FILE","SELECT_ALL","away","showView","listView","Table","table","TableHead","TableSortLabel","changeSort","visuallyHidden","TableBody","normalView","flexFix","data-clickAway","typeHeader","Grid","xs","md","sm","lg","view","rootTable","rootShare","navigatorError","errorBox","errorMsg","navigatorErrorMsg","emptyIcon","emptyInfoSmall","Explorer","hint","upButton","clickAway","clip","ListLoading","drawerContainer","placeContent","fileIcon","fileIconSVG","folderIcon","closeIcon","placeSelf","propsContainer","propsLabel","propsTime","propsValue","SideDrawer","SetSideBar","setTarget","details","setDetails","propsItem","d","t","toLocaleString","child_folder_num","child_file_num","updated_at","created_at","datetime","query_date","locale","Hidden","Clear","Drawer","gutterBottom","FileManager","DndProvider","backend","HTML5Backend","DragLayer","VideoViewer","Google","client","slot","cardContainer","shareTitle","avatarFile","avatarFolder","gird","loadMore","orderSelect","SearchResult","page","setPage","setTotal","shareList","setShareList","orderBy","setOrderBy","order","Card","CardHeader","subheader","create_date","Pagination","count","MyShareCompoment","showPwd","loadList","removeShare","oldList","changePermission","newPwd","shareIndex","changePreviewOption","handlePageChange","handleOrderChange","isExpired","remain_downloads","CardActions","disableActionSpacing","MyShare","SelectFileDialog","setFiles","dividers","FormGroup","row","FormControlLabel","filesCopy","iconContainer","borderInlineStart","contentSide","iconMultiple","subFileName","subFileIcon","scroll","actionButton","infoTitle","infoValue","bitmap","DownloadingCard","canvasRef","setTask","selectDialogOpen","setSelectDialogOpen","selectFileOption","setSelectFileOption","bitfield","str","canvas","getContext","clearRect","strokeStyle","bit","round","numPieces","beginPath","moveTo","lineTo","stroke","getPercent","completed","activeFiles","getDownloadName","bittorrent","mode","gid","indexes","newExpanded","CardContent","LinearProgress","completedLength","newIndex","newFiles","deleteFile","HighlightOff","update","uploadLength","uploadSpeed","infoHash","numSeeders","seeder","pieceLength","FinishedCard","task_status","getTaskError","task_error","RemoteDownloadButton","OpenRemoteDownloadDialog","Fab","Add","DownloadComponent","interval","downloading","finishedList","continue","loadDownloading","LockedFileCompoment","setPassowrd","LockedFile","marginRottom","boxHeader","cursor","shareDes","Creator","userProfile","views","ImgPreview","SharedFileCompoment","scoreHandle","download","rewards","box","boxContent","fileSize","boxFooter","actionLeft","openResave","downloadButton","SharedFile","fileCotainer","buttonCotainer","ReadMe","SharedFolderComponent","handleClickAway","readmeShowed","ClickAwayListener","onClickAway","managerContainer","SharedFolder","shareUserPopoverAnchorEl","SharePreload","setShare","setPassword","locked","withPassword","DocViewer","setURL","QuotaCompoment","basic","pack","r1","r2","r3","packs","usedR","baseR","packR","proBar","r1_block","note_block","r2_block","r3_block","align","activate_date","expiration","expiration_date","Quota","lineHeight","float","PackSelect","boxHead","packName","price","priceWithScore","boxBottom","BuyQuotaCompoment","IntervalId","confirmRedeem","redeemCode","dialog","doRedeem","redeemInfo","buyPack","packType","selectedPack","packPayMethod","groups","selectedGroup","num","scoreNum","times","payment","qr_code","setInterval","querryLoop","clearInterval","handleChangeIndex","handleTexyChange","selectPack","selectGroup","selectPackPayMethod","scorePrice","alipay","payjs","wechat","score_price","methodSelect","FormLabel","RadioGroup","Radio","textField","step","Tabs","Tab","AccountBalanceWallet","payMethod","priceShow","tier","highlight","titleTypographyProps","subheaderTypographyProps","cardHeader","cardPricing","line","cardActions","redeemContainer","codeContainer","BuyQuota","grey","formGroup","formIcon","CreateWebDAVAccount","setValue","pathSelectDialog","setPathSelectDialog","formContainer","LabelOutlined","FolderOpenOutlined","CreateWebDAVMount","Storage","cardContent","tableContainer","WebDAV","tab","setTab","setCreate","mount","setMount","accounts","setAccounts","setFolders","account","ID","CreatedAt","Name","Root","mountInfo","indicatorColor","textColor","newValue","Alert","severity","origin","TableContainer","clipboard","writeText","accountCopy","deleteAccount","policy_name","folderCopy","deleteMount","footer","Tasks","setTasks","nowrap","getError","Ifm","iFrameHeight","iframe","clientHeight","frameBorder","scrolling","ProfileCompoment","listType","loadNext","loadPrev","avatarContainer","centered","infoContainer","infoItem","mobileHide","th","tableLink","Profile","backgroundPosition","borderRaidus","pageInfo","sectionTitle","desenList","flexContainer","Authn","setSelected","confirm","setConfirm","deleteCredential","fingerprint","credentialCreationOptions","excludeCredentials","credential","attestationObject","add","TimeZoneDialog","timeZoneValue","setTimeZoneValue","UserSettingCompoment","avatarModal","nickModal","changePassword","oldPwd","webdavPwd","newPwdRepeat","twoFactor","authCode","changeTheme","chosenTheme","showWebDavUrl","showWebDavUserName","changeWebDavPwd","groupBackModal","changePolicy","changeTimeZone","settings","group_expires","qq","homepage","two_factor","two_fa_secret","prefer_theme","changeView","loadSetting","doChangeGroup","useGravatar","changeNick","bindQQ","uploadAvatar","formData","FormData","append","fileInput","headers","handleToggle","changhePwd","old","new","changheWebdavPwd","init2FA","handleAlignment","toggleThemeMode","infoTextWithIcon","rightIconWithText","infoText","ConfirmationNumber","Switch","firstColor","secondColor","Brightness3","ListAlt","Schedule","userGravatar","paddingText","flexContainerResponse","qrcode","desText","ToggleButtonGroup","exclusive","ToggleButton","themeBlock","UserSetting","yellow","QQCallback","setMsg","avatarSuccess","Register","password_repeat","setInput","emailActive","setEmailActive","regCaptcha","Apps","exp","Days","toGMTString","JumpUrl","Activation","setSuccess","ResetForm","secret","Reset","forgetCaptcha","overflowWrap","SiteNotice","site_notice","newNotice","dangerouslySetInnerHTML","__html","PDFViewer","App","themeConfig","prefersDarkMode","useMediaQuery","useMemo","prefer","createMuiTheme","Fragment","ThemeProvider","CssBaseline","exact","Text","Code","doNavigate","defaultStatus","rawStore","configCache","InitSiteConfig","black","contrastText","bgSelected","ErrorBoundary","errorInfo","componentStack","Admin","hash","URL","fetch","contentType","ready","unregister","checkValidServiceWorker","createBrowserHistory","reduxEnhance","applyMiddleware","routerMiddleware","createStore","viewUpdateState","explorerState","appState","cloudreveApp","combinedState","combinedReducer","combine","namespace","reducer","invariant","combineReducers","connectRouter","UpdateSiteConfig","ReactDOM","getElementById","PathSelectorCompoment","selectedTarget","toBeLoad","back","paths","api","unshift","handleSelect","selector","primaryTypographyProps","buttonIcon","iconWhite","setSubtitle"],"mappings":"uIAAA,kGAGaA,EAAU,UAEVC,EAAa,WACtB,OAAOD,GAGLE,EAAWC,IAAMC,OAAO,CAC1BJ,QAASC,IACTI,iBAAiB,EACjBC,aAAa,IAGjB,SAASC,EAASC,EAASC,EAAMC,GAC7BC,KAAKF,KAAOA,EACZE,KAAKH,QAAUA,GAAW,2BAC1BG,KAAKH,SAAWE,EAAQ,IAAMA,EAAQ,GACtCC,KAAKC,OAAQ,IAAIC,OAAQD,MAE7BL,EAASO,UAAYC,OAAOX,OAAOS,MAAMC,WACzCP,EAASO,UAAUE,YAAcT,EAEjCL,EAASe,aAAaC,SAASC,KAC3B,SAAUD,GAGN,GAFAA,EAASE,QAAUF,EAASG,KAC5BH,EAASG,KAAOH,EAASG,KAAKA,UAEAC,IAA1BJ,EAASE,QAAQX,MACS,IAA1BS,EAASE,QAAQX,MACS,MAA1BS,EAASE,QAAQX,KAYjB,MAT8B,MAA1BS,EAASE,QAAQX,OACjBc,IAAKC,UACLC,OAAOC,SAASC,KAAO,UAIG,QAA1BT,EAASE,QAAQX,OACjBgB,OAAOC,SAASC,KAAO,SAErB,IAAIpB,EACNW,EAASE,QAAQQ,IACjBV,EAASE,QAAQX,KACjBS,EAASE,QAAQV,OAGzB,OAAOQ,KAEX,SAAUR,GACN,OAAOmB,QAAQC,OAAOpB,MAIfR,O,iCCrDf,2VAMa6B,EAAc,SAACC,GACxB,MAAO,CACHC,KAAM,gBACND,SAQKE,EAAa,SAACF,GACvB,MAAO,CACHC,KAAM,eACND,SAQKG,EAAgB,SAACC,GAC1B,MAAO,CACHH,KAAM,kBACNG,WAIKC,EAAa,SAACC,GACvB,MAAO,CACHL,KAAM,eACNK,SAKFC,EAAgD,CAClDC,QAAS,SAACC,EAAkBC,GACxB,OAAOD,EAAEE,KAAOD,EAAEC,MAEtBC,QAAS,SAACH,EAAkBC,GACxB,OAAOA,EAAEC,KAAOF,EAAEE,MAEtBE,QAAS,SAACJ,EAAkBC,GACxB,OAAOD,EAAEK,KAAKC,cACVL,EAAEI,KACFE,UAAUC,UAAU,IAAMD,UAAUE,SACpC,CAAEC,SAAS,EAAMC,mBAAmB,KAG5CC,QAAS,SAACZ,EAAkBC,GACxB,OAAOA,EAAEI,KAAKC,cACVN,EAAEK,KACFE,UAAUC,UAAU,IAAMD,UAAUE,SACpC,CAAEC,SAAS,EAAMC,mBAAmB,KAG5CE,QAAS,SAACb,EAAkBC,GACxB,OAAOa,KAAKC,MAAMf,EAAEgB,MAAQF,KAAKC,MAAMd,EAAEe,OAE7CC,QAAS,SAACjB,EAAkBC,GACxB,OAAOa,KAAKC,MAAMd,EAAEe,MAAQF,KAAKC,MAAMf,EAAEgB,QAIpCE,EAAiB,SAC1B3B,GAEA,OAAO,SAAC4B,EAAUC,GACd,IAEQC,EAFMD,IAEeE,WAArBD,WACFE,EAAUhC,EAAKiC,QAAO,SAACC,GACzB,MAAkB,QAAXA,EAAEjC,QAEPkC,EAAWnC,EAAKiC,QAAO,SAACC,GAC1B,MAAkB,SAAXA,EAAEjC,QAEPmC,EAAW7B,EAAgBuB,GACjCF,EAAS1B,EAAW8B,EAAQK,KAAKD,KACjCR,EAAS7B,EAAYoC,EAASE,KAAKD,OAI9BE,EAAmB,SAC5BlC,GAEA,OAAO,SAACwB,EAAUC,GACd,IADiC,EACnBA,IACsBU,SAA5BJ,EAFyB,EAEzBA,SAAUH,EAFe,EAEfA,QACZI,EAAW7B,EAAgBH,GACjCwB,EAASzB,EAAcC,IACvBwB,EAAS1B,EAAW8B,EAAQK,KAAKD,KACjCR,EAAS7B,EAAYoC,EAASE,KAAKD,OAI9BI,EAA0B,SACnClC,GAEA,OAAO,SAACsB,EAAUC,GACAA,IACVvB,GACAsB,EAASa,eAEbb,EAASvB,GAAW,O,gCCnH5B,IAAMqC,EAAe,CACjBC,WADiB,SACNC,GACP,MAAgB,UAATA,GAEXC,YAJiB,SAILD,GACR,OAAOA,GAAQA,EAAKE,WAAW,QAEnCC,YAPiB,SAOLH,GACR,OAAOA,GAAQA,EAAKE,WAAW,WAEnCE,YAViB,SAULJ,GACR,OAAOA,GAAQA,EAAKE,WAAW,WAEnCG,SAbiB,WAcb,OAAOxD,OAAOyD,WAAa,MAGpBR,O,gCCjBf,IAAMnD,EAAO,CACT4D,iBAAiB,EACjBC,aAFS,SAEIC,GACT9D,EAAK+D,QAAQD,GACb9D,EAAK4D,iBAAkB,GAE3BI,QANS,WAOL,OAAOC,KAAKhC,MAAMiC,aAAaC,QAAQ,SAAW,SAEtDJ,QATS,SASDK,GACJF,aAAaG,QAAQ,OAAQJ,KAAKK,UAAUF,KAEhDG,MAZS,WAaL,QAAIvE,EAAK4D,iBAG4B,OAAjCM,aAAaC,QAAQ,UACbnE,EAAKgE,UAAUQ,WAI/BvE,QArBS,WAsBLD,EAAK4D,iBAAkB,EACvB,IAAMa,EAAUzE,EAAKgE,UACrBS,EAAQC,GAAK,EACbR,aAAaG,QAAQ,OAAQJ,KAAKK,UAAUG,KAEhDE,cA3BS,SA2BKC,EAAaC,GACvB,IAAIC,EAAab,KAAKhC,MAClBiC,aAAaC,QAAQ,oBAAsB,OAE/CW,EAA2B,MAAdA,EAAqB,GAAKA,GAC5BF,GAAOC,EAClBX,aAAaG,QAAQ,kBAAmBJ,KAAKK,UAAUQ,KAE3DC,cAnCS,SAmCKH,GACV,IAAME,EAAab,KAAKhC,MACpBiC,aAAaC,QAAQ,oBAAsB,MAE/C,OAAIW,GAAcA,EAAWF,GAClBE,EAAWF,GAEf,OAIA5E,O,qECVAgF,IAjCf,YAA2C,IAArBC,EAAoB,EAApBA,SAAUC,EAAU,EAAVA,OAAU,EACVC,oBAAS,GADC,mBAC/BC,EAD+B,KACvBC,EADuB,KAGlCC,EAAOpF,OAAOqF,QACdC,EAAatF,OAAOqF,QA0BxB,OAvBAE,qBAAU,WAiBFP,GACAhF,OAAOwF,iBAAiB,UAAU,SAACC,GAAD,OAjBb,SAACA,GACtB,IAAMzF,EAASyF,EAAEC,cAEbN,EAAOpF,EAAOqF,QACVC,EAAatF,EAAOqF,QAPvB,KAQGC,EAAatF,EAAOqF,QACpBF,GAAU,IAEPC,EAAOpF,EAAOqF,SACjBrF,EAAOqF,QAAUC,EAZpB,KAaGA,EAAatF,EAAOqF,QACpBF,GAAU,IAGlBC,EAAOpF,EAAOqF,QAG2BM,CAAiBF,QAG/D,CAACT,IAEG,kBAAC,IAAD,CAAMY,IAAKV,GAASH,K,sGCDlBc,EAA2B,CACpCC,WAAW,EACXC,UAAW,KACXC,UAAW,KACXtD,SAAU,GACVH,QAAS,GACT0D,SAAU,GACVC,YAAa,CACTC,YAAY,EACZC,YAAY,EACZC,UAAU,GAEdC,WAAY,CACRC,KAAM,CACF/B,GAAI,GACJnD,KAAM,GACNH,KAAM,EACNV,KAAM,OACNwB,KAAM,IAEVwE,OAAQ,GAEZC,iBAAkB,GAClBC,WAAY,CACRC,MAAO,CACHnC,GAAI,GACJnD,KAAM,GACNH,KAAM,EACNV,KAAM,OACNwB,KAAM,IAEV4E,MAAO,IAEXC,SAAU,GACVC,UAAU,EACVC,aAAa,GAGXC,EAAqB,SAACf,GACxB,IAAME,EAAaF,EAASgB,OAAS,EACjCb,GAAa,EACbC,GAAW,EAQf,OAPAJ,EAASiB,SAAQ,SAACvC,GACK,QAAfA,EAAMnE,KACN4F,GAAa,EACS,SAAfzB,EAAMnE,OACb6F,GAAW,MAGZ,CACHF,aACAC,aACAC,aA+GOvD,UA3GE,WAGI,IAFjBqE,EAEgB,uDAFOtB,EACvBuB,EACgB,uCAChB,OAAQA,EAAO5G,MACX,IAAK,gBACD,OAAOlB,OAAO+H,OAAO,GAAIF,EAAO,CAC5BrB,WAAYqB,EAAMrB,UAClBC,UAAWqB,EAAOE,OAClBtB,UAAWoB,EAAOG,SAE1B,IAAK,gBACD,OAAOjI,OAAO+H,OAAO,GAAIF,EAAO,CAC5BzE,SAAU0E,EAAO7G,OAEzB,IAAK,eACD,OAAOjB,OAAO+H,OAAO,GAAIF,EAAO,CAC5B5E,QAAS6E,EAAO7G,OAExB,IAAK,uBACD,IAAMiH,EAAa,sBAAOL,EAAMlB,UAAb,YAA0BmB,EAAOK,UACpD,OAAOnI,OAAO+H,OAAO,GAAIF,EAAO,CAC5BlB,SAAUuB,EACVtB,YAAac,EAAmBQ,KAExC,IAAK,sBACD,IAAME,EAAcN,EAAOK,QAC3B,OAAOnI,OAAO+H,OAAO,GAAIF,EAAO,CAC5BlB,SAAUyB,EACVxB,YAAac,EAAmBU,KAExC,IAAK,yBAAL,IACYC,EAAYP,EAAZO,QACFC,EAAmBT,EAAMlB,SAASzD,QAAO,SAAC+D,GAC5C,OAAQoB,EAAQE,SAAStB,EAAK/B,OAElC,OAAOlF,OAAO+H,OAAO,GAAIF,EAAO,CAC5BlB,SAAU2B,EACV1B,YAAac,EAAmBY,KAExC,IAAK,oBACD,OAAOtI,OAAO+H,OAAO,GAAIF,EAAO,CAC5BlB,SAAU,GACVC,YAAa,CACTC,YAAY,EACZC,YAAY,EACZC,UAAU,KAGtB,IAAK,iBACD,OAAO/G,OAAO+H,OAAO,GAAIF,EAAO,CAC5BlB,SAAU,GACVC,YAAa,CACTC,YAAY,EACZC,YAAY,EACZC,UAAU,GAEdQ,SAAUO,EAAOP,WAEzB,IAAK,mBACD,OAAOvH,OAAO+H,OAAO,GAAIF,EAAO,CAC5BT,WAAY,CACRC,MAAOS,EAAOT,MACdC,MAAOO,EAAMzE,YAGzB,IAAK,YACD,OAAO,2BACAyE,GADP,IAEIL,UAAWK,EAAML,WAEzB,IAAK,kBAAL,IACYP,EAAgBa,EAAhBb,KAAMC,EAAUY,EAAVZ,MACd,OAAO,2BACAW,GADP,IAEIb,WAAY,CACRC,OACAC,WAGZ,IAAK,yBAAL,IACYC,EAAqBW,EAArBX,iBACR,OAAO,2BACAU,GADP,IAEIV,qBAER,IAAK,gBACD,OAAO,2BACAU,GADP,IAEIlB,SAAU,GACVC,YAAa,CACTC,YAAY,EACZC,YAAY,EACZC,UAAU,GAEdQ,SAAU,KAElB,IAAK,eACD,OAAO,2BACAM,GADP,IAEIJ,YAAaK,EAAOvG,OAE5B,QACI,OAAOsG,K,sFC3LbW,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,OAAO,aACHC,MAAO,MACPC,QAAS,IACRH,EAAMI,YAAYC,KAAK,MAAQ,CAC5BH,MAAO,OACPC,QAAS,SAKfG,EAAW,SAACC,GAAD,OACb,kBAAC,IAAD,CACIC,gBAAiBD,EAAME,KAAO,OAAS,UACvCC,gBAAiBH,EAAME,KAAO,UAAY,OAC1CE,UAAWJ,EAAMI,aAkBVC,IAdf,WACI,IAAMZ,EAAQa,cACRC,EAAUhB,IAEhB,OACI,6BACI,kBAACQ,EAAD,CACIG,KAA6B,SAAvBT,EAAMe,QAAQvI,KACpBmI,UAAWG,EAAQb,Y,gCC/BnC,omBAAO,IAAMe,EAAe,SAACC,GACzB,GAAc,IAAVA,GAAyB,MAAVA,EAAe,MAAO,MACzC,IAEMC,EAAIC,KAAKC,MAAMD,KAAKE,IAAIJ,GAASE,KAAKE,IAFlC,OAGV,OAAQJ,EAAQE,KAAKG,IAHX,KAGkBJ,IAAIK,QAAQ,GAAK,IAF/B,CAAC,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAELL,IAOhDM,EAAY,SAACnI,EAAMsD,EAAO8E,GACnC,GAAIA,EAAM,CACN,IAAMzH,EAAO,IAAIF,KACjBE,EAAK0H,QAAQ1H,EAAK2H,UAAmB,GAAPF,EAAY,GAAK,GAAK,KAExDG,SAASC,OAASxI,EAAO,KAAOsD,GAAS,IAAM,YAGtCmF,EAAkB,SAACC,EAAWC,GACvC,IAAIC,EAAMjK,OAAOC,SAASC,KAE1B,GAAI+J,EAAIC,QAAQH,EAAY,MAAQ,EAAG,CACnC,IAAMI,EAASF,EAAIG,UAAU,EAAGH,EAAIC,QAAQH,IACxCM,EAASJ,EAAIG,UAAUH,EAAIC,QAAQH,IAMvCE,EAAME,EAASJ,EAAY,IAAMC,GAJjCK,GADAA,EAASA,EAAOD,UAAUC,EAAOH,QAAQ,KAAO,IAErCA,QAAQ,MAAQ,EACjBG,EAAOD,UAAUC,EAAOH,QAAQ,MAChC,SAGND,EAAIC,QAAQ,KAAO,EAAGD,GAAO,IAAMF,EAAY,IAAMC,EACpDC,GAAO,IAAMF,EAAY,IAAMC,EAEpCC,IAAQjK,OAAOC,SAASC,MAG5BF,OAAOsK,QAAQC,UAAU,KAAM,KAAMN,IAG5BO,EAAoB,WAC7B,OAAKxK,OAAOoD,cAGRpD,OAAOoD,cACHpD,OAAOyK,UAAUC,eAGQ,IAAzB1K,OAAO2K,SAASC,SAJxB,IAWSC,EAAqB,SAACC,GAC/B,IAAMb,EAAMjK,OAAOC,SAASC,KAC5B,OAAwC,IAApC+J,EAAIC,QAAQ,IAAMY,EAAQ,OACe,IAApCb,EAAIC,QAAQ,IAAMY,EAAQ,MAI1BC,EAAmB,SAACC,GACNhL,OAAO4J,SAASqB,cACnC,0BAEWC,aAAa,UAAWF,IAGpC,SAASG,EAAaxG,GACzB,OAAOyG,WAAWC,KAAKC,KAAK3G,IAAQ,SAAC4G,GAAD,OAAOA,EAAEC,WAAW,MAIrD,SAASC,EAAa9G,GACzB,OAAO+G,KAAKC,OAAOC,aAAaC,MAAM,KAAM,IAAIT,WAAWzG,KACtDmH,QAAQ,MAAO,KACfA,QAAQ,MAAO,KACfA,QAAQ,KAAM,IAGhB,SAASC,EAAS5I,GACrB,IAAM6I,EACO,OAAT7I,EACMA,EAAK8I,OAAO,GAAGC,MAAM,KACrBhN,KAAKqJ,MAAMpF,KAAK8I,OAAO,GAAGC,MAAM,KAC1C,MAAO,IAAMF,EAAQG,MAAM,EAAGH,EAAQ/E,OAAS,GAAGmF,KAAK,KAGpD,SAASC,EAAS9F,GACrB,MAAqB,MAAdA,EAAKpD,KACNoD,EAAKpD,KAAOoD,EAAKlF,KACjBkF,EAAKpD,KAAO,IAAMoD,EAAKlF,KAG1B,SAASiL,EAAQC,GACpB,OAAOC,SAASD,EAAK,IAAIE,SAAS,GAAGC,SAAS,EAAG,KAG9C,SAASC,EAASC,EAAOC,GAC5B,IAAMC,EAAYD,GAAO,IAUzB,OATAD,EAAQA,EAAMG,KAAI,SAACC,EAAMxG,GAOrB,OANIA,IACAwG,EAAOA,EAAKlB,QAAQ,IAAImB,OAAO,IAAMH,GAAY,KAEjDtG,IAAUoG,EAAM3F,OAAS,IACzB+F,EAAOA,EAAKlB,QAAQ,IAAImB,OAAOH,EAAY,KAAM,KAE9CE,MAEEZ,KAAKU,GAGf,SAASI,EAAS/J,GACrB,IAAMgK,EAAWhK,EAAK+I,MAAM,KAE5B,OADAiB,EAASC,MACqB,KAAvBD,EAASf,KAAK,KAAc,IAAMe,EAASf,KAAK,KAGpD,SAASiB,EAASlK,GAErB,OADiBA,EAAK+I,MAAM,KACZkB,MAGb,SAASE,EAAUrG,GAKtB,IAJA,IAAIsG,EAAS,GACPC,EACF,iEACEC,EAAmBD,EAAWvG,OAC3BiC,EAAI,EAAGA,EAAIjC,EAAQiC,IACxBqE,GAAUC,EAAWE,OACjBvE,KAAKC,MAAMD,KAAKwE,SAAWF,IAGnC,OAAOF,EAGJ,SAASK,EAAUC,EAAMC,GAM5B,OALAA,EAAW5G,SAAQ,SAAC6G,GACZA,GACAF,OAGDA,EAGJ,IAAMG,EAAQ,WACjB,OAAOzM,UAAU0M,SAASC,cAAchE,QAAQ,QAAU,GAGvD,SAASiE,IACZ,IAAMC,EAAKpO,OAAOqO,YAClBzE,SAAS0E,gBAAgBC,MAAMC,YAAY,OAA3C,UAAsDJ,EAAtD,S,gKChJEtG,EAAYC,aAAW,iBAAO,CAChC0G,KAAM,CACFzD,MAAO,qBACP0D,QAAS,YAsCFC,IAlCU,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAClBC,EAAYC,aACd,SAAC3H,GAAD,OAAWA,EAAM4H,WAAW/G,MAAMe,QAAQvI,QAExC2B,EAAW6M,cACXC,EAAkBC,uBAAY,kBAAM/M,EAASgN,iBAAuB,CACtEhN,IAEEiN,EAAcP,GAA2B,UAAdA,IAA2BA,EACtDQ,EAASR,GAA2B,SAAdA,EAKtB/F,EAAUhB,IAChB,OACI,kBAAC,IAAD,CACIwH,MAAOF,EAAa,6CAAY,6CAChCG,UAAU,UAEV,kBAAC,IAAD,CACI5G,UAAW6G,IAAW,eACjB1G,EAAQ2F,KAAO,SAAWG,IAE/Ba,QAdO,WACf3P,IAAK2E,cAAc,aAAc2K,EAAa,OAAS,SACvDH,KAaQjE,MAAM,WAELoE,GAAc,kBAAC,IAAD,MACdC,GAAU,kBAAC,IAAD,U,wSCxBrBvH,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrC0H,WAAY,CACRvH,QAAS,MACTwH,YAAa,WAIfC,EAAc,CAAC,MAAO,MAAO,eAAM,eAAM,eAAM,gBAEtC,SAASC,EAAT,GAAkD,IAA5BC,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,QAC3C7N,EAAW6M,cACXiB,EAAanB,aACf,SAAC3H,GAAD,OAAWA,EAAM7E,WAAW4N,sBAE1BC,EAAoBjB,uBACtB,SAACvO,GAAD,OAAYwB,EAASiO,YAAiBzP,MACtC,CAACwB,IAECkO,EAAmBnB,uBACrB,SAACvO,GAAD,OAAYwB,EAASU,2BAAiBlC,MACtC,CAACwB,IAECmO,EAAmBpB,uBACrB,SAACxK,GAAD,OAASvC,EAASoO,YAAiB7L,MACnC,CAACvC,IAECqO,EAAsBtB,uBACxB,SAACzJ,GAAD,OAAOtD,EAASsO,YAAoBhL,MACpC,CAACtD,IAnBuD,EAqBxB8C,mBAAS,MArBe,mBAqBrDyL,EArBqD,KAqBzCC,EArByC,OAsBlB1L,mBAAS,GAtBS,mBAsBrD2L,EAtBqD,KAsBtCC,EAtBsC,OAuBxB5L,oBAAS,GAvBe,mBAuBrD6L,EAvBqD,KAuBzCC,EAvByC,KAyCtDC,EAAmB,WACrB,IAAMC,EACa,SAAfhB,EACM,OACe,SAAfA,EACA,YACA,OACVnQ,IAAK2E,cAAc,cAAewM,GAClCd,EAAkBc,IAGhBC,EAAkBhC,uBACpB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAgBC2G,EAAUhB,IAChB,OACI,oCACKiI,GACD,kBAAC,IAAD,CAAYT,MAAM,eAAK3G,UAAWG,EAAQ4G,WAAYD,QAjB9C,WACP3P,IAAKuE,QASVrE,OAAOsR,aAAavB,EAAMrL,KARtBwM,EACI,MACA,QACA,yDACA,aAYF,kBAAC,IAAD,CAAoBK,SAAS,WAGf,SAAftB,GACG,kBAAC,IAAD,CACIX,MAAM,2BACN3G,UAAWG,EAAQ4G,WACnBD,QAASuB,EACThG,MAAOgF,EAAU,UAAY,WAE7B,kBAAC,IAAD,CAAcuB,SAAUzB,EAAU,QAAU,aAGpC,SAAfG,GACG,kBAAC,IAAD,CACIX,MAAM,iCACN3G,UAAWG,EAAQ4G,WACnBD,QAASuB,EACThG,MAAOgF,EAAU,UAAY,WAE7B,kBAAC,IAAD,CAAeuB,SAAUzB,EAAU,QAAU,aAIrC,cAAfG,GACG,kBAAC,IAAD,CACIX,MAAM,iCACN3G,UAAWG,EAAQ4G,WACnBD,QAASuB,EACThG,MAAOgF,EAAU,UAAY,WAE7B,kBAAC,IAAD,CAAgBuB,SAAUzB,EAAU,QAAU,aAItD,kBAAC,IAAD,CACIR,MAAM,2BACN3G,UAAWG,EAAQ4G,WACnBD,QA1FY,SAAChK,GACrBkL,EAAclL,EAAEC,gBA0FRsF,MAAOgF,EAAU,UAAY,WAE7B,kBAAC,IAAD,CACIuB,SAAUzB,EAAU,QAAU,aAGtC,kBAAC,IAAD,CACItL,GAAG,YACHgN,SAAUd,EACV7P,KAAM4Q,QAAQf,GACdgB,QAAS,kBAAMf,EAAc,QAE5Bf,EAAY7C,KAAI,SAAC4E,EAAQnL,GAAT,OACb,kBAAC,IAAD,CACI9B,IAAKiN,EACL1L,SAAUO,IAAUoK,EACpBnB,QAAS,SAACmC,GAAD,OAxGD,SAACnM,EAAGe,GAC5BqK,EAAiBrK,GASjB6J,EARqB,CACjBwB,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,UACHC,EAAG,WAEuB1L,IAC9BmK,EAAc,MA6FsBwB,CAAoBP,EAAOpL,KAE9CmL,OAIZ5B,GACG,oCACI,kBAAC,IAAD,CACIT,MAAO,6CACP3G,UAAWG,EAAQ4G,WACnBD,QAAS,kBAAMa,EAAiBP,EAAMrL,OAEtC,kBAAC,IAAD,CAAU6M,SAAUzB,EAAU,QAAU,aAE5C,kBAAC,IAAD,CACIR,MAAO,eACP3G,UAAWG,EAAQ4G,WACnBD,QAAS,kBAAMsB,GAAc,KAE7B,kBAAC,IAAD,CAAYQ,SAAUzB,EAAU,QAAU,aAE9C,kBAAC,IAAD,CACIjP,KAAMiQ,EACNf,MAAOA,EACP2B,QAAS,kBAAMX,GAAc,OAIxChB,GACG,kBAAC,IAAD,CACIT,MAAO,UAAOS,EAAMqC,QAAQC,KAAO,gBACnC1J,UAAWG,EAAQ4G,WACnBD,QAAS,SAAChK,GAAD,OAAO+K,EAAoB/K,EAAEC,gBACtC6I,MAAO,CAAEpG,QAAS,IAElB,kBAAC,IAAD,CACIoG,MAAO,CAAE+D,OAAQ,GAAIpK,MAAO,IAC5BqK,IAAK,uBAAyBxC,EAAMqC,QAAQ1N,IAAM,W,mOCtLpEoD,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCwK,eAAgB,GAChBC,SAAU,CACNC,SAAU,SAEdC,QAAS,CACLC,OAAQ5K,EAAM6K,QAAQ,GACtBjE,SAAU,YAEdkE,eAAgB,CACZ9H,MAAOhD,EAAMe,QAAQgK,UAAUC,MAC/BpE,SAAU,WACVqE,IAAK,MACLC,KAAM,OAEVC,WAAY,CACRC,WAAY,UAEhBC,OAAQ,CACJC,QAAS,SAEbC,UAAW,CACPC,UAAW,QAIJ,SAASC,EAAOlL,GAC3B,IAAMpG,EAAW6M,cACXlG,EAAUhB,IAFkB,EAGN7C,mBAAS,KAHH,mBAG3ByO,EAH2B,KAGnBC,EAHmB,OAIZ1O,mBAAS,IAJG,mBAI3B2O,EAJ2B,KAItBC,EAJsB,OAKJ5O,oBAAS,GALL,mBAK3B6O,EAL2B,KAKlBC,EALkB,KAO5BC,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGCuP,EAAU,WACZnJ,EAAMmJ,UACNuC,YAAW,WACPJ,EAAO,IACPF,EAAU,OACX,MAoBP,OACI,kBAAC,IAAD,CACI9S,KAAM0H,EAAM1H,KACZ6Q,QAASA,EACTwC,kBAAgB,oBAChBvL,UAAWG,EAAQ0J,eACnB2B,SAAS,KACTC,WAAS,GAET,kBAAC,IAAD,CAAa5P,GAAG,qBAAhB,gBACA,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAa6P,UAAU,YACnB,kBAAC,IAAD,CACIC,aAAW,SACXjT,KAAK,UACLsD,MAAO+O,EACPa,SAAU,SAAC9O,GAAD,OAAOkO,EAAUlO,EAAE6B,OAAO3C,SAEnC6P,IAAczH,KAAI,SAACgB,EAAG0G,GAAJ,OACf,kBAAC,IAAD,CACI/P,IAAK+P,EACL9P,MAAO8P,EAAEhI,WACTiI,QAAS,kBAAC,IAAD,MACTC,MAAO5G,SAKvB,kBAAC,IAAD,CACIqG,WAAS,EACT5P,GAAG,4BACHmQ,MAAM,2BACNC,WAAS,EACTjQ,MAAOiP,EACPW,SAAU,SAAC9O,GAAD,OAAOoO,EAAOpO,EAAE6B,OAAO3C,QACjCkQ,QAAQ,SACRC,KAAM,KAId,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAQrF,QAASiC,GAAjB,gBACA,kBAAC,IAAD,CACIjC,QA5DK,WACjBsE,GAAW,GACXgB,IAAIC,KAAK,iBAAmBzM,EAAMwH,MAAMrL,IAAK,CACzCkP,IAAKA,EACLF,OAAQlH,SAASkH,KAEhBuB,MAAK,WACFjB,EAAe,MAAO,QAAS,2BAAQ,WACvCD,GAAW,GACXrC,OAEHwD,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,SAC9CgV,GAAW,OAgDP/I,MAAM,YACNmK,SAAUrB,GAHd,oB,iCC3HhB,6GAQe,SAASsB,EAAoB7M,GACxC,OACI,kBAAC,IAAD,CACI1H,KAAM0H,EAAM8M,SACZ3D,QAASnJ,EAAMmJ,QACfwC,kBAAgB,qBAEhB,kBAAC,IAAD,CAAa1P,GAAG,sBAAhB,kCACW+D,EAAM+M,MADjB,qDAGA,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAmB9Q,GAAG,4BAAtB,uNAIJ,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAQiL,QAASlH,EAAMmJ,SAAvB,gBACA,kBAAC,IAAD,CACIjC,QAAS,kBAAMlH,EAAM8M,YACrBrK,MAAM,UACNuK,WAAS,GAHb,oB,uMCbVzN,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCwN,IAAK,CACD5C,OAAQ,EACRK,IAAK,OACLwC,MAAO,GACPC,OAAQ,GACRxC,KAAM,OACNyC,OAAQ,EACR/G,SAAU,SAEdgH,MAAO,CACHhH,SAAU,WACV8G,OAAQ,GACRzC,IAAK,OACL0C,OAAQ,KACRF,MAAO,GAEXI,YAAa,CACT7K,MAAO8K,IAAM,KACblH,SAAU,WACVqE,KAAM,EACNC,MAAO,EACPyC,OAAQ,GAEZhD,QAAS,CACLC,OAAQ5K,EAAM6K,QAAQ,GACtBjE,SAAU,YAEdmH,cAAe,CACXvN,gBAAiBsN,IAAM,KACvB,UAAW,CACPtN,gBAAiBsN,IAAM,WAKpB,SAASE,EAAWzN,GAC/B,IAAMO,EAAUhB,IACVmO,EAAkBC,YAAK,eACxBpN,EAAQiN,cAAiC,YAAjBxN,EAAM4N,SAGnC,OACI,kBAAC,IAAD,CAAYnR,OAAQ/B,IAAaO,YAC7B,yBAAKmF,UAAWG,EAAQ0M,KACpB,yBAAK7M,UAAWG,EAAQ6J,SACpB,kBAAC,IAAD,CAASrD,MAAO,eAAMC,UAAW,QAC7B,kBAAC,IAAD,CACIE,QAASlH,EAAMkH,QACfzE,MAAM,UACNrC,UAAWsN,EACXd,SAA2B,YAAjB5M,EAAM4N,OAChB7B,aAAW,OAEO,YAAjB/L,EAAM4N,OACH,kBAAC,IAAD,MAEA,kBAAC,IAAD,QAIM,YAAjB5N,EAAM4N,QACH,kBAAC,IAAD,CACIjV,KAAM,GACNyH,UAAWG,EAAQ+M,mB,qOCnEzC/N,EAAYC,YAAW,CACzBqO,OAAQ,CACJ5N,gBAAiB6N,IAAK,KACtBrL,MAAOqL,IAAK,MAEhBC,iBAAkB,CACdhD,QAAS,QAEbQ,QAAS,CACLN,UAAW,GACX+C,WAAY,MAIL,SAASC,IACpB,IAAM1N,EAAUhB,IACVjH,EAAOiO,aAAY,SAAC3H,GAAD,OAAWA,EAAM7E,WAAWmU,OAAO3C,WACtD4C,EAAO5H,aAAY,SAAC3H,GAAD,OAAWA,EAAM7E,WAAWmU,OAAOE,eAE5D,OACI,kBAACC,EAAA,EAAD,CAAQ1C,kBAAgB,sBAAsBrT,KAAMA,GAChD,kBAACgW,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAmBnO,UAAWG,EAAQwN,kBAClC,kBAACS,EAAA,EAAD,CAAkB/L,MAAM,cACxB,yBAAKrC,UAAWG,EAAQgL,SAAU4C,M,WCbhD5O,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCgP,WAAY,CACR7O,QAAS,sBAEbwK,QAAS,CACLC,OAAQ5K,EAAM6K,QAAQ,GACtBjE,SAAU,YAEdkE,eAAgB,CACZ9H,MAAOhD,EAAMe,QAAQgK,UAAUC,MAC/BpE,SAAU,WACVqE,IAAK,MACLC,KAAM,MACNM,WAAY,GACZ+C,YAAa,QAIN,SAASU,EAAW1O,GAAQ,IAAD,EACEtD,mBAAS,IADX,mBAC/BiS,EAD+B,KACjBC,EADiB,OAEUlS,mBAAS,IAFnB,mBAE/BmS,EAF+B,KAEbC,EAFa,KAIhClV,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAECmV,EAAmBpI,uBACrB,SAACiH,GACGhU,EAASoV,YAAiBpB,MAE9B,CAAChU,IAECqV,EAAkBtI,uBAAY,WAChC/M,EAASsV,iBACV,CAACtV,IA6CE2G,EAAUhB,IAEhB,OACI,kBAAC8O,EAAA,EAAD,CACI/V,KAAM0H,EAAM1H,KACZ6Q,QAASnJ,EAAMmJ,QACfwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,sBACA,kBAACmT,EAAA,EAAD,CACIC,YAAarP,EAAMqP,YACnB3R,SAAUsC,EAAMtC,SAChB4R,SAvDU,SAACC,GACnB,IAAM3U,EACc,MAAhB2U,EAAO3U,KACD2U,EAAO3U,KAAO2U,EAAOzW,KACrByW,EAAO3U,KAAO,IAAM2U,EAAOzW,KACrC8V,EAAgBhU,GAChBkU,EAAoBS,EAAOzW,SAoDL,KAAjB6V,GACG,kBAACL,EAAA,EAAD,CAAelO,UAAWG,EAAQkO,YAC9B,kBAACF,EAAA,EAAD,2BACQ,gCAASM,KAIzB,kBAACW,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASlH,EAAMmJ,SAAvB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QA5DD,SAAChK,GACP,MAALA,GACAA,EAAEwS,iBAENX,GAAiB,GACjB,IAAMY,EAAO,GACTC,EAAQ,GAGmB,QAA3B5P,EAAMtC,SAAS,GAAGzF,KAClB0X,EAAKE,KAAK7P,EAAMtC,SAAS,GAAGzB,IAE5B2T,EAAMC,KAAK7P,EAAMtC,SAAS,GAAGzB,IAGjCuQ,IAAIC,KAAK,eAAgB,CACrBqD,QAAS9P,EAAMtC,SAAS,GAAG9C,KAC3BoP,IAAK,CACD2F,KAAMA,EACNC,MAAOA,GAEXG,IAAsB,OAAjBpB,EAAwB,IAAMA,IAElCjC,MAAK,WACF1M,EAAMmJ,UACN8F,IACAF,GAAiB,MAEpBpC,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,SAC9CuY,GAAiB,OA+BTtM,MAAM,UACNmK,SAA2B,KAAjB+B,GAAuB3O,EAAMgQ,eAH3C,eAMKhQ,EAAMgQ,eACH,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qB,kUC3F7ChL,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCwK,eAAgB,GAChBC,SAAU,CACNC,SAAU,SAEdC,QAAS,CACLC,OAAQ5K,EAAM6K,QAAQ,GACtBjE,SAAU,YAEdkE,eAAgB,CACZ9H,MAAOhD,EAAMe,QAAQgK,UAAUC,MAC/BpE,SAAU,WACVqE,IAAK,MACLC,KAAM,OAEVC,WAAY,CACRC,WAAY,UAEhBC,OAAQ,CACJC,QAAS,SAEbC,UAAW,CACPC,UAAW,QAIbgF,GAAiBC,IAAW,CAC9BC,KAAM,CACFC,OAAQ,gCACRC,UAAW,OACX,qBAAsB,CAClBC,aAAc,GAElB,WAAY,CACRvF,QAAS,QAEb,aAAc,CACVV,OAAQ,SAGhBkG,SAAU,IAdSL,CAepBM,KAEGC,GAAwBP,IAAW,CACrCC,KAAM,CACFvQ,QAAS,EACT,aAAc,IAElB8Q,QAAS,CACLrG,OAAQ,EACRU,QAAS,UACT,aAAc,CACVV,OAAQ,QAGhBkG,SAAU,IAZgBL,CAa3BS,KAEGC,GAAwBV,KAAW,SAACzQ,GAAD,MAAY,CACjD0Q,KAAM,CACFvQ,QAAS,GACTK,gBAAiBR,EAAMe,QAAQqQ,WAAWC,YAHpBZ,CAK1Ba,KAEW,SAASC,GAAWhR,GAC/B,IAAMpG,EAAW6M,cACXlG,EAAUhB,KAEVkM,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGCqX,EAAe1K,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAW0K,iBACvDC,EAAY5K,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAW4K,oBAXpB,EAaNC,IAAM3U,UAAS,GAbT,mBAa/B6T,EAb+B,KAarBe,EAbqB,OAcND,IAAM3U,SAAS,IAdT,mBAc/B6U,EAd+B,KAcrBC,EAdqB,OAeVH,IAAM3U,SAAS,CACvC+U,SAAU,GACVC,UAAW,EACXC,QAAS,MACTC,cAAc,EACd7E,MAAO,IApB2B,mBAe/B8E,EAf+B,KAevBC,EAfuB,OAsBAT,IAAM3U,SAAS,CACjD+U,UAAU,EACVM,QAAQ,EACRhF,OAAO,EACPiF,SAAS,IA1ByB,mBAsB/BC,EAtB+B,KAsBlBC,EAtBkB,KA6BhCC,EAAe,SAACC,GAAD,OAAU,SAAC/I,GAEf,aAAT+I,IAC2B,KAAvB/I,EAAMtK,OAAO3C,MACb8V,EAAe,2BAAKD,GAAN,IAAmBR,UAAU,KAE3CS,EAAe,2BAAKD,GAAN,IAAmBR,UAAU,MAKtC,UAATW,IAC0B,KAAtB/I,EAAMtK,OAAO3C,MACb8V,EAAe,2BAAKD,GAAN,IAAmBlF,OAAO,KAExCmF,EAAe,2BAAKD,GAAN,IAAmBlF,OAAO,MAIhD+E,EAAU,2BAAKD,GAAN,kBAAeO,EAAO/I,EAAMtK,OAAO3C,WAoB1CiW,EAAe,SAACC,GAAD,OAAW,SAACjJ,EAAOkJ,GACpCjB,IAAYiB,GAAaD,KAGvBE,EAAc,SAACJ,GAAD,OAAU,WACrBH,EAAYG,IACbC,EAAaD,EAAbC,CAAmB,MAAM,GAEhB,aAATD,GAAuBH,EAAYG,IACnCN,EAAU,2BACHD,GADE,IAELJ,SAAU,MAGL,UAATW,GAAoBH,EAAYG,IAChCN,EAAU,2BACHD,GADE,IAEL9E,MAAO,KAGfmF,EAAe,2BAAKD,GAAN,kBAAoBG,GAAQH,EAAYG,QAGpDjJ,GAAU,WACZnJ,EAAMmJ,UACNuC,YAAW,WACP8F,EAAY,MACb,MAyCP,OACI,kBAACnD,EAAA,EAAD,CACI/V,KAAM0H,EAAM1H,KACZ6Q,QAASA,GACTwC,kBAAgB,oBAChBvL,UAAWG,EAAQ0J,eACnB2B,SAAS,KACTC,WAAS,GAET,kBAACsD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,wCAEc,KAAbsV,GACG,oCACI,kBAACkB,EAAA,EAAD,MACA,kBAACC,EAAA,EAAD,KACI,kBAAC,GAAD,CACInC,SAAuB,aAAbA,EACVvE,SAAUqG,EAAa,aAEvB,kBAAC,GAAD,CACIM,gBAAc,kBACd1W,GAAG,kBAEH,kBAAC2W,EAAA,EAAD,CAAUC,QAAM,GACZ,kBAACC,EAAA,EAAD,KACI,kBAAC,IAAD,OAEJ,kBAACC,EAAA,EAAD,CAAcC,QAAQ,yCACtB,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CACIC,QAASlB,EAAYR,SACrBzF,SAAUwG,EAAY,iBAKtC,kBAAC,GAAD,KACI,kBAACY,EAAA,EAAD,CACI9G,QAAQ,WACR7J,MAAM,YACNoJ,WAAS,GAET,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,6BAApB,4BAGA,kBAACC,GAAA,EAAD,CACI1H,WAAS,EACT5P,GAAG,8BACHhE,KACI4Z,EAAOD,aACD,OACA,WAEVxV,MAAOyV,EAAOJ,SACdzF,SAAUmG,EAAa,YACvBqB,aACI,kBAACC,GAAA,EAAD,CAAgBpN,SAAS,OACrB,kBAACqN,GAAA,EAAD,CAAS3M,MAAM,4BACX,kBAAC4M,GAAA,EAAD,CACI5H,aAAW,6BACX7E,QAzI7B,WACnBgL,EAAe,2BAAKD,GAAN,IAAmBR,UAAU,KAC3CK,EAAU,2BACHD,GADE,IAELJ,SAAU7Q,KAAKwE,SAASlB,SAAS,IAAIR,OAAO,GAAGE,MAAM,EAAG,GACxDgO,cAAc,MAqI8BgC,KAAK,OAEL,kBAAC,IAAD,QAGR,kBAACD,GAAA,EAAD,CACI5H,aAAW,6BACX7E,QAzJhB,WAC5B4K,EAAU,2BAAKD,GAAN,IAAcD,cAAeC,EAAOD,iBA2JDiC,YAxJhB,SAACxK,GAC7BA,EAAMqG,kBA0JsCkE,KAAK,OAEL,kBAAC,KAAD,CACIE,GAAIjC,EAAOD,aACXmC,OAAQ,kBAACC,GAAA,EAAD,MACRC,QACI,kBAACC,GAAA,EAAD,UAMpBC,WAAY,QAK5B,kBAAC,GAAD,CACI5D,SAAuB,WAAbA,EACVvE,SAAUqG,EAAa,WAEvB,kBAAC,GAAD,CACIM,gBAAc,kBACd1W,GAAG,kBAEH,kBAAC2W,EAAA,EAAD,CAAUC,QAAM,GACZ,kBAACC,EAAA,EAAD,KACI,kBAAC,IAAD,OAEJ,kBAACC,EAAA,EAAD,CAAcC,QAAQ,6BACtB,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CACIC,QAASlB,EAAYF,OACrB/F,SAAUwG,EAAY,eAKtC,kBAAC,GAAD,CACIpS,UAAWG,EAAQqK,YAEnB,kBAACwI,EAAA,EAAD,CACIpN,MAAO,CACHoB,YAAa,KAGjB,kBAACgN,GAAA,EAAD,CACIC,QAAQ,2BACRpY,GAAG,qBACHG,MAAOyV,EAAOH,UACd1F,SAAUmG,EAAa,cAEvB,kBAACmC,GAAA,EAAD,CAAUlY,MAAO,GAAjB,wBACA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,GAAjB,wBACA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,GAAjB,wBACA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,GAAjB,wBACA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,GAAjB,wBACA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,IAAjB,yBAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,IAAjB,yBAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,KAAjB,4BAKR,kBAACmY,EAAA,EAAD,qBACA,kBAACnB,EAAA,EAAD,CACIpN,MAAO,CACHoB,YAAa,GACb4G,WAAY,KAGhB,kBAACoG,GAAA,EAAD,CACIC,QAAQ,2BACRpY,GAAG,qBACHG,MAAOyV,EAAOF,QACd3F,SAAUmG,EAAa,YAEvB,kBAACmC,GAAA,EAAD,CAAUlY,MAAO,KAAjB,kBACA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,MAAjB,kBACA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,OAAjB,YAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,QAAjB,YAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,QAAjB,eAKR,kBAACmY,EAAA,EAAD,6BAGPtD,GACG,kBAAC,GAAD,CACIV,SAAuB,UAAbA,EACVvE,SAAUqG,EAAa,UAEvB,kBAAC,GAAD,CACIM,gBAAc,kBACd1W,GAAG,kBAEH,kBAAC2W,EAAA,EAAD,CAAUC,QAAM,GACZ,kBAACC,EAAA,EAAD,KACI,kBAAC,IAAD,OAEJ,kBAACC,EAAA,EAAD,CAAcC,QAAQ,mCACtB,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CACIC,QAASlB,EAAYlF,MACrBf,SAAUwG,EAAY,cAMtC,kBAAC,GAAD,CACIpS,UAAWG,EAAQuK,QAEnB,kBAACsI,EAAA,EAAD,CACI9G,QAAQ,WACR7J,MAAM,YACNoJ,WAAS,GAET,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,6BAApB,sEAGA,kBAACC,GAAA,EAAD,CACI1H,WAAS,EACT5P,GAAG,8BACHhE,KAAK,SACLuc,WAAY,CAAEC,IAAK,GACnBrY,MAAOyV,EAAO9E,MACdf,SAAUmG,EAAa,SACvBgC,WAAY,OAGF,IAAjBtC,EAAO9E,OAA6B,QAAdoE,GACnB,kBAACoD,EAAA,EAAD,CACIjI,QAAQ,QACRlM,UAAWG,EAAQyK,WAElB,gEACGpK,KAAK8T,KACA7C,EAAO9E,MAAQoE,EACZ,KAER,mBAMxB,kBAAC,GAAD,CACIZ,SAAuB,YAAbA,EACVvE,SAAUqG,EAAa,YAEvB,kBAAC,GAAD,CACIM,gBAAc,kBACd1W,GAAG,kBAEH,kBAAC2W,EAAA,EAAD,CAAUC,QAAM,GACZ,kBAACC,EAAA,EAAD,KACI,kBAAC,IAAD,OAEJ,kBAACC,EAAA,EAAD,CAAcC,QAAQ,6BACtB,kBAACC,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CACIC,QAASlB,EAAYD,QACrBhG,SAAUwG,EAAY,gBAKtC,kBAAC,GAAD,KACI,kBAAC+B,EAAA,EAAD,sGAMZ,kBAAC9B,EAAA,EAAD,OAGM,KAAblB,GACG,kBAACjD,EAAA,EAAD,KACI,kBAACqG,EAAA,EAAD,CACIC,QA3QA,SAACvL,GAAD,OAAWA,EAAMtK,OAAO8V,UA4QxB7H,WAAS,EACTwH,WAAY,CAAEM,UAAU,GACxB1I,MAAM,2BACNhQ,MAAOmV,EACPjF,QAAQ,WACRT,WAAS,KAKrB,kBAAC2D,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASiC,IAAjB,gBAEc,KAAboI,GACG,yBAAKnR,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QAhUJ,SAAChK,GACjBA,EAAEwS,iBACF1P,EAAMgP,kBAAiB,GACvB,IAAM+F,EAAiB,CACnB9Y,GAAI+D,EAAMtC,SAAS,GAAGzB,GACtB+Y,OAAmC,QAA3BhV,EAAMtC,SAAS,GAAGzF,KAC1BwZ,SAAUI,EAAOJ,SACjBC,UAAWO,EAAYF,OAASF,EAAOH,WAAa,EACpDK,OAAQF,EAAOF,QACf5E,MAAO9I,SAAS4N,EAAO9E,OACvBiF,QAASC,EAAYD,SAGzBxF,IAAIC,KAAK,SAAUsI,GACdrI,MAAK,SAACxV,GACHsa,EAAYta,EAASG,MACrBya,EAAU,CACNL,SAAU,GACVC,UAAW,EACXC,QAAS,MACTC,cAAc,EACd7E,MAAO,IAEXmF,EAAe,CACXT,UAAU,EACVM,QAAQ,EACRhF,OAAO,IAEX/M,EAAMgP,kBAAiB,MAE1BrC,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,SAC9CwJ,EAAMgP,kBAAiB,OAiSXvM,MAAM,YACNmK,SAAU5M,EAAMgQ,eAHpB,uCAMKhQ,EAAMgQ,eACH,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qB,kDCtgBjDhL,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCgP,WAAY,CACR7O,QAAS,sBAEbwK,QAAS,CACLC,OAAQ5K,EAAM6K,QAAQ,GACtBjE,SAAU,YAEdkE,eAAgB,CACZ9H,MAAOhD,EAAMe,QAAQgK,UAAUC,MAC/BpE,SAAU,WACVqE,IAAK,MACLC,KAAM,MACNM,WAAY,GACZ+C,YAAa,QAIN,SAASiH,GAAiBjV,GAAQ,IAAD,EACJtD,mBAAS,IADL,mBACrCiS,EADqC,KACvBC,EADuB,OAEIlS,mBAAS,IAFb,mBAErCmS,EAFqC,KAEnBC,EAFmB,KAItClV,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAECmV,EAAmBpI,uBACrB,SAACiH,GACGhU,EAASoV,YAAiBpB,MAE9B,CAAChU,IAgCC2G,EAAUhB,KAEhB,OACI,kBAAC8O,EAAA,EAAD,CACI/V,KAAM0H,EAAM1H,KACZ6Q,QAASnJ,EAAMmJ,QACfwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,4BACA,kBAACmT,EAAA,EAAD,CACIC,YAAarP,EAAMqP,YACnB3R,SAAUsC,EAAMtC,SAChB4R,SAzCU,SAACC,GACnB,IAAM3U,EACc,MAAhB2U,EAAO3U,KACD2U,EAAO3U,KAAO2U,EAAOzW,KACrByW,EAAO3U,KAAO,IAAM2U,EAAOzW,KACrC8V,EAAgBhU,GAChBkU,EAAoBS,EAAOzW,SAsCL,KAAjB6V,GACG,kBAACL,EAAA,EAAD,CAAelO,UAAWG,EAAQkO,YAC9B,kBAACF,EAAA,EAAD,iCACS,gCAASM,KAI1B,kBAACW,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASlH,EAAMmJ,SAAvB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QA9CD,SAAChK,GACP,MAALA,GACAA,EAAEwS,iBAENX,GAAiB,GACjBvC,IAAIC,KAAK,mBAAoB,CACzBzC,IAAKlG,aAAS9D,EAAMtC,SAAS,IAC7BqS,IAAsB,OAAjBpB,EAAwB,IAAMA,IAElCjC,MAAK,WACF1M,EAAMmJ,UACNsC,EAAe,MAAO,QAAS,mDAAY,WAC3CsD,GAAiB,MAEpBpC,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,SAC9CuY,GAAiB,OA+BTtM,MAAM,UACNmK,SAA2B,KAAjB+B,GAAuB3O,EAAMgQ,eAH3C,eAMKhQ,EAAMgQ,eACH,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBClGnD,IAAMhL,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCgP,WAAY,CACR7O,QAAS,qBACTK,gBAAiBR,EAAMe,QAAQqQ,WAAWC,SAE9C1G,QAAS,CACLC,OAAQ5K,EAAM6K,QAAQ,GACtBjE,SAAU,YAEdkE,eAAgB,CACZ9H,MAAOhD,EAAMe,QAAQgK,UAAUC,MAC/BpE,SAAU,WACVqE,IAAK,MACLC,KAAM,MACNM,WAAY,GACZ+C,YAAa,QAIN,SAASkH,GAAelV,GAAQ,IAAD,EACFtD,mBAAS,IADP,mBACnCiS,EADmC,KACrBC,EADqB,OAEVlS,mBAAS,IAFC,mBAEnCyY,EAFmC,KAEzBC,EAFyB,OAIM1Y,mBAAS,IAJf,mBAIjBoS,GAJiB,WAMpClV,EAAW6M,cAEXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGCmV,EAAmBpI,uBACrB,SAACiH,GACGhU,EAASoV,YAAiBpB,MAE9B,CAAChU,IAgDC2G,EAAUhB,KAEhB,OACI,kBAAC8O,EAAA,EAAD,CACI/V,KAAM0H,EAAM1H,KACZ6Q,QAASnJ,EAAMmJ,QACfwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,sBACA,kBAACmT,EAAA,EAAD,CACIC,YAAarP,EAAMqP,YACnB3R,SAAUsC,EAAMtC,SAChB4R,SAzDU,SAACC,GACnB,IAAM3U,EACc,MAAhB2U,EAAO3U,KACD2U,EAAO3U,KAAO2U,EAAOzW,KACrByW,EAAO3U,KAAO,IAAM2U,EAAOzW,KACrC8V,EAAgBhU,GAChBkU,EAAoBS,EAAOzW,SAsDL,KAAjB6V,GACG,kBAACL,EAAA,EAAD,CAAelO,UAAWG,EAAQkO,YAC9B,kBAACF,EAAA,EAAD,KACI,kBAACoG,EAAA,EAAD,CACI3I,SAAU,SAAC9O,GAAD,OAAOkY,EAAYlY,EAAE6B,OAAO3C,QACtCA,MAAO+Y,EACPtJ,WAAS,EACTmB,WAAS,EACT/Q,GAAG,iBACHmQ,MAAM,qCAKtB,kBAACoD,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASlH,EAAMmJ,SAAvB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QArED,SAAChK,GACP,MAALA,GACAA,EAAEwS,iBAENX,GAAiB,GAEjB,IAAMY,EAAO,GACTC,EAAQ,GAEZ5P,EAAMtC,SAAS8G,KAAI,SAACpI,GACG,QAAfA,EAAMnE,KACN0X,EAAKE,KAAKzT,EAAMH,IAEhB2T,EAAMC,KAAKzT,EAAMH,OAIzBuQ,IAAIC,KAAK,iBAAkB,CACvBzC,IAAK,CACD2F,KAAMA,EACNC,MAAOA,GAEX9W,KAAMqc,EACNpF,IAAsB,OAAjBpB,EAAwB,IAAMA,IAElCjC,MAAK,WACF1M,EAAMmJ,UACNsC,EAAe,MAAO,QAAS,6CAAW,WAC1CsD,GAAiB,MAEpBpC,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,SAC9CuY,GAAiB,OAsCTtM,MAAM,UACNmK,SACqB,KAAjB+B,GACa,KAAbwG,GACAnV,EAAMgQ,eANd,eAUKhQ,EAAMgQ,eACH,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBChInD,IAAMhL,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrC2K,QAAS,CACLC,OAAQ5K,EAAM6K,QAAQ,GACtBjE,SAAU,YAEdkE,eAAgB,CACZ9H,MAAOhD,EAAMe,QAAQgK,UAAUC,MAC/BpE,SAAU,WACVqE,IAAK,MACLC,KAAM,MACNM,WAAY,GACZ+C,YAAa,IAEjBqH,MAAO,CACH1V,MAAO,SAIA,SAAS2V,GAAetV,GAAQ,IAAD,EACEtD,mBAAS,IADX,mBACnC6Y,EADmC,KACnBC,EADmB,OAEV9Y,mBAAS,IAFC,mBAEnC+Y,EAFmC,KAEzBC,EAFyB,KAGpC9b,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGCmV,EAAmBpI,uBACrB,SAACiH,GACGhU,EAASoV,YAAiBpB,MAE9B,CAAChU,IAsCLoD,qBAAU,WACFgD,EAAM1H,MACNkU,IAAImJ,IAAI,0BACHjJ,MAAK,SAACxV,GACHwe,EAAYxe,EAASG,KAAKue,SAC1BJ,EAAkBte,EAASG,KAAKwe,QAAQ5Z,OAE3C0Q,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,cAK3D,CAACwJ,EAAM1H,OAEV,IAAMiI,EAAUhB,KAEhB,OACI,kBAAC8O,EAAA,EAAD,CACI/V,KAAM0H,EAAM1H,KACZ6Q,QAASnJ,EAAMmJ,QACfwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,8CAEA,kBAACqS,EAAA,EAAD,CAAelO,UAAWG,EAAQkO,YAC9B,kBAAC2F,GAAA,EAAD,CACIhU,UAAWG,EAAQ8U,MACnBhB,QAAQ,2BACRjY,MAAOmZ,EACPvJ,SAAU,SAAC9O,GAAD,OAAOsY,EAAkBtY,EAAE6B,OAAO3C,SAE3CqZ,EAASjR,KAAI,SAACgB,EAAG0G,GAAJ,OACV,kBAACoI,GAAA,EAAD,CAAUnY,IAAK+P,EAAG9P,MAAOoJ,EAAEvJ,IACtBuJ,EAAE1M,WAMnB,kBAAC0W,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASlH,EAAMmJ,SAAvB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QA/EG,SAAChK,GACX,MAALA,GACAA,EAAEwS,iBAENX,GAAiB,GAEjB,IAAMY,EAAO,GACTC,EAAQ,GAEZ5P,EAAMtC,SAAS8G,KAAI,SAACpI,GACG,QAAfA,EAAMnE,KACN0X,EAAKE,KAAKzT,EAAMH,IAEhB2T,EAAMC,KAAKzT,EAAMH,OAIzBuQ,IAAIC,KAAK,iBAAkB,CACvBzC,IAAK,CACD2F,KAAMA,EACNC,MAAOA,GAEXkG,cAAeP,IAEd7I,MAAK,WACF1M,EAAMmJ,UACNsC,EAAe,MAAO,QAAS,6CAAW,WAC1CsD,GAAiB,MAEpBpC,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,SAC9CuY,GAAiB,OAiDTtM,MAAM,UACNmK,SAA6B,KAAnB2I,GAAyBvV,EAAMgQ,eAH7C,eAMKhQ,EAAMgQ,eACH,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBC1GnD,IAyDMwL,G,4MACFnX,MAAQ,CACJoX,cAAe,GACfC,YAAa,GACbC,QAAS,GACTvH,aAAc,GACdE,iBAAkB,GAClBsH,aAAa,EACbC,SAAU,GACVlM,SAAU,GACVmM,YAAa,GACbC,0BAA0B,EAC1BtX,OAAQ,GACRuX,iBAAkB,M,EAGtBC,kBAAoB,SAACtZ,GACjB,EAAKuZ,SAAL,eACKvZ,EAAE6B,OAAO9C,GAAKiB,EAAE6B,OAAO3C,S,EAIhCsa,cAAgB,G,EAChBC,YAAa,E,EAEbC,iCAAmC,SAACC,GAChC,GAAI,EAAK7W,MAAM8W,aAAeD,EAAUC,YAIxC,GAAI,EAAK9W,MAAMuL,UAAYsL,EAAUtL,QA2BrC,GAAI,EAAKvL,MAAM+W,aAAaC,SAAWH,EAAUE,aAAaC,OAQ1D,EAAKhX,MAAM+W,aAAaE,YACpBJ,EAAUE,aAAaE,YACU,IAArCJ,EAAUE,aAAaE,WAEvBzK,IAAImJ,IAAI,gBAAkB,EAAK3V,MAAMtC,SAAS,GAAGzB,IAC5CyQ,MAAK,SAACxV,GACH,EAAKuf,SAAS,CACVzX,OAAQ9H,EAASG,KAAKqK,SAG7BiL,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,gBAvBhB,CACI,IAAMsC,EAAO+d,EAAUnZ,SAAS,GAAG5E,KACnC,EAAK2d,SAAS,CACVP,QAASpd,SA5Bb,IAA0B,IAAtB+d,EAAUtL,QACV,GAA8B,0BAA1BsL,EAAUzI,YAA0B,CACpC,GACI8I,KAAWrc,YAAY,EAAKmF,MAAMtI,SAASyf,WAC3C,EAAKnX,MAAMwH,OACX,EAAKxH,MAAMwH,MAAMuF,MAAQ,EAGzB,YADA,EAAKqK,aAAa,EAAKC,iBAG3B,EAAKA,uBACF,GAA8B,4CAA1BR,EAAUzI,YAA6B,CAC9C,GACI8I,KAAWrc,YAAY,EAAKmF,MAAMtI,SAASyf,WAC3C,EAAKnX,MAAMwH,OACX,EAAKxH,MAAMwH,MAAMuF,MAAQ,EAGzB,YADA,EAAKqK,aAAa,EAAKE,UAG3B,EAAKA,iBAzBb,EAAKC,SAASV,EAAUpZ,UAAWoZ,EAAUrZ,Y,EA2DrD4Z,aAAe,SAACtK,GAEZ,IAAKvV,KAAKuE,QAQN,OAPA,EAAKkE,MAAM8I,eACP,MACA,QACA,yDACA,gBAEJ,EAAKK,UAGJ5R,KAAKgE,UAAUic,MAAMC,WAAc,EAAKd,WAUzC7J,IATA,EAAK2J,SAAS,CACVF,iBAAkB,WACd,EAAKE,SAAS,CACVF,iBAAkB,OAEtBzJ,Q,EAQhBwK,SAAW,WACP,IAAII,EAAS,GACb,GAAI,EAAK1X,MAAMtC,SAAS,GAAGvB,IAAK,CAC5B,IAAMwb,EAC8B,MAAhC,EAAK3X,MAAMtC,SAAS,GAAG9C,KACjB,EAAKoF,MAAMtC,SAAS,GAAG9C,KAAO,EAAKoF,MAAMtC,SAAS,GAAG5E,KACrD,EAAKkH,MAAMtC,SAAS,GAAG9C,KACvB,IACA,EAAKoF,MAAMtC,SAAS,GAAG5E,KACjC4e,EACI,mBACA,EAAK1X,MAAMtC,SAAS,GAAGvB,IACvB,SACAyb,mBAAmBD,QAEvBD,EAAS,kBAAoB,EAAK1X,MAAMtC,SAAS,GAAGzB,GAGxDuQ,IAAIqL,IAAIH,GACHhL,MAAK,SAACxV,GACHO,OAAOC,SAASoH,OAAO5H,EAASG,MAChC,EAAK8R,UACL,EAAKwN,YAAa,KAErBhK,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAK2S,c,EAIjBkO,gBAAkB,WACd,IAAM1H,EAAO,GACTC,EAAQ,GACZ,EAAK5P,MAAMtC,SAAS8G,KAAI,SAACpI,GAMrB,MALmB,QAAfA,EAAMnE,KACN0X,EAAKE,KAAKzT,EAAMH,IAEhB2T,EAAMC,KAAKzT,EAAMH,IAEd,QAGX,IAAIyb,EAAS,gBACPI,EAAW,CACblI,MAAOA,EACPD,KAAMA,GAENuH,KAAWrc,YAAY,EAAKmF,MAAMtI,SAASyf,YAC3CO,EAAS,kBAAoBjgB,OAAOyK,UAAU/F,IAC9C2b,EAAQ,KAAW,EAAK9X,MAAMtC,SAAS,GAAG9C,MAG9C4R,IAAIC,KAAKiL,EAAQI,GACZpL,MAAK,SAACxV,GAC2B,IAA1BA,EAASE,QAAQX,MACjB,EAAK0S,UACL1R,OAAOC,SAASoH,OAAO5H,EAASG,OAEhC,EAAK2I,MAAM8I,eACP,MACA,QACA5R,EAASE,QAAQQ,IACjB,WAGR,EAAKuR,UACL,EAAKnJ,MAAM+X,oBAEdpL,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAK2S,c,EAIjB6O,aAAe,SAAC9a,GACZA,EAAEwS,iBACF,EAAK1P,MAAMgP,kBAAiB,GAC5B,IAAMW,EAAO,GACTC,EAAQ,GAEZ,EAAK5P,MAAMtC,SAAS8G,KAAI,SAACpI,GACF,QAAfA,EAAMnE,KACN0X,EAAKE,KAAKzT,EAAMH,IAEhB2T,EAAMC,KAAKzT,EAAMH,OAGzBuQ,IAAIyL,OAAO,UAAW,CAClB5gB,KAAM,CACFuY,MAAOA,EACPD,KAAMA,KAGTjD,MAAK,SAACxV,GAC2B,IAA1BA,EAASE,QAAQX,MACjB,EAAK0S,UACLuC,WAAW,EAAK1L,MAAMkP,gBAAiB,MAEvC,EAAKlP,MAAM8I,eACP,MACA,QACA5R,EAASE,QAAQQ,IACjB,WAGR,EAAKoI,MAAMgP,kBAAiB,GAC5B,EAAKhP,MAAM+X,oBAEdpL,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKwJ,MAAMgP,kBAAiB,O,EAIxCkJ,aAAe,SAAChb,GACZA,EAAEwS,iBACF,EAAK1P,MAAMgP,kBAAiB,GAC5BxC,IAAIC,KAAK,eAAiBhV,OAAO0gB,SAAU,CACvCvd,KACgC,OAA5B,EAAKgE,MAAM+P,aACL,IACA,EAAK/P,MAAM+P,eAEpBjC,MAAK,WACF,EAAKvD,UACL,EAAKnJ,MAAM8I,eACP,MACA,QACA,iCACA,WAEJ,EAAK9I,MAAMkP,kBACX,EAAKlP,MAAMgP,kBAAiB,MAE/BrC,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKwJ,MAAMgP,kBAAiB,O,EAIxCoJ,WAAa,SAAClb,GACD,MAALA,GACAA,EAAEwS,iBAEN,EAAK1P,MAAMgP,kBAAiB,GAC5B,IAAMW,EAAO,GACTC,EAAQ,GAEZ,EAAK5P,MAAMtC,SAAS8G,KAAI,SAACpI,GACF,QAAfA,EAAMnE,KACN0X,EAAKE,KAAKzT,EAAMH,IAEhB2T,EAAMC,KAAKzT,EAAMH,OAGzBuQ,IAAI6L,MAAM,UAAW,CACjBxZ,OAAQ,OACRiR,QAAS,EAAK9P,MAAMtC,SAAS,GAAG9C,KAChCoP,IAAK,CACD2F,KAAMA,EACNC,MAAOA,GAEXG,IAAK,EAAKuI,iBACJ,EAAKA,iBACuB,OAA5B,EAAK1Z,MAAM+P,aACX,IACA,EAAK/P,MAAM+P,eAEhBjC,MAAK,WACF,EAAKvD,UACL,EAAKnJ,MAAMkP,kBACX,EAAKlP,MAAMgP,kBAAiB,MAE/BrC,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKwJ,MAAMgP,kBAAiB,MAE/BtC,MAAK,WACF,EAAK1M,MAAMuY,qB,EAIvBhB,SAAW,SAACvY,EAAQD,GACmB,IAA/B,EAAKiB,MAAMtC,SAASgB,SACpB,EAAKsB,MAAMtC,SAAS,GAAKsB,GAE7B,IAAIwZ,GAAS,EAGb,EAAKxY,MAAMtC,SAAS8G,KAAI,SAACpI,GAEjBA,EAAMH,KAAO8C,EAAO9C,IAAMG,EAAMnE,OAAS8G,EAAO9G,KAOhDmE,EAAMxB,OACNmE,EAAOnE,MAAwB,MAAhBmE,EAAOnE,KAAe,GAAK,KAAOmE,EAAOjG,OAExD0f,GAAS,GATTA,GAAS,KAYbA,IACA,EAAKF,iBACe,MAAhBvZ,EAAOnE,KACDmE,EAAOnE,KAAOmE,EAAOjG,KACrBiG,EAAOnE,KAAO,IAAMmE,EAAOjG,KACrC,EAAKkH,MAAMyY,kBAAkB,yBAC7B,EAAKL,e,EAIbM,aAAe,SAACxb,GACZA,EAAEwS,iBACF,EAAK1P,MAAMgP,kBAAiB,GAC5B,IAAMkH,EAAU,EAAKtX,MAAMsX,QAErBlM,EAAM,CACR2F,KAAM,GACNC,MAAO,IAGyB,QAAhC,EAAK5P,MAAMtC,SAAS,GAAGzF,KACvB+R,EAAI2F,KAAK,GAAK,EAAK3P,MAAMtC,SAAS,GAAGzB,GAErC+N,EAAI4F,MAAM,GAAK,EAAK5P,MAAMtC,SAAS,GAAGzB,IAO9B,IAFR,EAAK+D,MAAMhG,QAAQ2e,WAAU,SAACvc,GAC1B,OAAOA,EAAMtD,OAASod,OAIlB,IAFR,EAAKlW,MAAM7F,SAASwe,WAAU,SAACvc,GAC3B,OAAOA,EAAMtD,OAASod,MAG1B,EAAKlW,MAAM8I,eACP,MACA,QACA,+DACA,WAEJ,EAAK9I,MAAMgP,kBAAiB,IAE5BxC,IAAIC,KAAK,iBAAkB,CACvB5N,OAAQ,SACRmL,IAAKA,EACL4O,SAAU1C,IAETxJ,MAAK,WACF,EAAKvD,UACL,EAAKnJ,MAAMkP,kBACX,EAAKlP,MAAMgP,kBAAiB,MAE/BrC,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKwJ,MAAMgP,kBAAiB,O,EAK5C6J,sBAAwB,SAAC3b,GACrBA,EAAEwS,iBACF,EAAK1P,MAAMgP,kBAAiB,IAIhB,IAFR,EAAKhP,MAAMhG,QAAQ2e,WAAU,SAACvc,GAC1B,OAAOA,EAAMtD,OAAS,EAAK8F,MAAMoX,kBAGrC,EAAKhW,MAAM8I,eACP,MACA,QACA,6CACA,WAEJ,EAAK9I,MAAMgP,kBAAiB,IAE5BxC,IAAIqL,IAAI,aAAc,CAClBjd,MACyB,MAApB,EAAKoF,MAAMpF,KAAe,GAAK,EAAKoF,MAAMpF,MAC3C,IACA,EAAKgE,MAAMoX,gBAEdtJ,MAAK,WACF,EAAKvD,UACL,EAAKnJ,MAAMkP,kBACX,EAAKlP,MAAMgP,kBAAiB,MAE/BrC,OAAM,SAACjW,GACJ,EAAKsJ,MAAMgP,kBAAiB,GAE5B,EAAKhP,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,a,EAOpBsiB,oBAAsB,SAAC5b,GACnBA,EAAEwS,iBACF,EAAK1P,MAAMgP,kBAAiB,IAIhB,IAFR,EAAKhP,MAAMhG,QAAQ2e,WAAU,SAACvc,GAC1B,OAAOA,EAAMtD,OAAS,EAAK8F,MAAMqX,gBAGrC,EAAKjW,MAAM8I,eACP,MACA,QACA,uCACA,WAEJ,EAAK9I,MAAMgP,kBAAiB,IAE5BxC,IAAIC,KAAK,eAAgB,CACrB7R,MACyB,MAApB,EAAKoF,MAAMpF,KAAe,GAAK,EAAKoF,MAAMpF,MAC3C,IACA,EAAKgE,MAAMqX,cAEdvJ,MAAK,WACF,EAAKvD,UACL,EAAKnJ,MAAMkP,kBACX,EAAKlP,MAAMgP,kBAAiB,MAE/BrC,OAAM,SAACjW,GACJ,EAAKsJ,MAAMgP,kBAAiB,GAE5B,EAAKhP,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,a,EAOpBuiB,sBAAwB,SAAC7b,GACrBA,EAAEwS,iBACF,EAAK1P,MAAMgP,kBAAiB,GAC5BxC,IAAIC,KAAK,kBAAoB,EAAKzM,MAAMtC,SAAS,GAAGzB,GAAI,CACpD8T,IACgC,OAA5B,EAAKnR,MAAM+P,aACL,IACA,EAAK/P,MAAM+P,eAEpBjC,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,iCACA,WAEJ,EAAKK,UACL,EAAKnJ,MAAMgP,kBAAiB,MAE/BrC,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKwJ,MAAMgP,kBAAiB,O,EAIxCgK,eAAiB,SAAC9b,GACdA,EAAEwS,iBACF,EAAK1P,MAAMgP,kBAAiB,GAC5BxC,IAAIC,KAAK,aAAc,CACnB/K,IAAK,EAAK9C,MAAMyX,YAChBtG,IACgC,OAA5B,EAAKnR,MAAM+P,aACL,IACA,EAAK/P,MAAM+P,eAEpBjC,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,iCACA,WAEJ,EAAKK,UACL,EAAKnJ,MAAMgP,kBAAiB,MAE/BrC,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKwJ,MAAMgP,kBAAiB,O,EAIxCiK,cAAgB,SAAC1J,GACb,IAAM3U,EACc,MAAhB2U,EAAO3U,KACD2U,EAAO3U,KAAO2U,EAAOzW,KACrByW,EAAO3U,KAAO,IAAM2U,EAAOzW,KACrC,EAAK2d,SAAS,CACV9H,aAAc/T,EACdiU,iBAAkBU,EAAOzW,Q,EAIjCogB,mBAAqB,WACjB,EAAKlZ,MAAMuY,iBACX,EAAK9B,SAAS,CACVH,0BAA0B,K,EAIlCnN,QAAU,WACN,EAAKsN,SAAS,CACVT,cAAe,GACfC,YAAa,GACbC,QAAS,GACTvH,aAAc,GACdE,iBAAkB,GAClBsH,aAAa,EACbC,SAAU,GACVC,YAAa,GACbnM,SAAU,GACVoM,0BAA0B,EAC1BtX,OAAQ,KAEZ,EAAK0X,cAAgB,GACrB,EAAK1W,MAAMuY,kB,EAGfpG,aAAe,SAACrZ,GAAD,OAAU,SAACuQ,GACtB,EAAKoN,SAAL,eAAiB3d,EAAOuQ,EAAMtK,OAAOoU,Y,4CAGzC,WAAU,IAAD,OACG5S,EAAY5J,KAAKqJ,MAAjBO,QAER,OACI,6BACI,kBAAC,EAAD,MACA,kBAAC4Y,GAAA,EAAD,CACIrM,SAAUnW,KAAKiI,MAAM2X,iBACrBxJ,MAAOpW,KAAKqJ,MAAMwH,MAAQ7Q,KAAKqJ,MAAMwH,MAAMuF,MAAQ,EACnD5D,QAAS,WACL,EAAKsN,SAAS,CAAEF,iBAAkB,OAClC,EAAKpN,aAGb,kBAACkF,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAaE,UAC9B9N,QAASxS,KAAKwS,QACdwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,wCAIA,kBAACqS,EAAA,EAAD,KACI,0BAAM8K,SAAUziB,KAAKkiB,uBACjB,kBAAClE,EAAA,EAAD,CACI3H,WAAS,EACT3C,OAAO,QACPpO,GAAG,gBACHmQ,MAAM,2BACNnU,KAAK,OACLmE,MAAOzF,KAAKiI,MAAMI,OAClB6M,WAAS,MAIrB,kBAAC2D,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,kBAGR,kBAACkF,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAasC,gBAC9BlQ,QAASxS,KAAKwS,QACdwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,kCAEA,kBAACqS,EAAA,EAAD,KACI,0BAAM8K,SAAUziB,KAAKkiB,uBACjB,kBAAClE,EAAA,EAAD,CACI3H,WAAS,EACT3C,OAAO,QACPpO,GAAG,gBACHmQ,MAAM,iCACNnU,KAAK,OACLmE,MAAOzF,KAAKiI,MAAMoX,cAClBhK,SAAU,SAAC9O,GAAD,OAAO,EAAKsZ,kBAAkBtZ,IACxC2O,WAAS,MAIrB,kBAAC2D,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QAASvQ,KAAKkiB,sBACdpW,MAAM,UACNmK,SACiC,KAA7BjW,KAAKiI,MAAMoX,eACXrf,KAAKqJ,MAAMgQ,eALnB,eASKrZ,KAAKqJ,MAAMgQ,eACR,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBAQ3C,kBAAC8D,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAauC,cAC9BnQ,QAASxS,KAAKwS,QACdwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,4BAEA,kBAACqS,EAAA,EAAD,KACI,0BAAM8K,SAAUziB,KAAKmiB,qBACjB,kBAACnE,EAAA,EAAD,CACI3H,WAAS,EACT3C,OAAO,QACPpO,GAAG,cACHmQ,MAAM,2BACNnU,KAAK,OACLmE,MAAOzF,KAAKiI,MAAMqX,YAClBjK,SAAU,SAAC9O,GAAD,OAAO,EAAKsZ,kBAAkBtZ,IACxC2O,WAAS,MAIrB,kBAAC2D,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QAASvQ,KAAKmiB,oBACdrW,MAAM,UACNmK,SAC+B,KAA3BjW,KAAKiI,MAAMqX,aACXtf,KAAKqJ,MAAMgQ,eALnB,eASKrZ,KAAKqJ,MAAMgQ,eACR,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBAQ3C,kBAAC8D,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAaC,OAC9B7N,QAASxS,KAAKwS,QACdwC,kBAAgB,oBAChBC,SAAS,KACTC,WAAW,GAEX,kBAACsD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,sBACA,kBAACqS,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,oBACO,IACH,gCACoC,IAA/B5X,KAAKqJ,MAAMtC,SAASgB,OACf/H,KAAKqJ,MAAMtC,SAAS,GAAG5E,KACvB,IACA,IANd,kCASA,0BAAMsgB,SAAUziB,KAAK+hB,cACjB,kBAAC/D,EAAA,EAAD,CACI3H,WAAS,EACT3C,OAAO,QACPpO,GAAG,UACHmQ,MAAM,qBACNnU,KAAK,OACLmE,MAAOzF,KAAKiI,MAAMsX,QAClBlK,SAAU,SAAC9O,GAAD,OAAO,EAAKsZ,kBAAkBtZ,IACxC2O,WAAS,MAIrB,kBAAC2D,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QAASvQ,KAAK+hB,aACdjW,MAAM,UACNmK,SAC2B,KAAvBjW,KAAKiI,MAAMsX,SACXvf,KAAKqJ,MAAMgQ,eALnB,eASKrZ,KAAKqJ,MAAMgQ,eACR,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBAO3C,kBAACmE,EAAD,CACIpW,KAAM3B,KAAKqJ,MAAM+W,aAAawC,KAC9BpQ,QAASxS,KAAKwS,QACdkG,YAAa1Y,KAAKqJ,MAAMpF,KACxB8C,SAAU/G,KAAKqJ,MAAMtC,SACrBsS,cAAerZ,KAAKqJ,MAAMgQ,gBAG9B,kBAAC3B,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAayC,KAC9BrQ,QAASxS,KAAKwS,QACdwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,sBACA,kBAACmT,EAAA,EAAD,CACIC,YAAa1Y,KAAKqJ,MAAMpF,KACxB8C,SAAU/G,KAAKqJ,MAAMtC,SACrB4R,SAAU3Y,KAAKsiB,gBAGU,KAA5BtiB,KAAKiI,MAAM+P,cACR,kBAACL,EAAA,EAAD,CAAelO,UAAWG,EAAQkO,YAC9B,kBAACF,EAAA,EAAD,0BACQ,IACJ,gCAAS5X,KAAKiI,MAAMiQ,oBAIhC,kBAACW,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QAASvQ,KAAKyhB,WACd3V,MAAM,UACNmK,SACgC,KAA5BjW,KAAKiI,MAAM+P,cACXhY,KAAKqJ,MAAMgQ,eALnB,eASKrZ,KAAKqJ,MAAMgQ,eACR,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBAO3C,kBAAC8D,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAa0C,OAC9BtQ,QAASxS,KAAKwS,QACdwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,sBACA,kBAACmT,EAAA,EAAD,CACIC,YAAa1Y,KAAKqJ,MAAMpF,KACxB8C,SAAU/G,KAAKqJ,MAAMtC,SACrB4R,SAAU3Y,KAAKsiB,gBAGU,KAA5BtiB,KAAKiI,MAAM+P,cACR,kBAACL,EAAA,EAAD,CAAelO,UAAWG,EAAQkO,YAC9B,kBAACF,EAAA,EAAD,0BACQ,IACJ,gCAAS5X,KAAKiI,MAAMiQ,oBAIhC,kBAACW,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QAASvQ,KAAKuhB,aACdzV,MAAM,UACNmK,SACgC,KAA5BjW,KAAKiI,MAAM+P,cACXhY,KAAKqJ,MAAMgQ,eALnB,eASKrZ,KAAKqJ,MAAMgQ,eACR,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBAO3C,kBAAC8D,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAa2C,OAC9BvQ,QAASxS,KAAKwS,QACdwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,4BAEA,kBAACqS,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,sCAEoC,IAA/B5X,KAAKqJ,MAAMtC,SAASgB,QACjB,oCAAU/H,KAAKqJ,MAAMtC,SAAS,GAAG5E,KAAjC,KAEHnC,KAAKqJ,MAAMtC,SAASgB,OAAS,GAC1B,uCACM/H,KAAKqJ,MAAMtC,SAASgB,OAD1B,sBANR,iBAaJ,kBAAC8Q,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QAASvQ,KAAKqhB,aACdvV,MAAM,UACNmK,SAAUjW,KAAKqJ,MAAMgQ,eAHzB,eAMKrZ,KAAKqJ,MAAMgQ,eACR,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBAQ3C,kBAACyG,GAAD,CACI1Y,KAAM3B,KAAKqJ,MAAM+W,aAAavP,MAC9B2B,QAASxS,KAAKwS,QACd6G,cAAerZ,KAAKqJ,MAAMgQ,cAC1BhB,iBAAkBrY,KAAKqJ,MAAMgP,iBAC7BtR,SAAU/G,KAAKqJ,MAAMtC,WAGzB,kBAAC2Q,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAa4C,MAC9BxQ,QAASxS,KAAKwS,QACdwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,4BAEA,kBAACqS,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,KACoC,IAA/B5X,KAAKqJ,MAAMtC,SAASgB,QACjB,2BACIkb,UAAQ,EACR5P,IACIkN,KAAWrc,YACPlE,KAAKqJ,MAAMtI,SAASyf,UAElBnhB,IACA,kBACAW,KAAKqJ,MAAMtC,SAAS,GAAGvB,KACtBxF,KAAKqJ,MAAMtC,SAAS,GAAGvB,IAClB,SACAyb,mBAEkB,MADdjhB,KAAKqJ,MAAMtC,SAAS,GACf9C,KACCjE,KAAKqJ,MACAtC,SAAS,GACT9C,KACDjE,KAAKqJ,MACAtC,SAAS,GACT5E,KACTnC,KAAKqJ,MACAtC,SAAS,GACT9C,KACD,IACAjE,KAAKqJ,MACAtC,SAAS,GACT5E,MAEnB,IACN9C,IACA,iBACAW,KAAKqJ,MAAMtC,SAAS,GAAGzB,OAMjD,kBAACuT,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,kBAGR,kBAACkF,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAa8C,eAC9B1Q,QAASxS,KAAKwS,QACdwC,kBAAgB,oBAChBE,WAAS,GAET,kBAACsD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,oDAIA,kBAACqS,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,KACI,kBAACoG,EAAA,EAAD,CACIvI,MAAM,2BACNY,WAAS,EACTnB,WAAS,EACT5P,GAAG,cACH+P,SAAUrV,KAAK6f,kBACfsD,YAAY,wGAIxB,kBAACtK,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,gBACA,kBAACsG,EAAA,EAAD,CACIvI,QAASvQ,KAAKuiB,mBACdzW,MAAM,UACNmK,SACIjW,KAAKqJ,MAAMgQ,eACgB,KAA3BrZ,KAAKiI,MAAMyX,aALnB,wBAYR,kBAAChI,EAAA,EAAD,CACI/V,KAAM3B,KAAKiI,MAAM0X,yBACjBnN,QAASxS,KAAKwS,QACdwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,wCAGA,kBAACmT,EAAA,EAAD,CACIC,YAAa1Y,KAAKqJ,MAAMpF,KACxB8C,SAAU/G,KAAKqJ,MAAMtC,SACrB4R,SAAU3Y,KAAKsiB,gBAGU,KAA5BtiB,KAAKiI,MAAM+P,cACR,kBAACL,EAAA,EAAD,CAAelO,UAAWG,EAAQkO,YAC9B,kBAACF,EAAA,EAAD,0BACQ,IACJ,gCAAS5X,KAAKiI,MAAMiQ,oBAIhC,kBAACW,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QAASvQ,KAAKqiB,eACdvW,MAAM,UACNmK,SACgC,KAA5BjW,KAAKiI,MAAM+P,cACXhY,KAAKqJ,MAAMgQ,eALnB,2BASKrZ,KAAKqJ,MAAMgQ,eACR,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBAO3C,kBAAC8D,EAAA,EAAD,CACI/V,KAAM3B,KAAKqJ,MAAM+W,aAAagD,gBAC9B5Q,QAASxS,KAAKwS,QACdwC,kBAAgB,qBAEhB,kBAACwD,EAAA,EAAD,CAAalT,GAAG,qBAAhB,wCAGA,kBAACmT,EAAA,EAAD,CACIC,YAAa1Y,KAAKqJ,MAAMpF,KACxB8C,SAAU/G,KAAKqJ,MAAMtC,SACrB4R,SAAU3Y,KAAKsiB,gBAGU,KAA5BtiB,KAAKiI,MAAM+P,cACR,kBAACL,EAAA,EAAD,CAAelO,UAAWG,EAAQkO,YAC9B,kBAACF,EAAA,EAAD,0BACQ,IACJ,gCAAS5X,KAAKiI,MAAMiQ,oBAIhC,kBAACW,EAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKwS,SAAtB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIvI,QAASvQ,KAAKoiB,sBACdtW,MAAM,UACNmK,SACgC,KAA5BjW,KAAKiI,MAAM+P,cACXhY,KAAKqJ,MAAMgQ,eALnB,2BASKrZ,KAAKqJ,MAAMgQ,eACR,kBAACxB,EAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBAQ3C,kBAAC0K,GAAD,CACI3c,KAAM3B,KAAKqJ,MAAM+W,aAAaiD,WAC9B7Q,QAASxS,KAAKwS,QACdkG,YAAa1Y,KAAKqJ,MAAMpF,KACxB8C,SAAU/G,KAAKqJ,MAAMtC,SACrBsS,cAAerZ,KAAKqJ,MAAMgQ,gBAE9B,kBAACkF,GAAD,CACI5c,KAAM3B,KAAKqJ,MAAM+W,aAAakD,SAC9B9Q,QAASxS,KAAKwS,QACdkG,YAAa1Y,KAAKqJ,MAAMpF,KACxB8C,SAAU/G,KAAKqJ,MAAMtC,SACrBsS,cAAerZ,KAAKqJ,MAAMgQ,gBAE9B,kBAACsF,GAAD,CACIhd,KAAM3B,KAAKqJ,MAAM+W,aAAamD,SAC9B/Q,QAASxS,KAAKwS,QACdzL,SAAU/G,KAAKqJ,MAAMtC,SACrBsS,cAAerZ,KAAKqJ,MAAMgQ,qB,GAjlChBmK,aA4lCxBC,GAASC,aAnoCS,SAACzb,GACrB,MAAO,CACHhE,KAAMgE,EAAM5F,UAAU4B,KACtB8C,SAAUkB,EAAMrE,SAASmD,SACzBqZ,aAAcnY,EAAM7E,WAAWmU,OAC/B8B,cAAepR,EAAM7E,WAAWiW,cAChChW,QAAS4E,EAAMrE,SAASP,QACxBG,SAAUyE,EAAMrE,SAASJ,SACzB2c,WAAYlY,EAAMrE,SAASgD,UAC3BC,UAAWoB,EAAMrE,SAASiD,UAC1BC,UAAWmB,EAAMrE,SAASkD,UAC1B8N,QAAS3M,EAAM7E,WAAWmU,OAAO3C,QACjC6C,YAAaxP,EAAM7E,WAAWmU,OAAOE,gBAIlB,SAACxU,GACxB,MAAO,CACH2e,eAAgB,WACZ3e,EAAS2e,gBAEbzP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,KAEvDuM,iBAAkB,SAACpB,GACfhU,EAASoV,YAAiBpB,KAE9BsB,gBAAiB,WACbtV,EAASsV,gBAEb6I,eAAgB,WACZne,EAASme,gBAEbU,kBAAmB,SAACtK,GAChBvU,EAAS6e,YAAkBtK,QAimCxBkM,CAGbnK,aAxpCa,SAACzQ,GAAD,MAAY,CACvB2K,QAAS,CACLC,OAAQ5K,EAAM6K,QAAQ,GACtBjE,SAAU,YAEdkE,eAAgB,CACZ9H,MAAOhD,EAAMe,QAAQgK,UAAUC,MAC/BpE,SAAU,WACVqE,IAAK,MACLC,KAAM,MACNM,WAAY,GACZ+C,YAAa,IAEjBS,WAAY,CACR7O,QAAS,yBA0oCfsQ,CAAmBoK,aAAWvE,MAEjBqE,c,2EChrCFG,EAAwB,SAACnb,GAClC,MAAO,CACHnH,KAAM,yBACNmH,YAIKob,EAAqB,SAACtb,GAC/B,MAAO,CACHjH,KAAM,uBACNiH,YAIKub,EAAoB,SAACvb,GAC9B,MAAO,CACHjH,KAAM,sBACNiH,YAmBKwb,EAAc,WACvB,OAAO,SAAC9gB,EAAUC,GAAc,IAAD,EAMvBA,IAJY6D,EAFW,EAEvBnD,SAAYmD,SAEIyZ,EAJO,EAGvBwD,OACIjjB,SAAYyf,SAGdyD,EAAU1D,IAAWrc,YAAYsc,GACvC,GAAIyD,EAAS,CACT,IAAKrjB,IAAKuE,QAGN,OAFAlC,EAASkP,EAAe,MAAO,QAAS,2BAAQ,iBAChDlP,EAASihB,EAAkB,QAAQ,IAGvC,IAAMC,EAAOvjB,IAAKgE,UAClB,IAAKhE,IAAKuE,SAAWgf,IAASA,EAAKtD,MAAMuD,cAGrC,OAFAnhB,EAASkP,EAAe,MAAO,QAAS,2BAAQ,iBAChDlP,EAASihB,EAAkB,QAAQ,IAK3CjhB,EAASihB,EAAkB,QAAQ,IACnC,IAAMG,EACmB,MAArBtd,EAAS,GAAG9C,KACN8C,EAAS,GAAG9C,KAAO8C,EAAS,GAAG5E,KAC/B4E,EAAS,GAAG9C,KAAO,IAAM8C,EAAS,GAAG5E,KAC/C,OAAQmiB,YAAcvd,EAAS,GAAG5E,OAC9B,IAAK,MAED,YADAc,EAASshB,EAAexd,EAAS,KAErC,IAAK,QACD,OAAIkd,OACAhhB,EACIiW,YACInS,EAAS,GAAGvB,IACR,aACAyb,mBAAmBla,EAAS,GAAG5E,MAC/B,eACA8e,mBAAmBoD,UAKnCphB,EACIiW,YACI,UACI+H,mBAAmBoD,GACnB,OACAtd,EAAS,GAAGzB,KAI5B,IAAK,QAED,YADArC,EAASuhB,KAEb,IAAK,QACD,OAAIP,OACAhhB,EACIiW,YACInS,EAAS,GAAGvB,IACR,eACAyb,mBAAmBla,EAAS,GAAG5E,MAC/B,eACA8e,mBAAmBoD,UAKnCphB,EACIiW,YACI,YACI+H,mBAAmBoD,GACnB,OACAtd,EAAS,GAAGzB,KAI5B,IAAK,MACD,OAAI2e,OACAhhB,EACIiW,YACInS,EAAS,GAAGvB,IACR,aACAyb,mBAAmBla,EAAS,GAAG5E,MAC/B,eACA8e,mBAAmBoD,UAKnCphB,EACIiW,YACI,UACI+H,mBAAmBoD,GACnB,OACAtd,EAAS,GAAGzB,KAI5B,IAAK,OACD,OAAI2e,OACAhhB,EACIiW,YACInS,EAAS,GAAGvB,IACR,cACAyb,mBAAmBla,EAAS,GAAG5E,MAC/B,eACA8e,mBAAmBoD,UAKnCphB,EACIiW,YACI,WACI+H,mBAAmBoD,GACnB,OACAtd,EAAS,GAAGzB,KAI5B,IAAK,OACD,OAAI2e,OACAhhB,EACIiW,YACInS,EAAS,GAAGvB,IACR,cACAyb,mBAAmBla,EAAS,GAAG5E,MAC/B,eACA8e,mBAAmBoD,UAKnCphB,EACIiW,YACI,WACI+H,mBAAmBoD,GACnB,OACAtd,EAAS,GAAGzB,KAI5B,QAEI,YADArC,EAAS6e,EAAkB,+CAM9B2C,EAAa,SAACpd,EAAMqL,EAAOgS,GAAe,IAC3CC,EAA+BjS,EAA/BiS,QAASC,EAAsBlS,EAAtBkS,QAASC,EAAanS,EAAbmS,SAC1B,OAAO,SAAC5hB,EAAUC,GAEd,KAAI,CAACyhB,EAASC,EAASC,GAAUvhB,OAAOiP,SAASxK,OAAS,GAA1D,CAGA,IAAM+c,EAAYhW,cACVlL,EAAaV,IAAbU,SAEJmD,EAKAnD,EALAmD,SACAK,EAIAxD,EAJAwD,WACA/D,EAGAO,EAHAP,QACAG,EAEAI,EAFAJ,SAEAI,EADA2D,iBAEJ,GACIsd,IACCF,IACAC,GACmB,IAApB7d,EAASgB,QAETV,EAAK/F,OAAS8F,EAAWC,KAAK/F,KAChC,CAGE2B,EAAS2gB,EAAsB7c,EAAS8G,KAAI,SAACgB,GAAD,OAAOA,EAAEvJ,QAErD,IAAMyf,EAAQ9a,KAAK6T,IAAI1W,EAAWE,MAAOod,GACnCM,EAAM/a,KAAKgb,IAAI7d,EAAWE,MAAOod,GAEjCQ,GADqB,QAAd7d,EAAK/F,KAAiB+B,EAAUG,GACfyJ,MAAM8X,EAAOC,EAAM,GACjD,OAAO/hB,EAAS4gB,EAAmBqB,IAIvC,OAFAjiB,EAzMqB,SAACoE,EAAMC,GAChC,MAAO,CACHhG,KAAM,kBACN+F,OACAC,SAqMS6d,CAAc9d,EAAMqd,IAC7BzhB,EAlM2B,SAACsE,GAChC,MAAO,CACHjG,KAAM,yBACNiG,oBA+LS6d,CAAoB,KACxBT,IAAYG,GAAeF,GAAWE,EAM5B7hB,GADW,IAHD8D,EAASib,WAAU,SAACvc,GACrC,OAAOA,EAAMH,KAAO+B,EAAK/B,MAGTse,EAAsB,CAACvc,EAAK/B,KAEhCue,EAAmB,CAACxc,KAGjCpE,EAAS6gB,EAAkB,CAACzc,QCxP3C,o5CAEO,IAAMge,EAAe,SAACphB,EAAMqhB,GAC/B,MAAO,CACHhkB,KAAM,gBACN2C,OACAqhB,qBAIKC,EAAa,SAACthB,GACvB,OAAO,SAAChB,EAAUC,GACd,IAAM+E,EAAQ/E,IACRoiB,EAAmBrhB,IAASgE,EAAM5F,UAAU4B,KAClDhB,EAASoiB,EAAaphB,EAAMqhB,MAIvBE,EAAa,WACtB,OAAO,SAACviB,EAAUC,GACd,IAAM+E,EAAQ/E,IACRuiB,EAAYxd,EAAM5F,UAAU4B,KAAK+I,MAAM,KAC7CyY,EAAUvX,MACV,IAAMwX,EAA+B,IAArBD,EAAU1d,OAAe,IAAM0d,EAAUvY,KAAK,KACxDoY,EAAmBI,IAAYzd,EAAM5F,UAAU4B,KACrDhB,EAASoiB,EAAaK,EAASJ,MAI1BK,EAAqB,SAAChkB,GAC/B,MAAO,CACHL,KAAM,gBACNK,KAAMA,IAIDikB,EAAc,SAACvd,EAAQD,GAChC,MAAO,CACH9G,KAAM,gBACN+G,OAAQA,EACRD,OAAQA,IAIH8I,EAAmB,SAACzP,GAC7B,MAAO,CACHH,KAAM,qBACNG,OAAQA,IAIHwO,EAAqB,WAC9B,MAAO,CACH3O,KAAM,yBAID4iB,EAAoB,SAAC5iB,EAAMK,GACpC,MAAO,CACHL,KAAM,sBACNukB,SAAUvkB,EACVK,KAAMA,IAIDmkB,EAA4B,SAAC7O,GACtC,MAAO,CACH3V,KAAM,+BACN2V,OAAQA,IAIH8O,EAAoB,SAAC9O,EAAQhW,GACtC,MAAO,CACHK,KAAM,sBACN2V,OAAQA,EACRhW,IAAKA,IAIA+kB,EAAyB,WAClC,MAAO,CACH1kB,KAAM,8BAID2kB,EAAuB,WAChC,MAAO,CACH3kB,KAAM,4BAID4kB,EAAiB,SAACC,GAC3B,MAAO,CACH7kB,KAAM,mBACN6kB,OAAQA,IAIH5U,EAAsB,SAAC4U,GAChC,MAAO,CACH7kB,KAAM,yBACN6kB,OAAQA,IAIHC,EAAmB,WAC5B,MAAO,CACH9kB,KAAM,uBAID+P,EAAmB,SAAC7L,GAC7B,MAAO,CACHlE,KAAM,qBACNkE,IAAKA,IAIA6gB,EAAiB,WAC1B,MAAO,CACH/kB,KAAM,qBAIDglB,EAAmB,WAC5B,MAAO,CACHhlB,KAAM,uBAIDilB,EAAkB,WAC3B,MAAO,CACHjlB,KAAM,sBAIDklB,EAAc,SAAC1d,GACxB,MAAO,CACHxH,KAAM,cACNwH,MAAOA,IAIF2d,EAAmB,SAACxP,GAC7B,MAAO,CACH3V,KAAM,qBACN2V,OAAQA,IAIHuN,EAAkB,WAC3B,MAAO,CACHljB,KAAM,sBAIDolB,EAA2B,WACpC,MAAO,CACHplB,KAAM,gCAIDqlB,EAA4B,WACrC,MAAO,CACHrlB,KAAM,iCAIDslB,EAAuB,WAChC,MAAO,CACHtlB,KAAM,2BAIDulB,EAAqB,WAC9B,MAAO,CACHvlB,KAAM,yBAIDwlB,EAAqB,WAC9B,MAAO,CACHxlB,KAAM,yBAIDylB,EAAsB,WAC/B,MAAO,CACHzlB,KAAM,2BAID0lB,EAAiB,WAC1B,MAAO,CACH1lB,KAAM,qBAIDwgB,EAAoB,SAACtK,GAC9B,MAAO,CACHlW,KAAM,sBACNkW,KAAMA,IAIDoK,EAAiB,WAC1B,MAAO,CACHtgB,KAAM,qBAID6Q,EAAiB,SAACF,EAAUC,EAAYjR,EAAK6K,GACtD,MAAO,CACHxK,KAAM,kBACN2Q,SAAUA,EACVC,WAAYA,EACZjR,IAAKA,EACL6K,MAAOA,IAIFmb,EAAqB,WAC9B,MAAO,CACH3lB,KAAM,yBAID+W,EAAmB,SAACpB,GAC7B,MAAO,CACH3V,KAAM,qBACN2V,OAAQA,IAIHsB,EAAkB,WAC3B,MAAO,CACHjX,KAAM,sBAID4lB,EAAe,SAACvf,GACzB,MAAO,CACHrG,KAAM,iBACNqG,SAAUA,IAIL4c,EAAiB,SAAC9c,GAC3B,MAAO,CACHnG,KAAM,mBACNmG,MAAOA,IAIF2Z,EAAiB,WAC1B,MAAO,CACH9f,KAAM,oBAID6lB,EAAW,WACpB,MAAO,CACH7lB,KAAM,cAID8lB,EAAgB,SAACC,GAC1B,MAAO,CACH/lB,KAAM,kBACN+lB,OAAQA,K,iPClQVze,EAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,IAVZ,GAYN+W,OAAQ,CACJC,aAAc,OAElBjO,KAAM,CACFlQ,gBAAiB,QACjBme,aAAc,OAElB,UAAW,CACP,eAAgB,CACZC,UAAW,uBASR,SAASC,IAAc,IAAD,EACH5hB,mBAAS,IADN,mBAC1BgU,EAD0B,KACjB6N,EADiB,OAEL7hB,mBAAS,IAFJ,mBAE1BkR,EAF0B,KAElB4Q,EAFkB,OAGH9hB,oBAAS,GAHN,mBAG1B6O,EAH0B,KAGjBC,EAHiB,KAI3BiT,EAAOC,cACPC,EAAMtN,IAAMuN,YACZlnB,EAAWmnB,cACXC,EAVC,IAAIC,gBAAgBF,cAAcG,QAWjC/iB,EAAOgjB,cAAPhjB,GAEFrC,EAAW6M,cACXyY,EAAcvY,uBAChB,SAACI,GAAD,OAAWnN,EAASulB,YAAepY,MACnC,CAACnN,IAEC6R,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGLoD,qBAAU,WACN,GAAKka,IAAWrc,YAAYnD,EAASyf,UAIjC+H,EAAYJ,EAAMnJ,IAAI,aAJsB,CAC5C,IAAM/a,EAAOkkB,EAAMnJ,IAAI,KAAKhS,MAAM,KAClCub,EAAYtkB,EAAKA,EAAK8D,OAAS,OAKpC,CAAC+f,EAAKW,OAAO,GAAI1nB,IAEpBsF,qBAAU,WACN,IAAIqiB,EAAa,iBAAmBP,EAAMnJ,IAAI,MAC1CuB,IAAWrc,YAAYnD,EAASyf,YAChCkI,EAAa,kBAAoBpjB,EACD,KAA5B6iB,EAAMnJ,IAAI,gBACV0J,GACI,SAAWzH,mBAAmBkH,EAAMnJ,IAAI,iBAIpDnK,GAAW,GACXgB,IAAImJ,IAAI0J,EAAY,CAAEC,aAAc,gBAC/B5S,MAAK,SAACxV,GACH,IACMqoB,EADS,IAAIC,EAAOtoB,EAASE,QAAS,UACpB8M,WACxBqa,EAAWgB,MAEd5S,OAAM,SAACjW,GACJ+U,EACI,MACA,QACA,yDAAc/U,EAAMF,QACpB,YAGPkW,MAAK,WACFlB,GAAW,QAGpB,CAACiT,EAAKW,OAAO,KAEhB,IAAMK,EAAW,SAACzhB,GAAD,OACb,IAAInG,SAAQ,SAAC6nB,EAAS5nB,GAClB,IAAM6nB,EAAS,IAAIC,WACnBD,EAAOE,cAAc7hB,GACrB2hB,EAAOG,OAAS,kBAAMJ,EAAQC,EAAO3a,SACrC2a,EAAOI,QAAU,SAACrpB,GAAD,OAAWoB,EAAOpB,QAGrCspB,EAAO,WACTxB,EAAU,WACVhS,IAAIqL,IAAI,gBAAkBiH,EAAMnJ,IAAI,MAAOjF,GACtChE,MAAK,WACF8R,EAAU,WACV9S,YAAW,kBAAM8S,EAAU,MAAK,QAEnC7R,OAAM,SAACjW,GACJ8nB,EAAU,IACV/S,EAAe,MAAO,QAAS/U,EAAMF,QAAS,aAIpDypB,EAAM,uCAAG,WAAOC,GAAP,SAAAznB,EAAA,kEACXkmB,EAAI9I,QADO,KACUqK,EAAMpnB,KADhB,SAC4B2mB,EAASS,GADrC,wBACCC,SADD,qBAEXC,QAAQtf,IAAIof,GAFD,2CAAH,sDAKN3f,EAAUhB,IAChB,OACI,yBAAKa,UAAWG,EAAQ0d,QACpB,kBAAC,IAAD,CAAO7d,UAAWG,EAAQ4P,KAAMkQ,UAAW,GACtC9U,GAAW,kBAAC,IAAD,OACVA,GACE,kBAAC,IAAD,CACI+U,IAAK3B,EACLviB,MAAOsU,EACP6P,OAAQ,kBAAMP,KACdC,OAAQ,SAACC,GAAD,OAAWD,EAAOC,IAC1BlU,SAAU,SAAC5P,GAAD,OAAWmiB,EAAWniB,IAChCokB,QAAS,CACLC,IAAI,EACJC,IAAI,EACJC,IAAI,EACJC,IAAI,EACJC,KAAK,EACLC,MAAM,EACNrqB,MAAM,EACNub,SAAS,EACT+O,QAAQ,EAERC,MAAM,EACNC,MAAM,EACNjB,MAAM,EAENkB,UAAU,OAKxBhK,IAAWrc,YAAYnD,EAASyf,WAC9B,kBAAC,IAAD,CAAYjQ,QAAS8Y,EAAMpS,OAAQA,Q,kRCpJ7CuT,EAAe9P,IAAM+P,MAAK,kBAC5B,4DAGE7hB,EAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,IAVZ,GAYNia,OAAQ,CACJjD,aAAc,OAElB,UAAW,CACP,kBAAmB,CACfA,aAAc,kBAGtBkD,YAAa,CACTjX,OAAQ,qBAEZkX,OAAQ,CACJC,UAAW,aAQJ,SAASC,IAAc,IAAD,EACH/kB,mBAAS,IADN,mBAC1BgU,EAD0B,KACjB6N,EADiB,OAEL7hB,mBAAS,IAFJ,mBAE1BkR,EAF0B,KAElB4Q,EAFkB,OAGH9hB,oBAAS,GAHN,mBAG1B6O,EAH0B,KAGjBC,EAHiB,OAIL9O,mBAAS,cAJJ,mBAI1BoF,EAJ0B,KAIlB4f,EAJkB,KAM3BjD,EAAOC,cACPhnB,EAAWmnB,cACXC,EAXC,IAAIC,gBAAgBF,cAAcG,QAYjC/iB,EAAOgjB,cAAPhjB,GACFwD,EAAQa,cAER1G,EAAW6M,cACXyY,EAAcvY,uBAChB,SAACI,GAAD,OAAWnN,EAASulB,YAAepY,MACnC,CAACnN,IAEC6R,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGLoD,qBAAU,WACN,GAAKka,IAAWrc,YAAYnD,EAASyf,UAK9B,CACH,IAAMwK,EAAY7C,EAAMnJ,IAAI,QAAQhS,MAAM,KAC1C+d,EAAUE,IAAkBD,EAAU9c,QACtCqa,EAAYJ,EAAMnJ,IAAI,aARsB,CAC5C,IAAM/a,EAAOkkB,EAAMnJ,IAAI,KAAKhS,MAAM,KAC5Bge,EAAY7C,EAAMnJ,IAAI,KAAKhS,MAAM,KACvC+d,EAAUE,IAAkBD,EAAU9c,QACtCqa,EAAYtkB,EAAKA,EAAK8D,OAAS,OAOpC,CAAC+f,EAAKW,OAAO,GAAI1nB,IAEpBsF,qBAAU,WACN,IAAIqiB,EAAa,iBAAmBP,EAAMnJ,IAAI,MAC1CuB,IAAWrc,YAAYnD,EAASyf,YAChCkI,EAAa,kBAAoBpjB,EACD,KAA5B6iB,EAAMnJ,IAAI,gBACV0J,GACI,SAAWzH,mBAAmBkH,EAAMnJ,IAAI,iBAIpDnK,GAAW,GACXgB,IAAImJ,IAAI0J,EAAY,CAAEC,aAAc,gBAC/B5S,MAAK,SAACxV,GACH,IACMqoB,EADS,IAAIC,EAAOtoB,EAASE,QAAS,UACpB8M,WACxBqa,EAAWgB,MAEd5S,OAAM,SAACjW,GACJ+U,EACI,MACA,QACA,yDAAc/U,EAAMF,QACpB,YAGPkW,MAAK,WACFlB,GAAW,QAGpB,CAACiT,EAAKW,OAAO,KAEhB,IAaM7e,EAAUhB,IACV1E,EAAcqc,IAAWrc,YAAYnD,EAASyf,UACpD,OACI,yBAAK/W,UAAWG,EAAQ0d,QACpB,kBAAC,IAAD,CAAO7d,UAAWG,EAAQ4P,KAAMkQ,UAAW,GACvC,yBAAKjgB,UAAWG,EAAQghB,QACpB,kBAAC,IAAD,CAAanhB,UAAWG,EAAQ+gB,aAC5B,kBAAC,IAAD,CACIjN,QAAQ,2BACRpY,GAAG,qBACHG,MAAO0F,EACPkK,SAAU,SAAC9O,GAAD,OAAOwkB,EAAUxkB,EAAE6B,OAAO3C,SAEnCylB,MAAM/e,KACH,IAAIgf,IACA/qB,OAAOgrB,KAAKH,KAAmBpd,KAAI,SAAC0H,GAChC,OAAO0V,IAAkB1V,QAGnC1H,KAAI,SAACmd,GAAD,OAEF,kBAAC,IAAD,CAAUvlB,MAAOulB,GACZA,SAMrB,kBAAC,IAAD,MACCpW,GAAW,kBAAC,IAAD,OACVA,GACE,kBAAC,WAAD,CAAUyW,SAAU,kBAAC,IAAD,OAChB,kBAACb,EAAD,CACIpX,OAAO,MACP7Q,SAAU4I,EACVrC,MAC2B,SAAvBA,EAAMe,QAAQvI,KAAkB,UAAY,KAEhDmE,MAAOsU,EACPkF,QAAS,CACLqM,SAAUpnB,EACVqnB,qBAAsB3hB,EAAQ8gB,QAElCrV,SAAU,SAAC5P,GAAD,OAAWmiB,EAAWniB,SAK9CvB,GAAe,kBAAC,IAAD,CAAYqM,QA7DxB,WACTsX,EAAU,WACVhS,IAAIqL,IAAI,gBAAkBiH,EAAMnJ,IAAI,MAAOjF,GACtChE,MAAK,WACF8R,EAAU,WACV9S,YAAW,kBAAM8S,EAAU,MAAK,QAEnC7R,OAAM,SAACjW,GACJ8nB,EAAU,IACV/S,EAAe,MAAO,QAAS/U,EAAMF,QAAS,aAoDNoX,OAAQA,Q,0DCtLhE,sXAAO,IAAMuU,EAAmB,CAC5B,MACA,MACA,MACA,MACA,OACA,MACA,QAESC,EAAqB,CAC9B,MACA,OACA,MACA,MACA,OACA,OACA,OAESC,EAAqB,CAAC,MAAO,OAE7BC,EAAqB,CAAC,MAAO,MAAO,QACpCC,EAAmB,CAAC,OACpBC,EAAa,CAAC,KAAM,OACpBZ,EAAoB,CAC7Ba,KAAM,OACNC,IAAK,MACLC,GAAI,SACJC,IAAK,MACLC,IAAK,MACL7f,EAAG,MACH8f,EAAG,MACHC,GAAI,SACJC,IAAK,MACLC,WAAY,aACZC,GAAI,KACJC,KAAM,OACNC,IAAK,MACLC,KAAM,OACNC,GAAI,aACJC,IAAK,aACLC,KAAM,OACNC,IAAK,MACLC,GAAI,QACJC,IAAK,MACLC,IAAK,MACLC,KAAM,QAEGC,EAAY,CACrBC,MAAO,CAAC,MAAO,OAAQ,MAAO,MAAO,MAAO,OAC5CC,MAAO,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,KAAM,OAAQ,MAAO,OAChEC,MAAO,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,MAAO,MAAO,QACjEC,IAAK,CAAC,OACNC,KAAM,CAAC,MAAO,QACdC,IAAK,CAAC,MAAO,QACbC,MAAO,CAAC,MAAO,OAAQ,OACvBlW,KAAM,CAAC,MAAO,KAAM,QACpBmW,QAAS,CAAC,WACVC,IAAK,CAAC,MAAO,KAAM,MAAO,MAAO,MACjCC,OAAQ,CAAC,OACTC,QAAS,CAAC,OACV/B,IAAK,CAAC,OACNQ,GAAI,CAAC,MACLwB,OAAQ,CAAC,MACT7B,IAAK,CAAC,OACN7f,EAAG,CAAC,KACJsgB,GAAI,CAAC,KAAM,QAEFqB,EAAgB,CACzBC,MAAO,eACPC,OAAQ,eACRC,MAAO,eACPC,MAAO,qBACPC,IAAK,yBACLC,IAAK,qBACLC,SAAU,WACVC,GAAI,aAEKlK,EAAgB,SAACniB,GAC1B,IAAMgJ,EAAShJ,EAAK6K,MAAM,KAAKkB,MAAMugB,cACrC,OAA0C,IAAtCjD,EAAiBxgB,QAAQG,GAClB,OACwC,IAAxCsgB,EAAmBzgB,QAAQG,GAC3B,SACwC,IAAxCugB,EAAmB1gB,QAAQG,GAC3B,SACwC,IAAxCwgB,EAAmB3gB,QAAQG,GAC3B,SACgC,IAAhC0gB,EAAW7gB,QAAQG,GACnB,QACsC,IAAtCygB,EAAiB5gB,QAAQG,GACzB,OACoD,IAApD/K,OAAOgrB,KAAKH,GAAmBjgB,QAAQG,IACvC,QAIFujB,EAAY,SAACvsB,GACtB,IAAMgJ,EAAShJ,EAAK6K,MAAM,KAAKkB,MAAMugB,cACrC,OAA2C,IAAvCtB,EAAUQ,QAAQ3iB,QAAQG,IAMrBwjB,EAAiB,SAACxsB,GAE3B,MAAkB,QADHA,EAAK6K,MAAM,KAAKkB,MAAMugB,eAInCG,EAAa,CAAC,qBAAO,qBAAO,eAAM,eAAM,sBACxCC,EAAW,CAAC,eAAM,qBAAO,2BAAQ,uCAAU,wCAC3CC,EAAe,CACjB,qBACA,qBACA,2BACA,qBACA,qBACA,qBACA,sBAGSC,EAAgB,SAAC9X,GAC1B,OAAO2X,EAAW3X,IAGT+X,EAAc,SAAC/X,GACxB,OAAO4X,EAAS5X,IAGPgY,EAAkB,SAAC3tB,EAAM2V,GAClC,OAAa,IAAT3V,EACO,uBAAU2V,EAAS,GAAK,sBAE5B6X,EAAa7X,IAGX3B,EAAgB,CACzB,2BACA,2BACA,eACA,uCACA,iB,yPC/GE4Z,EAAc,CAChBC,QAASC,IACTC,QAASC,IACTvvB,MAAOwvB,IACPC,KAAMC,KAwEV,IAAMC,EAA2BnW,aArEjB,SAACzQ,GAAD,MAAY,CACxBqmB,QAAS,CACL7lB,gBAAiBR,EAAMe,QAAQslB,QAAQQ,MAE3C5vB,MAAO,CACHuJ,gBAAiBR,EAAMe,QAAQ9J,MAAMwJ,MAEzCimB,KAAM,CACFlmB,gBAAiBR,EAAMe,QAAQ2lB,KAAKG,MAExCN,QAAS,CACL/lB,gBAAiBR,EAAMe,QAAQwlB,QAAQM,MAE3CpgB,KAAM,CACF8C,SAAU,IAEdud,YAAa,CACTpgB,QAAS,GACTiB,YAAa3H,EAAM6K,QAAQ,IAE/B9T,QAAS,CACLuU,QAAS,OACTF,WAAY,aA+CaqF,EA3CjC,SAA2BlQ,GAAQ,IACvBO,EAA4DP,EAA5DO,QAASH,EAAmDJ,EAAnDI,UAAW5J,EAAwCwJ,EAAxCxJ,QAAS2S,EAA+BnJ,EAA/BmJ,QAASmD,EAAsBtM,EAAtBsM,QAAYjO,EAD5B,YACsC2B,EADtC,uDAExBwmB,EAAOX,EAAYvZ,GAEzB,OACI,kBAAC,IAAD,eACIlM,UAAW6G,IAAW1G,EAAQ+L,GAAUlM,GACxCqmB,mBAAiB,kBACjBjwB,QACI,0BAAMyF,GAAG,kBAAkBmE,UAAWG,EAAQ/J,SAC1C,kBAACgwB,EAAD,CACIpmB,UAAW6G,IACP1G,EAAQ2F,KACR3F,EAAQgmB,eAGf/vB,GAGTqI,OAAQ,CACJ,kBAAC,IAAD,CACI1C,IAAI,QACJ4P,aAAW,QACXtJ,MAAM,UACNrC,UAAWG,EAAQmmB,MACnBxf,QAASiC,GAET,kBAAC,IAAD,CAAW/I,UAAWG,EAAQ2F,UAGlC7H,OAmBVsoB,E,4MACF/nB,MAAQ,CACJtG,MAAM,G,EAGVse,iCAAmC,SAACC,GAC5BA,EAAU+P,SAASC,SAAW,EAAK7mB,MAAM4mB,SAASC,QAClD,EAAKpQ,SAAS,CAAEne,MAAM,K,EAI9BwuB,YAAc,WACV,EAAKrQ,SAAS,CAAEne,MAAM,K,4CAG1B,WACI,OACI,kBAAC,IAAD,CACIyuB,aAAc,CACVne,SAAUjS,KAAKqJ,MAAM4mB,SAAShe,SAC9BC,WAAYlS,KAAKqJ,MAAM4mB,SAAS/d,YAEpCvQ,KAAM3B,KAAKiI,MAAMtG,KACjB0uB,iBAAkB,IAClB7d,QAASxS,KAAKmwB,aAEd,kBAACT,EAAD,CACIld,QAASxS,KAAKmwB,YACdxa,QAAS3V,KAAKqJ,MAAM4mB,SAASnkB,MAC7BjM,QAASG,KAAKqJ,MAAM4mB,SAAShvB,W,GA7BjBuiB,aAoC1B8M,EAAW5M,aAhIO,SAACzb,GACrB,MAAO,CACHgoB,SAAUhoB,EAAM7E,WAAW6sB,aAIR,WACvB,MAAO,KAyHMvM,CAGfnK,aA5Ca,SAACzQ,GAAD,MAAY,CACvB4K,OAAQ,CACJA,OAAQ5K,EAAM6K,QAAQ,OA0C5B4F,CAAmByW,IAENM,O,0OC/ETC,E,4MACFJ,YAAc,WACV,EAAK9mB,MAAM6c,eAAe,O,EAG9BsK,QAAU,SAACzlB,GACPjK,OAAOC,SAASC,KAAO+J,G,EAG3B0lB,OAAS,WACL5a,IAAIyL,OAAO,kBACNvL,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,uCACA,WAEJvR,IAAKC,UACLC,OAAOC,SAAS2vB,SAChB,EAAKrnB,MAAMod,kBAAiB,MAE/BzQ,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,cAGPkW,MAAK,WACF,EAAKoa,kB,4CAIjB,WAAU,IAAD,OACGvmB,EAAY5J,KAAKqJ,MAAjBO,QACFua,EAAOvjB,IAAKgE,UACZR,EAAcmc,IAAWnc,YAC3BpE,KAAKqJ,MAAMtI,SAASyf,UAGxB,OACI,kBAACmQ,EAAA,EAAD,CACIhvB,KAA8B,OAAxB3B,KAAKqJ,MAAMiJ,SACjBE,QAASxS,KAAKmwB,YACd7d,SAAUtS,KAAKqJ,MAAMiJ,SACrB8d,aAAc,CACVne,SAAU,SACVC,WAAY,SAEhB0e,gBAAiB,CACb3e,SAAU,MACVC,WAAY,WAGdtR,IAAKuE,SACH,yBAAKsE,UAAWG,EAAQinB,aACpB,kBAAC/U,EAAA,EAAD,MACA,kBAAC6B,EAAA,EAAD,CACIpN,QAAS,kBAAM,EAAKlH,MAAM+B,QAAQ8N,KAAK,YAEvC,kBAACiD,EAAA,EAAD,KACI,kBAAC,IAAD,OAJR,gBAQA,kBAACwB,EAAA,EAAD,CACIpN,QAAS,kBAAM,EAAKlH,MAAM+B,QAAQ8N,KAAK,aAEvC,kBAACiD,EAAA,EAAD,KACI,kBAAC,IAAD,OAJR,iBAUPvb,IAAKuE,SACF,6BACI,yBAAKsE,UAAWG,EAAQknB,QACpB,yBAAKrnB,UAAWG,EAAQmnB,sBACpB,kBAACC,EAAA,EAAD,CACIvnB,UAAWG,EAAQqnB,YACnB5d,IACI,uBAAyB8Q,EAAK7e,GAAK,QAI/C,yBAAKmE,UAAWG,EAAQ4lB,MACpB,kBAAC5R,EAAA,EAAD,CAAYsT,QAAM,GAAE/M,EAAKgN,UACzB,kBAACvT,EAAA,EAAD,CACI9R,MAAM,gBACNuD,MAAO,CACHgD,SAAU,YAEd6e,QAAM,GAEL/M,EAAKiN,WAEV,kBAACC,EAAA,EAAD,CACI5nB,UAAWG,EAAQ8M,MACnB5K,MACsB,IAAlBqY,EAAKtD,MAAMvb,GACL,YACA,UAEVmQ,MAAO0O,EAAKtD,MAAM1e,SAI9B,6BACI,kBAAC2Z,EAAA,EAAD,OACE1X,GACE,kBAACuZ,EAAA,EAAD,CACItO,MAAO,CACHpG,QAAS,wBAEbsH,QAAS,WACL,EAAK4f,cACL,EAAK9mB,MAAM+B,QAAQ8N,KACf,YAAciL,EAAK7e,MAI3B,kBAAC6W,EAAA,EAAD,KACI,kBAAC,IAAD,OAZR,4BAiBe,IAAlBgI,EAAKtD,MAAMvb,IACR,kBAACqY,EAAA,EAAD,CACItO,MAAO,CACHpG,QAAS,wBAEbsH,QAAS,WACL,EAAK4f,cACL,EAAK9mB,MAAM+B,QAAQ8N,KAAK,iBAG5B,kBAACiD,EAAA,EAAD,KACI,kBAAC,IAAD,OAVR,4BAgBJ,kBAACwB,EAAA,EAAD,CACItO,MAAO,CACHpG,QAAS,wBAEbsH,QAASvQ,KAAKywB,QAEd,kBAACtU,EAAA,EAAD,KACI,kBAAC,IAAD,OAPR,mC,GAnJaqH,aA+K1B8N,EALW5N,aAtNF,SAACzb,GACrB,MAAO,CACHqK,SAAUrK,EAAM7E,WAAWmuB,wBAIR,SAACtuB,GACxB,MAAO,CACHijB,eAAgB,SAACC,GACbljB,EAASijB,YAAeC,KAE5BhU,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,KAEvD2a,iBAAkB,SAACxP,GACfhU,EAASwjB,YAAiBxP,QAuMZyM,CAGxBnK,aAtMa,iBAAO,CAClBrC,OAAQ,CACJlO,MAAO,OACPoK,OAAQ,QAEZ0d,OAAQ,CACJ1c,QAAS,OACTnL,QAAS,uBAEbgoB,YAAa,CACT7d,OAAQ,OACRpK,MAAO,QAEXwmB,KAAM,CACFnY,WAAY,OACZrO,MAAO,SAEX0N,MAAO,CACHpC,UAAW,QAEfuc,YAAa,CACT7nB,MAAO,QAiLbuQ,CAAmBoK,YAAW4M,K,2ICnO1B3nB,EAAYC,aAAW,iBAAO,CAChC2oB,eAAgB,CACZloB,gBAAiB6N,IAAK,KACtBrL,MAAOqL,IAAK,MAEhBsa,eAAgB,CACZnoB,gBAAiBsN,IAAM,KACvB9K,MAAO8K,IAAM,UAiHN8a,EA7GQ,WAAO,IAAD,EACOhX,IAAM3U,SAAS,MADtB,mBAClBuM,EADkB,KACRqf,EADQ,OAEOjX,IAAM3U,SAAS,CAC3CmZ,QAAS,CAAE5Z,GAAI,GAAInD,KAAM,IACzB8c,QAAS,KAJY,mBAElBH,EAFkB,KAERC,EAFQ,KAOnB9b,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAgBCktB,EAAc,WAChBwB,EAAY,OA2BVhwB,EAAO4Q,QAAQD,GACfhN,EAAK3D,EAAO,sBAAmBhB,EAE/BiJ,EAAUhB,IAChB,OACI,oCACI,kBAACmU,EAAA,EAAD,CAAS3M,MAAO,2BAAQC,UAAU,UAC9B,kBAAC2M,EAAA,EAAD,CAAYzM,QAhDJ,SAACmC,GACW,KAAxBoM,EAASI,QAAQ5Z,IACjBuQ,IAAImJ,IAAI,yBAA0B,IAC7BjJ,MAAK,SAACxV,GACHwe,EAAYxe,EAASG,SAExBsV,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YAG1D8xB,EAAYjf,EAAMlM,gBAsCwBsF,MAAM,WACpC,kBAAC,IAAD,QAGR,kBAAC6kB,EAAA,EAAD,CACIrrB,GAAIA,EACJ3D,KAAMA,EACN2Q,SAAUA,EACVE,QAAS2d,EACTC,aAAc,CACVne,SAAU,SACVC,WAAY,UAEhB0e,gBAAiB,CACb3e,SAAU,MACVC,WAAY,WAGhB,kBAAC6J,EAAA,EAAD,KACK+C,EAASG,QAAQpR,KAAI,SAACpI,EAAO6B,GAAR,OAClB,kBAAC2U,EAAA,EAAD,CACIC,QAAM,EACN/G,UAAU,QACV3P,IAAK8B,EACLiJ,QAAS,kBAvDhB,SAACjL,GACVA,IAAOwZ,EAASI,QAAQ5Z,GAI5BuQ,IAAI6L,MAAM,uBAAwB,CAC9Bpc,GAAIA,IAEHyQ,MAAK,WACFjV,OAAOC,SAAS2vB,YAEnB1a,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKigB,SAAS,CACVlL,QAAS,QAjBjBub,IAqD+ByB,CAASnsB,EAAMH,MAE9B,kBAACusB,EAAA,EAAD,KACKpsB,EAAMH,KAAOwZ,EAASI,QAAQ5Z,IAC3B,kBAAC0rB,EAAA,EAAD,CAAQvnB,UAAWG,EAAQ6nB,gBACvB,kBAACtsB,EAAA,EAAD,OAGPM,EAAMH,KAAOwZ,EAASI,QAAQ5Z,IAC3B,kBAAC0rB,EAAA,EAAD,CAAQvnB,UAAWG,EAAQ4nB,gBACvB,kBAAC,IAAD,QAIZ,kBAACpV,EAAA,EAAD,CAAcC,QAAS5W,EAAMtD,e,UC7DnD2vB,E,4MACF7pB,MAAQ,CACJqK,SAAU,M,EAGdyf,aAAe,SAACxrB,GACZ,EAAK8C,MAAM6c,eAAe3f,EAAEC,gB,EAGhC2pB,YAAc,WACV,EAAKrQ,SAAS,CACVxN,SAAU,Q,EAIlBke,QAAU,SAACzlB,GACPjK,OAAOC,SAASC,KAAO+J,G,EAG3BinB,WAAa,WACTlxB,OAAOC,SAASC,KAAO,S,4CAG3B,WAAU,IAAD,OACG4I,EAAY5J,KAAKqJ,MAAjBO,QACFqoB,EAAarxB,IAAKuE,MAAMnF,KAAKqJ,MAAM6oB,SACnC/N,EAAOvjB,IAAKgE,QAAQ5E,KAAKqJ,MAAM6oB,SAC/B9tB,EAAcmc,IAAWnc,YAC3BpE,KAAKqJ,MAAMtI,SAASyf,UAGxB,OACI,yBAAK/W,UAAWG,EAAQuoB,cACpB,kBAACC,EAAA,EAAD,CACI1rB,GACI1G,KAAKqJ,MAAMtC,SAASgB,QAAU,MAC3B/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,WAG3C,8BACM/C,GACE,oCACI,kBAACqL,EAAA,EAAD,CAAkBC,SAAS,QAC1BuiB,GACG,oCACI,kBAAC,EAAD,MACA,kBAAClV,EAAA,EAAD,CACI3M,MAAO,eACPC,UAAU,UAEV,kBAAC2M,EAAA,EAAD,CACIzM,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KACf,cAGRpN,MAAM,WAEN,kBAAC,IAAD,UAOvB1H,GACG,kBAAC2Y,EAAA,EAAD,CAAS3M,MAAO,2BAAQC,UAAU,UAC9B,kBAAC2M,EAAA,EAAD,CACIlR,MAAM,UACNyE,QAASvQ,KAAKgyB,YAEd,kBAACK,EAAA,EAAD,QAIZ,kBAACrV,EAAA,EAAD,CAAYlR,MAAM,UAAUyE,QAASvQ,KAAK+xB,eACpCE,GAAc,kBAAC,IAAD,MACfA,GACG,kBAACjB,EAAA,EAAD,CACI3d,IACI,uBAAyB8Q,EAAK7e,GAAK,KAEvCmE,UAAWG,EAAQsN,UAGjB,MAGtB,kBAAC,EAAD,W,GAxFkBsM,aAkG5B8O,EAAa5O,aAnJK,SAACzb,GACrB,MAAO,CACHlB,SAAUkB,EAAMrE,SAASmD,SACzBE,WAAYgB,EAAMrE,SAASoD,YAAYC,WACvCC,WAAYe,EAAMrE,SAASoD,YAAYE,WACvCC,SAAUc,EAAMrE,SAASoD,YAAYG,SACrC+qB,QAASjqB,EAAM7E,WAAW8uB,YAIP,SAACjvB,GACxB,MAAO,CACHijB,eAAgB,SAACC,GACbljB,EAASijB,YAAeC,QAsIjBzC,CAGjBnK,aApIa,SAACzQ,GAAD,YAAY,CACvBqpB,cAAY,mBACPrpB,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAFL,2BAII,UAJJ,GAMZ8C,OAAQ,CACJlO,MAAO,OACPoK,OAAQ,QAEZ0d,OAAQ,CACJ1c,QAAS,OACTnL,QAAS,uBAEbgoB,YAAa,CACT7d,OAAQ,OACRpK,MAAO,QAEXwmB,KAAM,CACFnY,WAAY,OACZrO,MAAO,SAEX0N,MAAO,CACHpC,UAAW,QAEfuc,YAAa,CACT7nB,MAAO,QAyGbuQ,CAAmBoK,YAAWmO,KAEjBQ,O,stBC/FfrjB,cACA,IAoNMsjB,G,kDACF,WAAYlpB,GAAQ,IAAD,8BACf,cAAMA,IAgBVmpB,kBAAoB,WAChB3mB,YACI,EAAKxC,MAAMtC,SAASgB,QAAU,IACvB,EAAKsB,MAAMpC,aAAc,EAAKoC,MAAMlC,UACrC,EAAKkC,MAAMP,MAAMe,QAAQwS,QAAQsT,KACjC,EAAKtmB,MAAMP,MAAMe,QAAQqQ,WAAWC,UAtB/B,EA0BnB8F,iCAAmC,SAACC,IAE3B,EAAK7W,MAAMtC,SAASgB,QAAU,MACxB,EAAKsB,MAAMpC,YAAc,EAAKoC,MAAMlC,cAC1C+Y,EAAUnZ,SAASgB,QAAU,MACvBmY,EAAUjZ,YAAciZ,EAAU/Y,YAEzC0E,YAEQ,EAAKxC,MAAMtC,SAASgB,QAAU,IAC3B,EAAKsB,MAAMpC,aAAc,EAAKoC,MAAMlC,WAEH,SAAlC,EAAKkC,MAAMP,MAAMe,QAAQvI,KAGzB,EAAK+H,MAAMP,MAAMe,QAAQqQ,WAAWC,QADhC,EAAK9Q,MAAMP,MAAMe,QAAQwS,QAAQsT,OAxCpC,EA8CnB8C,mBAAqB,WACjB,EAAK3S,UAAS,SAAC7X,GAAD,MAAY,CAAEyqB,YAAazqB,EAAMyqB,gBA/ChC,EAkDnBC,aAAe,WACX,GAAIpS,IAAWvc,WAAW,EAAKqF,MAAMtI,SAASyf,UAC1C,OACI,oCACK,EAAKnX,MAAMspB,cAAgB,EAAKtpB,MAAM6oB,SACnC,kBAAC,IAAD,QAvDD,EA8DnBU,aAAe,WACNtnB,cASL,EAAKjC,MAAMyY,kBAAkB,2CARzB,EAAKzY,MAAM8I,eACP,MACA,QACA,yDACA,YApEO,EA2EnBuO,gBAAkB,WACd,EAAKrX,MAAMyY,kBAAkB,0BA5Ed,EA+EnB+Q,QAAU,WACNhd,KAAIyL,OAAO,kBACNvL,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,uCACA,WAEJvR,KAAKC,UACLC,OAAOC,SAAS2vB,SAChB,EAAKrnB,MAAMod,kBAAiB,MAE/BzQ,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,cAGPizB,SAAQ,WACL,EAAK3C,kBAnGb,EAAKloB,MAAQ,CACTyqB,YAAY,GAEhB,EAAKK,YAAcrY,IAAMuN,YALV,E,6DAQnB,WAA6B,IAAD,OACxBjoB,KAAKgzB,SAAWhzB,KAAKqJ,MAAM+B,QAAQ6nB,QAAO,WACtC,EAAKnT,UAAS,iBAAO,CAAE4S,YAAY,W,kCAG3C,WACI1yB,KAAKgzB,a,oBA2FT,WAAU,IAAD,SACGppB,EAAY5J,KAAKqJ,MAAjBO,QACFua,EAAOvjB,KAAKgE,QAAQ5E,KAAKqJ,MAAM6oB,SAC/BluB,EAAauc,IAAWvc,WAAWhE,KAAKqJ,MAAMtI,SAASyf,UACvDtc,EAAcqc,IAAWrc,YAC3BlE,KAAKqJ,MAAMtI,SAASyf,UAElB0S,EAAW,SAAC/wB,GAIV,IAHJ,IACUgxB,EADQzoB,SAASC,OACKqC,MAAM,MAExBhD,EAAI,EAAGA,EAAImpB,EAAUprB,OAAQiC,IAAK,CACxC,IAAMopB,EAAMD,EAAUnpB,GAAGgD,MAAM,KAC/B,GAAIomB,EAAI,IAAMjxB,EACV,OAAOkxB,SAASD,EAAI,IAGhC,OAAO,MAGLE,EACF,yBAAKhuB,GAAG,YAAYmE,UAAWG,EAAQ2pB,UAClChT,IAAWjc,YAAc,kBAAC,IAAD,MAEzB1D,KAAKuE,MAAMnF,KAAKqJ,MAAM6oB,UACnB,oCACI,yBAAKzoB,UAAWG,EAAQ4pB,gBACpB,kBAAC,KAAD,MACA,kBAAC,KAAD,KACI,kBAAC,KAAD,CACItX,QAAM,EACN1W,IAAI,2BACJ+K,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KAAK,cAG5B,kBAAC,KAAD,KACI,kBAAC,IAAD,CACIzP,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,8BAE1B,kBAAC,KAAD,CACIH,QAAM,EACN1W,IAAI,2BACJ+K,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KAAK,aAG5B,kBAAC,KAAD,KACI,kBAAC,IAAD,CACIzP,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,8BAE1B,kBAAC,KAAD,CACIH,QAAM,EACN1W,IAAI,2BACJ+K,QAAS,kBAAMzP,OAAOa,KAAK,iDAAiDuxB,EAAU,YAEtF,kBAAC,KAAD,KACI,kBAAC,IAAD,CACIzpB,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,8BAEzB8H,EAAKtD,MAAM6S,QACR,kBAAC,KAAD,CACIxX,QAAM,EACN1W,IAAI,SACJ+K,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KAAK,cAG5B,kBAAC,KAAD,KACI,kBAAC,KAAD,CACIzP,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,YAI9B,kBAAC,KAAD,CACIH,QAAM,EACN1W,IAAI,2BACJ+K,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KAAK,aAG5B,kBAAC,KAAD,KACI,kBAAC,KAAD,CACIzP,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,8BAE1B,kBAAC,KAAD,CACIH,QAAM,EACN1W,IAAI,2BACJ+K,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KAAK,2BAG5B,kBAAC,KAAD,KACI,kBAAC,IAAD,CACIzP,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,8BAE1B,kBAAC,KAAD,CACIH,QAAM,EACN1W,IAAI,2BACJ+K,QAAS,kBAAMzP,OAAO6yB,QAAQ,eAE9B,kBAAC,KAAD,KACI,kBAAC,IAAD,CACIlqB,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,gCAKjCkE,IAAWjc,YACR,oCACI,kBAAC,KAAD,MACA,kBAAC,KAAD,KACI,kBAAC,KAAD,CACI4X,QAAM,EACN1W,IAAI,2BACJ+K,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KAAK,eAG5B,kBAAC,KAAD,KACI,kBAAC,KAAD,CACIzP,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,8BAG1B,kBAAC,KAAD,CACIH,QAAM,EACN1W,IAAI,2BACJ+K,QAASvQ,KAAK6yB,SAEd,kBAAC,KAAD,KACI,kBAAC,IAAD,CACIppB,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,gCAKtC,6BACI,kBAAC,IAAD,SAKVzb,KAAKuE,MAAMnF,KAAKqJ,MAAM6oB,UACpB,6BACI,kBAAC,KAAD,CACIhW,QAAM,EACN1W,IAAI,eACJ+K,QAAS,kBAAM,EAAKlH,MAAM+B,QAAQ8N,KAAK,YAEvC,kBAAC,KAAD,KACI,kBAAC,IAAD,CACIzP,UAAWG,EAAQ6pB,WAG3B,kBAAC,KAAD,CAAcpX,QAAQ,kBAE1B,kBAAC,KAAD,CACIH,QAAM,EACN1W,IAAI,eACJ+K,QAAS,kBAAM,EAAKlH,MAAM+B,QAAQ8N,KAAK,aAEvC,kBAAC,KAAD,KACI,kBAAC,IAAD,CAAazP,UAAWG,EAAQ6pB,WAEpC,kBAAC,KAAD,CAAcpX,QAAQ,kBAE1B,kBAAC,KAAD,CACIH,QAAM,EACN1W,IAAI,2BACJ+K,QAAS,kBAAMzP,OAAOC,SAASC,KAAK,2BAEpC,kBAAC,KAAD,KACI,kBAAC,IAAD,CAASyI,UAAWG,EAAQ6pB,WAEhC,kBAAC,KAAD,CAAcpX,QAAQ,gCAMpCuX,EACFC,EAAQC,SAAW,mBAAmBC,KAAK1xB,UAAU2xB,WAEzD,OACI,6BACI,kBAAC,KAAD,CACItkB,SAAS,QACTjG,UAAWG,EAAQqqB,OACnBnoB,MACsC,SAAlC9L,KAAKqJ,MAAMP,MAAMe,QAAQvI,MACzBtB,KAAKqJ,MAAMtC,SAASgB,QAAU,IAC3B/H,KAAKqJ,MAAMpC,aAAcjH,KAAKqJ,MAAMlC,UACjC,UACA,WAGV,kBAAC,KAAD,KACKnH,KAAKqJ,MAAMtC,SAASgB,QAAU,MAEtB/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,WAErC,kBAAC,KAAD,CACI2E,MAAM,UACNsJ,aAAW,cACX7E,QAASvQ,KAAKyyB,mBACdhpB,UAAWG,EAAQsqB,YAEnB,kBAAC,IAAD,OAGXl0B,KAAKqJ,MAAMtC,SAASgB,QAAU,MAEtB/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,WAErC,kBAAC,KAAD,CACI2E,MAAM,UACNsJ,aAAW,cACX7E,QAAS,kBACL,EAAKlH,MAAM8qB,qBACN,EAAK9qB,MAAM+qB,cAGpB3qB,UAAWG,EAAQyqB,mBAEnB,kBAAC,IAAD,QAGVr0B,KAAKqJ,MAAMtC,SAASgB,OAAS,IACzB/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,YACrCnD,GACGuc,IAAWrc,YACPlE,KAAKqJ,MAAMtI,SAASyf,YAExB,kBAAC,KAAD,CACI9Z,GACI1G,KAAKqJ,MAAMtC,SAASgB,OAAS,IAC3B/H,KAAKqJ,MAAMpC,YACTjH,KAAKqJ,MAAMlC,UAGnB,kBAAC,KAAD,CACI2E,MAAM,UACNrC,UAAWG,EAAQ0qB,SACnB/jB,QAAS,kBACL,EAAKlH,MAAMya,kBAAkB,MAGjC,kBAAC,IAAD,QAIO,MAAtBoP,EAAU,aAAqBtyB,KAAKuE,MAAMnF,KAAKqJ,MAAM6oB,UAAYlyB,KAAKqJ,MAAMtC,SAASgB,QAAU,MAEvF/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,WAErC,kBAAC,KAAD,CAAYwO,QAAQ,KAAK7J,MAAM,UAAUolB,QAAM,EACnC3gB,QAAS,WAAOzP,OAAOC,SAASC,KAAK,2BAE5ChB,KAAKqJ,MAAMkrB,SACNv0B,KAAKqJ,MAAMkrB,SACXv0B,KAAKqJ,MAAM+G,OAGN,MAAtB8iB,EAAU,aAAqBtyB,KAAKuE,MAAMnF,KAAKqJ,MAAM6oB,UAAYlyB,KAAKqJ,MAAMtC,SAASgB,QAAU,MAEvF/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,WAErC,kBAAC,KAAD,CAAYwO,QAAQ,KAAK7J,MAAM,UAAUolB,QAAM,EACnC3gB,QAAS,WAAO,EAAKlH,MAAM+B,QAAQ8N,KAAK,OAE/ClZ,KAAKqJ,MAAMkrB,SACNv0B,KAAKqJ,MAAMkrB,SACXv0B,KAAKqJ,MAAM+G,QAI3BpQ,KAAKqJ,MAAMpC,YACTjH,KAAKqJ,MAAMlC,WACVoZ,IAAWjc,YACR,kBAAC,KAAD,CAAYqR,QAAQ,KAAK7J,MAAM,UAAUolB,QAAM,GAC1ClxB,KAAKqJ,MAAMtC,SAAS,GAAG5E,KAAM,KAC5B6B,GACEuc,IAAWrc,YACPlE,KAAKqJ,MAAMtI,SAASyf,YAExB,IACI1W,YACI9J,KAAKqJ,MAAMtC,SAAS,GAAG/E,MAE3B,KAInBhC,KAAKqJ,MAAMtC,SAASgB,OAAS,IACzBwY,IAAWjc,YACR,kBAAC,KAAD,CAAYqR,QAAQ,KAAK7J,MAAM,UAAUolB,QAAM,GAC1ClxB,KAAKqJ,MAAMtC,SAASgB,OADzB,sBAIP/H,KAAKqJ,MAAMtC,SAASgB,QAAU,MAEtB/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,WACpC,kBAAC,IAAD,MACT,yBAAKsC,UAAWG,EAAQ4qB,QACtBx0B,KAAKqJ,MAAMtC,SAASgB,OAAS,IACzB/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,YACrCnD,IACAuc,IAAWrc,YACRlE,KAAKqJ,MAAMtI,SAASyf,WAExB5f,KAAKuE,MAAMnF,KAAKqJ,MAAM6oB,WACrBvmB,YAAmB,UAChB,yBAAKlC,UAAWG,EAAQ6qB,gBACpB,kBAAC,KAAD,CAASrkB,MAAM,gBACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKlH,MAAM8d,aAGf,kBAAC,IAAD,UAKlBnnB,KAAKqJ,MAAMtC,SAASgB,OAAS,IACzB/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,YACrCnD,GAAcE,IACX,yBAAKuF,UAAWG,EAAQ6qB,iBAClBz0B,KAAKqJ,MAAMpC,YACTjH,KAAKqJ,MAAMlC,UACXmd,YACItkB,KAAKqJ,MAAMtC,SAAS,GAAG5E,OAEvB,kBAAC,KAAD,CACIuE,IACK1G,KAAKqJ,MAAMpC,YACZjH,KAAKqJ,MAAMlC,UACXmd,YACItkB,KAAKqJ,MAAMtC,SAAS,GACf5E,OAIb,kBAAC,KAAD,CAASiO,MAAM,gBACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKlH,MAAM0a,gBAGf,kBAAC,IAAD,UAKlB/jB,KAAKqJ,MAAMpC,YACTjH,KAAKqJ,MAAMlC,UACP,kBAAC,KAAD,CACIT,IACK1G,KAAKqJ,MAAMpC,YACZjH,KAAKqJ,MAAMlC,UAGf,kBAAC,KAAD,CAASiJ,MAAM,gBACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKqiB,iBAGT,kBAAC,IAAD,UAKlB5yB,KAAKqJ,MAAMpC,YACTjH,KAAKqJ,MAAMnC,aACXid,EAAKtD,MAAM6T,sBACP,kBAAC,KAAD,CACIhuB,IACK1G,KAAKqJ,MAAMpC,YACRjH,KAAKqJ,MACAnC,aACTid,EAAKtD,MACA6T,sBAGT,kBAAC,KAAD,CAAStkB,MAAM,4BACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKmQ,oBAGT,kBAAC,IAAD,UAMlB1gB,KAAKqJ,MAAMpC,YACTjH,KAAKqJ,MAAMnC,YACP,kBAAC,KAAD,CACIR,IACK1G,KAAKqJ,MAAMpC,YACZjH,KAAKqJ,MAAMnC,YAGf,kBAAC,KAAD,CAASkJ,MAAM,4BACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKlH,MAAMkc,WAGH,MAFJ,EAAKlc,MACApF,KAEC,EAAKoF,MACApF,KACD,EACKoF,MACAtC,SAAS,GACT5E,KACT,EAAKkH,MACApF,KACD,IACA,EACKoF,MACAtC,SAAS,GACT5E,QAIvB,kBAAC,IAAD,UAKlBnC,KAAKqJ,MAAMpC,aAAe/C,GACxB,kBAAC,KAAD,CAAMwC,IAAK1G,KAAKqJ,MAAMpC,YAClB,kBAAC,KAAD,CAASmJ,MAAM,gBACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKlH,MAAM0d,wBAGf,kBAAC,IAAD,UAKd/mB,KAAKqJ,MAAMpC,aACRsZ,IAAWjc,aACXJ,GACG,kBAAC,KAAD,CAAMwC,IAAK1G,KAAKqJ,MAAMpC,YAClB,kBAAC,KAAD,CAASmJ,MAAM,gBACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKlH,MAAMkd,oBAGf,kBAAC,IAAD,UAKlBvmB,KAAKqJ,MAAMpC,aAAe/C,GACxB,kBAAC,KAAD,CAAMwC,IAAK1G,KAAKqJ,MAAMpC,YAClB,kBAAC,KAAD,CAASmJ,MAAM,sBACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKlH,MAAM+c,qBAGf,kBAAC,IAAD,UAKdliB,GACE,yBAAKmL,MAAO,CAAE+E,QAAS,UACjBmM,IAAWjc,YACT,kBAAC,KAAD,CACIoC,GAEoB,IADhB1G,KAAKqJ,MAAMtC,SACNgB,SACJwY,IAAWjc,YAGhB,kBAAC,KAAD,CAAS8L,MAAM,gBACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKlH,MAAMgd,mBAGf,kBAAC,IAAD,SAMhB,kBAAC,KAAD,CACI3f,GAEoB,IADhB1G,KAAKqJ,MAAMtC,SACNgB,QAGT,kBAAC,KAAD,CAASqI,MAAM,gBACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKlH,MAAMid,qBAGf,kBAAC,IAAD,SAKX/F,IAAWjc,YACR,kBAAC,KAAD,CACIoC,GAEoB,IADhB1G,KAAKqJ,MAAMtC,SACNgB,QACLwY,IAAWjc,YAGf,kBAAC,KAAD,CAAS8L,MAAM,4BACX,kBAAC,KAAD,CACItE,MAAM,UACNyE,QAAS,kBACL,EAAKlH,MAAM6a,kBACP,QACA,KAIR,kBAAC,KAAD,WASnClkB,KAAKqJ,MAAMtC,SAASgB,QAAU,MAEtB/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,WACpC,kBAAC,IAAD,MACRnH,KAAKqJ,MAAMtC,SAASgB,QAAU,MACxB/H,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,WACvCnD,GACAuc,IAAWjc,YAAc,kBAAC,KAAD,CAAYwM,SAAO,MAGvD9Q,KAAK2yB,eAEN,kBAAC,KAAD,CAAQgC,MAAI,EAACC,eAAe,OACxB,kBAAC,KAAD,CACIC,UAAW70B,KAAKqJ,MAAMwrB,UACtBlf,QAAQ,YACR/L,QAAS,CACLkrB,MAAOlrB,EAAQmrB,aAEnB5O,OAAO,OACPxkB,KAAM3B,KAAKiI,MAAMyqB,WACjBlgB,QAASxS,KAAKyyB,mBACduC,OAAQ,kBACJ,EAAKlV,UAAS,iBAAO,CAAE4S,YAAY,OAEvCuC,iBAAkBrB,EAClBsB,WAAY,CACRC,aAAa,IAGhB7B,IAGT,kBAAC,KAAD,CAAQ8B,QAAM,EAACR,eAAe,OAC1B,kBAAC,KAAD,CACIhrB,QAAS,CACLkrB,MAAOlrB,EAAQyrB,oBAEnB5rB,UAAW6G,IAAW1G,EAAQ0pB,QAAT,mBAChB1pB,EAAQ0rB,WAAat1B,KAAKqJ,MAAM+qB,aADhB,cAEhBxqB,EAAQ2rB,aAAev1B,KAAKqJ,MAAM+qB,aAFlB,IAIrBze,QAAQ,aACRwQ,OAAO,OACPxkB,KAAM3B,KAAKqJ,MAAM+qB,aAEjB,yBAAK3qB,UAAWG,EAAQigB,UACvByJ,S,GA1tBK9P,aAsuBxBgS,GAAS9R,aAv7BS,SAACzb,GACrB,MAAO,CACHmsB,YAAansB,EAAM7E,WAAWzB,KAC9BoF,SAAUkB,EAAMrE,SAASmD,SACzBE,WAAYgB,EAAMrE,SAASoD,YAAYC,WACvCC,WAAYe,EAAMrE,SAASoD,YAAYE,WACvCC,SAAUc,EAAMrE,SAASoD,YAAYG,SACrClD,KAAMgE,EAAM5F,UAAU4B,KACtB0D,SAAUM,EAAMrE,SAAS+D,SACzByI,MAAOnI,EAAM4H,WAAWO,MACxBmkB,SAAUtsB,EAAM7E,WAAWmxB,SAC3B5B,aAAc1qB,EAAM7E,WAAWuvB,aAC/BT,QAASjqB,EAAM7E,WAAW8uB,YAIP,SAACjvB,GACxB,MAAO,CACHkxB,oBAAqB,SAACxyB,GAClBsB,EAAS0iB,YAAmBhkB,KAEhCmiB,kBAAmB,SAACvb,GAChBtF,EAAS6gB,YAAkBvb,KAE/Bgd,WAAY,SAACthB,GACThB,EAASsiB,YAAWthB,KAExB+hB,uBAAwB,WACpB/iB,EAAS+iB,gBAEbe,oBAAqB,WACjB9jB,EAAS8jB,gBAEb7C,kBAAmB,SAAC5iB,EAAMK,GACtBsB,EAASihB,YAAkB5iB,EAAMK,KAErCulB,aAAc,SAACvf,GACX1E,EAASikB,YAAavf,KAE1Bwf,SAAU,WACNlkB,EAASkkB,gBAEb3C,gBAAiB,WACbvhB,EAASuhB,gBAEbD,eAAgB,SAAC9c,GACbxE,EAASshB,YAAe9c,KAE5B0K,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,KAEvDsa,iBAAkB,WACdnjB,EAASmjB,gBAEbC,eAAgB,WACZpjB,EAASojB,gBAEbC,iBAAkB,WACdrjB,EAASqjB,gBAEbC,gBAAiB,WACbtjB,EAASsjB,gBAEbzE,kBAAmB,SAACtK,GAChBvU,EAAS6e,YAAkBtK,KAE/BiP,iBAAkB,WACdxjB,EAASwjB,gBAEb1C,YAAa,WACT9gB,EAAS8gB,mBAi3BNL,CAGb+R,aAAUlc,cA/2BG,SAACzQ,GAAD,cAAY,CACvBmrB,QAAM,GACF5c,WAhFY,KA+EV,cAEDvO,EAAMI,YAAYC,KAAK,MAAQ,CAC5BkO,WAjFc,MA8EhB,uBAKMvO,EAAM2N,OAAO6c,OAAS,GAL5B,2BAMU,2BANV,GASNA,OAAQ,CACJtqB,MAAO,EACP0sB,WAAY,GAEhBC,cAAe,CACX3sB,MA7FY,IA8FZ0sB,WAAY,GAEhBnmB,KAAM,CACFkB,YAAa3H,EAAM6K,QAAQ,IAE/BugB,WAAW,aACPzjB,YAAa,IACZ3H,EAAMI,YAAYqe,GAAG,MAAQ,CAC1BnT,QAAS,SAGjBigB,kBAAkB,aACd5jB,YAAa,IACZ3H,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAGjBkgB,SAAU,CACN7jB,YAAa,IAEjBoZ,QAAS/gB,EAAM8sB,OAAO/L,QACtBkL,YAAa,CACT/rB,MAnHkB,KAqHtBqsB,mBAAoB,CAChBrsB,MAvHY,KAyHhBuqB,SAAU,CACN7L,UAAW,UAEf4N,WAAY,CACRtsB,MA7HY,IA8HZ6sB,WAAY/sB,EAAMgtB,YAAYr2B,OAAO,QAAS,CAC1Cs2B,OAAQjtB,EAAMgtB,YAAYC,OAAOC,MACjCC,SAAUntB,EAAMgtB,YAAYG,SAASC,kBAG7CX,YAAa,CACTM,WAAY/sB,EAAMgtB,YAAYr2B,OAAO,QAAS,CAC1Cs2B,OAAQjtB,EAAMgtB,YAAYC,OAAOC,MACjCC,SAAUntB,EAAMgtB,YAAYG,SAASE,gBAEzCzO,UAAW,SACX1e,MAAO,GAEX+Q,QAAS,CACLqc,SAAU,EACVntB,QAASH,EAAM6K,QAAQ,IAE3B6gB,KAAM,CACF4B,SAAU,GAEd1f,MAAO,CACH3C,IAAK,EACLwC,OAAQ,IAEZ8f,OAAQ,CACJC,YAAaxtB,EAAM6K,QAAQ,IAE/B8gB,eAAgB,CACZrgB,QAAS,QAEbmiB,aAAc,CACV9lB,YAAa3H,EAAM6K,QAAQ,IAE/B6iB,UAAW,CACPnf,WAAY,OACZ/C,UAAW,OACXmiB,aAAc,QAElBC,UAAW,CACPjP,aAAc,SAElBkP,SAAU,CACNpgB,MAAO,QAEXkd,QAAS,CACLpc,WAAY,QAEhBuf,WAAY,CACRtiB,UAAW,OAEfuiB,gBAAiB,CACbC,cAAe,MACfrmB,YAAa,OAEjBsmB,mBAAoB,CAChB3iB,QAAS,OACTE,UAAW,OACXmiB,aAAc,OACdpf,WAAY,OACZ2f,eAAgB,QAEpBC,YAAa,CACTjuB,MAAO,OACPoK,OAAQ,QAEZ8jB,YAAa,CACT1gB,OAAQ,MACR9G,SAAU,WACVpG,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,MAC1C9rB,MAAO,QAEXmuB,UAAW,CACP9f,WAAY,OACZrO,MAAO,SAEXwqB,gBAAc,GACV4D,UAAW,QADD,cAETtuB,EAAMI,YAAYqe,GAAG,MAAQ,CAC1BnU,OAAQ,mCAHF,cAMTtK,EAAMI,YAAYC,KAAK,MAAQ,CAC5BkuB,UAAW,mCAPL,MAovBN9d,CAAmBoK,YAAW4O,OAE3BiD,S,mDC9gCf,0MAIA8B,IAAMC,OAAOC,KACbF,IAAMC,OAAOE,KAEb,IACMC,EAAiB92B,IAAK+E,cAAc,YAC/BgyB,EAAWD,GAFE,gBAIjB,SAASE,IAEZD,GADAA,EAAW/2B,IAAK+E,cAAc,cALV,gBASjB,SAASkyB,EAAgBC,EAAMC,GAClC,OAAOT,IAAMQ,GAAME,GAAGL,GAAUI,OAAOA,GAGpC,SAASE,EAAiB91B,GAC7B,IACIm1B,MAAQU,GAAG71B,GAAM41B,SACnB,MAAOxxB,GACL,OAAO,EAEX,OAAO,I,8QCFX2xB,oBAAU,CACNC,WAAY,KAGhB,IAgEMC,EAAS,CACXC,OAAQ,SAGNC,E,kDACF,WAAYjvB,GAAQ,IAAD,8BACf,cAAMA,IAOVkvB,SAAW,CACPF,OAAQ,SAAC9xB,GACDga,IAAWvc,WAAW,EAAKqF,MAAMtI,SAASyf,UAC1C,EAAK0G,eAEL,EAAKsR,cAETjyB,EAAE6B,OAAOqwB,SAfE,EAmBnBjd,aAAe,SAAC9I,GAAW,IACflM,EAAkBkM,EAAlBlM,cACR,EAAKkY,MAAQhM,EAAMtK,OAAO3C,MAC1B,EAAKqa,SAAS,CACVxN,SAAU9L,EACVkY,MAAOhM,EAAMtK,OAAO3C,SAxBT,EA4BnBizB,cAAgB,WACZ,EAAK5Y,SAAS,CACVpB,MAAO,MA9BI,EAkCnBwI,aAAe,WACX,EAAK7d,MAAM6d,aAAa,YAAc,EAAKxI,QAnC5B,EAsCnB8Z,YAAc,WACV,EAAKnvB,MAAM+B,QAAQ8N,KACf,oBAAsB+H,mBAAmB,EAAKvC,SAtClD,EAAKzW,MAAQ,CACTqK,SAAU,KACVoM,MAAO,IAJI,E,0CA4CnB,WAAU,IAAD,OACG9U,EAAY5J,KAAKqJ,MAAjBO,QACA0I,EAAatS,KAAKiI,MAAlBqK,SACFhN,EAA0B,KAArBtF,KAAKiI,MAAMyW,MAAe,gBAAkB,KACjD1a,EAAauc,IAAWvc,WAAWhE,KAAKqJ,MAAMtI,SAASyf,UAE7D,OACI,yBAAK/W,UAAWG,EAAQye,QACpB,yBAAK5e,UAAWG,EAAQ+uB,YACpB,kBAAC,IAAD,OAEJ,kBAAC,UAAD,CAASP,OAAQA,EAAQG,SAAUv4B,KAAKu4B,UACpC,kBAAC,IAAD,CACIpV,YAAY,kBACZvZ,QAAS,CACL4P,KAAM5P,EAAQgvB,UACdla,MAAO9U,EAAQivB,YAEnBxjB,SAAUrV,KAAKwb,aACfsd,OAAQ94B,KAAK04B,cACbjzB,MAAOzF,KAAKiI,MAAMyW,SAG1B,kBAAC,IAAD,CACIpZ,GAAIA,EACJ3D,KAA2B,KAArB3B,KAAKiI,MAAMyW,MACjBpM,SAAUA,EACV7I,UAAWG,EAAQmvB,WACnBlD,YAAU,IAET,gBAAGmD,EAAH,EAAGA,gBAAH,OACG,kBAAC,IAAD,iBAAUA,EAAV,CAA2BC,QAAS,MAChC,kBAAC,IAAD,CAAOC,QAAQ,GACVl1B,GACG,kBAAC,IAAD,CAAUuM,QAAS,EAAK2W,cACpB,kBAAC,IAAD,CAAczd,UAAWG,EAAQ2F,MAC7B,kBAAC,IAAD,OAEJ,kBAAC,IAAD,CACI3F,QAAS,CACLyS,QAASzS,EAAQyS,SAErBA,QACI,kBAAC,IAAD,CAAY6U,QAAM,GAAlB,mDACa,IACT,gCACK,EAAKjpB,MAAMyW,WAQpC,kBAAC,IAAD,CAAUnO,QAAS,EAAKioB,aACpB,kBAAC,IAAD,CAAc/uB,UAAWG,EAAQ2F,MAC7B,kBAAC,IAAD,OAEJ,kBAAC,IAAD,CACI3F,QAAS,CAAEyS,QAASzS,EAAQyS,SAC5BA,QACI,kBAAC,IAAD,CAAY6U,QAAM,GAAlB,mDACa,IACT,gCACK,EAAKjpB,MAAMyW,qB,GA7G/B8E,aAgI3B2V,EAAYzV,aApMM,WACpB,MAAO,MAGgB,SAACzgB,GACxB,MAAO,CACHikB,aAAc,SAACvf,GACX1E,EAASikB,YAAavf,QA6LhB+b,CAGhBnK,aA3La,SAACzQ,GAAD,YAAY,CACvBuf,QAAM,mBACDvf,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAFX,yBAIQ,YAJR,6BAKYtL,EAAMswB,MAAM3R,cALxB,gCAMe4R,eAAKvwB,EAAMe,QAAQyvB,OAAOC,MAAO,MANhD,cAOF,UAAW,CACPjwB,gBAAiB+vB,eAAKvwB,EAAMe,QAAQyvB,OAAOC,MAAO,OARpD,4BAUWzwB,EAAM6K,QAAQ,IAVzB,2BAWU,GAXV,sBAYK,QAZL,cAaD7K,EAAMI,YAAYqe,GAAG,MAAQ,CAC1BlQ,WAAYvO,EAAM6K,QAAQ,KAC1B3K,MAAO,SAfT,GAkBN2vB,WAAY,CACR3vB,MAAOF,EAAM6K,QAAQ,GACrBP,OAAQ,OACR1D,SAAU,WACV8pB,cAAe,OACfplB,QAAS,OACTF,WAAY,SACZulB,eAAgB,UAEpBb,UAAW,CACP9sB,MAAO,UACP9C,MAAO,QAEX6vB,WAAW,aACPa,WAAY5wB,EAAM6K,QAAQ,GAC1BgmB,aAAc7wB,EAAM6K,QAAQ,GAC5BimB,cAAe9wB,EAAM6K,QAAQ,GAC7B2iB,YAAaxtB,EAAM6K,QAAQ,GAC3BkiB,WAAY/sB,EAAMgtB,YAAYr2B,OAAO,SACrCuJ,MAAO,QACNF,EAAMI,YAAYqe,GAAG,MAAQ,CAC1Bve,MAAO,IACP,UAAW,CACPA,MAAO,OAInB+vB,WAAY,CACRtiB,OAAQ,OACRzN,MAAO,QA2IbuQ,CAAmBoK,YAAW2U,KAEjBa,O,iNC9JTU,E,4MACF5xB,MAAQ,CACJ6xB,QAAS,EACTC,KAAM,KACNC,MAAO,KACPC,YAAY,G,EAGhBC,WAAY,E,EAEZ1H,kBAAoB,WACZ,EAAK0H,WAAa,EAAK7wB,MAAM6oB,UAC7B,EAAKgI,WAAa,EAAKA,UACvB,EAAKC,iB,EAQbla,iCAAmC,SAACC,IAE3B,EAAK7W,MAAM6oB,SAAW,EAAK7oB,MAAM+wB,UAAYla,EAAUka,SACvD,EAAK/wB,MAAM6oB,UAAYhS,EAAUgS,SAAWhS,EAAUgS,UAEvD,EAAKiI,gB,EAIbA,aAAe,WACX,IAAIL,EAAU,EACdjkB,IAAImJ,IAAI,iBACHjJ,MAAK,SAACxV,GACCA,EAASG,KAAKq5B,KAAOx5B,EAASG,KAAKs5B,OAAS,GAC5CF,EAAU,IACV,EAAKzwB,MAAM8I,eACP,MACA,QACA,2KACA,YAGJ2nB,EAAWv5B,EAASG,KAAKq5B,KAAOx5B,EAASG,KAAKs5B,MAAS,IAE3D,EAAKla,SAAS,CACVga,QAASA,EACTC,KAAMjwB,YAAavJ,EAASG,KAAKq5B,MACjCC,MAAOlwB,YAAavJ,EAASG,KAAKs5B,YAIzChkB,OAAM,gB,0DAnCf,WACIhW,KAAKk6B,WAAY,I,oBAqCrB,WAAU,IAAD,OACGtwB,EAAY5J,KAAKqJ,MAAjBO,QACR,OACI,yBACIywB,aAAc,kBAAM,EAAKva,SAAS,CAAEma,YAAY,KAChDK,aAAc,kBAAM,EAAKxa,SAAS,CAAEma,YAAY,KAChDxwB,UAAWG,EAAQstB,aAEnB,kBAAC,IAAD,MACA,kBAAC,IAAD,CAAY3mB,QAAS,kBAAM,EAAKlH,MAAM+B,QAAQ8N,KAAK,YAC/C,yBAAKzP,UAAWG,EAAQ2wB,kBACpB,kBAAC,IAAD,CAAa9wB,UAAWG,EAAQ6pB,UAChC,yBAAKhqB,UAAWG,EAAQ4wB,QAAxB,2BACS,MACJx6B,KAAKiI,MAAMgyB,YACR,kBAAC,IAAD,CAAMj5B,KAAM,OAAQ8K,MAAO,aAA3B,gBAIJ,kBAAC,IAAD,CACIrC,UAAWG,EAAQ6wB,IACnB3uB,MAAM,YACN6J,QAAQ,cACRlQ,MAAOzF,KAAKiI,MAAM6xB,UAEtB,yBAAKrwB,UAAWG,EAAQ4lB,MACpB,kBAAC,IAAD,CACIpf,MACI,uBACqB,OAApBpQ,KAAKiI,MAAM8xB,KACN,OACA/5B,KAAKiI,MAAM8xB,MACjB,aACsB,OAArB/5B,KAAKiI,MAAM+xB,MACN,OACAh6B,KAAKiI,MAAM+xB,OAErB3pB,UAAU,OAEV,kBAAC,IAAD,CACIsF,QAAQ,UACRub,QAAM,EACNplB,MAAM,iBAEe,OAApB9L,KAAKiI,MAAM8xB,KACN,OACA/5B,KAAKiI,MAAM8xB,KAChB,MACqB,OAArB/5B,KAAKiI,MAAM+xB,MACN,OACAh6B,KAAKiI,MAAM+xB,iB,GAzGvBxW,aAyH5BkX,EAAahX,aA7KK,SAACzb,GACrB,MAAO,CACHmyB,QAASnyB,EAAM7E,WAAWu3B,eAC1BzI,QAASjqB,EAAM7E,WAAW8uB,YAIP,SAACjvB,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,QAmK5C4X,CAGjBnK,aAjKa,SAACzQ,GAAD,YAAY,CACvB2qB,QAAS,CACLpc,WAAY,OACZ5G,YAAa,OACb3E,MAAOhD,EAAMe,QAAQ2N,KAAK3D,UAC1BS,UAAW,OAEfsmB,QAAS,CACL3xB,QAAS,eAEbsxB,iBAAkB,CACdnmB,QAAS,OACTE,UAAW,OACXuW,UAAW,OACX4L,aAAc,QAElB+D,OAAQ,CACJxxB,MAAO,OACPyH,YAAa,QAEjB+e,MAAI,GACAxmB,MAAO,QACP6xB,SAAU,SACVC,aAAc,YAHd,cAIChyB,EAAMI,YAAYC,KAAK,MAAQ,CAC5BH,MAAO,UALX,0BAOW,OAPX,GASJyxB,IAAK,CACDnmB,UAAW,OAEf4iB,YAAa,CACT5tB,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,UAgIhDvb,CAAmBoK,YAAWkW,KAEjBa,O,4IC1GTK,E,4MACFhJ,aAAe,SAACxrB,GACZ,EAAK8C,MAAM6c,eAAe3f,EAAEC,gB,4CAGhC,WAAU,IACEoD,EAAY5J,KAAKqJ,MAAjBO,QACFsoB,EAAUtxB,IAAKuE,MAAMnF,KAAKqJ,MAAM6oB,SAChC/N,EAAOvjB,IAAKgE,QAAQ5E,KAAKqJ,MAAM6oB,SAErC,OACI,yBAAKzoB,UAAWG,EAAQoxB,SACpB,yBAAKvxB,UAAWG,EAAQqxB,YAEpB,uBAAG1qB,QAASvQ,KAAK+xB,aAActoB,UAAWG,EAAQsN,QAC7Cgb,GACG,kBAAC,IAAD,CACI7e,IAAK,uBAAyB8Q,EAAK7e,GAAK,KACxCmE,UAAWG,EAAQsxB,aAGzBhJ,GACE,kBAAC,IAAD,CACI7e,IAAK,0BACL5J,UAAWG,EAAQsxB,aAI/B,kBAAC,IAAD,CAAkBxrB,SAAS,UAE/B,yBAAKjG,UAAWG,EAAQuxB,eACpB,kBAAC,IAAD,CACI1xB,UAAWG,EAAQwxB,SACnBjmB,UAAU,KACV+b,QAAM,GAELgB,EAAU/N,EAAKgN,SAAW,sBAE/B,kBAAC,IAAD,CACI1nB,UAAWG,EAAQyxB,UACnBlmB,UAAU,KACVrJ,MAAM,gBACNolB,QAAM,GAELgB,EAAU/N,EAAKtD,MAAM1e,KAAO,sB,GA5CrBqhB,aAwD1B8X,EAAW5X,aA1IO,SAACzb,GACrB,MAAO,CACHiqB,QAASjqB,EAAM7E,WAAW8uB,YAIP,SAACjvB,GACxB,MAAO,CACHijB,eAAgB,SAACC,GACbljB,EAASijB,YAAeC,QAiInBzC,CAGfnK,aA/Ha,SAACzQ,GAAD,MAAY,CACvBkyB,QAAS,CACL5nB,OAAQ,QACR9J,gBAAiBR,EAAMe,QAAQwS,QAAQsT,KACvC1mB,QAAS,gBACTsyB,gBACI,gHACAzyB,EAAMe,QAAQwS,QAAQvI,MAAMlH,QAAQ,IAAK,OACzC,2DACA9D,EAAMe,QAAQwS,QAAQ9S,KAAKqD,QAAQ,IAAK,OACxC,6DACA9D,EAAMe,QAAQgK,UAAU8b,KAAK/iB,QAAQ,IAAK,OAC1C,0DACA9D,EAAMe,QAAQgK,UAAUtK,KAAKqD,QAAQ,IAAK,OAC1C,0DACA9D,EAAMe,QAAQgK,UAAUC,MAAMlH,QAAQ,IAAK,OAC3C,4DACA9D,EAAMe,QAAQgK,UAAU8b,KAAK/iB,QAAQ,IAAK,OAC1C,6DACA9D,EAAMe,QAAQwS,QAAQ9S,KAAKqD,QAAQ,IAAK,OACxC,0DACA9D,EAAMe,QAAQwS,QAAQsT,KAAK/iB,QAAQ,IAAK,OACxC,0DACA9D,EAAMe,QAAQgK,UAAUC,MAAMlH,QAAQ,IAAK,OAC3C,6DACA9D,EAAMe,QAAQgK,UAAUtK,KAAKqD,QAAQ,IAAK,OAC1C,6DACA9D,EAAMe,QAAQgK,UAAU8b,KAAK/iB,QAAQ,IAAK,OAC1C,2DACA9D,EAAMe,QAAQgK,UAAUtK,KAAKqD,QAAQ,IAAK,OAC1C,uDACJ4uB,eAAgB,SAEpBtkB,OAAQ,CACJ9C,QAAS,QACTpL,MAAO,OACPoK,OAAQ,OACRqG,OAAQ,kBACRgO,aAAc,MACdoT,SAAU,SACVnhB,UACI,+DAERwhB,UAAW,CACPlyB,MAAO,OACPoK,OAAQ,QAEZgoB,SAAU,CACNtvB,MAAO,OACPuL,WAAY,OACZ/C,UAAW,OACXjC,SAAU,QAEd4oB,WAAY,CACR7mB,QAAS,OACTqlB,eAAgB,gBAChBvlB,WAAY,OAEhBmnB,UAAW,CACPhkB,WAAY,OACZvL,MAAO,UACP0D,QAAS,QAEb2rB,cAAe,CACXnyB,MAAO,YA+DbuQ,CAAmBwhB,IAENO,O,6ZCxGThiB,EAAiBC,YAAW,CAC9BC,KAAM,CACFvE,SAAU,OACVyE,UAAW,OACX,qBAAsB,CAClBC,aAAc,GAElB,WAAY,CACRvF,QAAS,QAEb,aAAc,CAAEV,OAAQ,IAE5BkG,SAAU,IAZSL,CAapBM,KAEGC,EAAwBP,YAAW,CACrCC,KAAM,CACF6d,UAAW,EACXpuB,QAAS,EAET,aAAc,CACVouB,UAAW,IAGnBtd,QAAS,CACL9E,SAAU,OACVvB,OAAQ,EACRU,QAAS,QACT,aAAc,CACVV,OAAQ,MAGhBkG,SAAU,IAjBgBL,CAkB3BS,KAEGC,EAAwBV,aAAW,SAACzQ,GAAD,MAAY,CACjD0Q,KAAM,CACFpF,QAAS,QACTnL,QAASH,EAAM6K,QAAQ,OAHD4F,CAK1Ba,KAEExR,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCshB,OAAQ,CACJhW,QAAS,OACTyhB,WAAY,wBAEhBjc,SAAU,CACNxF,QAAS,QACTqnB,UAAW,iBAEfhI,QAAS,CACLpc,WAAY,QAEhBqkB,aAAc,CACVtnB,QAAS,QAEbunB,QAAS,CACLtkB,WAAYvO,EAAM6K,QAAQ,IAE9BioB,SAAU,CACNC,WAAY,SACZhB,SAAU,SACVC,aAAc,gBAIhBgB,EAAQ,CACVC,OAAQA,IACRC,cAAeA,IACfC,MAAOA,IACPC,aAAcA,IACdC,QAASA,IACTC,eAAgBA,IAChBC,SAAUA,IACVC,gBAAiBA,IACjBC,QAASA,IACTC,eAAgBA,IAChBC,OAAQA,IACRC,cAAeA,IACfC,SAAUA,IACVC,gBAAiBA,IACjBC,mBAAoBA,KAGlBC,EAASpiB,IAAM+P,MAAK,kBAAM,mCAEjB,SAASsS,IAAW,IAAD,EACxBnzB,EAAUhB,IAEV7H,EAAWmnB,cACX9c,EAAU4xB,cAEVh5B,EAAauc,IAAWvc,WAAWjD,EAASyf,UANpB,EAQAza,oBAAS,GART,mBAQvBk3B,EARuB,KAQdC,EARc,OASQn3B,oBAAS,GATjB,mBASvBo3B,EATuB,KASVC,EATU,OAUEr3B,mBAAS,MAVX,mBAUvBs3B,EAVuB,KAUbC,EAVa,OAWNv3B,mBACpBnF,IAAKgE,UAAU24B,KAAO38B,IAAKgE,UAAU24B,KAAO,IAZlB,mBAWvBA,EAXuB,KAWjBC,GAXiB,KAexBv6B,GAAW6M,cACX2tB,GAAeztB,uBAAY,SAACuF,GAAD,OAAOtS,GAASikB,YAAa3R,MAAK,CAC/DtS,KAEEy6B,GAAa1tB,uBAAY,SAACuF,GAAD,OAAOtS,GAASsiB,YAAWhQ,MAAK,CAACtS,KAE1D6R,GAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,GAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,KA8CL,OACI,oCACI,kBAAC,WAAD,CAAUooB,SAAU,IAChB,kBAACyR,EAAD,CACIa,UA5BM,SAACC,GACnB,IAAMC,EAAO,sBAAON,GAAP,CAAaK,IAC1BJ,GAAQK,GACR,IAAM1Z,EAAOvjB,IAAKgE,UAClBuf,EAAKoZ,KAAOM,EACZj9B,IAAK+D,QAAQwf,IAwBDxiB,KAAMw7B,EACN3qB,QAAS,kBAAM4qB,GAAe,OAGtC,kBAAC9jB,EAAD,CACI4f,QAAM,EACNtf,SAAUqjB,GAAWj5B,EACrBqR,SAAU,kBAAMrR,GAAck5B,GAAYD,KAE1C,kBAACnjB,EAAD,CACIkC,gBAAc,kBACd1W,GAAG,kBAEH,kBAAC,IAAD,CACI4W,QAAM,EACN1W,IAAI,2BACJ+K,QAAS,kBACJvM,GAAcoH,EAAQ8N,KAAK,oBAGhC,kBAAC,IAAD,KACI,kBAAC,IAAD,CACIzP,UAAW6G,KAAU,mBAEZ1G,EAAQgQ,SACLqjB,GAAWj5B,GAHF,cAIZ4F,EAAQ6pB,SAAU,GAJN,GAMjB7pB,EAAQwgB,YAGb6S,GAAWj5B,IACV,kBAAC,IAAD,CAAcyF,UAAWG,EAAQ6pB,WAGzC,kBAAC,IAAD,CAAcpX,QAAQ,8BAE1B,kBAAC,IAAD,OAGJ,kBAACpC,EAAD,KACI,kBAAC,IAAD,CAAMqgB,aAAc,kBAAMgD,EAAY,QAClC,kBAAC,IAAD,CACIphB,QAAM,EACN5W,GAAG,YACHmE,UAAWG,EAAQ8xB,cAEnB,kBAAC,IAAD,KACI,kBAAC,IAAD,OAEJ,kBAAC,IAAD,OAEJ,kBAAC,IAAD,CACIxf,QAAM,EACN5W,GAAG,aACHmE,UAAWG,EAAQ8xB,cAEnB,kBAAC,IAAD,KACI,kBAAC,IAAD,OAEJ,kBAAC,IAAD,OAEH,CACG,CACIl2B,IAAK,eACLF,GAAI,QACJiK,KACI,kBAAC,IAAD,CACI9F,UAAW,CACPG,EAAQ6pB,QACR7pB,EAAQk0B,cAKxB,CACIt4B,IAAK,eACLF,GAAI,QACJiK,KACI,kBAAC,IAAD,CACI9F,UAAW,CACPG,EAAQ6pB,QACR7pB,EAAQm0B,YAKxB,CACIv4B,IAAK,eACLF,GAAI,QACJiK,KACI,kBAAC,IAAD,CACI9F,UAAW,CACPG,EAAQ6pB,QACR7pB,EAAQo0B,cAKxB,CACIx4B,IAAK,eACLF,GAAI,MACJiK,KACI,kBAAC,IAAD,CACI9F,UAAW,CACPG,EAAQ6pB,QACR7pB,EAAQq0B,aAK1BpwB,KAAI,SAACgB,GAAD,OACF,kBAAC,IAAD,CACIqN,QAAM,EACN1W,IAAKqJ,EAAErJ,IACP+K,QAAS,kBAAMktB,GAAa5uB,EAAEvJ,GAAK,eAEnC,kBAAC,IAAD,CAAcmE,UAAWG,EAAQ+xB,SAC5B9sB,EAAEU,MAEP,kBAAC,IAAD,CAAc8M,QAASxN,EAAErJ,UAGhC+3B,EAAK1vB,KAAI,SAACgB,GAAD,OACN,kBAAC,IAAD,CACIqN,QAAM,EACN1W,IAAKqJ,EAAEvJ,GACP+0B,aAAc,kBAAMiD,EAAYzuB,EAAEvJ,KAClCiL,QAAS,WACU,IAAX1B,EAAEvN,KACFm8B,GAAa,OAAS5uB,EAAEvJ,IAExBo4B,GAAW7uB,EAAEqvB,cAIrB,kBAAC,IAAD,CAAcz0B,UAAWG,EAAQ+xB,SAxL7C,SAACpsB,EAAMzD,GACnB,GAAIgwB,EAAMvsB,GAAO,CACb,IAAM4uB,EAAgBrC,EAAMvsB,GAC5B,OACI,kBAAC4uB,EAAD,CACI10B,UAAW,CAACG,EAAQ6pB,SACpBpkB,MACIvD,EACM,CACIA,MAAOA,GAEX,KAKtB,OAAO,kBAAC,IAAD,CAAQrC,UAAW,CAACG,EAAQ6pB,WAyKN2K,CACc,IAAXvvB,EAAEvN,KACIuN,EAAEU,KACF,qBACK,IAAXV,EAAEvN,KAAauN,EAAE/C,MAAQ,OAGjC,kBAAC,IAAD,CACIrC,UAAWG,EAAQgyB,SACnBvf,QAASxN,EAAE1M,OAGdk7B,IAAaxuB,EAAEvJ,IACZ,kBAAC,IAAD,CACIiL,QAAS,kBA5KvBjL,EA4K0CuJ,EAAEvJ,QA3K9DuQ,IAAIyL,OAAO,QAAUhc,GAChByQ,MAAK,WACF,IAAM8nB,EAAUN,EAAKj6B,QAAO,SAACuL,GACzB,OAAOA,EAAEvJ,KAAOA,KAEpBk4B,GAAQK,GACR,IAAM1Z,EAAOvjB,IAAKgE,UAClBuf,EAAKoZ,KAAOM,EACZj9B,IAAK+D,QAAQwf,MAEhBnO,OAAM,SAACjW,GACJ+U,GAAe,MAAO,QAAS/U,EAAMF,QAAS,YAZrC,IAACyF,IA8Kc,kBAAC,IAAD,CACItD,KAAM,QACNib,KAAK,MACL7H,aAAW,UAEX,kBAAC,IAAD,YAOpB,kBAAC,IAAD,CAAU8G,QAAM,EAAC3L,QAAS,kBAAM6sB,GAAe,KAC3C,kBAAC,IAAD,CAAc3zB,UAAWG,EAAQ+xB,SAC7B,kBAAC,IAAD,CAASlyB,UAAWG,EAAQ6pB,WAEhC,kBAAC,IAAD,CAAcpX,QAAS,kCAEvB,IACR,kBAAC,IAAD,W,gCC9XpB,IA6GIvQ,EA7GJ,6JA2BMgwB,EAAQ,CACV1O,MAAO,CACHthB,MAAO,UACPyD,KAAM8uB,KAEVhR,MAAO,CACHvhB,MAAO,UACPyD,KAAM+uB,KAEVhR,MAAO,CACHxhB,MAAO,UACPyD,KAAMgvB,KAEVhR,IAAK,CACDzhB,MAAO,UACPyD,KAAMivB,KAEVhR,KAAM,CACF1hB,MAAO,UACPyD,KAAMkvB,KAEVhR,IAAK,CACD3hB,MAAO,mBACPyD,KAAMmvB,KAEVhR,MAAO,CACH5hB,MAAO,UACPyD,KAAMovB,KAEVnnB,KAAM,CACF1L,MAAO,UACPyD,KAAMqvB,KAEVjR,QAAS,CACL7hB,MAAO,UACPyD,KAAMsvB,KAEVjR,IAAK,CACD9hB,MAAO,UACPyD,KAAMuvB,KAEVjR,OAAQ,CACJ/hB,MAAO,UACPyD,KAAMwvB,KAEVjR,QAAS,CACLhiB,MAAO,UACPyD,KAAMyvB,KAEV33B,KAAM,CACFyE,MAAO,UACPyD,KAAM0vB,KAEVlT,IAAK,CACDjgB,MAAO,UACPyD,KAAM2vB,KAEV3S,GAAI,CACAzgB,MAAO,UACPyD,KAAM4vB,KAEVpR,OAAQ,CACJjiB,MAAO,UACPyD,KAAM6vB,KAEV/yB,EAAG,CACCP,MAAO,UACPyD,KAAM8vB,KAEVnT,IAAK,CACDpgB,MAAO,UACPyD,KAAM+vB,KAEV3S,GAAI,CACA7gB,MAAO,UACPyD,KAAMgwB,MAsDCC,IA7CE,SAACn2B,GACd,IAAMP,EAAQa,MAER81B,EAAap2B,EAAMmV,SAASxR,MAAM,KAAKkB,MAAMugB,cAC/CiR,EAAW,OACft/B,OAAOgrB,KAAK+B,KAAWnlB,SAAQ,SAACuN,IACc,IAAtC4X,IAAU5X,GAAGvK,QAAQy0B,KACrBC,EAAWnqB,MAGnB,IAAM4oB,EAAgBrC,EAAM4D,GAAUnwB,KAMtC,OALAzD,EAhBa,SAAChD,EAAOgD,GAAR,MACU,UAAvBhD,EAAMe,QAAQvI,KAAmBwK,EAAQ6zB,YAAQ7zB,EAAO,IAehD8zB,CAAS92B,EAAOgzB,EAAM4D,GAAU5zB,OACpCzC,EAAMw2B,eACNx2B,EAAMw2B,cAAc/zB,GAIpB,oCACKzC,EAAMy2B,UACH,kBAAC,IAAD,CACIr2B,UAAWJ,EAAMI,UACjB4F,MAAO,CACH/F,gBAAiBwC,IAGrB,kBAACqyB,EAAD,CACI10B,UAAWJ,EAAM02B,cACjB1wB,MAAO,CACHvD,MAAOhD,EAAMe,QAAQqQ,WAAW4a,WAK9CzrB,EAAMy2B,UACJ,kBAAC3B,EAAD,CACI10B,UAAWJ,EAAMI,UACjB4F,MAAO,CACHvD,MAAOA,Q,6KCtHzBk0B,E,4MACF/3B,MAAQ,CACJgR,MAAO,GACPgnB,WAAY,EACZC,QAAQ,G,EAGZjgB,iCAAmC,SAACC,GAChC,IAAMjH,EAAQ,GACVknB,EAAW,EACf,GAA2B,KAAvBjgB,EAAUzY,MAAMnC,GAAW,CAC3B,GACIib,IAAWrc,YAAY,EAAKmF,MAAMtI,SAASyf,YAC1CN,EAAUzY,MAAMxD,KACnB,CACE,IAAMm8B,EAAS,CACXC,MAAOngB,EAAUzY,MAAMtF,KACvBkR,IAAKhU,IAAU,kBAAoB6gB,EAAUzY,MAAMjC,KASvD,OAPA26B,EAAW,EACXlnB,EAAMC,KAAKknB,QACX,EAAKtgB,SAAS,CACVmgB,WAAYE,EACZlnB,MAAOA,EACPinB,QAAQ,IAKhBhgB,EAAUxY,MAAMmG,KAAI,SAACpI,GACjB,IAAMi6B,EAAWj6B,EAAMtD,KAAK6K,MAAM,KAAKkB,MAAMugB,cAC7C,IAA4C,IAAxCjD,IAAiBxgB,QAAQ00B,GAAkB,CAC3C,IAAIrsB,EAAM,GAGNA,EAFAkN,IAAWrc,YAAY,EAAKmF,MAAMtI,SAASyf,WAC3CnN,EAAMhU,IAAU,kBAAoBoG,EAAMD,KAGtC,SACAyb,mBACmB,MAAfxb,EAAMxB,KACAwB,EAAMxB,KAAOwB,EAAMtD,KACnBsD,EAAMxB,KAAO,IAAMwB,EAAMtD,MAGjC9C,IAAU,iBAAmBoG,EAAMH,GAE7C,IAAM86B,EAAS,CACXC,MAAO56B,EAAMtD,KACbkR,IAAKA,GAGL5N,EAAMxB,OAASic,EAAUzY,MAAMxD,MAC/BwB,EAAMtD,OAAS+d,EAAUzY,MAAMtF,OAE/Bg+B,EAAWlnB,EAAMlR,QAErBkR,EAAMC,KAAKknB,OAGnB,EAAKtgB,SAAS,CACVmgB,WAAYE,EACZlnB,MAAOA,EACPinB,QAAQ,M,EAKpB/P,YAAc,WACV,EAAK9mB,MAAMkb,eAAe3gB,YAAmB4D,WAAWC,OACxD,EAAKqY,SAAS,CACVogB,QAAQ,K,4CAIhB,WAAU,IAAD,SACiClgC,KAAKiI,MAAnCg4B,EADH,EACGA,WAAYC,EADf,EACeA,OAAQjnB,EADvB,EACuBA,MAE5B,OACI,6BACKinB,GACG,kBAAC,IAAD,CACII,OAAQrnB,EACRsnB,QAASL,EACT1tB,QAAS,kBAAM,EAAK2d,eACpB7oB,MAAO24B,EACPO,cAAe,SAACC,GAAD,OACX,EAAK3gB,SAAS,CACVmgB,WAAYQ,Y,GAvFTjd,aAqG7Bkd,EAAahd,aApHK,SAACzb,GACrB,MAAO,CACHR,MAAOQ,EAAMrE,SAAS4D,WAAWC,MACjCC,MAAOO,EAAMrE,SAAS4D,WAAWE,UAId,SAACzE,GACxB,MAAO,CACHshB,eAAgB,SAAC9c,GACbxE,EAASshB,YAAe9c,QA0GjBic,CAGjBnK,aAzHa,iBAAO,KAyHpBA,CAAmBoK,YAAWqc,KAEjBU,a,sHCvIFC,EAAa,SAACC,GAAD,MAAwB,oBAARA,GAE7BC,EAAO,aAEPC,EAAY,SAACztB,GAAD,OAAS,SAAC3O,GAC/B,IAAMq8B,EAAar2B,SAASs2B,cAAc,UAC1C,GAAmB,kBAAR3tB,EAAkB,CAEzB,IAAK,IAAM7N,KAAO6N,EACVjT,OAAOD,UAAU8gC,eAAeC,KAAK7tB,EAAK7N,KAC1Cu7B,EAAWv7B,GAAO6N,EAAI7N,IAG9B6N,EAAMA,EAAIA,SAEV0tB,EAAW1tB,IAAMA,EAKrB,OAHA0tB,EAAWz6B,iBAAiB,QAAQ,kBAAM5B,EAAG,KAAM2O,MACnD0tB,EAAWz6B,iBAAiB,SAAS,kBAAM5B,GAAG,EAAM2O,MACpD3I,SAASy2B,KAAKC,YAAYL,GACnBA,IAGLM,EAAc,SAACC,GACjB,IAAMlW,EAAOhrB,OAAOgrB,KAAKkW,GACrBt3B,GAAK,EACT,MAAO,CACHu3B,KADG,WAGC,QADAv3B,GACSohB,EAAKrjB,OAAe,KACjBqjB,EAAKphB,MAMhBw3B,EAAW,sCAAIC,EAAJ,yBAAIA,EAAJ,uBAAc,SAACC,GAAD,OAAU,SAACh9B,GAC7C,IAAIi9B,GAAW,EACXC,EAAY,EACVC,EAAM,IACZJ,EAAQA,EAAMn+B,OAAOq9B,IAEX54B,QAAU,EAAGrD,EAAG,MAEtB+8B,EAAMz5B,SAAQ,SAAC85B,EAAM93B,GACH83B,GACR,SAACC,GAAkB,IAAD,uBAATC,EAAS,iCAATA,EAAS,kBAChBD,EAAKJ,GAAW,GAGZK,EAAKj6B,QAAU,IAAGi6B,EAAOA,EAAK,IAElCH,EAAI73B,GAAKg4B,EACTJ,KAGAjB,EAAWe,IAAOA,EAAKR,KAAK,KAAMa,EAAKC,EAAMh4B,GAE7C23B,EAAUj9B,GAAG,GACR+8B,EAAM15B,SAAW65B,GACtBl9B,EAAG,KAAMm9B,YAQhBI,EAAS,sCAAIR,EAAJ,yBAAIA,EAAJ,uBAAc,SAACC,GAAD,OAAU,SAACh9B,GAC3C+8B,EAAQA,EAAMn+B,QAAO,SAACs9B,GAAD,OAAgB,MAAPA,KAC9B,IAUIp7B,EAAK08B,EAVHC,EAAUd,EAAYI,GACtBW,EAAY,WACd,IAAM58B,EAAM28B,EAAQZ,OAChBW,EAAQT,EAAMj8B,GAKlB,OAHI0lB,MAAMmX,QAAQH,KAEdA,EAAQV,EAAS70B,MAAM,KAAMu1B,GAAOhB,KAAK,KAAMQ,IAC5C,EAAEl8B,EAAK08B,IAGdX,EAAOa,IAGX,GAFA58B,EAAM+7B,EAAK,GAEE,OADbW,EAAQX,EAAK,IACM,OAAO78B,EAAG,MAE7B,IAAMm9B,EAAM,IACK,SAAXS,IACFJ,GAAM,SAACH,GAAkB,IAAD,uBAATC,EAAS,iCAATA,EAAS,kBAIpB,GAHIA,EAAKj6B,QAAU,IAAGi6B,EAAOA,EAAK,IAC9BrB,EAAWe,IAAOA,EAAKR,KAAK,KAAMa,EAAKC,EAAMx8B,GAE7Cu8B,EAAKr9B,EAAGq9B,OACP,CAOD,GALAF,EAAI3oB,KAAK8oB,GAETT,EAAOa,IACP58B,EAAM+7B,EAAK,GAEE,OADbW,EAAQX,EAAK,IACM,OAAO78B,EAAG,KAAMm9B,GAE9BS,QAIjBA,MCtGEC,EAAe,GACfC,EAAiB,GACnBC,EAAe,GAEbC,EAAW,SAACC,GACVJ,EAAav3B,QAAQ23B,GAAS,GAC9BJ,EAAarpB,KAAKypB,IAIpBC,EAAqB,WACnBH,EAAa16B,OAAS,IACtB06B,EAAaz6B,SAAQ,SAAC66B,GAClB,IAAMC,EAAOp4B,SAASqB,cAAT,sBAAsC82B,EAAtC,OACD,MAARC,GACAA,EAAKC,WAAWC,YAAYF,MAIpCL,EAAe,KA0CvB,IAsEeQ,EAtEQ,kBAAM,SAACC,GAAsB,IAC1CC,EADyC,kDAU3C,WAAY95B,EAAO+5B,GAAU,IAAD,8BACxB,cAAM/5B,EAAO+5B,IAERn7B,MAAQ,CACTo7B,gBAAgB,EAChBC,qBAAqB,GAGzB,EAAKC,YAAa,EARM,EAVe,qDAqB3C,WAAqB,IAAD,OAChBvjC,KAAKujC,YAAa,EA5DvB,SAA6BC,GAA6B,IAApBC,EAAmB,uDAAN5C,EAEhD6C,EAAgB,SAACb,GACnB,IAAMxvB,EAAwB,kBAAXwvB,EAAsBA,EAAOxvB,IAAMwvB,EACtD,GAAIN,EAAav3B,QAAQqI,GAAO,EAC5B,OAAO,SAACswB,GACJ,IAAMC,EAAYpB,EAAenvB,IAAQ,GAGzC,GAFAuwB,EAAU1qB,KAAKyqB,GACfnB,EAAenvB,GAAOuwB,EACG,IAArBA,EAAU77B,OACV,OAAO+4B,EAAU+B,EAAV/B,EAAkB,SAACiB,GACtBS,EAAenvB,GAAKrL,SAAQ,SAACtD,GAAD,OAAQA,EAAGq9B,EAAK1uB,aACrCmvB,EAAenvB,QAMpCouB,EAAQ+B,EAAQ31B,KAAI,SAACwF,GACvB,OAAI6X,MAAMmX,QAAQhvB,GACPA,EAAIxF,IAAI61B,GACLA,EAAcrwB,MAGhC4uB,EAAM,WAAN,cAAUR,GAAVQ,EAAiB,SAACF,EAAK1uB,GACf0uB,EACAU,EAAavpB,KAAK7F,GAEd6X,MAAMmX,QAAQhvB,GACdA,EAAIrL,QAAQ06B,GACTA,EAASrvB,KANxB4uB,EAQG,SAACF,GACAa,IACAa,EAAW1B,MAkCP8B,CAPgB,CACZ,CAAC,gCACD,CAAC,uCACD,CAAC,qCACD,CAAC,6BACD,CAAC,gCAAkC/iC,OAAOgjC,WAAa,SAE9B,SAAC/B,GACtB,EAAKwB,YACL,EAAKzjB,SACD,CACIujB,gBAAgB,EAChBC,qBAAsBvB,IAE1B,WACSA,GACD,EAAK14B,MAAM06B,yBAvCQ,kCA+C3C,WACI/jC,KAAKujC,YAAa,IAhDqB,gCAmD3C,WAEI,OAAOvjC,KAAKgkC,KAAKC,kBArDsB,oBAwD3C,WACI,IAAM56B,EAAK,uCACJrJ,KAAKqJ,OACLrJ,KAAKiI,OAFD,IAGP0hB,IAAK,oBAGT,OAAO,kBAACuZ,EAAqB75B,OA/DU,GACpBma,aAkE3B,OAlEM2f,EAKKe,aAAe,CAClBH,eAAgBlD,GA4DjBsD,IAAahB,EAAcD,K,2PCtDhCkB,G,4MACFn8B,MAAQ,CACJtG,MAAM,EACN0iC,MAAO,I,EA6EXC,aAAe,WACN,EAAKr8B,MAAMtG,MACZ,EAAKme,SAAS,CAAEne,MAAM,K,EAI9B4iC,aAAe,SAACl9B,GACZ,EAAKgC,MAAMk7B,aAAal9B,GACxB,EAAKm9B,QAAQn9B,I,EAGjBo9B,QAAU,SAACp9B,GACP,EAAKgC,MAAMo7B,QAAQp9B,GACnB,EAAKm9B,QAAQn9B,I,EAGjB8oB,YAAc,WACV,EAAKrQ,SAAS,CAAEne,MAAM,K,EAG1B+iC,WAAa,WACTh6B,SAASi6B,uBAAuB,kBAAkB,GAAGC,S,EAGzDC,sBAAwB,WACpB,MAAyC,UAAlC,EAAKx7B,MAAMP,MAAMe,QAAQvI,KAC1Bq+B,kBAAQ,EAAKt2B,MAAMP,MAAMe,QAAQwS,QAAQsT,KAAM,IAC/CmV,iBAAO,EAAKz7B,MAAMP,MAAMe,QAAQqQ,WAAW4a,MAAO,K,6CApG5D,SAAQuP,GACJrkC,KAAK8f,SAAS,CACVukB,MAAM,GAAD,mBAAMrkC,KAAKiI,MAAMo8B,OAAjB,YAA2BA,Q,qBAIxC,SAAQh9B,GACJ,IAAM09B,EAAQ,YAAO/kC,KAAKiI,MAAMo8B,OAC1BW,EAASD,EAAS/iB,WAAU,SAACijB,GAC/B,OAAOA,EAAE3/B,KAAO+B,EAAK/B,OAET,IAAZ0/B,IACAD,EAASG,OAAOF,EAAQ,GACxBhlC,KAAK8f,SAAS,CACVukB,MAAOU,EACPpjC,KAA0B,IAApBojC,EAASh9B,Y,0BAK3B,SAAaV,GACT,IAAM09B,EAAQ,YAAO/kC,KAAKiI,MAAMo8B,OAC1BW,EAASD,EAAS/iB,WAAU,SAACijB,GAC/B,OAAOA,EAAE3/B,KAAO+B,EAAK/B,OAEpB+B,EAAK89B,QAAU99B,EAAK+9B,UACjBL,EAASC,KAAYD,EAASC,GAAQG,SACtCJ,EAASC,GAAU39B,EACnBrH,KAAK8f,SAAS,CACVukB,MAAOU,KAIf19B,EAAK+9B,WAAY,I,yBAIzB,SAAY/9B,GACR,IAAM09B,EAAQ,YAAO/kC,KAAKiI,MAAMo8B,OAC1BW,EAASD,EAAS/iB,WAAU,SAACijB,GAC/B,OAAOA,EAAE3/B,KAAO+B,EAAK/B,OAET,IAAZ0/B,GACgC,IAA5BD,EAASC,GAAQ/tB,SACjB8tB,EAASC,GAAQ/tB,OAAS,EAC1BjX,KAAK8f,SAAS,CACVukB,MAAOU,O,sBAMvB,SAAS19B,EAAM89B,GACX,IAAMJ,EAAQ,YAAO/kC,KAAKiI,MAAMo8B,OAC1BW,EAASD,EAAS/iB,WAAU,SAACijB,GAC/B,OAAOA,EAAE3/B,KAAO+B,EAAK/B,OAET,IAAZ0/B,GACAD,EAASC,GAAQ/tB,OAAS,EAC1B8tB,EAASC,GAAQG,OAASA,IAE1B99B,EAAK4P,OAAS,EACd5P,EAAK89B,OAASA,EACdJ,EAAS7rB,KAAK7R,IAElBrH,KAAK8f,SAAS,CACVukB,MAAOU,M,wBAIf,SAAW17B,GACP,OAAO,kBAACg8B,EAAA,EAAD,eAAOC,UAAU,MAASj8B,M,oBAgCrC,WAAU,IAAD,OACGO,EAAY5J,KAAKqJ,MAAjBO,QACAZ,EAAUhJ,KAAKqJ,MAAfL,MAUR,OARAhJ,KAAKqJ,MAAMk8B,MAAM,CACbjB,aAActkC,KAAKskC,aAAakB,KAAKxlC,MACrCylC,QAASzlC,KAAKylC,QAAQD,KAAKxlC,MAC3Bm6B,aAAcn6B,KAAKm6B,aAAaqL,KAAKxlC,MACrC0lC,YAAa1lC,KAAK0lC,YAAYF,KAAKxlC,MACnC2lC,SAAU3lC,KAAK2lC,SAASH,KAAKxlC,QAI7B,kBAAC0X,EAAA,EAAD,CACIkuB,WAAYC,YAAY,KAAM78B,GAC9BrH,KAAM3B,KAAKiI,MAAMtG,KACjB6Q,QAASxS,KAAKmwB,YACd2V,oBAAqB9lC,KAAK+lC,YAE1B,kBAACC,EAAA,EAAD,CAAQv8B,UAAWG,EAAQqqB,QACvB,kBAACgS,EAAA,EAAD,KACI,kBAACjpB,EAAA,EAAD,CACIlR,MAAM,UACNyE,QAASvQ,KAAKmwB,YACd/a,aAAW,SAEX,kBAAC,IAAD,OAEJ,kBAACwI,EAAA,EAAD,CACIjI,QAAQ,KACR7J,MAAM,UACNrC,UAAWG,EAAQs8B,MAHvB,4BAOA,kBAAClpB,EAAA,EAAD,CAAYlR,MAAM,UAAUyE,QAASvQ,KAAK0kC,YACtC,kBAAC,IAAD,SAIZ,kBAAC/sB,EAAA,EAAD,CAAelO,UAAWG,EAAQu8B,eAC9B,kBAACpqB,EAAA,EAAD,CAAMtS,UAAWG,EAAQw8B,UACpBpmC,KAAKiI,MAAMo8B,MAAMx2B,KAAI,SAACw4B,EAAMr8B,GAAP,OAClB,yBAAKxE,IAAKwE,EAAGP,UAAWG,EAAQ08B,mBACX,IAAhBD,EAAKpvB,QACF,yBACI5H,MAAO,CACH/F,gBAAiB,EAAKu7B,wBACtB77B,MAAOq9B,EAAKvM,QAAU,KAE1BrwB,UAAWG,EAAQ28B,WAG3B,kBAACtqB,EAAA,EAAD,CACIxS,UAAWG,EAAQ48B,gBACnBtqB,QAAM,GAEN,kBAACsjB,EAAA,EAAD,CAAUhhB,SAAU6nB,EAAKlkC,KAAM29B,UAAQ,IACtB,IAAhBuG,EAAKpvB,QACF,kBAACmF,EAAA,EAAD,CACI3S,UAAWG,EAAQ68B,WACnBpqB,QACI,0BACI5S,UAAWG,EAAQ4U,UAElB6nB,EAAKlkC,MAGd0R,UAAW,wDAGF,IAAhBwyB,EAAKpvB,QACF,kBAACmF,EAAA,EAAD,CACI3S,UAAWG,EAAQ68B,WACnBpqB,QACI,0BACI5S,UAAWG,EAAQ4U,UAElB6nB,EAAKlkC,MAGd0R,UACI,6BACKwyB,EAAKvM,SAAW,IACb,oCACKh5B,OAAO4lC,SACHC,WACGN,EAAKO,OAER53B,cALT,wBAMW,IACNlO,OAAO4lC,SACHC,WACGN,EAAKQ,QAER73B,cAAe,IAXxB,WAYQ,IACHlO,OAAO4lC,SACHC,WACGN,EAAKrkC,MAERgN,cAAe,IAjBxB,KAkBOq3B,EAAKvM,QAlBZ,IAkBsB,KAGzBuM,EAAKvM,QAAU,IACZ,yDAMH,IAAhBuM,EAAKpvB,QACF,kBAACmF,EAAA,EAAD,CACI3S,UAAWG,EAAQ68B,WACnBpqB,QACI,0BACI5S,UAAWG,EAAQ4U,UAElB6nB,EAAKlkC,MAGd0R,UAAWwyB,EAAKpvB,SAGP,IAAhBovB,EAAKpvB,QACF,kBAACmF,EAAA,EAAD,CACI3S,UAAWG,EAAQ68B,WACnBpqB,QACI,0BACI5S,UAAWG,EAAQ4U,UAElB6nB,EAAKlkC,MAGd0R,UACI,yBACIpK,UACIG,EAAQk9B,aAGXT,EAAKlB,OACN,gCAKC,IAAhBkB,EAAKpvB,QACF,kBAACmF,EAAA,EAAD,CACI3S,UAAWG,EAAQ68B,WACnBpqB,QACI,0BACI5S,UAAWG,EAAQ4U,UAElB6nB,EAAKlkC,MAGd0R,UACI,yBACIpK,UACIG,EAAQm9B,eAFhB,qBAMI,gCAKhB,kBAACzqB,EAAA,EAAD,CACI7S,UAAWG,EAAQ0X,QAEF,IAAhB+kB,EAAKpvB,QACF,kBAAC+F,EAAA,EAAD,CACI5H,aAAW,SACX7E,QAAS,kBACL,EAAKg0B,aAAa8B,KAGtB,kBAAC,IAAD,OAGS,IAAhBA,EAAKpvB,QACF,kBAAC8F,EAAA,EAAD,CAAS3M,MAAO,gBACZ,kBAAC4M,EAAA,EAAD,CACI5H,aAAW,SACX7E,QAAS,kBACL,EAAKk0B,QAAQ4B,KAGjB,kBAAC,IAAD,UAMpB,kBAACvqB,EAAA,EAAD,iB,GAlTT0H,aA6TRjK,gBAjXA,SAACzQ,GAAD,YAAY,CACvBmrB,OAAQ,CACJvkB,SAAU,YAEdw2B,KAAM,CACFA,KAAM,GAEVc,YAAa,CACT1yB,UAAW,GAEf8xB,UAAQ,mBACHt9B,EAAMI,YAAYqe,GAAG,MAAQ,CAC1B/T,SAAU,MAFV,wBAIK,GAJL,GAMR2yB,cAAe,CACXl9B,QAAS,GAEb89B,cAAe,CACXj7B,MAAO,WAEXg7B,YAAa,CACTh7B,MAAO,UACPm7B,UAAW,aAEfR,WAAY,CACRpvB,WAAY,GACZ5G,YAAa,IAEjB6Q,OAAQ,CACJ7K,OAAQ,GAEZ6vB,kBAAmB,CACf52B,SAAU,YAEd82B,gBAAiB,CACb92B,SAAU,WACV+G,OAAQ,GAEZ8vB,SAAU,CACN1Q,WAAY,mBACZpf,OAAQ,EACRrD,OAAQ,OACR1D,SAAU,WACVsE,KAAM,EACND,IAAK,GAETyK,SAAU,CACNyoB,UAAW,gBAgUJ1tB,CAAmB2tB,cAAYzR,YAAU2O,M,uJC1XlDx7B,GAAYC,cAAW,iBAAO,CAChCyN,IAAK,CACD5C,OAAQ,EACRK,IAAK,OACLwC,MAAO,GACPC,OAAQ,GACRxC,KAAM,OACNyC,OAAQ,EACR/G,SAAU,SAEdgH,MAAO,CACHhH,SAAU,WACV8G,OAAQ,GACRzC,IAAK,OACL0C,OAAQ,KACRF,MAAO,GAEX,UAAW,CACP,yCAA0C,CACtCvN,MAAO,UAKJ,SAASm+B,GAAa99B,GAAQ,IAAD,EAChBtD,oBAAS,GADO,oBACjCpE,EADiC,KAC3BylC,EAD2B,OAEZrhC,mBAAS,GAFG,oBAEjCshC,EAFiC,KAEzBC,EAFyB,KAGlC19B,EAAUhB,KACV3F,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAECskC,EAAsBv3B,uBACxB,kBAAM/M,EAAS+iB,iBACf,CAAC/iB,IAECukC,EAAoBx3B,uBACtB,kBAAM/M,EAASgjB,iBACf,CAAChjB,IAGLoD,qBAAU,WACNihC,EAAUj+B,EAAMo+B,UACjB,CAACp+B,EAAMo+B,SAEV,IAAMC,EAAa,SAACpiC,GAChB,IAAMqiC,EAAej9B,SAASi6B,uBAAuBr/B,GAAI,GACrDoF,SAASy2B,KAAKyG,SAASD,GACvBA,EAAa/C,QAEb9vB,EAAe,MAAO,QAAS,+DAAc,YAG/C+yB,EAAgB,WACdlmC,IACe,IAAX0lC,EACAh+B,EAAMi7B,eAENoD,EAAW,oBAavB,OACI,kBAAC9hC,GAAA,EAAD,CAAYE,QAAM,GACd,kBAACgiC,GAAA,EAAD,CACIC,aAAcV,EACdz9B,QAAS,CACL8M,MAAO9M,EAAQ8M,OAEnBjN,UAAWG,EAAQ0M,IACnB0xB,UAAsB,IAAXX,EACXv7B,MAAM,WAEN,kBAACm8B,GAAA,EAAD,CAAUtmC,KAAMA,GAAQoC,KAAaO,aACrC,kBAAC4jC,GAAA,EAAD,CACIC,UAAU,6BACVniC,QAAQ,EACRoiC,aAAa,2BACb74B,KACI,kBAAC84B,GAAA,EAAD,CACIC,UACKvkC,KAAaO,YAAc,kBAAC,KAAD,QAIxCkO,QA3BI,WAChB40B,GAAQ,IA2BImB,SAAU,CACNh4B,QAAS,kBACJxM,KAAaO,YAAcujC,KAChC/7B,MAAO,aAEXkpB,OArCG,WACfoS,GAAQ,IAqCIzlC,KAAMA,GAELoC,KAAaO,YACV,kBAACkkC,GAAA,EAAD,CACIhjC,IAAI,aACJ+J,KAAM,kBAAC,KAAD,MACNk5B,aAAW,EACXL,aAAa,2BACb73B,QAAS,kBAAMs3B,KACfz3B,MAAO,8BAGbrM,KAAaO,YACX,kBAACkkC,GAAA,EAAD,CACIhjC,IAAI,eACJ+J,KAAM,kBAAC,KAAD,MACNk5B,aAAW,EACXL,aAAa,2BACb73B,QAAS,kBAAMm3B,EAAW,qBAC1Bt3B,MAAO,6BAGf,kBAACo4B,GAAA,EAAD,CACIhjC,IAAI,YACJ+J,KAAM,kBAAC,KAAD,MACNk5B,aAAW,EACXL,aAAa,2BACb73B,QAAS,kBAAMg3B,KACfn3B,MAAO,6BAEX,kBAACo4B,GAAA,EAAD,CACIhjC,IAAI,UACJ+J,KAAM,kBAAC,KAAD,MACNk5B,aAAW,EACXL,aAAa,2BACb73B,QAAS,kBAAMi3B,KACfp3B,MAAO,gC,aCpJ3By2B,IAAS,EAuBP6B,G,kDACF,WAAYr/B,GAAQ,IAAD,8BACf,cAAMA,IAcVo7B,QAAU,SAACp9B,GACP,EAAKshC,SAASC,QAAQvhC,EAAKiZ,aAC3B,EAAKjX,MAAM8I,eACP,MACA,QACA,2EACA,SArBW,EAmCnB02B,QAAU,SAACthB,EAAI8c,GACX,IAAMpgC,EAAOnD,OAAOgoC,WAAahoC,OAAOgoC,WAAa,EAAKz/B,MAAMpF,KAChE,GAC4B,KAAxB,EAAKoF,MAAM1B,UACX7G,OAAOC,SAASyf,SAASiO,cAActqB,WAAW,SACpD,CACErD,OAAO0C,SAAP,eACA,IAAMulC,EAAa1E,EAEd/gC,QAAO,SAAC+D,GACL,IAAM2hC,EAAwC,cAA5B3hC,EAAKlF,KAAKssB,cAI5B,OAHIua,GACAzhB,EAAG0hB,WAAW5hC,IAEV2hC,KAEXn7B,KAAI,SAACxG,GACF,IAAMgB,EAAShB,EAAKiZ,YAYpB,OAXIjY,EAAO6gC,cAAwC,KAAxB7gC,EAAO6gC,cAC9B7hC,EAAKpD,KAAO+J,aACRP,aAAS,CAACxJ,EAAMoE,EAAO6gC,gBAE3BpoC,OAAOqoC,UAAU9hC,EAAK/B,IAAM0I,aACxBP,aAAS,CAACxJ,EAAMoE,EAAO6gC,kBAG3BpoC,OAAOqoC,UAAU9hC,EAAK/B,IAAMrB,EAC5BoD,EAAKpD,KAAOA,GAEToD,KAEfvG,OAAO0C,SAAP,QAA2BulC,QAE3BjoC,OAAO4lC,SAAShF,KAAK2C,GAAO,SAACA,GACzB9c,EAAG0hB,WAAW5E,OArEP,EA6KnBC,aAAe,WACXxjC,OAAO0C,SAAP,gBA5KA,EAAKyE,MAAQ,CACTo/B,OAAQ,GAHG,E,0CAOnB,SAAOzG,GACH9/B,OAAO0C,SAAWo9B,I,0BAGtB,SAAav5B,GACTrH,KAAK2oC,SAASM,WAAW5hC,K,0BAa7B,SAAay8B,GACT,MAAmB,UAAfA,EACO,QAEQ,aAAfA,EACO,UAEJ,I,8CA0CX,YAA2E,IAAD,OAAvCT,EAAuC,EAAvCA,eAAgBC,EAAuB,EAAvBA,oBAC/C,GAAID,IAAmBrjC,KAAKqJ,MAAMg6B,eAE9B,GAAIC,EAAqB,CACrB,GAAIuD,GACA,OAEJA,IAAS,EACT,IAAM1iB,EAAOvjB,KAAKgE,UAClB5E,KAAK2oC,SAAW7nC,OAAOsoC,MAAMT,SAAS,CAClCU,SAAU,QACVC,cAAe,CAAC,YAAa,cAC7BzU,UAAW,YACX0U,aAAc,YACdC,cAC4B,WAAxBrlB,EAAKslB,OAAOC,QACN,EACAvlB,EAAKslB,OAAOC,QACtBC,UAAU,EACVC,WAAY5pC,KAAK6pC,aAAa1lB,EAAKslB,OAAOK,UAC1CC,QAAS,CACLC,WACgC,OAA5B7lB,EAAKslB,OAAOQ,aACuB,IAAnC9lB,EAAKslB,OAAOQ,YAAYliC,OAClB,GACA,CACI,CACIqI,MAAO,QACP85B,WAAY/lB,EAAKslB,OAAOQ,YAAY/8B,KAChC,QAM1Bi9B,iBAAiB,EACjBC,YAAa,iCACbC,QAAkC,UAAzBlmB,EAAKslB,OAAOK,SAAuB,QAAU,KACtDQ,OAAQ,IACRC,YAAa,EACbC,iBAAiB,EACjBC,YAAY,EACZC,UAAW,EACXC,KAAM,CACFC,WAAY5qC,KAAK6oC,QAGjBgC,aAAc,aACdC,aAAc,SAACvjB,GACX,EAAKzH,SAAS,CAAEunB,OAAQ9f,EAAGyS,MAAMqN,UAErC0D,eAAgB,SAACxjB,EAAIlgB,GACjBvG,OAAO0C,SAAP,aAAgC6D,IAEpC2jC,eAAgB,SAACzjB,EAAIlgB,GACjB,GAAoB,IAAhBA,EAAKU,OAAT,CAGA0hB,QAAQtf,IACJ,iBACA9C,EAAK,GAAG4P,OACR5P,EAAK,IAET,IAAK,IAAI2C,EAAI,EAAGA,EAAI3C,EAAKU,OAAQiC,IACN,IAAnB3C,EAAK2C,GAAGiN,QACRnW,OAAO0C,SAAP,YAA+B6D,EAAK2C,IAKf,aAAzBma,EAAKslB,OAAOK,UACa,QAAzB3lB,EAAKslB,OAAOK,WAEZ,EAAKzgC,MAAMkP,kBACX,EAAKlP,MAAM+X,oBAGnB6pB,MAAO,WACH,EAAK5hC,MAAMkP,kBACX,EAAKlP,MAAM+X,kBAGf8pB,aAAc,aACdhrC,MAAO,SAACqnB,EAAIwa,EAAKoJ,GACbrqC,OAAO0C,SAAP,eACA1C,OAAO0C,SAAP,SAA4Bu+B,EAAI16B,KAAM8jC,IAG1CC,aAAc,qBAInBprC,KAAKqrC,Y,qBAKpB,c,oBAMA,WACI,OACI,6BACI,kBAAC,GAAD,CACI9F,MAAOvlC,KAAKsrC,OAAO9F,KAAKxlC,MACxBukC,aAAcvkC,KAAKukC,aAAaiB,KAAKxlC,MACrCykC,QAASzkC,KAAKykC,QAAQe,KAAKxlC,QAEN,KAAxBA,KAAKqJ,MAAM1B,UACR,kBAACw/B,GAAD,CACIM,OAAQznC,KAAKiI,MAAMo/B,OACnB/C,aAActkC,KAAKskC,oB,GA7LX9gB,aAqM1B+nB,GAAW7nB,aA1NO,SAACzb,GACrB,MAAO,CACHhE,KAAMgE,EAAM5F,UAAU4B,KACtB0D,SAAUM,EAAMrE,SAAS+D,aAIN,SAAC1E,GACxB,MAAO,CACHsV,gBAAiB,WACbtV,EAASsV,gBAEb6I,eAAgB,WACZne,EAASme,gBAEbjP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,QA0MD,KAAM,CAChE0/B,YAAY,GADC9nB,CAEduf,IAAiByF,KAEL6C,Q,sIC9Nf,SAASE,EAAgBC,EAAOrkB,GAC5BhlB,UAAUspC,cACLC,SAASF,GACT31B,MAAK,SAAC81B,GACHA,EAAaC,cAAgB,WACzB,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACE,cAA3BF,EAAiB9jC,QACb5F,UAAUspC,cAAcO,YAIxBziB,QAAQtf,IACJ,iHAKAkd,GAAUA,EAAO8kB,UACjB9kB,EAAO8kB,SAASN,KAMpBpiB,QAAQtf,IAAI,sCAGRkd,GAAUA,EAAOsW,WACjBtW,EAAOsW,UAAUkO,WAOxC71B,OAAM,SAACjW,GACJ0pB,QAAQ1pB,MAAM,4CAA6CA,MAiCvE,IAAMqsC,EAAc75B,QACa,cAA7BzR,OAAOC,SAASsrC,UAEiB,UAA7BvrC,OAAOC,SAASsrC,UAEhBvrC,OAAOC,SAASsrC,SAASC,MACrB,2D,8DClEGC,MApBf,YAA2C,IAAtB1mC,EAAqB,EAArBA,SAAa2mC,EAAQ,4BACtC,OACI,kBAAC,IAAD,iBACQA,EADR,CAEIC,OAAQ,gBAAG1rC,EAAH,EAAGA,SAAH,OACJH,IAAKuE,MAAMqnC,EAAKta,SACZrsB,EAEA,kBAAC,IAAD,CACI6mC,GAAI,CACAlsB,SAAU,SACVvY,MAAO,CAAEkE,KAAMpL,W,kGCXrC6H,EAAYC,aAAW,SAACC,GAAD,YAAY,CACrCC,QAAM,GACFC,MAAO,OADL,cAEDF,EAAMI,YAAYqe,GAAG,MAAQ,CAC1Bve,MAAO,SAHT,0BAMS,IANT,OAUJI,EAAW,SAACC,GACd,OACI,kBAAC,IAAD,CACIC,gBAAiBD,EAAME,KAAO,OAAS,UACvCC,gBAAiBH,EAAME,KAAO,UAAY,OAC1CE,UAAWJ,EAAMI,aAuBdkjC,MAlBf,WACI,IAAM7jC,EAAQa,cACRC,EAAUhB,IAEhB,OACI,yBACIyG,MAAO,CACHwb,UAAW,WAGf,kBAAC,EAAD,CACIthB,KAA6B,SAAvBT,EAAMe,QAAQvI,KACpBmI,UAAWG,EAAQb,W,0BCjC7BH,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCyG,KAAM,CACF8C,SAAU,SAEdu6B,eAAgB,CACZp2B,OAAQ,IACRpD,OAAQ,QACRM,OAAQ,YACR1K,MAAO,QACP8C,MAAO6zB,YAAQ72B,EAAMe,QAAQ2N,KAAKvB,SAAU,IAC5C4U,UAAW,SACX6O,WAAY,QAEhBmT,aAAc,CACVx6B,SAAU,OACVvG,MAAO6zB,YAAQ72B,EAAMe,QAAQ2N,KAAKvB,SAAU,KAEhD62B,IAAI,CACA9jC,MAAO,OACPoK,OAAQ,GACR25B,UAAW,GACXliB,UAAW,SACXvW,UAAW,cAIJ,SAAS04B,EAAO3jC,GAC3B,IAAMO,EAAUhB,IAChB,OACI,yBAAKa,UAAWG,EAAQgjC,gBACpB,kBAAC,IAAD,CAA+BnjC,UAAWG,EAAQ2F,OAClD,yBAAK9F,UAAWG,EAAQijC,cAAexjC,EAAMpI,KAC7C,yBAAKwI,UAAWG,EAAQkjC,KACpB,uBAAG9rC,KAAM,yBAA0BoH,OAAO,SAAS6kC,IAAI,uBAAsB,yBAAK55B,IAAK,iH,kKC1BjG65B,GAAiB,SAACr9B,GACpB,QAAwBlP,IAApBkP,EAAWsU,OAAuBtU,EAAWsU,KAAK/e,UAAW,CAC7D,IAAM+nC,EAAStoC,KAAKhC,MAAMgN,EAAWs9B,QAC/BhpB,EAAOtU,EAAWsU,YACjBtU,EAAWsU,KAIc,KAA5BA,EAAI,sBACgCxjB,IAApCwsC,EAAOhpB,EAAI,mBAEXtU,EAAW/G,MAAQqkC,EAAOhpB,EAAI,kBAIlCvjB,IAAK6D,aAAa0f,GAKtB,YAHwBxjB,IAApBkP,EAAWsU,MAAsBtU,EAAWsU,KAAK/e,WACjDxE,IAAK+D,QAAQkL,EAAWsU,MAErBtU,GAyBJ,SAASu9B,KAEZ,IAAMjpB,EAAOvjB,IAAKgE,UAClB9D,OAAOgjC,WAAsB,OAAT3f,EAAgBA,EAAKslB,OAAOK,SAAW,QAC3DhpC,OAAOusC,aAAwB,OAATlpB,EAAgBA,EAAKslB,OAAS,GACpD3oC,OAAOqoC,UAAY,G,8CAGhB,WAAgCmE,GAAhC,SAAAxrC,EAAA,sDACH+T,IAAImJ,IAAI,gBACHjJ,MAAK,SAAUxV,GACZ,IAAM4sC,EAAStoC,KAAKhC,MAAMtC,EAASG,KAAKysC,QACxC5sC,EAASG,KAAKoI,MAAQqkC,EAAO5sC,EAASG,KAAK6sC,cAC3ChtC,EAASG,KAAOwsC,GAAe3sC,EAASG,MACxC4sC,EAAMrqC,SAASmkB,YAAc7mB,EAASG,OACtCoE,aAAaG,QACT,kBACAJ,KAAKK,UAAU3E,EAASG,OAI5B,IAAM8sC,EAAmB5sC,IAAK+E,cAAc,eACxC6nC,EACAF,EAAMrqC,SAASiO,YAAiBs8B,IAE5BjtB,IAAWrc,YAAYpD,OAAOC,SAASyf,UACvC8sB,EAAMrqC,SACFiO,YAAiB3Q,EAASG,KAAK+sC,oBAGnCH,EAAMrqC,SACFiO,YAAiB3Q,EAASG,KAAKgtC,sBAK9C13B,OAAM,SAAUjW,GACbutC,EAAMrqC,SACFkP,YACI,MACA,QACA,yDAAcpS,EAAMF,QACpB,aAIXkW,MAAK,WACFq3B,KACAE,EAAMrqC,SAASgkB,kBAxCpB,4C,qEC1DDre,GAAYC,aAAW,iBAAO,CAChC8kC,IAAK,CACD1kC,QAAS,WACTyG,SAAU,WACV8G,OAAQ,OAIHo3B,GAAY,WACrB,IAAMC,EAAYj+B,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAWg+B,aACpDjkC,EAAUhB,KACV7H,EAAWmnB,cAHU,EAIHniB,oBAAS,GAJN,mBAIpB+nC,EAJoB,KAIdC,EAJc,KAa3B,OAPA1nC,qBAAU,WAEN,IAAMnC,EAAc8pC,IAAW9pC,YAAYnD,EAASyf,UAC9Cnc,EAAc2pC,IAAW3pC,YAAYtD,EAASyf,UACpDutB,EAAQF,IAAc3pC,GAAeG,MACtC,CAACwpC,EAAW9sC,IAEV+sC,EAID,yBAAKrkC,UAAWG,EAAQ+jC,KAAxB,uBAEI,kBAACM,EAAA,EAAD,CACIjtC,KAAK,6BACLisC,IAAI,sBACJ7kC,OAAO,UAENylC,IAVF,sCCzBTzkC,GAAW,kBACb,kBAAC,IAAD,CACIgK,OAAQ,GACRpK,MAAO,IACP49B,MAAO,EACPsH,aAAa,UACbC,eAAe,WAEf,0BAAM5qC,EAAE,IAAI6qC,EAAE,IAAIC,GAAG,IAAIC,GAAG,IAAItlC,MAAM,MAAMoK,OAAO,UAQ5Cm7B,OAJf,WACI,OAAO,kBAAC,GAAD,OCFLC,GAAgBhD,sBAAW,WAE7B7hB,GACD,IAFG8kB,EAEJ,EAFIA,WAAY55B,EAEhB,EAFgBA,WAGRjL,EAAU8kC,KADlB,EAGgC3oC,mBAAS,IAHzC,mBAGS4oC,EAHT,KAGkBC,EAHlB,OAIwC7oC,mBAAS,MAJjD,mBAIS8oC,EAJT,KAIsBC,EAJtB,KAMQ7rC,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGC8rC,EAAiB,WACnBl5B,IAAImJ,IAAI,iBACHjJ,MAAK,SAACxV,GACHuuC,EAAevuC,EAASG,MACxBmU,GAAW,MAEdmB,OAAM,SAACjW,GACJ+U,EACI,MACA,QACA,mDAAa/U,EAAMF,QACnB,aAchB,OATAwG,qBAAU,WACNsjB,EAAIzK,QAAU6vB,EACdA,MACD,IAEH1oC,qBAAU,WACNooC,EAAWvvB,QAAQ8vB,YAAcL,IAClC,CAACA,IAGA,yBAAKllC,UAAWG,EAAQqlC,kBACpB,kBAACxyB,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,WAApB,sBACA,kBAACwyB,EAAA,EAAD,CACIhtC,KAAK,UACLkT,SAAU,SAAC9O,GAAD,OAAOqoC,EAAWroC,EAAE6B,OAAO3C,QACrCnE,KAAK,OACLgE,GAAG,UACHG,MAAOkpC,EACPS,cAAY,KAEL,IACf,6BACqB,OAAhBP,GACG,yBAAKplC,UAAWG,EAAQylC,oBACpB,kBAAC,GAAD,OAGS,OAAhBR,GACG,yBACIx7B,IAAKw7B,EACLS,IAAI,UACJ/+B,QAASw+B,S,kDC3EZQ,G,oDACjB,aAAe,IAAD,+BACV,gBACKC,cAAgB,EAAKA,cAAchK,KAAnB,iBACrB,EAAKiK,cAAgB,EAAKA,cAAcjK,KAAnB,iBACrB,EAAKhqB,aAAe,EAAKA,aAAagqB,KAAlB,iBACpB,EAAKkK,mBAAqB,EAAKA,mBAAmBlK,KAAxB,iBALhB,E,6CAQd,WACI,OAAIxlC,KAAKqJ,MAAMsmC,iBAAiChvC,IAAnBX,KAAK4vC,UACvB5vC,KAAKqJ,MAAMsmC,WAAWE,YAAY7vC,KAAK4vC,WAE3C,O,yBAGX,WACI,OAAI5vC,KAAKqJ,MAAMsmC,iBAAiChvC,IAAnBX,KAAK4vC,UACvB5vC,KAAK4vC,UAET,O,qBAGX,WAAW,IACCD,EAAe3vC,KAAKqJ,MAApBsmC,WAER,GAAIA,QAAiChvC,IAAnBX,KAAK4vC,UACnB,OAAOD,EAAWG,QAAQ9vC,KAAK4vC,WAE/B5vC,KAAK+vC,mBAAoB,I,mBAIjC,WACQ/vC,KAAKqJ,MAAMsmC,iBAAiChvC,IAAnBX,KAAK4vC,WAC9B5vC,KAAKqJ,MAAMsmC,WAAWK,MAAMhwC,KAAK4vC,a,2BAIzC,WACQ5vC,KAAKqJ,MAAM4mC,UACXjwC,KAAKqJ,MAAM4mC,YAEXjwC,KAAKwb,aAAa,Q,2BAI1B,WACQxb,KAAKqJ,MAAM6mC,WAAWlwC,KAAKqJ,MAAM6mC,c,0BAGzC,SAAaC,GACLnwC,KAAKqJ,MAAMgM,UAAUrV,KAAKqJ,MAAMgM,SAAS86B,K,4BAGjD,WACI,GACInwC,KAAKqJ,MAAMsmC,YACX3vC,KAAKqJ,MAAMsmC,WAAWlD,aACH9rC,IAAnBX,KAAK4vC,UACP,CACE,IAAMn8B,EAAU/I,SAASs2B,cAAc,OACvChhC,KAAK4vC,UAAY5vC,KAAKqJ,MAAMsmC,WAAWlD,OAAOh5B,EAAS,CACnD28B,QAASpwC,KAAKqJ,MAAM+mC,QACpBj6B,SAAUnW,KAAKwb,aACf1S,MAAO9I,KAAKqJ,MAAMP,MAClBxH,KAAMtB,KAAKqJ,MAAM/H,KACjB+uC,SAAUrwC,KAAKqJ,MAAMgnC,SACrB,mBAAoBrwC,KAAKwvC,cACzB,iBAAkBxvC,KAAKyvC,cACvBztC,KAAMhC,KAAKqJ,MAAMrH,KACjBsuC,OAAQtwC,KAAKqJ,MAAMinC,OACnBC,GAAIvwC,KAAKqJ,MAAMknC,GACf75B,MAAO1W,KAAKqJ,MAAMqN,QAEtB1W,KAAK2uC,QAAQvN,YAAY3tB,GAGzBzT,KAAK+vC,mBACL/vC,KAAKqJ,MAAMsmC,iBACQhvC,IAAnBX,KAAK4vC,YAEL5vC,KAAK+vC,mBAAoB,EACzB/vC,KAAK8vC,a,+BAIb,WACI9vC,KAAKwwC,mB,gCAGT,WACIxwC,KAAKwwC,mB,kCAGT,gBAC2B7vC,IAAnBX,KAAK4vC,YACL5vC,KAAKywC,+BACLzwC,KAAKgwC,W,0CAIb,WACI,IAAMU,EAAgBhmC,SAASs2B,cAAc,OAK7C,IAJAt2B,SAASy2B,KAAKC,YAAYsP,GAC1BA,EAAcrhC,MAAM+E,QAAU,OAGvBpU,KAAK2uC,QAAQgC,YAChBD,EAActP,YAAYphC,KAAK2uC,QAAQgC,YAI3C57B,YAAW,WACPrK,SAASy2B,KAAK6B,YAAY0N,KAC3B,O,gCAGP,SAAmBE,GACf5wC,KAAK2uC,QAAUiC,I,oBAGnB,WAAS,MAkBD5wC,KAAKqJ,MADFwnC,GAjBF,EAKDT,QALC,EAMD/6B,SANC,EAODvM,MAPC,EAQDxH,KARC,EASD+uC,SATC,EAUDJ,UAVC,EAWDC,UAXC,EAYDluC,KAZC,EAaDsuC,OAbC,EAcDX,WAdC,EAeDj5B,MAfC,EAgBD65B,GAhBC,mIAoBL,OAAO,yCAASM,EAAT,CAAqBlnB,IAAK3pB,KAAK0vC,0B,GA9IPh1B,IAAM8I,WAkJ7C+rB,GAAUuB,YAAc,YAexBvB,GAAUrL,aAAe,CAErB7uB,SAAU,aACVvM,MAAO,QACPxH,KAAM,QACN+uC,SAAU,EACVruC,KAAM,SACN0U,MAAO,e,cChKIq6B,qBALf,WAEI,MAAM,WAAN,OADiB,gBACjB,oCALiB,iBAKjB,sBAGyC,CACzCC,aATiB,iBAUjBC,WATe,cAOJF,CAGZxB,ICRG2B,GAAY,SAAC,GAAgC,IAA9BzC,EAA6B,EAA7BA,WAAY55B,EAAiB,EAAjBA,WACvBjL,EAAU8kC,KAD8B,EAGhB3oC,mBAAS,IAHO,mBAGvC4oC,EAHuC,KAG9BC,EAH8B,KAKxCuC,EAAevhC,aACjB,SAAC3H,GAAD,OAAWA,EAAM4H,WAAWuhC,wBAShC,OANA/qC,qBAAU,WACNooC,EAAWvvB,QAAQ8vB,YAAcL,IAClC,CAACA,IAEJtoC,qBAAU,kBAAMwO,GAAW,KAAQ,IAG/B,yBAAKpL,UAAWG,EAAQqlC,kBACpB,kBAACxyB,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,6BACI,kBAACm8B,GAAD,CACIhiC,MAAO,CACH+E,QAAS,gBAEbg8B,QAASe,EACT97B,SAAU,SAAC5P,GAAD,OAAWmpC,EAAWnpC,IAChCH,GAAG,UACHnD,KAAK,cAGF,M,yBC/BrBmvC,GAAW9F,sBAAW,WAExB7hB,GACD,IAFG8kB,EAEJ,EAFIA,WAAY55B,EAEhB,EAFgBA,WAAY08B,EAE5B,EAF4BA,cAAeC,EAE3C,EAF2CA,UAGnCC,EAAQ7hC,aACV,SAAC3H,GAAD,OAAWA,EAAM4H,WAAW6hC,2BAqBhC,OACI,kBAAC,KAAD,CACI3mC,IAAK,yCACL4mC,OAtBO,WACX,IACIhoB,EAAIzK,QAAU,IAAIpe,OAAO8wC,eAAeH,GAAO,SAAUI,GACrC,IAAZA,EAAIhQ,KACJ4M,EAAWvvB,QAAQ4yB,OAASD,EAAIC,OAChCrD,EAAWvvB,QAAQ6yB,QAAUF,EAAIE,QAEjCR,EAAcryB,QAAQ8yB,YAAa,EACnCR,EAAUtyB,QAAQ+yB,SAClBxoB,QAAQtf,IAAIqnC,IAEZA,EAAUtyB,QAAQrK,YAAW,MAGvC,MAAOtO,GACLkjB,QAAQ1pB,MAAMwG,GAElBsO,GAAW,SCrBZ,IAAM65B,GAAW7lC,aAAW,SAACC,GAAD,MAAY,CAC3CmmC,iBAAiB,aACb76B,QAAS,OACTE,UAAW,QACVxL,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,cAMR89B,GAAkB,SAACD,EAAQp9B,KAE3Bs9B,GAAa,WACtB,IAAMC,EAAcxiC,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAWwiC,gBADhC,EAGgBtsC,oBAAS,GAHzB,mBAGrBusC,EAHqB,KAGLC,EAHK,KAKtBC,EAAoBC,kBAAO,eAE3BC,EL2DK,SAA0BF,EAAmB39B,GACxD,IAAMm9B,EAAaS,iBAAO,CACtBT,YAAY,IAGVW,EAAmBF,iBAAO,CAC5BzD,YAAa,KAGX4D,EAAgB5iC,uBAClB,WACI,OACI,kBAAC,GAAD,CACIy+B,WAAYkE,EACZhpB,IAAK6oB,EACL39B,WAAYA,MAIxB,CAAC89B,EAAkBH,EAAmB39B,IAG1C,MAAO,CACHm9B,aACAa,SAAUX,GACVS,mBACAC,iBKrFWE,CAAiBN,EAAmBD,GAC7CQ,EFYK,SAAsBl+B,GACjC,IAAMm9B,EAAaS,iBAAO,CACtBT,YAAY,IAGVW,EAAmBF,iBAAO,CAC5BzD,YAAa,KAGX4D,EAAgB5iC,uBAClB,WACI,OACI,kBAAC,GAAD,CACIy+B,WAAYkE,EACZ99B,WAAYA,MAIxB,CAAC89B,EAAkB99B,IAGvB,MAAO,CACHm9B,aACAa,SAAUX,GACVS,mBACAC,iBErCcI,CAAaT,GACzBU,EDSK,SAAqBp+B,GAChC,IAAMm9B,EAAaS,iBAAO,CACtBT,YAAY,IAEVW,EAAmBF,iBAAO,CAC5BX,OAAQ,GACRC,QAAS,KAEPP,EAAYiB,iBAAO,CAErBR,OAAQ,aAERp9B,WAAY,eAGV45B,EAAagE,mBAEbG,EAAgB5iC,uBAClB,WACI,OACI,kBAAC,GAAD,CACIy+B,WAAYkE,EACZ99B,WAAYA,EACZ08B,cAAeS,EACfR,UAAWA,EACX7nB,IAAK8kB,MAIjB,CAACkE,EAAkB99B,EAAYm9B,EAAYR,EAAW/C,IAG1D,MAAO,CACHuD,WAAYA,EACZa,SAAU,SAACZ,EAAQp9B,GACf28B,EAAUtyB,QAAQ+yB,OAASA,EAC3BT,EAAUtyB,QAAQrK,WAAaA,EAC/B45B,EAAWvvB,QAAQ4uB,QAEvB6E,mBACAC,iBCjDaM,CAAYX,GAE7B,OAAQH,GACJ,IAAK,SACD,OAAO,2BAAKM,GAAZ,IAAoBF,oBAAmBF,mBAC3C,IAAK,YACD,OAAO,2BAAKS,GAAZ,IAAuBP,oBAAmBF,mBAC9C,IAAK,WACD,OAAO,2BAAKW,GAAZ,IAAsBT,oBAAmBF,mBAC7C,QACI,OAAO,2BAAKI,GAAZ,IAAoBF,oBAAmBF,qBCR7C1pC,GAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,QACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,MAAQ,CAC1Bve,MAAO,IACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,KAVZ,GAYNqkB,MAAO,CACHxgB,UAAWxL,EAAM6K,QAAQ,GACzBS,QAAS,OACT++B,cAAe,SACfj/B,WAAY,SACZjL,QAAQ,GAAD,OAAKH,EAAM6K,QAAQ,GAAnB,cAA2B7K,EAAM6K,QAAQ,GAAzC,cAAiD7K,EAAM6K,QAC1D,GADG,OAIXuD,OAAQ,CACJxD,OAAQ5K,EAAM6K,QAAQ,GACtBrK,gBAAiBR,EAAMe,QAAQgK,UAAU8b,MAE7CyjB,KAAM,CACFpqC,MAAO,OACPsL,UAAWxL,EAAM6K,QAAQ,IAE7Bs+B,OAAQ,CACJ39B,UAAWxL,EAAM6K,QAAQ,IAE7BwW,KAAM,CACF7V,UAAW,OACXF,QAAS,OACTpL,MAAO,OACPywB,eAAgB,iBAEpBwV,iBAAiB,aACb76B,QAAS,OACTE,UAAW,QACVxL,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,UAGjBi7B,mBAAoB,CAChBrmC,MAAO,KAEXqqC,gBAAiB,CACbj/B,QAAS,QAEbk/B,UAAW,CACPzoB,UAAW,SACXvW,UAAW,QAsaJi/B,OA9Zf,WAAsB,IAAD,EACSxtC,mBAAS,IADlB,mBACVytC,EADU,KACHC,EADG,OAEK1tC,mBAAS,IAFd,mBAEV2tC,EAFU,KAELC,EAFK,OAGa5tC,oBAAS,GAHtB,mBAGV6O,EAHU,KAGDC,EAHC,OAIe9O,oBAAS,GAJxB,mBAIV6tC,EAJU,KAIAC,EAJA,OAKS9tC,oBAAS,GALlB,mBAKV+tC,EALU,KAKHC,EALG,OAMWhuC,mBAAS,IANpB,mBAMViuC,EANU,KAMFC,EANE,KAQXC,EAAetkC,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAWqkC,gBACvD9jC,EAAQR,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAWO,SAChD+jC,EAAUvkC,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAWskC,WAClDC,EAAQxkC,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAWukC,SAEhDnxC,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAECoxC,EAAcrkC,uBAAY,SAAClH,GAAD,OAAW7F,EAASujB,YAAY1d,MAAS,CACrE7F,IAEEqxC,EAAmBtkC,uBACrB,SAACiH,GAAD,OAAYhU,EAASwjB,YAAiBxP,MACtC,CAAChU,IAGCmI,EAAU4xB,cACVj8B,EAAWmnB,cA5BA,GAoCbiqB,KANAG,GA9Ba,GA8BbA,eACAN,GA/Ba,GA+BbA,WACAa,GAhCa,GAgCbA,SACAD,GAjCa,GAiCbA,cACAJ,GAlCa,GAkCbA,kBACAG,GAnCa,GAmCbA,iBAEExqB,GAxCC,IAAIC,gBAAgBF,cAAcG,QA0CnCze,GAAUhB,KAEhBvC,qBAAU,WACNotC,EAAStrB,GAAMnJ,IAAI,eACpB,CAACje,IAEJ,IAAMmyB,GAAW,SAAC/wB,GAIV,IAHJ,IACUgxB,EADQzoB,SAASC,OACKqC,MAAM,MAExBhD,EAAI,EAAGA,EAAImpB,EAAUprB,OAAQiC,IAAK,CACxC,IAAMopB,EAAMD,EAAUnpB,GAAGgD,MAAM,KAC/B,GAAIomB,EAAI,IAAMjxB,EACV,OAAOkxB,SAASD,EAAI,IAGhC,OAAO,MAGLmhB,GAAgB,SAACpyC,GACnB,IAAMqyC,EAAM,IAAIzmC,OAAO,QAAU5L,EAAO,gBAAgB,KAClDsyC,EAAI3zC,OAAOC,SAASsnB,OAAOtb,OAAO,GAAGu/B,MAAMkI,GACjD,OAAO,MAAHC,EAAiBA,EAAE,GAAY,IAGjCC,GAAa,SAACh0C,GAChBE,IAAK6D,aAAa/D,GAGc,KAA5BA,EAAI,iBACJ2zC,EAAY3zC,EAAI,iBAEpB0sC,KAGAkH,GAAiB,GACjB,IAAMK,EAAUJ,GAAe,WAClB,IAATI,EACAvpC,EAAQ8N,KAAK,SAGQ,SADAy7B,EAAQ3nC,MAAM,KAClB,GACb5B,EAAQ8N,KAAK,SAEbpY,OAAOC,SAASC,KAAO4zC,mBAAmBD,GAAS,UAAUzhB,GAAU,SAG/Epe,EAAe,MAAO,QAAS,2BAAQ,WAEvChQ,aAAa+vC,WAAW,oBAwHxBC,GAAWX,EAKf,MAJyB,MAAtBjhB,GAAU,aACT4hB,IAAW,GAIX,yBAAKrrC,UAAWG,GAAQ0d,SAClBwsB,GACE,oCACI,kBAACiB,EAAA,EAAD,CAAOtrC,UAAWG,GAAQkrB,OACtB,kBAAC9D,EAAA,EAAD,CAAQvnB,UAAWG,GAAQsN,QACvB,kBAAC,IAAD,OAEJ,kBAAC0G,EAAA,EAAD,CAAYzI,UAAU,KAAKQ,QAAQ,MAAnC,gBACQvF,IAENwjC,GACE,0BAAMnqC,UAAWG,GAAQwpC,KAAM3wB,SAzEzC,SAARuyB,EAASzuC,GACXA,EAAEwS,iBACFlE,GAAW,GACNm9B,GAAW9yB,QAAQ8yB,aAAckC,EAItCr+B,IAAIC,KAAK,gBAAT,aACIm/B,SAAUzB,EACV0B,SAAUxB,GACPf,GAAiBzzB,UAEnBnJ,MAAK,SAACxV,GACHsU,GAAW,GACmB,MAA1BtU,EAASE,QAAQX,KACjBi0C,GAAS,GAETW,GAAWn0C,EAASG,SAG3BsV,OAAM,SAACjW,GACJ8U,GAAW,GACXC,EAAe,MAAO,QAAS/U,EAAMF,QAAS,WAC9C2yC,GAAkBtzB,aAnBtB2zB,IAAS,kBAAMmC,EAAMzuC,KAAIsO,KAsEL,kBAAC4H,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,SAApB,4BAGA,kBAACwyB,EAAA,EAAD,CACI7pC,GAAG,QACHhE,KAAK,QACLa,KAAK,QACLkT,SAAU,SAAC9O,GAAD,OACNktC,EAASltC,EAAE6B,OAAO3C,QAEtB2pC,cAAY,EACZ3pC,MAAO+tC,EACPn9B,WAAS,KAGjB,kBAACoG,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,YAApB,gBAGA,kBAACwyB,EAAA,EAAD,CACIhtC,KAAK,WACLkT,SAAU,SAAC9O,GAAD,OAAOotC,EAAOptC,EAAE6B,OAAO3C,QACjCnE,KAAK,WACLgE,GAAG,WACHG,MAAOiuC,EACPtE,cAAY,KAGnB8E,GAAgB,kBAACtB,GAAD,MAChBkC,IACG,yBAAKrrC,UAAWG,GAAQypC,iBACpB,kBAACv6B,EAAA,EAAD,CACIxX,KAAK,SACLqU,QAAQ,YACR7J,MAAM,UACNmK,SAAUrB,EACVnL,UAAWG,GAAQqoC,QALvB,gBASA,kBAACn5B,EAAA,EAAD,CACInD,QAAQ,YACR7J,MAAM,YACNuD,MAAO,CAAEgI,WAAY,QACrBpB,SAAUrB,EACVnL,UAAWG,GAAQqoC,OACnB1hC,QA9FpB,WAChBsE,GAAW,GACX,IAAM8/B,EAAUJ,GAAe,WAC/B1+B,IAAIC,KAAK,oBAAoB6+B,GACxB5+B,MAAK,SAACxV,GACHO,OAAOC,SAASC,KAAOT,EAASG,QAEnCsV,OAAM,SAACjW,GACJ8U,GAAW,GACXC,EAAe,MAAO,QAAS/U,EAAMF,QAAS,gBA+EtB,gCAYNi1C,IACE,kBAACh8B,EAAA,EAAD,CACIxX,KAAK,SACL4T,WAAS,EACTS,QAAQ,YACR7J,MAAM,UACNmK,SAAUrB,EACVnL,UAAWG,GAAQqoC,QANvB,iBAaX2B,GACG,0BAAMnqC,UAAWG,GAAQwpC,MACrB,kBAAC32B,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,SAApB,4BAGA,kBAACwyB,EAAA,EAAD,CACI7pC,GAAG,QACHhE,KAAK,QACLa,KAAK,QACLkT,SAAU,SAAC9O,GAAD,OACNktC,EAASltC,EAAE6B,OAAO3C,QAEtB2pC,cAAY,EACZ3pC,MAAO+tC,EACPn9B,WAAS,KAGjB,kBAACyC,EAAA,EAAD,CACIxX,KAAK,SACL4T,WAAS,EACTS,QAAQ,YACR7J,MAAM,UACNmK,SACIrB,KACCs/B,GAAe5B,GAEpB/hC,QArOb,SAAChK,GAChBA,EAAEwS,iBACG1W,UAAU8yC,aAMftgC,GAAW,GAEXgB,IAAImJ,IAAI,eAAiBw0B,GACpBz9B,MAAK,SAACxV,GACH,IAAM60C,EAA2B70C,EAASG,KAW1C,OAVA+oB,QAAQtf,IAAIirC,GACZA,EAAyBC,UAAUC,UAAYrpC,YAC3CmpC,EAAyBC,UAAUC,WAEvCF,EAAyBC,UAAUE,iBAAiBvtC,SAChD,SAAUwtC,GACNA,EAASlwC,GAAK2G,YAAaupC,EAASlwC,OAIrCjD,UAAU8yC,YAAYn2B,IAAI,CAC7Bq2B,UAAWD,EAAyBC,eAG3Ct/B,MAAK,SAAC0/B,GACH,IAAMC,EAAWD,EAAUl1C,SAASo1C,kBAC9BC,EAAiBH,EAAUl1C,SAASq1C,eACpCC,EAAQJ,EAAUI,MAClBC,EAAML,EAAUl1C,SAASw1C,UACzBC,EAAaP,EAAUl1C,SAASy1C,WAEtC,OAAOngC,IAAIC,KACP,sBAAwB09B,EACxB3uC,KAAKK,UAAU,CACXI,GAAImwC,EAAUnwC,GACduwC,MAAOtpC,YAAaspC,GACpBv0C,KAAMm0C,EAAUn0C,KAChBf,SAAU,CACNo1C,kBAAmBppC,YAAampC,GAChCE,eAAgBrpC,YAAaqpC,GAC7BG,UAAWxpC,YAAaupC,GACxBE,WAAYzpC,YAAaypC,UAKxCjgC,MAAK,SAACxV,GACHm0C,GAAWn0C,EAASG,SAEvBsV,OAAM,SAACjW,GACJ0pB,QAAQtf,IAAIpK,GACZ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,cAEjDkW,MAAK,WACFlB,GAAW,OAtDfC,EAAe,MAAO,QAAS,qEAAe,YAmOtBrL,UAAWG,GAAQqoC,QAVvB,uBAgBR,kBAACn2B,EAAA,EAAD,MACA,yBAAKrS,UAAWG,GAAQugB,MACpB,6BACI,kBAAC8jB,EAAA,EAAD,CAAMjtC,KAAM,WAAZ,6BAEJ,6BACI,kBAACitC,EAAA,EAAD,CAAMjtC,KAAM,WAAZ,8BAIR,kBAAC,GAAD,OAGHozC,GACG,yBAAK3qC,UAAWG,GAAQ0pC,WACpB,kBAACx6B,EAAA,EAAD,CACIhN,MAAM,UACNyE,QAAS,kBAAMsjC,GAAaD,MAE1BA,GACE,oCACI,kBAACqC,GAAA,EAAD,CACI5mC,MAAO,CACHoB,YAAa,KAHzB,0DASHmjC,GACG,oCACI,kBAACsC,GAAA,EAAD,CACI7mC,MAAO,CACHoB,YAAa,KAHzB,2CAcvBqjC,GACG,kBAACiB,EAAA,EAAD,CAAOtrC,UAAWG,GAAQkrB,OACtB,kBAAC9D,EAAA,EAAD,CAAQvnB,UAAWG,GAAQsN,QACvB,kBAAC,KAAD,OAEJ,kBAAC0G,EAAA,EAAD,CAAYzI,UAAU,KAAKQ,QAAQ,MAAnC,4BAGA,0BAAMlM,UAAWG,GAAQwpC,KAAM3wB,SA3L5B,SAAClc,GAChBA,EAAEwS,iBACFlE,GAAW,GACXgB,IAAIC,KAAK,YAAa,CAClBhW,KAAMk0C,IAELj+B,MAAK,SAACxV,GACHsU,GAAW,GACX6/B,GAAWn0C,EAASG,SAEvBsV,OAAM,SAACjW,GACJ8U,GAAW,GACXC,EAAe,MAAO,QAAS/U,EAAMF,QAAS,gBAgLtC,kBAAC4c,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,QAApB,sEAGA,kBAACwyB,EAAA,EAAD,CACI7pC,GAAG,OACHhE,KAAK,SACLa,KAAK,OACLkT,SAAU,SAAC3C,GAAD,OACNuhC,EAAUvhC,EAAMtK,OAAO3C,QAE3B2pC,cAAY,EACZ3pC,MAAOuuC,EACP39B,WAAS,KAGjB,kBAACyC,EAAA,EAAD,CACIxX,KAAK,SACL4T,WAAS,EACTS,QAAQ,YACR7J,MAAM,UACNmK,SAAUrB,EACVnL,UAAWG,GAAQqoC,QANvB,4BASU,KACN,IACR,kBAACn2B,EAAA,EAAD,S,uGCjfL,IACXq6B,WACAC,a,8GCGExtC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCutC,WAAY,CACRvqC,MAAO,WAEXwqC,OAAQ,CACJ58B,UAAW,aAAe5Q,EAAMe,QAAQwS,QAAQvI,OAEpDoI,OAAQ,CACJq6B,cAAe,YAIR,SAASC,GAAWntC,GAC/B,IAAMotC,EAAW/7B,IAAM+3B,OAAO,MADQ,EAGFiE,aAAQ,CACxCC,OAAQ,SACRC,KAAM,WACF,IAAIvtC,EAAMwtC,KAGN,MAAO,CACHj+B,OAAQ,CACJtT,IAAK,EACLrB,KAAMoF,EAAMpF,KACZ9B,KAAuB,MAAjBkH,EAAMuP,OAAiB,GAAKvP,EAAMuP,SANhD69B,EAASv3B,QAAQ0lB,SAWzBkS,QAAS,SAACC,GAAD,MAAc,CACnBC,OAAQD,EAAQC,SAChBC,QAASF,EAAQE,cApBa,0BAG7BA,EAH6B,EAG7BA,QAASD,EAHoB,EAGpBA,OAAUJ,EAHU,KAwBhCM,EAAWD,GAAWD,EAE5B3wC,qBAAU,WACFgD,EAAMwtC,MAAQK,GACdT,EAASv3B,QAAQ0lB,UAGtB,CAACsS,IAEJ,IAAMttC,EAAUhB,KAChB,OACI,0BAAM2H,QAASlH,EAAMkH,QAASoZ,IAAK8sB,GAC/B,kBAAC39B,EAAA,EAAD,CACI6Q,IAAKitB,EACLntC,UAAW6G,KAAW,eAEb1G,EAAQ0sC,OAASY,GAEtBttC,EAAQsS,QAEZ/G,UAAU,OACV/E,MAAO/G,EAAM+G,OAEZ/G,EAAMwtC,MAAQ,kBAAC,KAAD,OACbxtC,EAAMwtC,MACJ,oCACKxtC,EAAMuP,OACNvP,EAAM8tC,MACH,kBAAC,KAAD,CAAY1tC,UAAWG,EAAQysC,gB,iCCjErDztC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCwtC,OAAQ,CACJ78B,OAAQ,aAAe3Q,EAAMe,QAAQwS,QAAQvI,WAItC,SAASsjC,GAAa/tC,GAAQ,IAAD,EACJqtC,aAAQ,CACxCC,OAAQ,SACRC,KAAM,WACFntB,QAAQtf,IAAI,CACRyO,OAAQ,CACJtT,IAAK,EACLrB,KAAMoF,EAAMpF,KACZ9B,KAAuB,MAAjBkH,EAAMuP,OAAiB,GAAKvP,EAAMuP,WAIpDk+B,QAAS,SAACC,GAAD,MAAc,CACnBC,OAAQD,EAAQC,SAChBC,QAASF,EAAQE,cAde,0BAC/BA,EAD+B,EAC/BA,QAASD,EADsB,EACtBA,OAAUJ,EADY,KAkBlCM,EAAWD,GAAWD,EAE5B3wC,qBAAU,WACNgD,EAAMguC,gBAAgBhuC,EAAM/D,GAAI4xC,KAEjC,CAACA,IAEJ,IAAMttC,EAAUhB,KAChB,OACI,kBAAC+U,GAAA,EAAD,CACIgM,IAAKitB,EACLntC,UAAW6G,KAAW,eACjB1G,EAAQ0sC,OAASY,IAEtB3mC,QAAS,SAAChK,GAAD,OAAO8C,EAAMkc,WAAWhf,EAAG8C,EAAM/D,MAE1C,kBAAC6W,GAAA,EAAD,KACI,kBAAC,KAAD,OAEJ,kBAACC,GAAA,EAAD,CAAcC,QAAShT,EAAMuP,UC/C1B,SAAS0+B,GAASjuC,GAI7B,IAHA,IAAIkuC,EACA9vC,EAAQ4B,EAAMyD,QAAQ/E,OACpBkP,EAAS,GACN3P,EAAQ,EAAGA,EAAQ+B,EAAMyD,QAAQ/E,OAAQT,IAC9C2P,EAAO3P,IAAS,EAGpB,IAAM+vC,EAAkB,SAAC/xC,EAAIG,GAEzB,GADAwR,EAAO3R,GAAMG,EACTA,EACA+xC,aAAaD,OACV,CACH,IAAIE,GAAc,EAClBxgC,EAAOjP,SAAQ,SAAC0vC,GACRA,IACAD,GAAc,MAGlBA,IACIhwC,GAAS,EACT8vC,EAAQxiC,YAAW,WACf1L,EAAMmJ,YACP,KAEH/K,KAIZgiB,QAAQtf,IAAI8M,IAGhB,OACI,oCACK5N,EAAMyD,QAAQe,KAAI,SAAC+K,EAAQtT,GAAT,OAEf,kBAAC8xC,GAAD,CACInzC,KAAM,IAAMoF,EAAMyD,QAAQG,MAAM,EAAG3H,GAAI4H,KAAK,KAC5CqY,WAAYlc,EAAMkc,WAClBjgB,GAAIA,EACJ+xC,gBAAiBA,EACjBz+B,OAAQA,Q,kCCqFtB++B,G,oDAaF,WAAYtuC,GAAQ,IAAD,+BACf,cAAMA,IAbV1B,SAAW,GAYQ,EAXnBiwC,UAAY,EAWO,EATnB3vC,MAAQ,CACJjC,QAAQ,EACR6xC,cAAe,GACf/qC,QAAS,GACTwF,SAAU,KACVwlC,YAAY,EACZC,aAAc,MAGC,EAKnBvlB,kBAAoB,WAEhB,IAAMgiB,EAAM,IAAIzmC,OAAO,yBAAmC,KACpD0mC,EAAI3zC,OAAOC,SAASsnB,OAAOtb,OAAO,GAAGu/B,MAAMkI,GAC3CnoC,EAAO,MAAHooC,EAAUG,mBAAmBH,EAAE,IAAM,KAC/C,EAAKuD,WAAiB,OAAN3rC,EAAa,IAAMA,GAE9B,EAAKhD,MAAM4a,SAEZ,EAAK5a,MAAM8qB,qBAAoB,GAInCrzB,OAAOm3C,WAAa,WAEhB,IAAMzD,EAAM,IAAIzmC,OAAO,yBAAmC,KACpD0mC,EAAI3zC,OAAOC,SAASsnB,OAAOtb,OAAO,GAAGu/B,MAAMkI,GAC3CnoC,EAAO,MAAHooC,EAAUG,mBAAmBH,EAAE,IAAM,KACrC,OAANpoC,GACA,EAAKhD,MAAM6uC,eAAe7rC,KAxBnB,EA6BnB2rC,WAAa,WAAkB,IAAjB/zC,EAAgB,uDAAT,KACjB,EAAKoF,MAAM0c,mBAAkB,EAAO,MACpC,EAAKjG,SAAS,CACVhT,QACa,OAAT7I,EACMA,EAAK8I,OAAO,GAAGC,MAAM,KACrB,EAAK3D,MAAMpF,KAAK8I,OAAO,GAAGC,MAAM,OAE9C,IAAI0Y,EAAmB,OAATzhB,EAAgBA,EAAO,EAAKoF,MAAMpF,KAC1Ck0C,EAAS,EAAK9uC,MAAMwH,MACpB,eAAiB,EAAKxH,MAAMwH,MAAMrL,IAChB,KAAlB,EAAKmC,SACL,aACA,gBACN+d,EAA4B,KAAlB,EAAK/d,SAAkB+d,EAAU,EAAK/d,SAEhDkO,IAAImJ,IAAIm5B,EAASl3B,mBAAmByE,IAC/B3P,MAAK,SAACxV,GACH,EAAKq3C,UAAYr3C,EAASG,KAAK03C,OAC/B,EAAK/uC,MAAMrG,eAAezC,EAASG,KAAK23C,SACxC,EAAKhvC,MAAMyc,2BAA0B,GACrC,IAAMwyB,GAAqB,OAATr0C,EACZA,EAAK8I,OAAO,GAAGC,MAAM,KACrB,EAAK3D,MAAMpF,KAAK8I,OAAO,GAAGC,MAAM,MACpCE,KAAK,KACP5C,YAAU,WAAY2W,mBAAmBq3B,GAAW,GAC9B,KAAlB,EAAK3wC,UACLiD,YAAgB,OAAQqW,mBAAmByE,OAGlD1P,OAAM,SAACjW,GACJ,EAAKsJ,MAAM0c,mBAAkB,EAAMhmB,MAG3C,EAAKw4C,eAAc,IA/DJ,EAkEnBC,QAAU,SAACv0C,GACP,EAAKoF,MAAMyc,2BAA0B,GACrC,EAAKzc,MAAM0c,mBAAkB,EAAO,SACpC,EAAKiyB,WAAW/zC,IArED,EAwEnBgc,iCAAmC,SAACC,GAC5B,EAAK7W,MAAM1B,WAAauY,EAAUvY,WAClC,EAAKA,SAAWuY,EAAUvY,UAE1B,EAAK0B,MAAMpF,OAASic,EAAUjc,MAC9B,EAAK+zC,WAAW93B,EAAUjc,MAE1B,EAAKoF,MAAM+wB,UAAYla,EAAUka,SACjC,EAAKoe,QAAQt4B,EAAUjc,OAhFZ,EAwFnBw0C,mBAAqB,SAACC,EAAWC,GA1IvB,IAACC,EA2IH,EAAK3wC,MAAM6E,UAAY6rC,EAAW7rC,SAClC,EAAKyrC,eAAc,GAEnB,EAAKlvC,MAAMwvC,oBAAsBH,EAAUG,oBA9IxCD,EA+IG,IA/II,IAAI13C,SAAQ,SAAC6nB,GAAD,OAAahU,WAAWgU,EAAS6vB,OA+I5C7iC,MAAK,kBAAM,EAAKwiC,oBA7FhB,EAiGnBA,cAAgB,SAACO,GACb,KAAI,EAAKC,kBAAqBD,IAGD,OAAzB,EAAKpB,QAAQx4B,QAAkB,CAC/B,IAAM85B,EACF,EAAKtB,QAAQx4B,QAAQ+5B,aACjB,EAAKvB,QAAQx4B,QAAQg6B,cACzB,EAAKxB,QAAQx4B,QAAQi6B,YACjB,EAAKzB,QAAQx4B,QAAQk6B,YACzBJ,IACA,EAAKD,kBAAmB,EACxB,EAAKj5B,SAAS,CAAEg4B,YAAY,MAE3BkB,GAA0B,EAAK/wC,MAAM6vC,YACtC,EAAKh4B,SAAS,CAAEg4B,YAAY,MAhHrB,EAqHnBvyB,WAAa,SAAC7S,EAAOpN,GACbA,IAAO,EAAK2C,MAAM6E,QAAQ/E,OAAS,EAEnC,EAAK+X,SAAS,CAAExN,SAAUI,EAAMlM,iBAExB,IAARlB,GAC8B,IAA9B,EAAK2C,MAAM6E,QAAQ/E,QACO,KAA1B,EAAKE,MAAM6E,QAAQ,IAEnB,EAAKzD,MAAMkP,kBACX,EAAK4X,gBACU,IAAR7qB,GACP,EAAK+D,MAAM6uC,eAAe,KAC1B,EAAK/nB,gBAEL,EAAK9mB,MAAM6uC,eACP,IAAM,EAAKjwC,MAAM6E,QAAQG,MAAM,EAAG3H,EAAK,GAAG4H,KAAK,MAEnD,EAAKijB,gBAvIM,EA2InBA,YAAc,WACV,EAAKrQ,SAAS,CAAExN,SAAU,KAAMylC,aAAc,KAAMvmC,WAAY,QA5IjD,EA+InB6nC,eAAiB,SAAC9yC,GACd,EAAKuZ,SAAS,CAAEi4B,aAAcxxC,EAAEC,iBAhJjB,EAmJnB8yC,cAAgB,SAAC/yC,GAEb,GADA,EAAK4pB,cACK,YAAN5pB,EAAJ,CAIA,IAAMmS,EAAc,EAAKrP,MAAMpF,KAAK+I,MAAM,KACpCusC,EAAY,CACd,CACIj0C,GAAI,EAAKsyC,UACTt2C,KAAM,MACNa,KAAMuW,EAAYxK,MAClBjK,KAA6B,IAAvByU,EAAY3Q,OAAe,IAAM2Q,EAAYxL,KAAK,OAIhE,OAAQ3G,GACJ,IAAK,QACD,EAAK8C,MAAMya,kBAAkBy1B,GAC7B,EAAKlwC,MAAMkd,kBACX,MACJ,IAAK,YACD,EAAKld,MAAM2c,yBACX,MACJ,IAAK,WACD,EAAK3c,MAAMya,kBAAkBy1B,GAC7B,EAAKlwC,MAAMwd,qBACX,MACJ,IAAK,UACD,EAAKxd,MAAM4c,6BA1Bf,EAAKuyB,WApJT,EAAKd,QAAUh9B,IAAMuN,YAFN,E,yDAoFnB,WACIjoB,KAAKqJ,MAAMrG,eAAe,M,oBAkG9B,WAAU,IAAD,OACG4G,EAAY5J,KAAKqJ,MAAjBO,QACF5F,EAAauc,IAAWvc,WAAWhE,KAAKqJ,MAAMtI,SAASyf,UACvD2D,EAAOvjB,IAAKgE,UAEZ40C,EACF,kBAACC,GAAA,EAAD,CACIn0C,GAAG,oBACHgN,SAAUtS,KAAKiI,MAAMqK,SACrB3Q,KAAM4Q,QAAQvS,KAAKiI,MAAMqK,UACzBE,QAASxS,KAAKmwB,YACdupB,sBAAsB,GAEtB,kBAAC/7B,GAAA,EAAD,CAAUpN,QAAS,kBAAM,EAAK+oC,cAAc,aACxC,kBAACn9B,GAAA,EAAD,KACI,kBAAC,KAAD,OAFR,gBAMyB,KAAxBnc,KAAKqJ,MAAM1B,UAAmB3D,GAC3B,6BACI,kBAAC8X,EAAA,EAAD,MACA,kBAAC6B,GAAA,EAAD,CAAUpN,QAAS,kBAAM,EAAK+oC,cAAc,WACxC,kBAACn9B,GAAA,EAAD,KACI,kBAAC,KAAD,OAFR,gBAMCgI,EAAKtD,MAAMyC,UACR,kBAAC3F,GAAA,EAAD,CACIpN,QAAS,kBAAM,EAAK+oC,cAAc,cAElC,kBAACn9B,GAAA,EAAD,KACI,kBAACw9B,GAAA,EAAD,OAJR,gBASJ,kBAAC79B,EAAA,EAAD,MACA,kBAAC6B,GAAA,EAAD,CACIpN,QAAS,kBAAM,EAAK+oC,cAAc,eAElC,kBAACn9B,GAAA,EAAD,KACI,kBAAC,KAAD,OAJR,kCASA,kBAACwB,GAAA,EAAD,CAAUpN,QAAS,kBAAM,EAAK+oC,cAAc,aACxC,kBAACn9B,GAAA,EAAD,KACI,kBAAC,KAAD,OAFR,8BAWhB,OACI,yBACI1S,UAAW6G,KAAW,eAEb1G,EAAQgwC,YAAc55C,KAAKqJ,MAAM4a,SAEtCra,EAAQirB,YAGZ,yBAAKprB,UAAWG,EAAQiwC,oBACpB,yBAAKpwC,UAAWG,EAAQkwC,IAAKnwB,IAAK3pB,KAAK03C,SACnC,8BACI,kBAAClB,GAAD,CACI59B,OAAO,IACP3U,KAAK,IACLsM,QAAS,SAAChK,GAAD,OAAO,EAAKgf,WAAWhf,GAAI,MAExC,kBAAC,KAAD,CAAWkD,UAAWG,EAAQmwC,aAEjC/5C,KAAKiI,MAAM6vC,YACR,8BACI,kBAACtB,GAAD,CACIK,MAAI,EACJzmC,MAAM,2BACNG,QAASvQ,KAAKq5C,iBAElB,kBAACI,GAAA,EAAD,CACIn0C,GAAG,iBACHgN,SAAUtS,KAAKiI,MAAM8vC,aACrBp2C,KAAM4Q,QAAQvS,KAAKiI,MAAM8vC,cACzBvlC,QAASxS,KAAKmwB,YACdupB,sBAAsB,GAEtB,kBAACpC,GAAD,CACI9kC,QAASxS,KAAKmwB,YACdrjB,QAAS9M,KAAKiI,MAAM6E,QAAQG,MACxB,GACC,GAELsY,WAAYvlB,KAAKulB,cAGzB,kBAAC,KAAD,CAAW9b,UAAWG,EAAQmwC,YAK9B,kBAACvD,GAAD,CACI59B,OAAQ5Y,KAAKiI,MAAM6E,QAAQG,OAAO,GAClChJ,KACI,IACAjE,KAAKiI,MAAM6E,QACNG,MAAM,GAAI,GACVC,KAAK,KAEdiqC,MAAM,EACN5mC,QAAS,SAAChK,GAAD,OACL,EAAKgf,WACDhf,EACA,EAAK0B,MAAM6E,QAAQ/E,OAAS,MAIvCyxC,IAGPx5C,KAAKiI,MAAM6vC,YACT93C,KAAKiI,MAAM6E,QAAQe,KAAI,SAAC+K,EAAQtT,EAAIwH,GAAb,OACnB,0BAAMtH,IAAKF,GACK,KAAXsT,GACG,8BACI,kBAAC49B,GAAD,CACI59B,OAAQA,EACR3U,KACI,IACA6I,EACKG,MAAM,EAAG3H,GACT4H,KAAK,KAEdiqC,KAAM7xC,IAAOwH,EAAQ/E,OAAS,EAC9BwI,QAAS,SAAChK,GAAD,OACL,EAAKgf,WAAWhf,EAAGjB,MAG1BA,IAAOwH,EAAQ/E,OAAS,GACrByxC,EACHl0C,IAAOwH,EAAQ/E,OAAS,GACrB,kBAAC,KAAD,CACI0B,UACIG,EAAQmwC,kBAS5C,yBAAKtwC,UAAWG,EAAQowC,iBACpB,kBAACrpC,GAAA,EAAD,CAAYC,SAAO,EAACC,MAAO7Q,KAAKqJ,MAAMwH,UAG9C,kBAACiL,EAAA,EAAD,W,GArWiB0H,aAqXlBy2B,GALGv2B,aAzcM,SAACzb,GACrB,MAAO,CACHhE,KAAMgE,EAAM5F,UAAU4B,KACtBm2B,QAASnyB,EAAM5F,UAAU+3B,QACzBye,kBAAmB5wC,EAAM7E,WAAWzB,KACpCoP,WAAY9I,EAAM7E,WAAW4N,mBAC7BrJ,SAAUM,EAAMrE,SAAS+D,SACzBxE,WAAY8E,EAAM7E,WAAWD,eAIV,SAACF,GACxB,MAAO,CACHi1C,eAAgB,SAACj0C,GACbhB,EAASsiB,YAAWthB,KAExBuhB,WAAY,WACRviB,EAASuiB,gBAEbO,kBAAmB,SAAC9O,EAAQhW,GACxBgC,EAAS8iB,YAAkB9O,EAAQhW,KAEvC+B,eAAgB,SAAC3B,GACb4B,EAASW,GAASuyC,QAAQnzC,eAAe3B,KAE7CykB,0BAA2B,SAAC7O,GACxBhU,EAAS6iB,YAA0B7O,KAEvCsB,gBAAiB,WACbtV,EAASsV,gBAEbuL,kBAAmB,SAAC1b,GAChBnF,EAAS6gB,YAAkB1b,KAE/B4d,uBAAwB,WACpB/iB,EAAS+iB,gBAEbC,qBAAsB,WAClBhjB,EAASgjB,gBAEbM,gBAAiB,WACbtjB,EAASsjB,gBAEb4N,oBAAqB,SAACxyB,GAClBsB,EAAS0iB,YAAmBhkB,KAEhCklB,mBAAoB,WAChB5jB,EAAS4jB,mBA0ZHnD,CAGhBnK,cAtZa,SAACzQ,GAAD,MAAY,CACvB+rB,UAAW,CAIPzhB,OAAQ,OACRynB,SAAU,SACVvxB,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,OAE9C+kB,mBAAoB,CAChBzlC,QAAS,OACTqlB,eAAgB,iBAEpBqgB,IAAK,CACD1mC,OAAQ,OACRnK,QAAS,WACTmL,QAAS,QAEb4lC,gBAAiB,CACbtgB,WAAY,MACZjpB,YAAa,QAEjBspC,UAAW,CACPzlC,UAAW,MACXwiB,cAAe,MACfhrB,MAAO,WAEXuqC,WAAY,CACRvqC,MAAO,WAEX8tC,YAAa,CACTnyB,aAAc,kBAuXpBlO,CAAmBoK,YAAWg0B,M,qGCzZ1BuC,G,+MACFjyC,MAAQ,G,6CAER,WAAU,IAAD,aACG2B,EAAY5J,KAAKqJ,MAAjBO,QACFuwC,GAGM,IAFRn6C,KAAKqJ,MAAMtC,SAASib,WAAU,SAACvc,GAC3B,OAAOA,IAAU,EAAK4D,MAAMhC,QAE9B/C,EAAWP,IAAaO,WAE9B,OACI,kBAAC81C,GAAA,EAAD,CACIC,aAAW,EACX5wC,UAAW6G,MAAU,mBAEZ1G,EAAQ7C,SAAWozC,GAFP,cAGZvwC,EAAQ0wC,aAAeH,GAHX,GAKjBvwC,EAAQsS,SAGZ,yBACI3L,QAASvQ,KAAKqJ,MAAMkxC,YACpB9wC,UAAW6G,KAAW1G,EAAQ2F,MAAT,mBAChB3F,EAAQ4wC,aAAeL,GADP,cAEhBvwC,EAAQ6wC,iBAAmBN,GAFX,OAKlBA,IAAe71C,IACd,oCACKtE,KAAKqJ,MAAMqxC,UAAY,kBAAC,KAAD,OACtB16C,KAAKqJ,MAAMqxC,UACT,kBAAClb,GAAA,EAAD,CAAUhhB,SAAUxe,KAAKqJ,MAAMhC,KAAKlF,QAI/Cg4C,GAAc71C,GACX,kBAAC8tB,GAAA,EAAD,CAAM1rB,GAAIyzC,GAAc71C,GACpB,kBAAC,KAAD,CACImF,UAAWG,EAAQ+wC,cAKnC,kBAAC59B,GAAA,EAAD,CACI3M,MAAOpQ,KAAKqJ,MAAMhC,KAAKlF,KACvBiT,aAAYpV,KAAKqJ,MAAMhC,KAAKlF,MAE5B,kBAACyb,EAAA,EAAD,CACInU,UAAW6G,KAAW1G,EAAQgxC,YAAT,mBAChBhxC,EAAQixC,mBAAqBV,GADb,cAEhBvwC,EAAQkxC,uBAAyBX,GAFjB,IAIrBxkC,QAAQ,SAEP3V,KAAKqJ,MAAMhC,KAAKlF,Y,GAxDRqhB,aA0ElBu3B,GALGr3B,aA/EM,SAACzb,GACrB,MAAO,CACHlB,SAAUkB,EAAMrE,SAASmD,aAIN,WACvB,MAAO,KAwEO2c,CAGhBnK,cAjJa,SAACzQ,GAAD,MAAY,CACvB+rB,UAAW,CACP5rB,QAAS,OAGblC,SAAU,CACN,UAAW,CACP0S,OAAQ,qBAEZnQ,gBAAiB+vB,YACbvwB,EAAMe,QAAQwS,QAAQsT,KACC,SAAvB7mB,EAAMe,QAAQvI,KAAkB,GAAM,MAG9Cg5C,YAAa,CACT,UAAW,CACPhxC,gBAAiBR,EAAMe,QAAQqQ,WAAWC,QAC1CV,OAAQ,qBAEZnQ,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,OAG9C5Y,OAAQ,CACJ9I,OAAQ,OACRqG,OAAQ,aAAe3Q,EAAMe,QAAQmxC,QACrChyC,MAAO,OACPye,aAAc,MACdwzB,UAAW,aACXplB,WACI,0JACJzhB,QAAS,OACTqlB,eAAgB,OAChBvlB,WAAY,WAEhB3E,KAAM,CACFmE,OAAQ,sBACRN,OAAQ,OACRI,SAAU,OACVlK,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,MAC1CrN,aAAc,MACdiS,WAAY,MACZ5tB,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9BgnC,mBAAoB,CAChB/uC,MAC2B,SAAvBhD,EAAMe,QAAQvI,KAAkB,OAASwH,EAAMe,QAAQwS,QAAQ9S,KACnE2xC,WAAY,OAEhBJ,sBAAuB,CACnBhvC,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9B+mC,WAAY,CACRtmC,UAAW,OACXwmB,aAAc,WACde,WAAY,SACZhB,SAAU,SACVpqB,YAAa,QAEjBkqC,UAAW,CACP7uC,MAAOhD,EAAMe,QAAQwS,QAAQsT,SAsFnCpW,CAAmB2gC,K,UC7BfiB,G,+MAKFlzC,MAAQ,CACJ2M,SAAS,EACTwmC,aAAa,G,6CAGjB,WAAU,IAAD,eACGxxC,EAAY5J,KAAKqJ,MAAjBO,QACFuwC,GAGM,IAFRn6C,KAAKqJ,MAAMtC,SAASib,WAAU,SAACvc,GAC3B,OAAOA,IAAU,EAAK4D,MAAMhC,QAE9BnD,EAAcqc,IAAWrc,YAC3BlE,KAAKqJ,MAAMtI,SAASyf,UAElBlc,EAAWP,IAAaO,WAE9B,OACI,yBAAKmF,UAAWG,EAAQirB,WACpB,kBAACulB,GAAA,EAAD,CACIC,aAAW,EACX5wC,UAAW6G,MAAU,mBAEZ1G,EAAQ7C,SAAWozC,GAFP,cAGZvwC,EAAQ0wC,aAAeH,GAHX,GAKjBvwC,EAAQsS,SAGa,KAAxBlc,KAAKqJ,MAAMhC,KAAKg0C,MACZr7C,KAAKiI,MAAMmzC,aACY,MAAxBp7C,KAAKqJ,MAAMhC,KAAKg0C,KACQ,cAAxBr7C,KAAKqJ,MAAMhC,KAAKg0C,KACZ,yBAAK5xC,UAAWG,EAAQyR,SACpB,kBAAC,iBAAD,CACI5R,UAAW6G,MAAU,mBAChB1G,EAAQ0xC,KAAOt7C,KAAKiI,MAAM2M,SADV,cAEhBhL,EAAQ2xC,YAAcv7C,KAAKiI,MACvB2M,SAHY,IAKrBvB,IACIhU,KACC6E,EACK,gBACApD,OAAOyK,UAAU/F,IACjB,IACAxF,KAAKqJ,MAAMhC,KAAK/B,GAChB,SACA2b,mBACIjhB,KAAKqJ,MAAMhC,KAAKpD,MAEpB,eACAjE,KAAKqJ,MAAMhC,KAAK/B,IAE1Bk2C,UAAW,kBACP,EAAK17B,SAAS,CAAElL,SAAS,KAE7B6mC,WAAY,kBACR,EAAK37B,SAAS,CAAElL,SAAS,KAE7By2B,QAAS,kBACL,EAAKvrB,SAAS,CAAEs7B,aAAa,OAGrC,kBAAC,IAAD,CACIhoC,OAAQ,IACRpK,MAAO,IACPS,UAAW6G,KAAW,eAEb1G,EAAQ0xC,MAAQt7C,KAAKiI,MAAM2M,SAEhChL,EAAQ8xC,mBAGZ,0BACIn4C,EAAE,IACF6qC,EAAE,IACFplC,MAAM,OACNoK,OAAO,WAKD,KAAxBpT,KAAKqJ,MAAMhC,KAAKg0C,KACdr7C,KAAKiI,MAAMmzC,aACa,MAAxBp7C,KAAKqJ,MAAMhC,KAAKg0C,KACQ,cAAxBr7C,KAAKqJ,MAAMhC,KAAKg0C,MAChB,yBAAK5xC,UAAWG,EAAQ+xC,aACpB,kBAACnc,GAAA,EAAD,CACI/1B,UAAWG,EAAQgyC,QACnBp9B,SAAUxe,KAAKqJ,MAAMhC,KAAKlF,SAIZ,KAAxBnC,KAAKqJ,MAAMhC,KAAKg0C,KACdr7C,KAAKiI,MAAMmzC,aACa,MAAxBp7C,KAAKqJ,MAAMhC,KAAKg0C,KACQ,cAAxBr7C,KAAKqJ,MAAMhC,KAAKg0C,MAAwB,kBAACv/B,EAAA,EAAD,MAC5C,yBAAKrS,UAAWG,EAAQiyC,WAClB77C,KAAKqJ,MAAMwH,OACT,yBACIN,QAASvQ,KAAKqJ,MAAMkxC,YACpB9wC,UAAW6G,KAAW1G,EAAQ2F,MAAT,mBAChB3F,EAAQ4wC,aAAeL,GADP,cAEhBvwC,EAAQ6wC,iBAAmBN,GAFX,OAKlBA,IAAe71C,IACd,kBAACk7B,GAAA,EAAD,CAAUhhB,SAAUxe,KAAKqJ,MAAMhC,KAAKlF,OAEvCg4C,GAAc71C,GACX,kBAAC8tB,GAAA,EAAD,CAAM1rB,GAAIyzC,GAAc71C,GACpB,kBAAC,KAAD,CACImF,UAAWG,EAAQ+wC,cAMvC,kBAAC59B,GAAA,EAAD,CACI3M,MAAOpQ,KAAKqJ,MAAMhC,KAAKlF,KACvBiT,aAAYpV,KAAKqJ,MAAMhC,KAAKlF,MAE5B,kBAACyb,EAAA,EAAD,CACIjI,QAAQ,QACRlM,UAAW6G,KAAW1G,EAAQgxC,YAAT,mBAChBhxC,EAAQixC,mBAAqBV,GADb,cAEhBvwC,EAAQkxC,uBAAyBX,GAFjB,cAGhBvwC,EAAQkyC,SAAW97C,KAAKqJ,MAAMwH,OAHd,KAMpB7Q,KAAKqJ,MAAMhC,KAAKlF,c,GAvIjBqhB,aAA1B23B,GACKjX,aAAe,CAClBrzB,OAAO,GAoJf,IAKekrC,GALEr4B,aAjKO,SAACzb,GACrB,MAAO,CACHhE,KAAMgE,EAAM5F,UAAU4B,KACtB8C,SAAUkB,EAAMrE,SAASmD,aAIN,WACvB,MAAO,KAyJM2c,CAGfnK,cAxQa,SAACzQ,GAAD,MAAY,CACvB+rB,UAAW,CACP5rB,QAAS,OAGblC,SAAU,CACN,UAAW,CACP0S,OAAQ,qBAEZnQ,gBAAiB+vB,YACbvwB,EAAMe,QAAQwS,QAAQsT,KACC,SAAvB7mB,EAAMe,QAAQvI,KAAkB,GAAM,MAI9Cg5C,YAAa,CACT,UAAW,CACPhxC,gBAAiBR,EAAMe,QAAQqQ,WAAWC,QAC1CV,OAAQ,qBAEZnQ,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,OAG9C5Y,OAAQ,CACJzC,OAAQ,aAAe3Q,EAAMe,QAAQmxC,QACrChyC,MAAO,OACPye,aAAc,MACdwzB,UAAW,aACXplB,WACI,0JACJ3hB,WAAY,UACZE,QAAS,WAEbymC,mBAAoB,CAChB/uC,MAC2B,SAAvBhD,EAAMe,QAAQvI,KAAkB,OAASwH,EAAMe,QAAQwS,QAAQ9S,KACnE2xC,WAAY,OAEhBJ,sBAAuB,CACnBhvC,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9B+mC,WAAY,CACRtmC,UAAW,OACXwmB,aAAc,WACde,WAAY,SACZhB,SAAU,SACVpqB,YAAa,QAEjB4K,QAAS,CACLwf,SAAU,SACVznB,OAAQ,QACRpK,MAAO,OACPye,aAAc,cACdne,gBAAiBR,EAAMe,QAAQqQ,WAAWC,SAE9CwhC,YAAa,CACT9gB,SAAU,SACVznB,OAAQ,QACRpK,MAAO,OACPye,aAAc,cACdne,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,MAC1C4E,WAAY,QAEhBkiB,QAAS,CACLvpC,SAAU,IAEdkpC,WAAY,CACRS,UAAW,QACXhzC,MAAO,OACPoK,OAAQ,QAEZyoC,SAAU,CACNzoC,OAAQ,OACRgB,QAAS,QAEb7E,KAAM,CACFmE,OAAQ,sBACRN,OAAQ,OACRI,SAAU,OACVlK,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,MAC1CrN,aAAc,MACdiS,WAAY,MACZ5tB,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9BynC,KAAM,CACFlnC,QAAS,QAEbsnC,iBAAkB,CACdj0B,aAAc,cACdrU,OAAQ,OACRpK,MAAO,QAEX8yC,SAAU,CACNzkC,WAAY,QAEhBsjC,UAAW,CACP7uC,MAAOhD,EAAMe,QAAQwS,QAAQsT,SAwKnCpW,CAAmBoK,YAAWw3B,MChR1BvyC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrC+rB,UAAW,CACP5rB,QAAS,OAGblC,SAAU,CACN,UAAW,CACP0S,OAAQ,qBAEZnQ,gBAAiB+vB,YACbvwB,EAAMe,QAAQwS,QAAQsT,KACC,SAAvB7mB,EAAMe,QAAQvI,KAAkB,GAAM,MAI9Cg5C,YAAa,CACT,UAAW,CACPhxC,gBAAiBR,EAAMe,QAAQqQ,WAAWC,QAC1CV,OAAQ,qBAEZnQ,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,OAG9C5Y,OAAQ,CACJ9I,OAAQ,OACRqG,OAAQ,aAAe3Q,EAAMe,QAAQmxC,QACrChyC,MAAO,OACPye,aAAc,MACdwzB,UAAW,aACXplB,WACI,4GACJzhB,QAAS,OACTqlB,eAAgB,OAChBvlB,WAAY,WAEhB3E,KAAM,CACFmE,OAAQ,sBACRN,OAAQ,OACRI,SAAU,OACVlK,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,MAC1CrN,aAAc,MACdiS,WAAY,MACZ5tB,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9BgnC,mBAAoB,CAChB/uC,MAC2B,SAAvBhD,EAAMe,QAAQvI,KAAkB,OAASwH,EAAMe,QAAQwS,QAAQ9S,KACnE2xC,WAAY,OAEhBJ,sBAAuB,CACnBhvC,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9B+mC,WAAY,CACRtmC,UAAW,OACXwmB,aAAc,WACde,WAAY,SACZhB,SAAU,SACVpqB,YAAa,QAEjB6lC,OAAQ,CACJ58B,UAAW,aAAe5Q,EAAMe,QAAQwS,QAAQvI,OAEpD6mC,UAAW,CACP7uC,MAAOhD,EAAMe,QAAQwS,QAAQsT,UAItB,SAASssB,GAAT,GAAoD,IAAD,MAAjCrjC,EAAiC,EAAjCA,OAAQs+B,EAAyB,EAAzBA,SAAUqD,EAAe,EAAfA,YACzCxzC,EAAW6I,aAAY,SAAC3H,GAAD,OAAWA,EAAMrE,SAASmD,YACjD6C,EAAUhB,KACVtE,EAAWP,IAAaO,WACxB61C,GAGM,IAFRpzC,EAASib,WAAU,SAACvc,GAChB,OAAOA,IAAUmT,KAGzB,OACI,kBAACwhC,GAAA,EAAD,CACIC,aAAW,EACX5wC,UAAW6G,MAAU,mBAEZ1G,EAAQ7C,SAAWozC,GAFP,cAGZvwC,EAAQ0wC,aAAeH,GAHX,cAIZvwC,EAAQ0sC,OAASY,GAJL,GAMjBttC,EAAQsS,SAGZ,yBACI3L,QAASgqC,EACT9wC,UAAW6G,KAAW1G,EAAQ2F,MAAT,mBAChB3F,EAAQ4wC,aAAeL,GADP,cAEhBvwC,EAAQ6wC,iBAAmBN,GAFX,OAKlBA,IAAe71C,IAAa,kBAAC,KAAD,MAC9B61C,GAAc71C,GACX,kBAAC,KAAD,CAAwBmF,UAAWG,EAAQ+wC,aAGnD,kBAAC59B,GAAA,EAAD,CAAS3M,MAAOwI,EAAOzW,KAAMiT,aAAYwD,EAAOzW,MAC5C,kBAACyb,EAAA,EAAD,CACIjI,QAAQ,QACRlM,UAAW6G,KAAW1G,EAAQgxC,YAAT,mBAChBhxC,EAAQixC,mBAAqBV,GADb,cAEhBvwC,EAAQkxC,uBAAyBX,GAFjB,KAKpBvhC,EAAOzW,QCpH5B,IAAMyG,GAAYC,aAAW,iBAAO,CAChCqzC,SAAU,CACNlzC,MAAO,SAEXmzC,YAAa,CACTzsC,SAAU,WACV,mBAAoB,mBAItB0sC,GAAc,SAACC,EAAQtrC,EAAYnH,GACrC,MAAoB,QAAhByyC,EAAO/6C,KAEH,yBAAKmI,UAAWG,EAAQsyC,UACpB,kBAAC,GAAD,CAAW70C,KAAMg1C,EAAQ3B,UAAQ,KAIzB,SAAhB2B,EAAO/6C,MAAkC,SAAfyP,EAEtB,yBAAKtH,UAAWG,EAAQsyC,UACpB,kBAAC,GAAD,CAAU70C,KAAMg1C,KAKP,SAAhBA,EAAO/6C,MAAkC,cAAfyP,GACZ,SAAfA,EAGI,yBAAKtH,UAAWG,EAAQsyC,UACpB,kBAAC,GAAD,CAAW70C,KAAMg1C,UAN7B,GAyCWC,GA7BC,SAACjzC,GACb,IAAMtC,EAAW6I,aAAY,SAAC3H,GAAD,OAAWA,EAAMrE,SAASmD,YACjDgK,EAAanB,aACf,SAAC3H,GAAD,OAAWA,EAAM7E,WAAW4N,sBAE1BpH,EAAUhB,KAChB,OACI,oCACyB,IAApB7B,EAASgB,QACNq0C,GAAY/yC,EAAMgzC,OAAQtrC,EAAYnH,GACzC7C,EAASgB,OAAS,GACf,oCACKhB,EAASkG,MAAM,EAAG,GAAGY,KAAI,SAAC0uC,EAAMvyC,GAAP,OACtB,yBACIxE,IAAK+2C,EAAKj3C,GACVmE,UAAWG,EAAQuyC,YACnB9sC,MAAO,CACHoH,OAAQ1P,EAASgB,OAASiC,EAC1ByxB,UAAU,WAAD,OAAkB,KAAJzxB,EAAd,UAGZoyC,GAAYG,EAAMxrC,EAAYnH,UC7DrD4yC,GAAc,CAChB9sC,SAAU,QACV8pB,cAAe,OACf/iB,OAAQ,IACRzC,KAAM,EACND,IAAK,EACL/K,MAAO,OACPoK,OAAQ,QAGZ,SAASqpC,GACLC,EACAC,EACAC,EACA7rC,GAEA,IAAK2rC,IAAkBC,EACnB,MAAO,CACHvoC,QAAS,QAHnB,IAMQ7Q,EAASo5C,EAATp5C,EAAG6qC,EAAMuO,EAANvO,EACU,SAAfr9B,IACAxN,GAAKq5C,EAAcr5C,EAAIm5C,EAAcn5C,EACrC6qC,GAAKwO,EAAcxO,EAAIsO,EAActO,GAGzC,IAAM3S,EAAS,oBAAgBl4B,EAAhB,eAAwB6qC,EAAxB,OACf,MAAO,CACH5+B,QAAS,GACTisB,YACAohB,gBAAiBphB,GAGzB,IA6CeqhB,GA7CS,SAACzzC,GAAW,IAAD,EAQ3B0zC,cAAa,SAAChG,GAAD,MAAc,CAC3B1Q,KAAM0Q,EAAQhyC,UACdi4C,SAAUjG,EAAQkG,cAClBP,cAAe3F,EAAQmG,+BACvBP,cAAe5F,EAAQoG,wBACvBP,cAAe7F,EAAQqG,yBACvBC,WAAYtG,EAAQsG,iBAZpBL,EAF2B,EAE3BA,SACAK,EAH2B,EAG3BA,WACAhX,EAJ2B,EAI3BA,KACAqW,EAL2B,EAK3BA,cACAC,EAN2B,EAM3BA,cACAC,EAP2B,EAO3BA,cASE7rC,EAAanB,aACf,SAAC3H,GAAD,OAAWA,EAAM7E,WAAW4N,sBAUhC,OAAKqsC,EAID,yBAAKhuC,MAAOmtC,IACR,yBACIntC,MAAOotC,GACHC,EACAC,EACAC,EACA7rC,IAlBhB,WACI,OAAQisC,GACJ,IAAK,SACD,OAAO,kBAAC,GAAD,CAASX,OAAQhW,EAAKgW,SACjC,QACI,OAAO,MAgBNiB,KAZF,M,sECyBTC,G,+MACFt1C,MAAQ,G,6CAER,WAAU,IAAD,QAIDsH,EAJC,OACG3F,EAAY5J,KAAKqJ,MAAjBO,QACFqa,EAAU1D,IAAWrc,YAAYlE,KAAKqJ,MAAMtI,SAASyf,UAIvDjR,EADyB,QAAzBvP,KAAKqJ,MAAMhC,KAAK/F,KACT,kBAAC,KAAD,CAAYmI,UAAWG,EAAQ2F,OACN,OAAzBvP,KAAKqJ,MAAMhC,KAAK/F,KAChB,kBAAC,KAAD,CAAoBmI,UAAWG,EAAQ2F,OAG1C,kBAACiwB,GAAA,EAAD,CACI/1B,UAAWG,EAAQ4zC,UACnBh/B,SAAUxe,KAAKqJ,MAAMhC,KAAKlF,OAItC,IAAMg4C,GAGM,IAFRn6C,KAAKqJ,MAAMtC,SAASib,WAAU,SAACvc,GAC3B,OAAOA,IAAU,EAAK4D,MAAMhC,QAE9B/C,EAAWP,IAAaO,WAE9B,OACI,kBAACm5C,GAAA,EAAD,CACI9zB,IAAK3pB,KAAKqJ,MAAMq0C,KAChBC,cAAe39C,KAAKqJ,MAAMu0C,YAC1BrtC,QAASvQ,KAAKqJ,MAAMw0C,YACpBC,cAAe99C,KAAKqJ,MAAM00C,kBAAkBvY,KAAKxlC,MACjDyJ,UAAW6G,MAAU,mBAChB1G,EAAQ7C,SAAWozC,IAAel2B,GADlB,cAEhBra,EAAQo0C,eAAiB7D,GAAcl2B,GAFvB,cAGhBra,EAAQ0wC,aAAeH,GAHP,cAIhBvwC,EAAQ0sC,OAASt2C,KAAKqJ,MAAM6tC,UAJZ,KAOrB,kBAAC+G,GAAA,EAAD,CACIt0B,IAAK3pB,KAAKqJ,MAAM60C,KAChB/oC,UAAU,KACVgpC,MAAM,MACN10C,UAAWG,EAAQw0C,UAEnB,kBAACxgC,EAAA,EAAD,CACIjI,QAAQ,QACRlM,UAAW6G,KAAW1G,EAAQgxC,YAAT,mBAChBhxC,EAAQixC,mBAAqBV,GADb,cAEhBvwC,EAAQkxC,uBAAyBX,GAFjB,KAKrB,yBACI5pC,QAC6B,OAAzBvQ,KAAKqJ,MAAMhC,KAAK/F,KACVtB,KAAKqJ,MAAMkxC,YACX,QAGPJ,IAAe71C,IAAaiL,EAC9B4qC,GAAc71C,GACX,kBAAC8tB,GAAA,EAAD,CAAM1rB,GAAIyzC,GAAc71C,GACpB,kBAAC,KAAD,CACImF,UAAW6G,KACP1G,EAAQ+wC,UACR/wC,EAAQ2F,UAM3BvP,KAAKqJ,MAAMhC,KAAKlF,OAGzB,kBAAC87C,GAAA,EAAD,CACIx0C,UAAW6G,KAAW1G,EAAQy0C,SAAUz0C,EAAQw0C,WAEhD,kBAACxgC,EAAA,EAAD,CACIjI,QAAQ,QACRlM,UAAW6G,KAAW1G,EAAQgxC,YAAT,mBAChBhxC,EAAQixC,mBAAqBV,GADb,cAEhBvwC,EAAQkxC,uBAAyBX,GAFjB,KAKpB,IACyB,QAAzBn6C,KAAKqJ,MAAMhC,KAAK/F,MACY,OAAzBtB,KAAKqJ,MAAMhC,KAAK/F,MAChBwI,YAAa9J,KAAKqJ,MAAMhC,KAAKrF,QAGzC,kBAACi8C,GAAA,EAAD,CACIx0C,UAAW6G,KAAW1G,EAAQy0C,SAAUz0C,EAAQw0C,WAEhD,kBAACxgC,EAAA,EAAD,CACIjI,QAAQ,QACRlM,UAAW6G,KAAW1G,EAAQgxC,YAAT,mBAChBhxC,EAAQixC,mBAAqBV,GADb,cAEhBvwC,EAAQkxC,uBAAyBX,GAFjB,KAKpB,IACAtiB,aACG73B,KAAKqJ,MAAMhC,KAAKvE,KAChB,6B,GAvGI0gB,aA0HjB86B,GALG56B,aA/HM,SAACzb,GACrB,MAAO,CACHlB,SAAUkB,EAAMrE,SAASmD,aAIN,WACvB,MAAO,KAwHO2c,CAGhBnK,cA1La,SAACzQ,GAAD,MAAY,CACvB/B,SAAU,CACN,UAAW,GACXuC,gBAAiB+vB,YAAKvwB,EAAMe,QAAQwS,QAAQsT,KAAM,MAGtDquB,eAAgB,CACZ,UAAW,GACX10C,gBAAiB+vB,YAAKvwB,EAAMe,QAAQwS,QAAQsT,KAAM,MAGtD2qB,YAAa,CACT,UAAW,CACPhxC,gBAAiBR,EAAMe,QAAQqQ,WAAWC,UAGlD5K,KAAM,CACFunB,cAAe,SACfrmB,YAAa,OACb3E,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9B2pC,UAAW,CACP/sC,YAAa,OACbqmB,cAAe,UAEnB+jB,mBAAoB,CAChB/uC,MAC2B,SAAvBhD,EAAMe,QAAQvI,KAAkB,OAASwH,EAAMe,QAAQwS,QAAQ9S,KACnE2xC,WAAY,MACZqD,WAAY,QAEhBzD,sBAAuB,CACnBhvC,MAAOhD,EAAMe,QAAQ2N,KAAK3D,UAC1B0qC,WAAY,QAEhB3D,WAAY,CACRnqC,YAAa,OACb2D,QAAS,OACTF,WAAY,UAEhBmqC,SAAS,eACJv1C,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAGjBgqC,SAAU,CACNn1C,QAAS,aAEb0xC,UAAW,CACP7uC,MAAOhD,EAAMe,QAAQwS,QAAQsT,MAEjC2mB,OAAQ,CACJhtC,gBAAiB+vB,YAAKvwB,EAAMe,QAAQwS,QAAQsT,KAAM,QAsIxDpW,CAAmBoK,YAAW45B,M,8BC9MjB,SAASiB,GAAT,GASX,IARAC,EAQD,EARCA,WACA7lC,EAOD,EAPCA,OACA2hC,EAMD,EANCA,YACAqD,EAKD,EALCA,YACAC,EAID,EAJCA,YACAE,EAGD,EAHCA,kBACAt0C,EAED,EAFCA,UACAi0C,EACD,EADCA,KACD,EACqChH,aAAQ,CACxCC,OAAQ,SACRC,KAAM,iBAAO,CAAEh+B,WACfk+B,QAAS,SAACC,GAAD,MAAc,CACnBC,OAAQD,EAAQC,SAChBC,QAASF,EAAQE,cAN1B,0BACUA,EADV,EACUA,QAASD,EADnB,EACmBA,OAAUJ,EAD7B,KASOM,EAAWD,GAAWD,EAC5B,OAAKyH,EAYD,kBAAC,GAAD,CACIf,KAAMA,EACNQ,KAAMtH,EACNntC,UAAWA,EACX8wC,YAAaA,EACbqD,YAAaA,EACbC,YAAaA,EACbE,kBAAmBA,EACnB12C,KAAMuR,EACNs+B,SAAUA,IAnBV,yBAAKvtB,IAAKitB,GACN,kBAAC,GAAD,CACIh+B,OAAQA,EACR2hC,YAAaA,EACbrD,SAAUA,KCF9B,IAAMtuC,GAAYC,aAAW,iBAAO,CAChCgsB,UAAW,CACP5rB,QAAS,OAEby1C,QAAS,CACLlrC,SAAU,GAEd0oC,SAAU,CACN1sC,QAAS,QAIF,SAASmvC,GAAWt1C,GAAQ,IAAD,EAChCpF,EAAO2L,aAAY,SAAC3H,GAAD,OAAWA,EAAM5F,UAAU4B,QAC9C8C,EAAW6I,aAAY,SAAC3H,GAAD,OAAWA,EAAMrE,SAASmD,YACjDgK,EAAanB,aACf,SAAC3H,GAAD,OAAWA,EAAM7E,WAAW4N,sBAE1B4tC,EAAgBhvC,aAAY,SAAC3H,GAAD,OAAWA,EAAM5F,UAAU4B,QACvDlD,EAAWmnB,cAEXjlB,EAAW6M,cACX+uC,EAAc7uC,uBAChB,SAAC1O,EAAMK,GAAP,OAAgBsB,EAASihB,YAAkB5iB,EAAMK,MACjD,CAACsB,IAEC67C,EAAoB9uC,uBACtB,SAACzH,GAAD,OAAatF,EAAS6gB,YAAkBvb,MACxC,CAACtF,IAGC87C,EAAa/uC,uBAAY,SAACzH,GAAD,OAAatF,EAASsiB,YAAWhd,MAAW,CACvEtF,IAEE6R,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAEC+7C,EAAchvC,uBAChB,SAAC3H,EAAQD,GAAT,OAAoBnF,EAAS2iB,YAAYvd,EAAQD,MACjD,CAACnF,IAECgO,EAAoBjB,uBACtB,SAACwH,GAAD,OAAUvU,EAAS6e,YAAkBtK,MACrC,CAACvU,IAECg8C,EAAcjvC,uBAAY,kBAAM/M,EAAS8gB,iBAAgB,CAAC9gB,IAE1D2G,EAAUhB,KAEVg1C,EAAc,SAACr3C,GACO,OAApB8C,EAAMhC,KAAK/F,OAGfiF,EAAEwS,kBAIU,IAFRhS,EAASib,WAAU,SAACvc,GAChB,OAAOA,IAAU4D,EAAMhC,SAG3By3C,EAAkB,CAACz1C,EAAMhC,OAE7Bw3C,EAAY,QAAQ,KAGlBp6B,EAAa,SAACle,GAChBtD,EAASi8C,YAAiB71C,EAAMhC,KAAMd,EAAG8C,EAAM/B,SAE7C63C,EAAc,WAChBJ,EACa,MAAT96C,EAAeA,EAAOoF,EAAMhC,KAAKlF,KAAO8B,EAAO,IAAMoF,EAAMhC,KAAKlF,OAGlE07C,EAAc,SAACt3C,GAIjB,GAHwB,OAApB8C,EAAMhC,KAAK/F,MACXy9C,EAAWlyC,YAAS+xC,IAGpB76C,IAAaO,YACbP,IAAaG,YAAYnD,EAASyf,WAGlC,GADAiE,EAAWle,GACa,QAApB8C,EAAMhC,KAAK/F,OAAmBiF,EAAEoe,QAEhC,YADAw6B,SAIJ16B,EAAWle,IAIbw3C,EAAoB,WACtB,GAAwB,OAApB10C,EAAMhC,KAAK/F,KAGf,GAAwB,QAApB+H,EAAMhC,KAAK/F,KAAf,CAKA,GADgByC,IAAaG,YAAYnD,EAASyf,UACrC,CACT,IAAM2D,EAAOvjB,IAAKgE,UAClB,IAAKhE,IAAKuE,SAAWgf,IAASA,EAAKtD,MAAMuD,cAErC,YADAtP,EAAe,MAAO,QAAS,2BAAQ,YAI3ChU,OAAOyK,WAAczK,OAAOyK,UAAU8P,QAK1C4jC,IAJIhuC,EAAkB,gDAZlBkuC,KAmBFC,EAAkB,SAAC74C,GACrB,GAAIxC,IAAaO,WAIb,OAHAiC,EAAE84C,kBACF94C,EAAEoe,SAAU,EACZF,EAAWle,IACJ,GA7GuB,EAiHE+4C,aAAQ,CAC5CjZ,KAAM,CACFgW,OAAQhzC,EAAMhC,KACd/F,KAAM,SACNyF,SAAS,aAAKA,GACdgK,WAAYA,GAEhBiU,IAAK,SAACqhB,EAAM0Q,GACR,IAAMwI,EAAaxI,EAAQyI,gBACvBnZ,GAAQkZ,GACJA,EAAW3mC,SAEPytB,EAAKgW,OAAO/2C,KAAOi6C,EAAW3mC,OAAOtT,IACrC+gC,EAAKgW,OAAO/6C,OAASi+C,EAAW3mC,OAAOtX,MAEvC09C,EAAY3Y,EAAKgW,OAAQkD,EAAW3mC,UAKpD6mC,QAAS,WACL,OACK17C,IAAaO,YACdP,IAAaC,WAAWjD,EAASyf,WAGzCs2B,QAAS,SAACC,GAAD,MAAc,CACnBsG,WAAYtG,EAAQsG,iBA5IU,mBAiH7BA,EAjH6B,KAiH7BA,WAAcqC,EAjHe,KAiHTrkC,EAjHS,KAqJtC,OALAhV,qBAAU,WACNgV,EAAQskC,eAAiB,CAAEC,sBAAsB,MAElD,IAEgB,SAAf7uC,EAEI,oCACyB,QAApB1H,EAAMhC,KAAK/F,MACR,kBAAC,GAAD,CACIm9C,YAAY,EACZf,KAAMgC,EACNj2C,UAAW6G,KAAW1G,EAAQirB,UAAT,eAChBjrB,EAAQsyC,SAAWmB,IAExB9C,YAAa6E,EACbxB,YAAaA,EACbC,YAAaA,EACbE,kBAAmBA,EAAkBvY,KAAKxlC,MAC1C4Y,OAAQvP,EAAMhC,OAGD,QAApBgC,EAAMhC,KAAK/F,MACR,kBAAC,GAAD,CACIo8C,KAAMgC,EACNj2C,UAAW6G,KAAW1G,EAAQirB,UAAT,eAChBjrB,EAAQsyC,SAAWmB,IAExB9C,YAAa6E,EACbxB,YAAaA,EACbC,YAAaA,EACbE,kBAAmBA,EAAkBvY,KAAKxlC,MAC1CqH,KAAMgC,EAAMhC,QAQ5B,yBACIsiB,IAAK+1B,EACLj2C,UAAW6G,MAAU,mBAChB1G,EAAQirB,UAA2B,SAAf9jB,GADJ,cAEhBnH,EAAQsyC,SAAWmB,GAFH,KAKrB,yBACI5zC,UAAWG,EAAQ80C,QACnBf,cAAeC,EACfrtC,QAASstC,EACTC,cAAeC,EAAkBvY,KAAKxlC,OAEjB,QAApBqJ,EAAMhC,KAAK/F,MAAiC,SAAfyP,GAC1B,kBAAC,GAAD,CACI0tC,YAAY,EACZlE,YAAa6E,EACbxmC,OAAQvP,EAAMhC,OAGD,SAApBgC,EAAMhC,KAAK/F,MAAkC,SAAfyP,GAC3B,kBAAC,GAAD,CACIwpC,YAAa6E,EACbz1B,IAAK+1B,EACLr4C,KAAMgC,EAAMhC,OAGC,SAApBgC,EAAMhC,KAAK/F,MAAkC,cAAfyP,GAC3B,kBAAC,GAAD,CACIwpC,YAAa6E,EACb/3C,KAAMgC,EAAMhC,S,uNCzL9Bw4C,GAAqBtmC,aAAW,CAClCC,KAAM,CACFhG,SAAU,KAFS+F,CAIxB4C,MA4FG2jC,G,+MACFC,EAAI,E,EACJC,EAAI,E,EAEJ/3C,MAAQ,G,EAERuqB,kBAAoB,WAChB1xB,OAAO4J,SAASpE,iBAAiB,YAAa,EAAK25C,W,EAGvDA,SAAW,SAAC15C,GACR,EAAKy5C,EAAIz5C,EAAE25C,QACX,EAAKH,EAAIx5C,EAAE45C,S,EAGfC,oBAAsB,WAClB,EAAK/2C,MAAM6a,kBAAkB,QAAQ,GACrC,EAAK7a,MAAMyY,kBAAkB,0B,EAGjC8Q,aAAe,WACX,IAAKtnB,cAQD,OAPA,EAAKjC,MAAM8I,eACP,MACA,QACA,yDACA,gBAEJ,EAAK9I,MAAM6a,kBAAkB,QAAQ,GAGzC,EAAK7a,MAAM6a,kBAAkB,QAAQ,GACrC,EAAK7a,MAAMyY,kBAAkB,4C,EAGjCq9B,YAAc,WACV,EAAK91C,MAAMkc,WACa,MAApB,EAAKlc,MAAMpF,KACL,EAAKoF,MAAMpF,KAAO,EAAKoF,MAAMtC,SAAS,GAAG5E,KACzC,EAAKkH,MAAMpF,KAAO,IAAM,EAAKoF,MAAMtC,SAAS,GAAG5E,O,EAI7Dk+C,YAAc,SAAC/6C,GACX,EAAK+D,MAAM6a,kBAAkB,SAAS,GACtC,IAAMyjB,EAAej9B,SAASi6B,uBAAuBr/B,GAAI,GACrDoF,SAASy2B,KAAKyG,SAASD,GACvBA,EAAa/C,QAEb,EAAKv7B,MAAM8I,eACP,MACA,QACA,+DACA,Y,EAOZmuC,gBAAkB,SAACrnC,GACf,IAAM44B,EAAM,GACRrsC,EAAM,EA0BV,MAxBA,CAAC,MAAO,SAAU,UAAUwC,SAAQ,SAAC0H,GACjC,IAAI6wC,EAAe,EACnBtnC,EAAMvJ,GAAU1H,SAAQ,SAACq+B,GACjBA,EAAKma,YACL3O,EAAI34B,KACA,kBAACyE,GAAA,EAAD,CAAU8iC,OAAK,EAACj7C,IAAKA,EAAK+K,QAAS81B,EAAK91B,SACpC,kBAAC4L,GAAA,EAAD,KAAekqB,EAAK92B,MACpB,kBAACqO,EAAA,EAAD,CAAYjI,QAAQ,WACf0wB,EAAK7uB,QAIlBhS,IACA+6C,QAGJA,EAAe,GAAiB,UAAZ7wC,IACpBmiC,EAAI34B,KACA,kBAAC4C,EAAA,EAAD,CAAStW,IAAKA,EAAKiE,UAAW,EAAKJ,MAAMO,QAAQoxC,WAErDx1C,QAIDqsC,G,6CAGX,WAAU,IAAD,OACGjoC,EAAY5J,KAAKqJ,MAAjBO,QACFua,EAAOvjB,IAAKgE,UACZZ,EAAauc,IAAWvc,WAAWhE,KAAKqJ,MAAMtI,SAASyf,UAY1C,KAQA,KAMA,KAII2D,EAAKtD,MAAM6/B,oBAEf,KAQA,KAMA,KAMnB,OACI,6BACI,kBAACjH,GAAA,EAAD,CACItkB,aAAW,EACXxzB,KAAM3B,KAAKqJ,MAAMs3C,SACjBnuC,QAAS,kBACL,EAAKnJ,MAAM6a,kBAAkB,EAAK7a,MAAMwc,UAAU,IAEtD+6B,gBAAgB,iBAChBC,eAAgB,CAAE9sC,IAAK/T,KAAKggD,EAAGhsC,KAAMhU,KAAK+/C,GAC1C3vB,aAAc,CACVne,SAAU,MACVC,WAAY,QAEhB0e,gBAAiB,CACb3e,SAAU,MACVC,WAAY,SAGS,UAAxBlS,KAAKqJ,MAAMwc,UACR,6BACI,kBAAClI,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,WACL,EAAKlH,MAAMkP,kBACX,EAAKlP,MAAM6a,kBACP,EAAK7a,MAAMwc,UACX,KAIR,kBAACg6B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,iBAEJ,kBAACmG,EAAA,EAAD,CAASrS,UAAWG,EAAQoxC,UAC5B,kBAACr9B,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAK8vC,YAAY,oBAGrB,kBAACR,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,6BAIJ,kBAACgI,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAK8vC,YAAY,sBAGrB,kBAACR,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,6BAIHwO,EAAKtD,MAAM6/B,qBACR,kBAAC/iC,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAMqd,6BAGf,kBAACm5B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,6BAMR,kBAACmG,EAAA,EAAD,CAASrS,UAAWG,EAAQoxC,UAC5B,kBAACr9B,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAM2c,2BAGf,kBAAC65B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,mCAIJ,kBAACgI,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAM4c,yBAGf,kBAAC45B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,8BAMa,UAAxB3V,KAAKqJ,MAAMwc,UACR,8BACM7lB,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMnC,YAClC,6BACI,kBAACyW,GAAA,EAAD,CAAU8iC,OAAK,EAAClwC,QAASvQ,KAAKm/C,aAC1B,kBAACU,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,iBAIH3R,GACG,kBAAC8X,EAAA,EAAD,CAASrS,UAAWG,EAAQoxC,YAItCh7C,KAAKqJ,MAAMpC,YACTjH,KAAKqJ,MAAMlC,YACTnH,KAAKqJ,MAAMwH,OACT7Q,KAAKqJ,MAAMwH,MAAMwK,UACrBiJ,aAActkB,KAAKqJ,MAAMtC,SAAS,GAAG5E,OACjC,6BACI,kBAACwb,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAM0a,gBAGf,kBAAC87B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,mBAOd3V,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMlC,UAClC,6BACI,kBAACwW,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBAAM,EAAKqiB,iBAEpB,kBAACitB,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,iBAIH3R,GACG,kBAAC8X,EAAA,EAAD,CAASrS,UAAWG,EAAQoxC,YAKtCh7C,KAAKqJ,MAAMpC,YAAcjH,KAAKqJ,MAAMnC,cACjCid,EAAKtD,MAAM6T,uBACP1wB,IACD,kBAAC2Z,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAK6vC,wBAGT,kBAACP,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,8BAMV3V,KAAKqJ,MAAMpC,YACTjH,KAAKqJ,MAAMlC,UACXnD,GACI,kBAAC2Z,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAM0d,wBAGf,kBAAC84B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,8BAMV3V,KAAKqJ,MAAMpC,YACTjD,GACAmgB,EAAKtD,MAAM6/B,qBACX1gD,KAAKqJ,MAAMlC,UACXunB,aAAU1uB,KAAKqJ,MAAMtC,SAAS,GAAG5E,OAC7B,kBAACwb,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAMsd,8BAGf,kBAACk5B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,sDAKV3V,KAAKqJ,MAAMpC,YACTjD,GACAmgB,EAAKtD,MAAMyC,UACXtjB,KAAKqJ,MAAMlC,UACXwnB,aAAe3uB,KAAKqJ,MAAMtC,SAAS,GAAG5E,OAClC,kBAACwb,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAMud,yBAGf,kBAACi5B,GAAD,KACI,kBAACiB,GAAA,EAAD,OAEJ,kBAACljC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,uBAMX3R,GAAcmgB,EAAKtD,MAAMyC,UACtB,kBAAC3F,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAMwd,uBAGf,kBAACg5B,GAAD,KACI,kBAAClG,GAAA,EAAD,OAEJ,kBAAC/7B,EAAA,EAAD,CAAYjI,QAAQ,WAApB,yCAMP3R,GAAcmgB,EAAKtD,MAAM0C,UACtB,kBAAC5F,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAMyd,uBAGf,kBAAC+4B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,0CAMN3V,KAAKqJ,MAAMpC,YAAcjD,GACvB,kBAAC2Z,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBAAM,EAAKlH,MAAMkd,oBAE1B,kBAACs5B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,0CAMN3V,KAAKqJ,MAAMpC,YAAcjD,GACvB,kBAAC2Z,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAMxF,yBAAwB,KAGvC,kBAACg8C,GAAD,KACI,kBAACkB,GAAA,EAAD,OAEJ,kBAACnjC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,8BAMN3V,KAAKqJ,MAAMpC,YAAcjD,GACvB,kBAAC8X,EAAA,EAAD,CAASrS,UAAWG,EAAQoxC,WAG9Bh7C,KAAKqJ,MAAMpC,YAAcjD,GACvB,6BACI,kBAAC2Z,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAM+c,qBAGf,kBAACy5B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,uBAIqB,KAAxB3V,KAAKqJ,MAAM1B,UACR,kBAACgW,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAM2d,mBAGf,kBAAC64B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,kBAOf3R,GACG,6BAC6B,KAAxBhE,KAAKqJ,MAAM1B,UACR,kBAACgW,GAAA,EAAD,CACI8iC,OAAK,EACLlwC,QAAS,kBACL,EAAKlH,MAAMgd,mBAGf,kBAACw5B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,iBAMR,kBAACmG,EAAA,EAAD,CAASrS,UAAWG,EAAQoxC,UAC5B,kBAACr9B,GAAA,EAAD,CACI8iC,OAAK,EACLh3C,UAAWG,EAAQo3C,SACnBzwC,QAAS,kBACL,EAAKlH,MAAMid,qBAGf,kBAACu5B,GAAD,KACI,kBAAC,KAAD,OAEJ,kBAACjiC,EAAA,EAAD,CAAYjI,QAAQ,WAApB,yB,GAlgBL6N,aA0hBpBq7B,GALKn7B,aA/mBI,SAACzb,GACrB,MAAO,CACH4d,SAAU5d,EAAM7E,WAAW69C,YAC3BN,SAAU14C,EAAM7E,WAAW89C,YAC3Bj6C,WAAYgB,EAAMrE,SAASoD,YAAYC,WACvCC,WAAYe,EAAMrE,SAASoD,YAAYE,WACvCC,SAAUc,EAAMrE,SAASoD,YAAYG,SACrClD,KAAMgE,EAAM5F,UAAU4B,KACtB8C,SAAUkB,EAAMrE,SAASmD,SACzBY,SAAUM,EAAMrE,SAAS+D,aAIN,SAAC1E,GACxB,MAAO,CACHihB,kBAAmB,SAAC5iB,EAAMK,GACtBsB,EAASihB,YAAkB5iB,EAAMK,KAErCmkB,0BAA2B,SAAC7O,GACxBhU,EAAS6iB,YAA0B7O,KAEvC6M,kBAAmB,SAACvb,GAChBtF,EAAS6gB,YAAkBvb,KAE/Bgd,WAAY,SAACthB,GACThB,EAASsiB,YAAWthB,KAExB+hB,uBAAwB,WACpB/iB,EAAS+iB,gBAEbC,qBAAsB,WAClBhjB,EAASgjB,gBAEbG,iBAAkB,WACdnjB,EAASmjB,gBAEbC,eAAgB,WACZpjB,EAASojB,gBAEbC,iBAAkB,WACdrjB,EAASqjB,gBAEbC,gBAAiB,WACbtjB,EAASsjB,gBAEbhC,eAAgB,SAAC9c,GACbxE,EAASshB,YAAe9c,KAE5B+c,gBAAiB,WACbvhB,EAASuhB,gBAEbrS,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,KAEvD4a,yBAA0B,WACtBzjB,EAASyjB,gBAEbC,0BAA2B,WACvB1jB,EAAS0jB,gBAEbI,oBAAqB,WACjB9jB,EAAS8jB,gBAEbC,eAAgB,WACZ/jB,EAAS+jB,gBAEblF,kBAAmB,SAACtK,GAChBvU,EAAS6e,YAAkBtK,KAE/BoP,qBAAsB,WAClB3jB,EAAS2jB,gBAEbC,mBAAoB,WAChB5jB,EAAS4jB,gBAEbtO,gBAAiB,WACbtV,EAASsV,gBAEbuO,mBAAoB,WAChB7jB,EAAS6jB,gBAEb/C,YAAa,WACT9gB,EAAS8gB,gBAEblgB,wBAAyB,SAAClC,GACtBsB,EAASY,mCAAwBlC,QA0hBzB+hB,CAGlBnK,cAhoBa,iBAAO,CAClBynC,SAAU,GACVhG,QAAS,CACL1mC,UAAW,EACXmiB,aAAc,MA4nBpBld,CAAmBoK,YAAWm8B,M,2GC9gB1BqB,G,oDACF,aAAe,IAAD,+BACV,gBAiCJvD,YAAc,SAACr3C,GACXA,EAAEwS,iBAE0B,KAAxB,EAAK1P,MAAM1B,UACV4Y,IAAWrc,YAAY,EAAKmF,MAAMtI,SAASyf,WAEvC,EAAKnX,MAAMuL,SACZ,EAAKvL,MAAM6a,kBAAkB,SAAS,IAzCpC,EAkDdk9B,UAAY,SAAC76C,GACOA,EAAE6B,OACNi5C,QAAQC,WAChB,EAAKj4C,MAAMya,kBAAkB,KAnDjC,EAAKsU,OAAS,CACVmpB,YAAa,MACbC,WAAW,GAAD,OAAK1yC,cAAU,UAAY,OAA3B,OAGd,EAAKypB,SAAW,CACZgpB,YAAa,WACL,EAAKl4C,MAAMtC,SAASgB,OAAS,IAAM,EAAKsB,MAAMwH,OAC9C,EAAKxH,MAAMid,oBAGnBk7B,WAAY,SAACj7C,GACTA,EAAEwS,iBAEE,EAAK1P,MAAMtC,SAASgB,QACpB,EAAKsB,MAAMhG,QAAQ0E,OAAS,EAAKsB,MAAM7F,SAASuE,OAEhD,EAAKsB,MAAMya,kBAAkB,IAE7B,EAAKza,MAAMya,kBAAX,uBACO,EAAKza,MAAMhG,SADlB,aAEO,EAAKgG,MAAM7F,cAM9B00B,qBAAU,CACNC,WAAY,CAAC,QAAS,SAAU,cA9B1B,E,uDA8Cd,WACIn4B,KAAKyhD,KAAO,I,oBAUhB,WAAU,IAAD,SACG73C,EAAY5J,KAAKqJ,MAAjBO,QACF5F,EAAauc,IAAWvc,WAAWhE,KAAKqJ,MAAMtI,SAASyf,UAEvDkhC,GACD1hD,KAAKqJ,MAAMuL,UACmB,IAA9B5U,KAAKqJ,MAAMhG,QAAQ0E,QACe,IAA/B/H,KAAKqJ,MAAM7F,SAASuE,QACtB45C,EACF,kBAACC,GAAA,EAAD,CAAOn4C,UAAWG,EAAQi4C,OACtB,kBAACC,GAAA,EAAD,KACI,kBAACrE,GAAA,EAAD,KACI,kBAACQ,GAAA,EAAD,KACI,kBAAC8D,GAAA,EAAD,CACIzL,OAC8B,YAA1Bt2C,KAAKqJ,MAAMlG,YACe,YAA1BnD,KAAKqJ,MAAMlG,WAEfmiC,UAC8B,YAA1BtlC,KAAKqJ,MAAMlG,WACL,MACA,MAEVoN,QAAS,WACL,EAAKlH,MAAM24C,WACmB,YAA1B,EAAK34C,MAAMlG,WACL,UACA,aAdlB,eAmB+B,YAA1BnD,KAAKqJ,MAAMlG,YACc,YAA1BnD,KAAKqJ,MAAMlG,WACP,0BAAMsG,UAAWG,EAAQq4C,gBACM,YAA1BjiD,KAAKqJ,MAAMlG,WACN,oBACA,oBAEV,OAGZ,kBAAC86C,GAAA,EAAD,CAAWx0C,UAAWG,EAAQy0C,UAC1B,kBAAC0D,GAAA,EAAD,CACIzL,OAC8B,YAA1Bt2C,KAAKqJ,MAAMlG,YACe,YAA1BnD,KAAKqJ,MAAMlG,WAEfmiC,UAC8B,YAA1BtlC,KAAKqJ,MAAMlG,WACL,MACA,MAEVoN,QAAS,WACL,EAAKlH,MAAM24C,WACmB,YAA1B,EAAK34C,MAAMlG,WACL,UACA,aAdlB,eAmB+B,YAA1BnD,KAAKqJ,MAAMlG,YACc,YAA1BnD,KAAKqJ,MAAMlG,WACP,0BAAMsG,UAAWG,EAAQq4C,gBACM,YAA1BjiD,KAAKqJ,MAAMlG,WACN,oBACA,oBAEV,OAGZ,kBAAC86C,GAAA,EAAD,CAAWx0C,UAAWG,EAAQy0C,UAC1B,kBAAC0D,GAAA,EAAD,CACIzL,OAC8B,YAA1Bt2C,KAAKqJ,MAAMlG,YACe,YAA1BnD,KAAKqJ,MAAMlG,WAEfmiC,UAC8B,YAA1BtlC,KAAKqJ,MAAMlG,WACL,MACA,MAEVoN,QAAS,WACL,EAAKlH,MAAM24C,WACmB,YAA1B,EAAK34C,MAAMlG,WACL,UACA,aAdlB,eAmB+B,YAA1BnD,KAAKqJ,MAAMlG,YACc,YAA1BnD,KAAKqJ,MAAMlG,WACP,0BAAMsG,UAAWG,EAAQq4C,gBACM,YAA1BjiD,KAAKqJ,MAAMlG,WACN,oBACA,oBAEV,SAKpB,kBAAC++C,GAAA,EAAD,KACK3hC,IAAWjc,YAAkC,MAApBtE,KAAKqJ,MAAMpF,MACjC,kBAAC06C,GAAD,CACIt3C,KAAM,CACF/F,KAAM,KACNa,KAAM,8BAIjBnC,KAAKqJ,MAAMhG,QAAQwK,KAAI,SAACpI,EAAO6B,GAAR,OACpB,kBAACq3C,GAAD,CAAYn5C,IAAKC,EAAMH,GAAI+B,KAAM5B,EAAO6B,MAAOA,OAElDtH,KAAKqJ,MAAM7F,SAASqK,KAAI,SAACpI,EAAO6B,GAAR,OACrB,kBAACq3C,GAAD,CAAYn5C,IAAKC,EAAMH,GAAI+B,KAAM5B,EAAO6B,MAAOA,SAMzD66C,EACF,yBAAK14C,UAAWG,EAAQw4C,SACW,IAA9BpiD,KAAKqJ,MAAMhG,QAAQ0E,QAChB,oCACI,kBAAC6V,EAAA,EAAD,CACIykC,iBAAgB,OAChB1sC,QAAQ,QACRlM,UAAWG,EAAQ04C,YAHvB,sBAOA,kBAACC,GAAA,EAAD,CACIF,iBAAgB,OAChBxtB,WAAS,EACTlhB,QAAS,EACTO,WAAW,cAEVlU,KAAKqJ,MAAMhG,QAAQwK,KAAI,SAACpI,EAAO6B,GAAR,OACpB,kBAACi7C,GAAA,EAAD,CACI/8C,IAAKC,EAAMH,GACX+gC,MAAI,EACJmc,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,GAEJ,kBAAChE,GAAD,CACIn5C,IAAKC,EAAMH,GACX+B,KAAM5B,EACN6B,MAAOA,UAOC,IAA/BtH,KAAKqJ,MAAM7F,SAASuE,QACjB,oCACI,kBAAC6V,EAAA,EAAD,CACIykC,iBAAgB,OAChB1sC,QAAQ,QACRlM,UAAWG,EAAQ04C,YAHvB,gBAOA,kBAACC,GAAA,EAAD,CACIF,iBAAgB,OAChBxtB,WAAS,EACTlhB,QAAS,EACTO,WAAW,cAEVlU,KAAKqJ,MAAM7F,SAASqK,KAAI,SAACpI,EAAO6B,GAAR,OACrB,kBAACi7C,GAAA,EAAD,CACI/8C,IAAKC,EAAMH,GACX+gC,MAAI,EACJmc,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,GAEJ,kBAAChE,GAAD,CACIn5C,IAAKC,EAAMH,GACXgC,MAAOA,EACPD,KAAM5B,WAShCm9C,EAAiC,SAA1B5iD,KAAKqJ,MAAM0H,WAAwB4wC,EAAWQ,EAC3D,OACI,yBACIxE,cAAe39C,KAAK49C,YACpBrtC,QAASvQ,KAAKohD,UACd33C,UAAW6G,MAAU,mBAEZ1G,EAAQ4P,KAAiC,SAA1BxZ,KAAKqJ,MAAM0H,YAFd,cAGZnH,EAAQi5C,UAAsC,SAA1B7iD,KAAKqJ,MAAM0H,YAHnB,cAIZnH,EAAQk5C,UAAY9iD,KAAKqJ,MAAMwH,OAJnB,GAMjBjH,EAAQsS,SAGZ,kBAAC,iBAAD,CAAeqc,SAAUv4B,KAAKu4B,SAAUH,OAAQp4B,KAAKo4B,SACrD,kBAAC,GAAD,CAAavnB,MAAO7Q,KAAKqJ,MAAMwH,QAC/B,kBAAC,WAAD,MACC7Q,KAAKqJ,MAAM05C,gBACR,kBAAChO,EAAA,EAAD,CAAOrrB,UAAW,EAAGjgB,UAAWG,EAAQo5C,UACpC,kBAACplC,EAAA,EAAD,CAAYjI,QAAQ,KAAKR,UAAU,MAAnC,iDAGA,kBAACyI,EAAA,EAAD,CACI9R,MAAO,gBACPrC,UAAWG,EAAQq5C,UAElBjjD,KAAKqJ,MAAM65C,kBAAkBrjD,UAKzCG,KAAKqJ,MAAMuL,UAAY5U,KAAKqJ,MAAM05C,gBAC/B,yBAAKt5C,UAAWG,EAAQgL,SACpB,kBAACiD,GAAA,EAAD,OAIiB,KAAxB7X,KAAKqJ,MAAM1B,UACR3D,GAC8B,IAA9BhE,KAAKqJ,MAAMhG,QAAQ0E,QACY,IAA/B/H,KAAKqJ,MAAM7F,SAASuE,SACnB/H,KAAKqJ,MAAMuL,UACX5U,KAAKqJ,MAAM05C,gBACR,yBAAKt5C,UAAWG,EAAQgjC,gBACpB,kBAAC,KAAD,CAAWnjC,UAAWG,EAAQu5C,YAC9B,yBAAK15C,UAAWG,EAAQijC,cAAxB,wCAGA,yBAAKpjC,UAAWG,EAAQw5C,gBAAxB,kHAKe,KAAxBpjD,KAAKqJ,MAAM1B,UACoB,IAA9B3H,KAAKqJ,MAAMhG,QAAQ0E,QACY,IAA/B/H,KAAKqJ,MAAM7F,SAASuE,SACnB/H,KAAKqJ,MAAMuL,UACX5U,KAAKqJ,MAAM05C,gBACmB,IAA9B/iD,KAAKqJ,MAAMhG,QAAQ0E,QACe,IAA/B/H,KAAKqJ,MAAM7F,SAASuE,SACnB/H,KAAKqJ,MAAMuL,UACX5U,KAAKqJ,MAAM05C,iBACX/+C,IACL,yBAAKyF,UAAWG,EAAQgjC,gBACpB,kBAAC,IAAD,CAASnjC,UAAWG,EAAQu5C,YAC5B,yBAAK15C,UAAWG,EAAQijC,cAAxB,+CAKP6U,GAAYkB,O,GAnUGp/B,aAmVjB6/B,GALE3/B,aAtXO,SAACzb,GACrB,MAAO,CACHhE,KAAMgE,EAAM5F,UAAU4B,KACtB40C,kBAAmB5wC,EAAM7E,WAAWzB,KACpCoP,WAAY9I,EAAM7E,WAAW4N,mBAC7B7N,WAAY8E,EAAM7E,WAAWD,WAC7BK,SAAUyE,EAAMrE,SAASJ,SACzBH,QAAS4E,EAAMrE,SAASP,QACxBuR,QAAS3M,EAAM7E,WAAWkiB,iBAC1By9B,eAAgB96C,EAAM7E,WAAW2/C,eACjCG,kBAAmBj7C,EAAM7E,WAAW8/C,kBACpCv7C,SAAUM,EAAMrE,SAAS+D,SACzBZ,SAAUkB,EAAMrE,SAASmD,aAIN,SAAC9D,GACxB,MAAO,CACHi1C,eAAgB,SAACj0C,GACbhB,EAASsiB,YAAWthB,KAGxBigB,kBAAmB,SAAC5iB,EAAMK,GACtBsB,EAASihB,YAAkB5iB,EAAMK,KAErC6jB,WAAY,WACRviB,EAASuiB,gBAEb1B,kBAAmB,SAACvb,GAChBtF,EAAS6gB,YAAkBvb,KAE/B+d,iBAAkB,WACdrjB,EAASqjB,gBAEb07B,WAAY,SAACvgD,GACTwB,EAASW,GAASuyC,QAAQxyC,iBAAiBlC,QAmVtCiiB,CAGfnK,cA7da,SAACzQ,GAAD,cAAY,CACvBgsB,MAAO,CACH7rB,QAASH,EAAM6K,QAAQ,GACvBkX,UAAW,SACX/e,MAAOhD,EAAMe,QAAQ2N,KAAK3D,UAC1BH,OAAQ,QAEZ8F,MAAI,GACA4c,SAAU,EACVntB,QAAS,OACTmuB,UAAW,OACXhkB,OAAQ,uBAJR,cAKCtK,EAAMI,YAAYqe,GAAG,MAAQ,CAC1B6P,UAAW,OACXhkB,OAAQ,wBAPZ,cASCtK,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiK,OAAQ,SAVZ,GAaJyvC,WAAS,GACL55C,QAAS,MACTK,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,MAAMyE,OAF3C,cAGJzwB,EAAMI,YAAYqe,GAAG,MAAQ,CAC1B6P,UAAW,OACXhkB,OAAQ,wBALP,cAOJtK,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiK,OAAQ,SARP,GAWTkvC,WAAY,CACR5uC,OAAQ,YACR5H,MAAO,UACPovC,WAAY,OAEhBtmC,QAAS,CACL6kB,eAAgB,SAChBrlB,QAAS,OACTE,UAAW,QAEf0uC,SAAU,CACN/5C,QAASH,EAAM6K,QAAQ,IAE3BsvC,SAAU,CACN3uC,UAAW,QAEfs4B,eAAgB,CACZp2B,OAAQ,IACRpD,OAAQ,QACRM,OAAQ,YACR1K,MAAO,QACP8C,MAAOhD,EAAMe,QAAQ2N,KAAKvB,SAC1B4U,UAAW,SACX6O,WAAY,QAEhBypB,UAAW,CACP9wC,SAAU,SAEdw6B,aAAc,CACVx6B,SAAU,OACVvG,MAAOhD,EAAMe,QAAQ2N,KAAKvB,UAE9BmtC,eAAgB,CACZt3C,MAAOhD,EAAMe,QAAQ2N,KAAK8rC,MAE9BjF,SAAS,eACJv1C,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAGjBguC,QAAS,CACL5uC,SAAU,GAEd+vC,SAAU,CACNlsC,WAAY,OACZ/C,UAAW,OACXmiB,aAAc,QAElB+sB,UAAW,CACPpwC,OAAQ,OACRpK,MAAO,QAEX85C,UAAW,CACP1vC,OAAQ,OACRikB,UAAW,KAEf4qB,eAAgB,CACZxoC,OAAQ,EACRgqC,KAAM,gBACNrwC,OAAQ,EACRM,QAAS,EACTmnB,SAAU,SACV5xB,QAAS,EACTyG,SAAU,WACVqE,IAAK,GACL/K,MAAO,MA6XbuQ,CAAmBoK,YAAWw9B,M,qEC5f1Bv4C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCC,OAAQ,CACJC,MAAO,YASTI,GAAW,SAACC,GAAD,OACb,kBAAC,IAAD,CACIC,gBAAiBD,EAAME,KAAO,OAAS,UACvCC,gBAAiBH,EAAME,KAAO,UAAY,OAC1CE,UAAWJ,EAAMI,aAkBVi6C,OAdf,WACI,IAAM56C,EAAQa,cACRC,EAAUhB,KAEhB,OACI,6BACI,kBAAC,GAAD,CACIW,KAA6B,SAAvBT,EAAMe,QAAQvI,KACpBmI,UAAWG,EAAQb,W,0CCJ7BH,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCwqB,OAAQ,CACJtqB,MAJY,IAKZ0sB,WAAY,GAEhBX,YAAa,CACT/rB,MARY,IASZ0Q,UACI,6GAERiqC,gBAAiB,CACb9oB,SAAU,QAEd/J,OAAQ,CACJ1c,QAAS,OACTnL,QAASH,EAAM6K,QAAQ,GACvBiwC,aAAc,iBAElBC,SAAU,CAAE76C,MAAO,GAAIoK,OAAQ,IAC/B0wC,YAAa,CAAEzxC,SAAU,IACzB0xC,WAAY,CACRj4C,MAAOhD,EAAMe,QAAQ2N,KAAK3D,UAC1B7K,MAAO,GACPoK,OAAQ,IAEZoL,SAAU,CACNnH,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,GAC3BszB,UAAW,YACX7Q,SAAU,GAEd4tB,UAAW,CACPC,UAAW,aACX3vC,UAAW,GAEf4vC,eAAgB,CACZj7C,QAASH,EAAM6K,QAAQ,IAE3BwwC,WAAY,CACRr4C,MAAOhD,EAAMe,QAAQ2N,KAAK3D,UAC1B5K,QAASH,EAAM6K,QAAQ,IAE3BywC,UAAW,CACPt4C,MAAOhD,EAAMe,QAAQ2N,KAAKvB,SAC1BhN,QAASH,EAAM6K,QAAQ,IAE3B0wC,WAAY,CACRp7C,QAASH,EAAM6K,QAAQ,GACvBszB,UAAW,aAEfhT,OAAQ,CACJvkB,SAAU,YAEdU,MAAO,CACHiH,WAAYvO,EAAM6K,QAAQ,GAC1BuyB,KAAM,OAIRH,GAAarrB,IAAM8wB,YAAW,SAAoBniC,EAAOsgB,GAC3D,OAAO,kBAAC0b,GAAA,EAAD,eAAOC,UAAU,KAAK3b,IAAKA,GAAStgB,OAGhC,SAASi7C,KACpB,IAAMrhD,EAAW6M,cACXjI,EAAc+H,aAAY,SAAC3H,GAAD,OAAWA,EAAMrE,SAASiE,eACpDd,EAAW6I,aAAY,SAAC3H,GAAD,OAAWA,EAAMrE,SAASmD,YACjDw9C,EAAav0C,uBAAY,SAACrO,GAAD,OAAUsB,EAASvB,sBAAWC,MAAQ,CACjEsB,IAEE6R,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAECy6B,EAAa1tB,uBAAY,SAACuF,GAAD,OAAOtS,EAASsiB,YAAWhQ,MAAK,CAACtS,IAC1D0E,EAAWiI,aAAY,SAAC3H,GAAD,OAAWA,EAAMrE,SAAS+D,YAbtB,EAcL5B,mBAAS,MAdJ,mBAc1BqC,EAd0B,KAclBo8C,EAdkB,OAeHz+C,mBAAS,MAfN,mBAe1B0+C,EAf0B,KAejBC,EAfiB,KAiCjCr+C,qBAAU,WAjBQ,IAACg2C,EAkBfqI,EAAW,MACP78C,IACwB,IAApBd,EAASgB,OACTw8C,GAAW,IAEXC,EAAUz9C,EAAS,IAvBZs1C,EAwBGt1C,EAAS,GAvB3B8O,IAAImJ,IACA,oBACIq9B,EAAO/2C,GACP,gBACc,KAAbqC,EAAkB,OAAS,SAC5B,eACiB,QAAhB00C,EAAO/6C,MAAgBiM,YAE3BwI,MAAK,SAACxV,GACHmkD,EAAWnkD,EAASG,SAEvBsV,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,gBAcvD,CAACkH,EAAUc,IAEd,IAAM+B,EAAUhB,KACV+7C,EAAY,CACd,CACIlvC,MAAO,eACPhQ,MAAO,SAACm/C,EAAGC,GAAJ,OACH/6C,YAAa86C,EAAE5iD,MACf,MACA4iD,EAAE5iD,KAAK8iD,iBACP,kBACJhX,KAAM,SAAC8W,GAAD,OAAO,IAEjB,CACInvC,MAAO,2BACPhQ,MAAO,SAACm/C,EAAGC,GAAJ,OAAUD,EAAEnb,QACnBqE,KAAM,SAAC8W,GAAD,MAAkB,SAAXA,EAAEtjD,OAEnB,CACImU,MAAO,2BACPhQ,MAAO,SAACm/C,EAAGC,GAAJ,OAAUD,EAAEG,iBAAiBD,iBAAnBF,WACjB9W,KAAM,SAAC8W,GAAD,MAAkB,QAAXA,EAAEtjD,OAEnB,CACImU,MAAO,2BACPhQ,MAAO,SAACm/C,EAAGC,GAAJ,OAAUD,EAAEI,eAAeF,iBAAjBF,WACjB9W,KAAM,SAAC8W,GAAD,MAAkB,QAAXA,EAAEtjD,OAEnB,CACImU,MAAO,2BAEPhQ,MAAO,SAACm/C,EAAGC,GACP,IAAM5gD,EAAkB,KAAX2gD,EAAE3gD,KAAc4gD,EAAE5gD,KAAO2gD,EAAE3gD,KAClC9B,EAAOgM,YAASlK,GACtB,OACI,kBAAC8Y,GAAA,EAAD,CAAS3M,MAAOnM,GACZ,kBAACgqC,EAAA,EAAD,CACIjtC,KAAM,kBACNuP,QAAS,kBAAMmtB,EAAWz5B,KAEhB,KAAT9B,EAAc,qBAAQA,KAKvC2rC,KAAM,SAAC8W,GAAD,OAAO,IAEjB,CACInvC,MAAO,qBACPhQ,MAAO,SAACm/C,EAAGC,GAAJ,OACHhtB,aAAgB+sB,EAAEK,WAAY,wBAClCnX,KAAM,SAAC8W,GAAD,OAAO,IAEjB,CACInvC,MAAO,qBACPhQ,MAAO,SAACm/C,GAAD,OAAO/sB,aAAgB+sB,EAAEM,WAAY,wBAC5CpX,KAAM,SAAC8W,GAAD,OAAO,KAGf7qC,EACF,kBAACwoC,GAAA,EAAD,CAAM1tB,WAAS,EAACprB,UAAWG,EAAQs6C,iBAC7BO,GAAW,kBAAC,GAAD,MACZA,GACG,oCACKE,EAAU92C,KAAI,SAACw4B,GACZ,GAAIA,EAAKyH,KAAK1lC,GACV,OACI,oCACI,kBAACm6C,GAAA,EAAD,CACIlc,MAAI,EACJmc,GAAI,EACJ/4C,UAAWG,EAAQu6C,YAElB9d,EAAK5wB,OAEV,kBAAC8sC,GAAA,EAAD,CACIlc,MAAI,EACJmc,GAAI,EACJ/4C,UAAWG,EAAQy6C,YAElBhe,EAAK5gC,MAAMg/C,EAASr8C,QAMxB,QAAhBA,EAAO9G,MACJ,kBAACihD,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,GAAI/4C,UAAWG,EAAQw6C,WAAtC,qBACQ,IACJ,kBAAC,KAAD,CACIe,SAAUV,EAAQW,WAClBC,OAAO,aAQnC,OACI,oCACI,kBAACC,GAAA,EAAD,CAAQ3wB,MAAI,GACR,kBAACjd,GAAA,EAAD,CACIkuB,YAAU,EACVjkC,KAAMkG,EACNi+B,oBAAqBC,IAEpB39B,GACG,oCACI,kBAAC49B,GAAA,EAAD,CAAQv8B,UAAWG,EAAQqqB,QACvB,kBAACgS,GAAA,EAAD,KACI,kBAACjpB,GAAA,EAAD,CACIC,KAAK,QACLnR,MAAM,UACNyE,QAAS,kBAAMg0C,GAAW,IAC1BnvC,aAAW,SAEX,kBAACmwC,GAAA,EAAD,OAEJ,kBAAC3nC,EAAA,EAAD,CACIjI,QAAQ,KACRlM,UAAWG,EAAQwG,OAElBhI,EAAOjG,QAInB4X,KAKjB,kBAACurC,GAAA,EAAD,CAAQlwB,QAAM,GACV,kBAACowB,GAAA,EAAD,CACI/7C,UAAWG,EAAQ0pB,OACnB3d,QAAQ,aACR/L,QAAS,CACLkrB,MAAOlrB,EAAQmrB,aAEnBpzB,KAAMkG,EACNse,OAAO,SAEP,kBAAC8f,GAAA,EAAD,MACA,yBAAKx8B,UAAWG,EAAQ+5C,iBACnBv7C,GACG,oCACI,yBAAKqB,UAAWG,EAAQknB,QACH,QAAhB1oB,EAAO9G,MACJ,kBAAC,KAAD,CACImI,UAAWG,EAAQm6C,aAGV,QAAhB37C,EAAO9G,MACJ,kBAACk+B,GAAA,EAAD,CACIM,UAAQ,EACRr2B,UAAWG,EAAQi6C,SACnB9jB,cAAen2B,EAAQk6C,YACvBtlC,SAAUpW,EAAOjG,OAGzB,yBAAKsH,UAAWG,EAAQ4U,UACpB,kBAACZ,EAAA,EAAD,CAAYjI,QAAQ,KAAK8vC,cAAY,GAChCr9C,EAAOjG,OAGhB,kBAAC6a,GAAA,EAAD,CACIzM,QAAS,kBAAMg0C,GAAW,IAC1B96C,UAAWG,EAAQo6C,UACnB5uC,aAAW,QACXpT,KAAM,SAEN,kBAACujD,GAAA,EAAD,SAKhB,kBAACzpC,EAAA,EAAD,MACC/B,M,cCxQnB2rC,G,oDACF,WAAYr8C,GAAQ,wCACVA,G,yDAGV,WACIrJ,KAAKqJ,MAAMya,kBAAkB,IAC7B9jB,KAAKqJ,MAAMuY,iBACX5hB,KAAKqJ,MAAMkc,WAAW,O,+BAG1B,WACQhF,IAAWvc,WAAWhE,KAAKqJ,MAAMtI,SAASyf,WAC1CxgB,KAAKqJ,MAAMmf,eAAe,Q,oBAIlC,WACI,OACI,6BACI,kBAACm9B,GAAA,EAAD,CAAaC,QAASC,MAClB,kBAACpiC,GAAA,QAAD,CAAQ5S,MAAO7Q,KAAKqJ,MAAMwH,QAC1B,kBAAC,GAAD,CACIoT,QAASjkB,KAAKqJ,MAAM4a,QACpBpT,MAAO7Q,KAAKqJ,MAAMwH,QAEtB,kBAAC,GAAD,CAAUA,MAAO7Q,KAAKqJ,MAAMwH,QAC5B,kBAACi1C,GAAD,MACA,kBAAC,KAAD,OAEJ,kBAACxB,GAAD,W,GA9BU9gC,aAsCXE,gBA5DS,iBAAO,MAEJ,SAACzgB,GACxB,MAAO,CACHulB,eAAgB,SAAChR,GACbvU,EAASulB,aAAehR,KAE5BsM,kBAAmB,SAACvb,GAChBtF,EAAS6gB,YAAkBvb,KAE/B4J,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,KAEvD8V,eAAgB,WACZ3e,EAAS2e,gBAEb2D,WAAY,SAACthB,GACThB,EAASsiB,YAAWthB,QA2CjByf,CAGbnK,cAjEa,iBAAO,KAiEpBA,CAAmBoK,YAAW+hC,M,+BC5E1B98C,GAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,IAVZ,GAYN+W,OAAQ,CACJC,aAAc,MACdslB,UAAW,KAEfD,IAAI,CACA9jC,MAAO,OACPoK,OAAQ,GACR25B,UAAW,GACXliB,UAAW,SACXvW,UAAW,cAQJ,SAASyxC,KACpB,IAAMj+B,EAAOC,cACPhnB,EAAWmnB,cACXC,EANC,IAAIC,gBAAgBF,cAAcG,QAOjC/iB,EAAOgjB,cAAPhjB,GACFrC,EAAW6M,cACXyY,EAAcvY,uBAChB,SAACI,GAAD,OAAWnN,EAASulB,aAAepY,MACnC,CAACnN,IAELoD,qBAAU,WACN,GAAKka,IAAWrc,YAAYnD,EAASyf,UAIjC+H,EAAYJ,EAAMnJ,IAAI,aAJsB,CAC5C,IAAM/a,EAAOkkB,EAAMnJ,IAAI,KAAKhS,MAAM,KAClCub,EAAYtkB,EAAKA,EAAK8D,OAAS,OAKpC,CAAC+f,EAAKW,OAAO,GAAI1nB,IAEpB,IAAM6I,EAAUhB,KAChB,OACI,yBAAKa,UAAWG,EAAQ0d,QACpB,kBAACytB,EAAA,EAAD,CAAOtrC,UAAWG,EAAQ4P,KAAMkQ,UAAW,GACvC,kBAAC,KAAD,CACIjgB,UAAWG,EAAQ4d,OACnBvI,QAAS,CACLoO,MAAO,CACHtiB,IACIzL,eACCihB,IAAWrc,YAAYnD,EAASyf,UAC3B,kBACAlb,GAC6B,KAA5B6iB,EAAMnJ,IAAI,cACL,SACAiC,mBACIkH,EAAMnJ,IAAI,eAEd,IACN,iBAAmBmJ,EAAMnJ,IAAI,YAKvD,yBAAKvV,UAAWG,EAAQkjC,KACpB,kBAAC,KAAQkZ,OAAT,CACI32C,MAAO,CAAE+E,QAAQ,eAAeZ,SAAS,IAAIyB,SAAS,IAAIjM,MAAM,OAAOoK,OAAO,IAC9E6yC,OAAO,0BACPC,KAAK,aACLnuB,OAAO,O,+CChErBnvB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCq9C,cAAe,CACXl9C,QAASH,EAAM6K,QAAQ,IAE3B4oC,KAAM,CACFtnC,SAAU,IACVvB,OAAQ,UAEZyiC,QAAS,CACL/hC,QAAS,QAEbkT,OAAO,aACHte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAC1B7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SAGrB21C,WAAY,CACRnxC,SAAU,SAEdoxC,WAAY,CACR/8C,gBAAiBR,EAAMe,QAAQwS,QAAQvI,OAE3CwyC,aAAc,CACVh9C,gBAAiBR,EAAMe,QAAQgK,UAAUC,OAE7CyyC,KAAM,CACFjyC,UAAW,QAEfkyC,SAAU,CACN37B,UAAW,QACXvW,UAAW,OACXmiB,aAAc,QAElB/f,MAAO,CACHW,WAAYvO,EAAM6K,QAAQ,GAC1BP,OAAQ,IAEZqzC,YAAa,CACT57B,UAAW,QACXvW,UAAW,OAQJ,SAASoyC,KACpB,IAAM98C,EAAUhB,KACV3F,EAAW6M,cAEXqY,EAPC,IAAIC,gBAAgBF,cAAcG,QAQnCtnB,EAAWmnB,cACX9c,EAAU4xB,cANmB,EAQXj3B,mBAAS,GARE,mBAQ5B4gD,EAR4B,KAQtBC,EARsB,OAST7gD,mBAAS,GATA,mBAS5Bi0B,EAT4B,KASrB6sB,EATqB,OAUD9gD,mBAAS,IAVR,mBAU5B+gD,EAV4B,KAUjBC,EAViB,OAWLhhD,mBAAS,mBAXJ,mBAW5BihD,EAX4B,KAWnBC,EAXmB,KAa7BnyC,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGColB,EAAS,SAAC1gB,EAAUg/C,EAAMK,GAC5B,IAAME,EAAQF,EAAQh6C,MAAM,KAC5B6I,IAAImJ,IACA,sBACI2nC,EACA,aACAO,EAAM,GACN,UACAA,EAAM,GACN,aACAjmC,mBAAmBtZ,IAEtBoO,MAAK,SAACxV,GACgC,IAA/BA,EAASG,KAAKuY,MAAMlR,QACpB+M,EACI,MACA,QACA,+DACA,QAGR+xC,EAAStmD,EAASG,KAAKs5B,OACvB+sB,EAAaxmD,EAASG,KAAKuY,UAE9BjD,OAAM,WACHlB,EAAe,MAAO,QAAS,2BAAQ,aAInDzO,qBAAU,WACN,IAAMsB,EAAWwgB,EAAMnJ,IAAI,YACvBrX,EACA0gB,EAAO1gB,EAAUg/C,EAAMK,GAEvBlyC,EAAe,MAAO,QAAS,mDAAY,aAEhD,CAAC/T,IAcJ,OACI,yBAAK0I,UAAWG,EAAQ0d,QACpB,kBAACi7B,GAAA,EAAD,CAAM1tB,WAAS,GACX,kBAAC0tB,GAAA,EAAD,CAAMG,GAAI,EAAGF,GAAI,GACb,kBAAC5kC,EAAA,EAAD,CAAY9R,MAAM,gBAAgB6J,QAAQ,MAA1C,6BAIJ,kBAAC4sC,GAAA,EAAD,CAAMG,GAAI,EAAGF,GAAI,EAAG/4C,UAAWG,EAAQ68C,aACnC,kBAAChqC,EAAA,EAAD,KACI,kBAACgB,GAAA,EAAD,CACI3R,MAAO,YACPuJ,SAlBE,SAAC3C,GACvBu0C,EAAWv0C,EAAMtK,OAAO3C,OACxB,IAAMkC,EAAWwgB,EAAMnJ,IAAI,YAC3BqJ,EAAO1gB,EAAUg/C,EAAMj0C,EAAMtK,OAAO3C,QAgBhBA,MAAOuhD,GAEP,kBAACrpC,GAAA,EAAD,CAAUlY,MAAO,mBAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,kBAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,kBAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,iBAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,cAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,aAAjB,wDAOhB,kBAAC88C,GAAA,EAAD,CAAM1tB,WAAS,EAAClhB,QAAS,GAAIlK,UAAWG,EAAQ28C,MAC3CO,EAAUj5C,KAAI,SAACpI,GAAD,OACX,kBAAC88C,GAAA,EAAD,CACIlc,MAAI,EACJmc,GAAI,GACJE,GAAI,EACJl9C,IAAKC,EAAMH,GACXmE,UAAWG,EAAQu8C,eAEnB,kBAACgB,GAAA,EAAD,CAAM19C,UAAWG,EAAQ2yC,MACrB,kBAAC6K,GAAA,EAAD,CACIlwC,OACI,8BACMzR,EAAM4Y,QACJ,kBAACmhB,GAAA,EAAD,CACIhhB,SACI/Y,EAAM4C,OACA5C,EAAM4C,OAAOlG,KACb,GAEV29B,UAAQ,IAEb,IACFr6B,EAAM4Y,QACH,kBAAC2S,EAAA,EAAD,CACIvnB,UAAWG,EAAQ08C,cAEnB,kBAAC,KAAD,QAKhBp+C,OACI,kBAAC6U,GAAA,EAAD,CAAS1M,UAAU,MAAMD,MAAM,gBAC3B,kBAAC4M,GAAA,EAAD,CACIzM,QAAS,kBACLnF,EAAQ8N,KAAK,MAAQzT,EAAMD,OAG/B,kBAAC,KAAD,QAIZ4K,MACI,kBAAC2M,GAAA,EAAD,CACI1M,UAAU,MACVD,MACI3K,EAAM4C,OACA5C,EAAM4C,OAAOlG,KACb,gDAGV,kBAACyb,EAAA,EAAD,CACIsT,QAAM,EACNznB,UAAWG,EAAQw8C,YAElB3gD,EAAM4C,OACD5C,EAAM4C,OAAOlG,KACb,+CAAa,MAI/BklD,UACI,mDACQ,IACJ,kBAAC,KAAD,CACIlC,SAAU1/C,EAAM6hD,YAChBjC,OAAO,mBASvC,yBAAK57C,UAAWG,EAAQ48C,UACpB,kBAACe,GAAA,EAAD,CACIC,MAAOv9C,KAAK8T,KAAKic,EAAQ,IACzB3kB,SAhIS,SAAC3C,EAAOjN,GAC7BmhD,EAAQnhD,GACR,IAAMkC,EAAWwgB,EAAMnJ,IAAI,YAC3BqJ,EAAO1gB,EAAUlC,EAAOuhD,IA8HZl7C,MAAM,eAEP,K,kKCvKb27C,G,+MACFx/C,MAAQ,CACJ0+C,KAAM,EACN3sB,MAAO,EACP8sB,UAAW,GACXY,QAAS,KACTV,QAAS,mB,EAGbx0B,kBAAoB,WAChB,EAAKm1B,SAAS,EAAG,EAAK1/C,MAAM++C,U,EAGhCU,QAAU,SAAChU,GACP,EAAK5zB,SAAS,CAAE4nC,QAAShU,K,EAG7BvjB,YAAc,WACV,EAAKrQ,SAAS,CAAE4nC,QAAS,Q,EAG7BE,YAAc,SAACtiD,GACXuQ,IAAIyL,OAAO,UAAYhc,GAClByQ,MAAK,WACF,IAAI8xC,EAAU,EAAK5/C,MAAM6+C,UACzBe,EAAUA,EAAQvkD,QAAO,SAACmC,GACtB,OAAOA,EAAMD,MAAQF,KAEzB,EAAKwa,SAAS,CACVgnC,UAAWe,EACX7tB,MAAO,EAAK/xB,MAAM+xB,MAAQ,IAE9B,EAAK3wB,MAAM8I,eACP,MACA,QACA,iCACA,WAEmB,IAAnB01C,EAAQ9/C,QACR,EAAK4/C,SAAS,EAAG,EAAK1/C,MAAM++C,YAGnChxC,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,a,EAKhBioD,iBAAmB,SAACxiD,GAChB,IAAMyiD,EAAS99C,KAAKwE,SAASlB,SAAS,IAAIR,OAAO,GAAGE,MAAM,EAAG,GACvD46C,EAAU,EAAK5/C,MAAM6+C,UACrBkB,EAAaH,EAAQ7lC,WAAU,SAACvc,GAClC,OAAOA,EAAMD,MAAQF,KAEzBuQ,IAAI6L,MAAM,UAAYpc,EAAI,CACtBmW,KAAM,WACNhW,MAAwC,KAAjCoiD,EAAQG,GAAYltC,SAAkBitC,EAAS,KAErDhyC,MAAK,SAACxV,GACHsnD,EAAQG,GAAYltC,SAAWva,EAASG,KACxC,EAAKof,SAAS,CACVgnC,UAAWe,OAGlB7xC,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,a,EAKhBooD,oBAAsB,SAAC3iD,GACnB,IAAMuiD,EAAU,EAAK5/C,MAAM6+C,UACrBkB,EAAaH,EAAQ7lC,WAAU,SAACvc,GAClC,OAAOA,EAAMD,MAAQF,KAEzBuQ,IAAI6L,MAAM,UAAYpc,EAAI,CACtBmW,KAAM,kBACNhW,MAAOoiD,EAAQG,GAAY3sC,QAAU,QAAU,SAE9CtF,MAAK,SAACxV,GACHsnD,EAAQG,GAAY3sC,QAAU9a,EAASG,KACvC,EAAKof,SAAS,CACVgnC,UAAWe,OAGlB7xC,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,a,EAKhB8nD,SAAW,SAAChB,EAAMK,GACd,IAAME,EAAQF,EAAQh6C,MAAM,KAC5B6I,IAAImJ,IACA,eACI2nC,EACA,aACAO,EAAM,GACN,UACAA,EAAM,IAETnxC,MAAK,SAACxV,GACgC,IAA/BA,EAASG,KAAKuY,MAAMlR,QACpB,EAAKsB,MAAM8I,eACP,MACA,QACA,iCACA,QAGR,EAAK2N,SAAS,CACVka,MAAOz5B,EAASG,KAAKs5B,MACrB8sB,UAAWvmD,EAASG,KAAKuY,WAGhCjD,OAAM,WACH,EAAK3M,MAAM8I,eAAe,MAAO,QAAS,2BAAQ,a,EAI9D+1C,iBAAmB,SAACx1C,EAAOjN,GACvB,EAAKqa,SAAS,CACV6mC,KAAMlhD,IAEV,EAAKkiD,SAASliD,EAAO,EAAKwC,MAAM++C,U,EAGpCmB,kBAAoB,SAACz1C,GACjB,EAAKoN,SAAS,CACVknC,QAASt0C,EAAMtK,OAAO3C,QAE1B,EAAKkiD,SAAS,EAAK1/C,MAAM0+C,KAAMj0C,EAAMtK,OAAO3C,Q,EAGhD2iD,UAAY,SAACv3C,GACT,OAAOA,EAAMuK,QAAU,GAAgC,IAA3BvK,EAAMw3C,kB,6CAGtC,WAAU,IAAD,OACGz+C,EAAY5J,KAAKqJ,MAAjBO,QAER,OACI,yBAAKH,UAAWG,EAAQ0d,QACpB,kBAACi7B,GAAA,EAAD,CAAM1tB,WAAS,GACX,kBAAC0tB,GAAA,EAAD,CAAMG,GAAI,EAAGF,GAAI,GACb,kBAAC5kC,EAAA,EAAD,CAAY9R,MAAM,gBAAgB6J,QAAQ,MAA1C,6BAIJ,kBAAC4sC,GAAA,EAAD,CAAMG,GAAI,EAAGF,GAAI,EAAG/4C,UAAWG,EAAQ68C,aACnC,kBAAChqC,EAAA,EAAD,KACI,kBAACgB,GAAA,EAAD,CACI3R,MAAO,YACPuJ,SAAUrV,KAAKmoD,kBACf1iD,MAAOzF,KAAKiI,MAAM++C,SAElB,kBAACrpC,GAAA,EAAD,CAAUlY,MAAO,mBAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,kBAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,kBAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,iBAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,cAAjB,oDAGA,kBAACkY,GAAA,EAAD,CAAUlY,MAAO,aAAjB,wDAOhB,kBAAC88C,GAAA,EAAD,CAAM1tB,WAAS,EAAClhB,QAAS,GAAIlK,UAAWG,EAAQ28C,MAC3CvmD,KAAKiI,MAAM6+C,UAAUj5C,KAAI,SAACpI,GAAD,OACtB,kBAAC88C,GAAA,EAAD,CACIlc,MAAI,EACJmc,GAAI,GACJE,GAAI,EACJl9C,IAAKC,EAAMH,GACXmE,UAAWG,EAAQu8C,eAEnB,kBAACgB,GAAA,EAAD,CAAM19C,UAAWG,EAAQ2yC,MACrB,kBAAC6K,GAAA,EAAD,CACIlwC,OACI,8BACMzR,EAAM4Y,QACJ,kBAACmhB,GAAA,EAAD,CACIhhB,SACI/Y,EAAM4C,OACA5C,EAAM4C,OAAOlG,KACb,GAEV29B,UAAQ,IAEb,IACFr6B,EAAM4Y,QACH,kBAAC2S,EAAA,EAAD,CACIvnB,UACIG,EAAQ08C,cAGZ,kBAAC,KAAD,QAKhBl2C,MACI,kBAAC2M,GAAA,EAAD,CACI1M,UAAU,MACVD,MACI3K,EAAM4C,OACA5C,EAAM4C,OAAOlG,KACb,gDAGV,kBAACyb,EAAA,EAAD,CACIsT,QAAM,EACNznB,UAAWG,EAAQw8C,YAElB3gD,EAAM4C,OACD5C,EAAM4C,OAAOlG,KACb,+CAAa,MAI/BklD,UACI,8BACKxvB,aACGpyB,EAAM6hD,YACN,sBAEH,EAAKc,UAAU3iD,IACZ,kBAAC4rB,GAAA,EAAD,CACIrvB,KAAK,QACLyH,UAAWG,EAAQ8M,MACnBjB,MAAM,0BAM1B,kBAACqG,EAAA,EAAD,MACA,kBAACwsC,GAAA,EAAD,CACIC,sBAAoB,EACpBl5C,MAAO,CACH+E,QAAS,QACTyW,UAAW,UAGf,kBAAC9N,GAAA,EAAD,CAAS1M,UAAU,MAAMD,MAAM,gBAC3B,kBAAC4M,GAAA,EAAD,CACIzM,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KACf,MACIzT,EAAMD,KACc,KAAnBC,EAAMqV,SACD,GACA,aACArV,EAAMqV,aAIxB,kBAAC,KAAD,CAAUzI,SAAU,YAEjB,IACS,KAAnB5M,EAAMqV,UACH,oCACI,kBAACiC,GAAA,EAAD,CACI1M,UAAU,MACVD,MAAM,6CACNG,QAAS,kBACL,EAAKu3C,iBACDriD,EAAMD,OAId,kBAACwX,GAAA,EAAD,KACI,kBAAC,KAAD,CACI3K,SAAU,YAItB,kBAAC0K,GAAA,EAAD,CACI1M,UAAU,MACVD,MAAM,2BACNG,QAAS,kBACL,EAAKm3C,QAAQjiD,EAAMqV,YAGvB,kBAACkC,GAAA,EAAD,KACI,kBAACk5B,GAAA,EAAD,CACI7jC,SAAU,aAMV,KAAnB5M,EAAMqV,UACH,kBAACiC,GAAA,EAAD,CACI1M,UAAU,MACVD,MAAM,6CACNG,QAAS,kBACL,EAAKu3C,iBAAiBriD,EAAMD,OAGhC,kBAACwX,GAAA,EAAD,KACI,kBAAC,KAAD,CACI3K,SAAU,YAK1B,kBAAC0K,GAAA,EAAD,CACI1M,UAAU,MACVD,MACI3K,EAAM4V,QACA,2BACA,2BAEV9K,QAAS,kBACL,EAAK03C,oBAAoBxiD,EAAMD,OAGnC,kBAACwX,GAAA,EAAD,KACI,kBAAC,KAAD,CACIG,GAAI1X,EAAM4V,QACV+B,OACI,kBAAC,KAAD,CACI/K,SAAU,UAGlBiL,QACI,kBAACC,GAAA,EAAD,CACIlL,SAAU,cAM9B,kBAAC0K,GAAA,EAAD,CACI1M,UAAU,MACVD,MAAM,2BACNG,QAAS,kBACL,EAAKq3C,YAAYniD,EAAMD,OAG3B,kBAACwX,GAAA,EAAD,KACI,kBAAC,KAAD,CAAY3K,SAAU,mBAQlD,yBAAK5I,UAAWG,EAAQ48C,UACpB,kBAACe,GAAA,EAAD,CACIC,MAAOv9C,KAAK8T,KAAK/d,KAAKiI,MAAM+xB,MAAQ,IACpC3kB,SAAUrV,KAAKkoD,iBACfp8C,MAAM,eAEP,IACP,kBAAC4L,GAAA,EAAD,CACI/V,KAA6B,OAAvB3B,KAAKiI,MAAMy/C,QACjBl1C,QAASxS,KAAKmwB,aAEd,kBAAC3X,GAAA,EAAD,mCAAkC,IAClC,kBAACb,GAAA,EAAD,KACI,kBAACqG,GAAA,EAAD,CACI1Y,GAAG,gBACHG,MAAOzF,KAAKiI,MAAMy/C,QAClBh0C,OAAO,SACP2C,WAAS,KAEA,IACjB,kBAACwC,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,eACO,KACG,KACG,KACX,S,GA9YK0X,aAyZhBglC,GALC9kC,aAhaQ,WACpB,MAAO,MAGgB,SAACzgB,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,QAyZ/C4X,CAGdnK,cAnda,SAACzQ,GAAD,MAAY,CACvBq9C,cAAe,CACXl9C,QAASH,EAAM6K,QAAQ,IAE3B4oC,KAAM,CACFtnC,SAAU,IACVvB,OAAQ,UAEZyiC,QAAS,CACL/hC,QAAS,QAEbkT,OAAO,aACHte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAC1B7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SAGrB21C,WAAY,CACRnxC,SAAU,SAEdoxC,WAAY,CACR/8C,gBAAiBR,EAAMe,QAAQwS,QAAQvI,OAE3CwyC,aAAc,CACVh9C,gBAAiBR,EAAMe,QAAQgK,UAAUC,OAE7CyyC,KAAM,CACFjyC,UAAW,QAEfkyC,SAAU,CACN37B,UAAW,QACXvW,UAAW,OACXmiB,aAAc,QAElB/f,MAAO,CACHW,WAAYvO,EAAM6K,QAAQ,GAC1BP,OAAQ,IAEZqzC,YAAa,CACT57B,UAAW,QACXvW,UAAW,MAsajBiF,CAAmBoK,YAAW8jC,M,kKC5e1B7+C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCgP,WAAY,CACR7O,QAAS,sBAEbwK,QAAS,CACLC,OAAQ5K,EAAM6K,QAAQ,GACtBjE,SAAU,YAEdkE,eAAgB,CACZ9H,MAAOhD,EAAMe,QAAQgK,UAAUC,MAC/BpE,SAAU,WACVqE,IAAK,MACLC,KAAM,MACNM,WAAY,GACZ+C,YAAa,IAEjB0C,QAAS,CACL9Q,QAAS,OAIF,SAASw/C,GAAiBp/C,GAAQ,IAAD,EAClBtD,mBAASsD,EAAMg7B,OADG,mBACrCA,EADqC,KAC9BqkB,EAD8B,KAG5CriD,qBAAU,WACNqiD,EAASr/C,EAAMg7B,SAChB,CAACh7B,EAAMg7B,QAEV,IAyBMz6B,EAAUhB,KAEhB,OACI,kBAAC8O,GAAA,EAAD,CACI/V,KAAM0H,EAAM1H,KACZ6Q,QAASnJ,EAAMmJ,QACfwC,kBAAgB,qBAEhB,kBAACwD,GAAA,EAAD,CAAalT,GAAG,qBAAhB,oDACA,kBAACqS,GAAA,EAAD,CAAegxC,SAAU,QAASl/C,UAAWG,EAAQmQ,SAChDsqB,EAAMx2B,KAAI,SAACgB,EAAG0G,GACX,OACI,kBAACoI,GAAA,EAAD,CAAUnY,IAAK+P,GACX,kBAACqzC,GAAA,EAAD,CAAWC,KAAG,GACV,kBAACC,GAAA,EAAD,CACItzC,QACI,kBAAC+G,GAAA,EAAD,CACIlH,UA1ClB/N,EA0CyCuH,EAAEvH,MA1CjC,SAACoL,GAC7B,IAAMq2C,EAAS,aAAO1kB,GAEtB0kB,EAAUl7C,KAAI,SAACgB,EAAG0G,GACV1G,EAAEvH,QAAUA,IACZyhD,EAAUxzC,GAAV,2BACOwzC,EAAUxzC,IADjB,IAEIxO,SAAU2L,EAAMtK,OAAOoU,QAAU,OAAS,cAItDksC,EAASK,KAgC2BvsC,QAAwB,SAAf3N,EAAE9H,SACXtB,MAAM,aAGdgQ,MAAO5G,EAAE5K,SA/CpB,IAACqD,MAsDd,kBAACuR,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASlH,EAAMmJ,SAAvB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIhN,MAAM,UACNyE,QA7CL,WACX,IAAMjJ,EAAQ,GAEd+8B,EAAMx2B,KAAI,SAACgB,GACY,SAAfA,EAAE9H,UACFO,EAAM4R,KAAK5L,SAASuB,EAAEvH,WAG9B+B,EAAMoZ,SAASnb,IAsCC2O,SAAU5M,EAAMgQ,eAHpB,eAMKhQ,EAAMgQ,eACH,kBAACxB,GAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBCxEnD,IAAM0F,GAAiBC,KAAW,CAC9BC,KAAM,CACFvE,SAAU,OACVyE,UAAW,OACX,qBAAsB,CAClBC,aAAc,GAElB,WAAY,CACRvF,QAAS,QAEb,aAAc,IAElBwF,SAAU,IAZSL,CAapBM,MAEGC,GAAwBP,KAAW,CACrCC,KAAM,CACF6d,UAAW,EACXpuB,QAAS,EAET,aAAc,CACVouB,UAAW,KAGnBtd,QAAS,CACL9E,SAAU,OACVvB,OAAQ,EACRU,QAAS,OACT,aAAc,CACVV,OAAQ,MAGhBkG,SAAU,IAjBgBL,CAkB3BS,MAEGC,GAAwBV,MAAW,SAACzQ,GAAD,MAAY,CACjD0Q,KAAM,CACFpF,QAAS,QACTnL,QAASH,EAAM6K,QAAQ,OAHD4F,CAK1Ba,MAEExR,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCyzC,KAAM,CACFjoC,UAAW,OACXmlB,eAAgB,iBAEpBuvB,cAAc,aACVhgD,MAAO,OACPoK,OAAQ,OACRnK,QAAS,uBACTqtB,YAAa,QACZxtB,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAGjB2F,QAAQ,aACJ/Q,MAAO,OACPwK,SAAU,GACT1K,EAAMI,YAAYqe,GAAG,MAAQ,CAC1B0hC,kBAAmB,OAASngD,EAAMe,QAAQmxC,QAAU,WAG5DkO,YAAY,aACR11C,SAAU,EACVkmB,WAAY,OACZC,aAAc,QACb7wB,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAGjBwnC,QAAS,CACLvpC,SAAU,QAEd82C,aAAc,CACV92C,SAAU,OACVvG,MAAO,WAEXy6B,SAAU,CACNjyB,UAAW,EACXmiB,aAAc,GAElBrM,OAAQ,CACJyL,WAAY,8BAEhBjc,SAAU,CACN6hB,UAAW,kBAEf2tB,YAAa,CACTh1C,QAAS,QAEbi1C,YAAa,CACT54C,YAAa,QAEjB64C,OAAQ,CACJlyB,UAAW,QAEflvB,OAAQ,CACJe,QAASH,EAAM6K,QAAQ,GACvBkX,UAAW,SAEf0+B,aAAc,CACVlyC,WAAYvO,EAAM6K,QAAQ,IAE9B6b,KAAM,CACFvmB,QAASH,EAAM6K,QAAQ,IAE3B61C,UAAW,CACPtO,WAAY,KAEhBuO,UAAW,CACP39C,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9B61C,OAAQ,CACJ1gD,MAAO,OACPoK,OAAQ,OACR9J,gBAAiBR,EAAMe,QAAQqQ,WAAWC,aAInC,SAASwvC,GAAgBtgD,GACpC,IAAMugD,EAAYlvC,IAAMuN,YAClBre,EAAUhB,KACVE,EAAQa,cACRyB,EAAU4xB,cAJ2B,EAMXtiB,IAAM3U,SAAS,IANJ,mBAMpC6T,EANoC,KAM1Be,EAN0B,OAOnBD,IAAM3U,SAASsD,EAAMy4B,MAPF,mBAOpCA,EAPoC,KAO9B+nB,EAP8B,OAQbnvC,IAAM3U,UAAS,GARF,mBAQpC6O,EARoC,KAQ3BC,EAR2B,OASK6F,IAAM3U,UAAS,GATpB,mBASpC+jD,EAToC,KASlBC,EATkB,OAUKrvC,IAAM3U,SAAS,IAVpB,mBAUpCikD,EAVoC,KAUlBC,EAVkB,KAgBrChnD,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGLoD,qBAAU,WACNwjD,EAAQxgD,EAAMy4B,QACf,CAACz4B,EAAMy4B,OAEVz7B,qBAAU,WACN,GAA2B,KAAvBy7B,EAAKtS,KAAK06B,SAAd,CAGA,IAAI77C,EAAS,GACbyzB,EAAKtS,KAAK06B,SAAS5d,MAAM,WAAWtkC,SAAQ,SAACmiD,GACzC97C,GAAUjB,YAAQ+8C,MAEtB,IAAMC,EAASR,EAAU1qC,QACnBkkB,EAAUgnB,EAAOC,WAAW,MAClCjnB,EAAQknB,UAAU,EAAG,EAAGF,EAAOphD,MAAOohD,EAAOh3C,QAC7CgwB,EAAQmnB,YAAczhD,EAAMe,QAAQwS,QAAQsT,KAC5C,IAAK,IAAI3lB,EAAI,EAAGA,EAAIogD,EAAOphD,MAAOgB,IAAK,CACnC,IAAIwgD,EACAn8C,EACIpE,KAAKwgD,OAAQzgD,EAAI,GAAKogD,EAAOphD,MAAS84B,EAAKtS,KAAKk7B,YAG5C,OADZF,EAAMA,GAAYn8C,EAAOpB,OAAO,MAE5Bm2B,EAAQunB,YACRvnB,EAAQwnB,OAAO5gD,EAAG,GAClBo5B,EAAQynB,OAAO7gD,EAAGogD,EAAOh3C,QACzBgwB,EAAQ0nB,cAIjB,CAAChpB,EAAKtS,KAAK06B,SAAUpoB,EAAKtS,KAAKk7B,UAAW5hD,IAE7C,IA3CsB6S,EA2ChBovC,EAAa,SAACC,EAAWhxB,GAC3B,OAAc,IAAVA,EACO,EAEHgxB,EAAYhxB,EAAS,KAG3BixB,EAAcj7C,uBAAY,WAC5B,OAAO8xB,EAAKtS,KAAK6U,MAAM/gC,QAAO,SAACuL,GAAD,MAAsB,SAAfA,EAAE9H,cACxC,CAAC+6B,EAAKtS,KAAK6U,QA2CR6mB,EAAkBl7C,uBAAY,WAChC,MAAuC,KAAnC8xB,EAAKtS,KAAK27B,WAAW37B,KAAKrtB,KACnB2/B,EAAKtS,KAAK27B,WAAW37B,KAAKrtB,KAEhB,MAAd2/B,EAAK3/B,KAAe,iBAAS2/B,EAAK3/B,OAC1C,CAAC2/B,IAEE1D,EAAUpuB,uBAAY,WACxB,MAAkC,UAA9B8xB,EAAKtS,KAAK27B,WAAWC,KAEjB,kBAACtjB,GAAA,EAAD,CAAOC,aAAckjB,IAAcljD,OAAQ+D,MAAM,aAC7C,kBAAC,KAAD,CAAerC,UAAWG,EAAQu/C,gBAKtC,kBAAC3pB,GAAA,EAAD,CACI/1B,UAAWG,EAAQgyC,QACnBp9B,SAAU0sC,EAAgBppB,OAKvC,CAACA,EAAMl4B,IA2CV,OACI,kBAACu9C,GAAA,EAAD,CAAM19C,UAAWG,EAAQ2yC,MACrB,kBAACkM,GAAD,CACI9mD,KAAMmoD,EACNt3C,QAAS,kBAAMu3C,GAAoB,IACnC1wC,cAAezE,EACfyvB,MAAO2lB,EACPvnC,SA7Be,SAACiC,GACxB7P,GAAW,GACXgB,IAAIqL,IAAI,iBAAmB4gB,EAAKtS,KAAK67B,IAAK,CACtCC,QAAS5mC,IAER3O,MAAK,WACFjB,EACI,MACA,QACA,iFACA,WAEJi1C,GAAoB,MAEvB/zC,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YAEjDkW,MAAK,WACFlB,GAAW,SAaf,kBAAC,GAAD,CACIqkB,QAAM,EACNtf,SAAUA,IAAakoB,EAAKtS,KAAK67B,IACjCh2C,UA7KUsG,EA6KammB,EAAKtS,KAAK67B,IA7Kb,SAAC34C,EAAO64C,GACpC5wC,IAAY4wC,GAAc5vC,MA8KlB,kBAAC,GAAD,CACIK,gBAAc,kBACd1W,GAAG,kBAEH,yBAAKmE,UAAWG,EAAQo/C,eAAgB5qB,KACxC,kBAACotB,GAAA,EAAD,CAAa/hD,UAAWG,EAAQmQ,SAC5B,kBAAC6D,EAAA,EAAD,CAAY9R,MAAM,UAAUolB,QAAM,GAC9B,kBAACnU,GAAA,EAAD,CAAS3M,MAAO86C,KACZ,8BAAOA,OAGf,kBAACO,GAAA,EAAD,CACI3/C,MAAM,YACN6J,QAAQ,cACRlM,UAAWG,EAAQ28B,SACnB9gC,MAAOslD,EAAWjpB,EAAK9hB,WAAY8hB,EAAK9H,SAE5C,kBAACpc,EAAA,EAAD,CACIjI,QAAQ,QACR7J,MAAM,gBACNolB,QAAM,GAEL4Q,EAAK9H,MAAQ,GACV,8BACK+wB,EACGjpB,EAAK9hB,WACL8hB,EAAK9H,OACP3vB,QAAQ,GAJd,MAKQ,IACiB,IAApBy3B,EAAK9hB,WACA,SACAlW,YAAag4B,EAAK9hB,YAR5B,IAUoB,IAAf8hB,EAAK9H,MACA,SACAlwB,YAAag4B,EAAK9H,OAAQ,IAZpC,IAaM,IACc,MAAf8H,EAAK8E,MACA,OACA98B,YAAag4B,EAAK8E,OAAS,MAGzB,IAAf9E,EAAK9H,OAAe,uCAG7B,kBAACwxB,GAAA,EAAD,CAAa/hD,UAAWG,EAAQs/C,aAC5B,kBAAClsC,GAAA,EAAD,KACI,kBAAC,KAAD,CACIvT,UAAW6G,KAAW,eAEb1G,EAAQgQ,SACLA,IAAakoB,EAAKtS,KAAK67B,KAE/BzhD,EAAQwgB,aAM5B,kBAAC,GAAD,KACI,kBAACtO,EAAA,EAAD,MAC+B,UAA9BgmB,EAAKtS,KAAK27B,WAAWC,MAClB,yBAAK3hD,UAAWG,EAAQ0/C,QACpB,kBAAC1H,GAAA,EAAD,CAAO5/C,KAAK,SACR,kBAACkgD,GAAA,EAAD,KACK+I,IAAcp9C,KAAI,SAACpI,GAChB,OACI,kBAACg4C,GAAA,EAAD,CACIj4C,IAAKC,EAAM6B,MACX+H,MAAO,CACH6K,WACI,8BAEA,SADCpR,EAAMe,QAAQvI,KAETwjC,YACIh8B,EAAMe,QACDwS,QACAsT,KACL,IAEJgQ,YACI72B,EAAMe,QACDwS,QACAsT,KACL,MAEV,QAEA,SADC7mB,EAAMe,QAAQvI,KAETwjC,YACIh8B,EAAMe,QACDwS,QACAsT,KACL,IAEJgQ,YACI72B,EAAMe,QACDwS,QACAsT,KACL,MAEV,IACAo7B,EACItlD,EAAMimD,gBACNjmD,EAAMsC,QACRsC,QAAQ,GACV,KACAvB,EAAMe,QAAQqQ,WACT4a,MACL,IACAi2B,EACItlD,EAAMimD,gBACNjmD,EAAMsC,QACRsC,QAAQ,GACV,KACAvB,EAAMe,QAAQqQ,WACT4a,MACL,WAGR,kBAACmpB,GAAA,EAAD,CACI9oC,UAAU,KACVgpC,MAAM,OAEN,kBAACvgC,EAAA,EAAD,CACInU,UACIG,EAAQw/C,aAGZ,kBAAC5pB,GAAA,EAAD,CACI/1B,UACIG,EAAQy/C,YAEZ7qC,SACI/Y,EAAMxB,OAGbwB,EAAMxB,OAGf,kBAACg6C,GAAA,EAAD,CACI9oC,UAAU,KACVgpC,MAAM,OAEN,kBAACvgC,EAAA,EAAD,CAAYsT,QAAM,GACb,IACApnB,YACGrE,EAAMsC,UAIlB,kBAACk2C,GAAA,EAAD,CACI9oC,UAAU,KACVgpC,MAAM,OAEN,kBAACvgC,EAAA,EAAD,CAAYsT,QAAM,GACb65B,EACGtlD,EAAMimD,gBACNjmD,EAAMsC,QACRsC,QAAQ,GAJd,MAQJ,kBAAC4zC,GAAA,EAAD,KACI,kBAAClhC,GAAA,EAAD,CAAS3M,MAAM,kCACX,kBAAC4M,GAAA,EAAD,CACIzM,QAAS,kBA/R9C,SAACjJ,GAChBuN,GAAW,GACX,IAAMqK,EAAU+rC,IACVU,EAAW,GACXC,EAAW,GAEjB1sC,EAAQrR,KAAI,SAACgB,GACLA,EAAEvH,QAAUA,GAASuH,EAAE9H,UACvB4kD,EAASzyC,KAAK5L,SAASuB,EAAEvH,QACzBskD,EAAS1yC,KAAT,2BACOrK,GADP,IAEI9H,SAAU,WAGd6kD,EAAS1yC,KAAT,2BACOrK,GADP,IAEI9H,SAAU,cAItB8O,IAAIqL,IAAI,iBAAmB4gB,EAAKtS,KAAK67B,IAAK,CACtCC,QAASK,IAER51C,MAAK,WACF8zC,EAAQ,2BACD/nB,GADA,IAEHtS,KAAK,2BACEsS,EAAKtS,MADR,IAEA6U,MAAOunB,OAGf92C,EAAe,MAAO,QAAS,iCAAS,cAE3CkB,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YAEjDkW,MAAK,WACFlB,GAAW,MA2PqCg3C,CACIpmD,EAAM6B,QAGd2O,SAAUrB,EACV5S,KAAM,SAEN,kBAAC8pD,GAAA,EAAD,gBAYxC,yBAAKriD,UAAWG,EAAQ1B,QACpB,kBAAC4Q,EAAA,EAAD,CACIrP,UAAWG,EAAQ2/C,aACnB5zC,QAAQ,WACR7J,MAAM,YACNyE,QAAS,kBACLnF,EAAQ8N,KACJ,gBACI+H,mBAAmB6gB,EAAK1oB,QAPxC,wCAa+B,UAA9B0oB,EAAKtS,KAAK27B,WAAWC,MAClB,kBAACtyC,EAAA,EAAD,CACIrP,UAAWG,EAAQ2/C,aACnB5zC,QAAQ,WACR7J,MAAM,YACNmK,SAAUrB,EACVrE,QAAS,WACLw5C,GAAoB,GACpBE,EAAoB,aACb5gD,EAAMy4B,KAAKtS,KAAK6U,UAR/B,oDAeJ,kBAACvrB,EAAA,EAAD,CACIrP,UAAWG,EAAQ2/C,aACnBh5C,QAjRT,WACXsE,GAAW,GACXgB,IAAIyL,OAAO,eAAiBwgB,EAAKtS,KAAK67B,KACjCt1C,MAAK,WACFjB,EACI,MACA,QACA,uFACA,cAGPkB,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YAEjDkW,MAAK,WACFlB,GAAW,OAmQCc,QAAQ,YACR7J,MAAM,YACNmK,SAAUrB,GALd,6BAUJ,kBAACkH,EAAA,EAAD,MACA,yBAAKrS,UAAWG,EAAQ4lB,MACI,KAAvBsS,EAAKtS,KAAK06B,UACP,4BACIlhD,MAAO,MACPoK,OAAQ,MACRuW,IAAKigC,EACLngD,UAAWG,EAAQ8/C,SAI3B,kBAACnH,GAAA,EAAD,CAAM1tB,WAAS,GACX,kBAAC0tB,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ4/C,WAArC,4BAGA,kBAACjH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ6/C,WACjC,kBAAC,KAAD,CACItE,SAAUrjB,EAAKiqB,OACf1G,OAAO,YAInB,kBAAC9C,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ4/C,WAArC,kCAGA,kBAACjH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ6/C,WAChC3/C,YAAag4B,EAAKtS,KAAKw8B,gBAGhC,kBAACzJ,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ4/C,WAArC,kCAGA,kBAACjH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ6/C,WAChC3/C,YAAag4B,EAAKtS,KAAKy8B,aAD5B,SAI2B,KAA9BnqB,EAAKtS,KAAK27B,WAAWC,MAClB,oCACI,kBAAC7I,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CACIlc,MAAI,EACJqc,GAAI,EACJF,GAAI,EACJ/4C,UAAWG,EAAQ4/C,WAJvB,kBAQA,kBAACjH,GAAA,EAAD,CACIlc,MAAI,EACJqc,GAAI,GACJF,GAAI,EACJnzC,MAAO,CACH43B,UAAW,aAEfx9B,UAAWG,EAAQ6/C,WAElB3nB,EAAKtS,KAAK08B,WAGnB,kBAAC3J,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CACIlc,MAAI,EACJmc,GAAI,EACJ/4C,UAAWG,EAAQ4/C,WAHvB,4BAOA,kBAACjH,GAAA,EAAD,CACIlc,MAAI,EACJmc,GAAI,EACJ/4C,UAAWG,EAAQ6/C,WAElB3nB,EAAKtS,KAAK28B,aAGnB,kBAAC5J,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CACIlc,MAAI,EACJmc,GAAI,EACJ/4C,UAAWG,EAAQ4/C,WAHvB,4BAOA,kBAACjH,GAAA,EAAD,CACIlc,MAAI,EACJmc,GAAI,EACJ/4C,UAAWG,EAAQ6/C,WAEG,SAArB3nB,EAAKtS,KAAK48B,OACL,SACA,YAKtB,kBAAC7J,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ4/C,WAArC,kCAGA,kBAACjH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ6/C,WAChC3/C,YAAag4B,EAAKtS,KAAK68B,eAGhC,kBAAC9J,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ4/C,WAArC,kCAGA,kBAACjH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ6/C,WAChC3nB,EAAKtS,KAAKk7B,iBCxoB/C,IAAMpxC,GAAiBC,KAAW,CAC9BC,KAAM,CACFvE,SAAU,OACVyE,UAAW,OACX,qBAAsB,CAClBC,aAAc,GAElB,WAAY,CACRvF,QAAS,QAEb,aAAc,IAElBwF,SAAU,IAZSL,CAapBM,MAEGC,GAAwBP,KAAW,CACrCC,KAAM,CACF6d,UAAW,EACXpuB,QAAS,EAET,aAAc,CACVouB,UAAW,KAGnBtd,QAAS,CACL9E,SAAU,OACVvB,OAAQ,EACRU,QAAS,OACT,aAAc,CACVV,OAAQ,MAGhBkG,SAAU,IAjBgBL,CAkB3BS,MAEGC,GAAwBV,MAAW,SAACzQ,GAAD,MAAY,CACjD0Q,KAAM,CACFpF,QAAS,QACTnL,QAASH,EAAM6K,QAAQ,OAHD4F,CAK1Ba,MAEExR,GAAYC,aAAW,SAACC,GAAD,YAAY,CACrCyzC,KAAM,CACFjoC,UAAW,OACXmlB,eAAgB,iBAEpBuvB,cAAc,aACVhgD,MAAO,OACPoK,OAAQ,OACRnK,QAAS,uBACTqtB,YAAa,QACZxtB,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAGjB2F,SAAO,GACH/Q,MAAO,OACPwK,SAAU,GAFP,cAGF1K,EAAMI,YAAYqe,GAAG,MAAQ,CAC1B0hC,kBAAmB,OAASngD,EAAMe,QAAQmxC,QAAU,WAJrD,0BAMQ,QANR,GAQPkO,YAAY,aACR11C,SAAU,EACVkmB,WAAY,OACZC,aAAc,QACb7wB,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAGjBwnC,QAAS,CACLvpC,SAAU,QAEd82C,aAAc,CACV92C,SAAU,OACVvG,MAAO,WAEXy6B,SAAU,CACNjyB,UAAW,EACXmiB,aAAc,GAElBrM,OAAQ,CACJyL,WAAY,8BAEhBjc,SAAU,CACN6hB,UAAW,kBAEf2tB,YAAa,CACTh1C,QAAS,QAEbi1C,YAAa,CACT54C,YAAa,QAEjB64C,OAAQ,CACJlyB,UAAW,QAEflvB,OAAQ,CACJe,QAASH,EAAM6K,QAAQ,GACvBkX,UAAW,SAEf0+B,aAAc,CACVlyC,WAAYvO,EAAM6K,QAAQ,IAE9B6b,KAAM,CACFvmB,QAASH,EAAM6K,QAAQ,IAE3B61C,UAAW,CACPtO,WAAY,KAEhBuO,UAAW,CACP39C,MAAOhD,EAAMe,QAAQ2N,KAAK3D,eAInB,SAASy4C,GAAajjD,GACjC,IAAMO,EAAUhB,KACVE,EAAQa,cACRyB,EAAU4xB,cAHwB,EAKRtiB,IAAM3U,UAAS,GALP,mBAKjC6T,EALiC,KAKvBe,EALuB,OAMVD,IAAM3U,UAAS,GANL,mBAMjC6O,EANiC,KAMxBC,EANwB,KAQlC5R,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IA4BCioD,EAAkBl7C,uBAAY,WAChC,MAA2B,MAApB3G,EAAMy4B,KAAK3/B,KAAe,iBAASkH,EAAMy4B,KAAK3/B,OACtD,CAACkH,EAAMy4B,KAAK3/B,OAET8oD,EAAcj7C,uBAAY,WAC5B,OAAO3G,EAAMy4B,KAAKuC,MAAM/gC,QAAO,SAACuL,GAAD,MAAsB,SAAfA,EAAE9H,cACzC,CAACsC,EAAMy4B,KAAKuC,QAETjG,EAAUpuB,uBAAY,WACxB,OAAI3G,EAAMy4B,KAAKuC,MAAMt8B,OAAS,EAEtB,kBAAC+/B,GAAA,EAAD,CAAOC,aAAckjB,IAAcljD,OAAQ+D,MAAM,aAC7C,kBAAC,KAAD,CAAerC,UAAWG,EAAQu/C,gBAKtC,kBAAC3pB,GAAA,EAAD,CACI/1B,UAAWG,EAAQgyC,QACnBp9B,SAAU0sC,EAAgB7hD,EAAMy4B,UAI7C,CAACz4B,EAAMy4B,KAAMl4B,IAWhB,OACI,kBAACu9C,GAAA,EAAD,CAAM19C,UAAWG,EAAQ2yC,MACrB,kBAAC,GAAD,CACIrjB,QAAM,EACNtf,SAAUA,EACVvE,SAhEe,SAAC3C,EAAO64C,GAC/B5wC,IAAc4wC,KAiEN,kBAAC,GAAD,CACIvvC,gBAAc,kBACd1W,GAAG,kBAEH,yBAAKmE,UAAWG,EAAQo/C,eAAgB5qB,KACxC,kBAACotB,GAAA,EAAD,CAAa/hD,UAAWG,EAAQmQ,SAC5B,kBAAC6D,EAAA,EAAD,CAAY9R,MAAM,UAAUolB,QAAM,GAC9B,kBAACnU,GAAA,EAAD,CAAS3M,MAAO86C,KACZ,8BAAOA,OAGQ,IAAtB7hD,EAAMy4B,KAAK7qB,QACR,kBAAC8F,GAAA,EAAD,CAAS3M,MAAO/G,EAAMy4B,KAAK/hC,OACvB,kBAAC6d,EAAA,EAAD,CACIjI,QAAQ,QACR7J,MAAM,QACNolB,QAAM,GAHV,iCAKU7nB,EAAMy4B,KAAK/hC,QAIN,IAAtBsJ,EAAMy4B,KAAK7qB,QACR,kBAAC2G,EAAA,EAAD,CACIjI,QAAQ,QACR7J,MAAM,gBACNolB,QAAM,GAHV,qBAM0B,KAArB7nB,EAAMy4B,KAAK/hC,OACR,uCAAQsJ,EAAMy4B,KAAK/hC,QAIR,IAAtBsJ,EAAMy4B,KAAK7qB,QACmB,IAA3B5N,EAAMy4B,KAAKyqB,aACP,kBAAC3uC,EAAA,EAAD,CACIjI,QAAQ,QACRtG,MAAO,CACHvD,MAAOhD,EAAMe,QAAQslB,QAAQQ,MAEjCuB,QAAM,GALV,sBAUe,IAAtB7nB,EAAMy4B,KAAK7qB,QACmB,IAA3B5N,EAAMy4B,KAAKyqB,aACP,kBAAC3uC,EAAA,EAAD,CACIjI,QAAQ,QACRtG,MAAO,CACHvD,MAAOhD,EAAMe,QAAQslB,QAAQrb,OAEjCod,QAAM,GALV,0DAUe,IAAtB7nB,EAAMy4B,KAAK7qB,QACmB,IAA3B5N,EAAMy4B,KAAKyqB,aACP,kBAAC3uC,EAAA,EAAD,CACIjI,QAAQ,QACRtG,MAAO,CACHvD,MAAOhD,EAAMe,QAAQslB,QAAQrb,OAEjCod,QAAM,GALV,0DAUe,IAAtB7nB,EAAMy4B,KAAK7qB,QACmB,IAA3B5N,EAAMy4B,KAAKyqB,aACP,kBAAC3uC,EAAA,EAAD,CACIjI,QAAQ,QACR7J,MAAO,QACPolB,QAAM,GA3FjB,SAACnxB,GAClB,IACI,IAAM8xC,EAAMhtC,KAAKhC,MAAM9C,GACvB,OAAO8xC,EAAI5wC,IAAM,SAAM4wC,EAAI9xC,MAC7B,MAAOwG,GACL,MAAO,wCAwFkBimD,CAAanjD,EAAMy4B,KAAK2qB,cAIzC,kBAACjB,GAAA,EAAD,CAAa/hD,UAAWG,EAAQs/C,aAC5B,kBAAClsC,GAAA,EAAD,KACI,kBAAC,KAAD,CACIvT,UAAW6G,KAAW,eAEb1G,EAAQgQ,SAAWA,GAExBhQ,EAAQwgB,aAM5B,kBAAC,GAAD,KACI,kBAACtO,EAAA,EAAD,MACCzS,EAAMy4B,KAAKuC,MAAMt8B,OAAS,GACvB,yBAAK0B,UAAWG,EAAQ0/C,QACpB,kBAAC1H,GAAA,EAAD,KACI,kBAACM,GAAA,EAAD,KACK+I,IAAcp9C,KAAI,SAACpI,GAChB,OACI,kBAACg4C,GAAA,EAAD,CAAUj4C,IAAKC,EAAM6B,OACjB,kBAAC22C,GAAA,EAAD,CACI9oC,UAAU,KACVgpC,MAAM,OAEN,kBAACvgC,EAAA,EAAD,CACInU,UACIG,EAAQw/C,aAGZ,kBAAC5pB,GAAA,EAAD,CACI/1B,UACIG,EAAQy/C,YAEZ7qC,SACI/Y,EAAMxB,OAGbwB,EAAMxB,OAGf,kBAACg6C,GAAA,EAAD,CACI9oC,UAAU,KACVgpC,MAAM,OAEN,kBAACvgC,EAAA,EAAD,CAAYsT,QAAM,GACb,IACApnB,YACGrE,EAAMsC,UAIlB,kBAACk2C,GAAA,EAAD,CACI9oC,UAAU,KACVgpC,MAAM,OAEN,kBAACvgC,EAAA,EAAD,CAAYsT,QAAM,IA1L9C85B,EA4LoCvlD,EAAMimD,gBA5L/B1xB,EA6LyBv0B,EAAMsC,OA5L7C,GAATiyB,EACO,EAEHgxB,EAAYhxB,EAAS,KA0LqB3vB,QAAQ,GAJd,OA1L7B,IAAC2gD,EAAWhxB,QA0Mf,yBAAKvwB,UAAWG,EAAQ1B,QACpB,kBAAC4Q,EAAA,EAAD,CACIrP,UAAWG,EAAQ2/C,aACnB5zC,QAAQ,WACR7J,MAAM,YACNyE,QAAS,kBACLnF,EAAQ8N,KACJ,cACI+H,mBAAmB5X,EAAMy4B,KAAK1oB,QAP9C,wCAaA,kBAACN,EAAA,EAAD,CACIrP,UAAWG,EAAQ2/C,aACnBh5C,QAxOT,WACXsE,GAAW,GACXgB,IAAIyL,OAAO,eAAiBjY,EAAMy4B,KAAKupB,KAClCt1C,MAAK,WACFjB,EAAe,MAAO,QAAS,2BAAQ,cAE1CkB,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YAEjDkW,MAAK,WACFjV,OAAOC,SAAS2vB,aA+NJ/a,QAAQ,YACR7J,MAAM,YACNmK,SAAUrB,GALd,6BAUJ,kBAACkH,EAAA,EAAD,MACA,yBAAKrS,UAAWG,EAAQ4lB,MACpB,kBAAC+yB,GAAA,EAAD,CAAM1tB,WAAS,GACX,kBAAC0tB,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ4/C,WAArC,kCAGA,kBAACjH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ6/C,WAChC5xB,aACGxuB,EAAMy4B,KAAKriC,OACX,wBAIZ,kBAAC8iD,GAAA,EAAD,CAAM1tB,WAAS,EAAC2tB,GAAI,GAAIE,GAAI,GACxB,kBAACH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ4/C,WAArC,kCAGA,kBAACjH,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,EAAG/4C,UAAWG,EAAQ6/C,WAChC5xB,aACGxuB,EAAMy4B,KAAKiqB,OACX,6B,mCCpalCnjD,GAAYC,aAAW,iBAAO,CAChCyN,IAAK,CACD5C,OAAQ,EACRK,IAAK,OACLwC,MAAO,GACPC,OAAQ,GACRxC,KAAM,OACNyC,OAAQ,EACR/G,SAAU,aAIH,SAASg9C,KACpB,IAAM9iD,EAAUhB,KACV3F,EAAW6M,cAEX68C,EAA2B38C,uBAC7B,kBAAM/M,EAASyjB,iBACf,CAACzjB,IAGL,OACI,oCACI,kBAACwgB,GAAA,QAAD,MACA,kBAAC7d,GAAA,EAAD,CAAYE,QAAM,GACd,kBAAC8mD,GAAA,EAAD,CACInjD,UAAWG,EAAQ0M,IACnBxK,MAAM,YACNyE,QAAS,kBAAMo8C,MAEf,kBAACE,GAAA,EAAD,SC5BpB,IA4DMC,G,+MACFnG,KAAO,E,EACPoG,SAAW,E,EAEX9kD,MAAQ,CACJ+kD,YAAa,GACbp4C,SAAS,EACTq4C,aAAc,GACdC,UAAU,G,EAGd16B,kBAAoB,WAChB,EAAK26B,kBACL,EAAK3G,Y,EAOT2G,gBAAkB,WACd,EAAKrtC,SAAS,CACVlL,SAAS,IAEbiB,IAAImJ,IAAI,sBACHjJ,MAAK,SAACxV,GACH,EAAKuf,SAAS,CACVktC,YAAazsD,EAASG,KACtBkU,SAAS,IAGb4iC,aAAa,EAAKuV,UACdxsD,EAASG,KAAKqH,OAAS,IACvB,EAAKglD,SAAWh4C,WACZ,EAAKo4C,gBACL,IAAO5sD,EAASG,KAAK,GAAGqsD,cAInC/2C,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,a,EAKhB2mD,SAAW,WACP,EAAK1mC,SAAS,CACVlL,SAAS,IAEbiB,IAAImJ,IAAI,2BAA4B,EAAK2nC,MACpC5wC,MAAK,SAACxV,GACH,EAAKuf,SAAS,CACVmtC,aAAa,GAAD,oBACL,EAAKhlD,MAAMglD,cADN,aAEL1sD,EAASG,OAEhBkU,SAAS,EACTs4C,SAAU3sD,EAASG,KAAKqH,QAAU,QAGzCiO,OAAM,WACH,EAAK3M,MAAM8I,eAAe,MAAO,QAAS,2BAAQ,SAClD,EAAK2N,SAAS,CACVlL,SAAS,Q,2DAnDzB,WACI4iC,aAAax3C,KAAK+sD,Y,oBAuDtB,WAAU,IACEnjD,EAAY5J,KAAKqJ,MAAjBO,QACFua,EAAOvjB,IAAKgE,UAElB,OACI,yBAAK6E,UAAWG,EAAQ0d,QACnBnD,EAAKtD,MAAM6/B,qBAAuB,kBAACgM,GAAD,MACnC,kBAAC9uC,EAAA,EAAD,CACI9R,MAAM,gBACN6J,QAAQ,KACRlM,UAAWG,EAAQwG,OAHvB,qBAMI,kBAAC4M,GAAA,EAAD,CACI/G,SAAUjW,KAAKiI,MAAM2M,QACrBrE,QAASvQ,KAAKmtD,iBAEd,kBAAC,KAAD,QAGPntD,KAAKiI,MAAM+kD,YAAYn/C,KAAI,SAACpI,EAAO8P,GAAR,OACxB,kBAACo0C,GAAD,CAAiBnkD,IAAK+P,EAAGusB,KAAMr8B,OAEnC,kBAACmY,EAAA,EAAD,CACI9R,MAAM,gBACN6J,QAAQ,KACRlM,UAAWG,EAAQwG,OAHvB,sBAOA,yBAAK3G,UAAWG,EAAQ48C,UACnBxmD,KAAKiI,MAAMglD,aAAap/C,KAAI,SAACpI,EAAO8P,GACjC,OAAI9P,EAAM4+B,MACC,kBAACioB,GAAD,CAAc9mD,IAAK+P,EAAGusB,KAAMr8B,IAEhC,QAEX,kBAACqT,EAAA,EAAD,CACI9W,KAAK,QACLyH,UAAWG,EAAQ8J,OACnBuC,UAAWjW,KAAKiI,MAAMilD,SACtB38C,QAASvQ,KAAKwmD,UAJlB,kC,GA7GYhjC,aAgIjB7C,GALE+C,aAvIO,WACpB,MAAO,MAGgB,SAACzgB,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,QAgI9C4X,CAGfnK,cA1La,SAACzQ,GAAD,MAAY,CACvBqtC,QAAS,CACL/hC,QAAS,QAEbhE,MAAO,CACHkE,UAAW,QAEfgT,OAAO,aACHte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAC1B7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,IACPqO,WAAY,OACZ5G,YAAa,SAGrB21C,WAAY,CACRnxC,SAAU,SAEdoxC,WAAY,CACR/8C,gBAAiBR,EAAMe,QAAQwS,QAAQvI,OAE3CwyC,aAAc,CACVh9C,gBAAiBR,EAAMe,QAAQgK,UAAUC,OAE7CyyC,KAAM,CACFjyC,UAAW,QAEfgnC,KAAM,CACFlnC,QAAS,QAEbsnC,iBAAkB,CACdj0B,aAAc,eAElBq0B,SAAU,CACNzkC,WAAY,QAEhBmvC,SAAU,CACN37B,UAAW,SACXvW,UAAW,OACXmiB,aAAc,QAElB/iB,OAAQ,CACJY,UAAWxL,EAAM6K,QAAQ,OA6I/B4F,CAAmBuzC,KCvIfM,G,oDACF,WAAY/jD,GAAQ,IAAD,wBACf,cAAMA,IAOVmS,aAAe,SAACrZ,GAAD,OAAU,SAACuQ,GACtB,EAAKoN,SAAL,eAAiB3d,EAAOuQ,EAAMtK,OAAO3C,UATtB,EAYnBwsC,OAAS,SAAC1rC,GACNA,EAAEwS,iBACqB,KAAnB,EAAK9Q,MAAMyrC,KAGf,EAAKrqC,MAAMgkD,YAAY,EAAKplD,MAAMyrC,MAflC,IAAMvrB,EAAQ,IAAIC,gBAAgB,EAAK/e,MAAMtI,SAASsnB,QAFvC,OAGf,EAAKpgB,MAAQ,CACTyrC,IAAKvrB,EAAMnJ,IAAI,aAJJ,E,2CAoBnB,WAAU,IACEpV,EAAY5J,KAAKqJ,MAAjBO,QAER,OACI,yBAAKH,UAAWG,EAAQ0d,QACpB,kBAAC6/B,GAAA,EAAD,CAAM19C,UAAWG,EAAQ2yC,MACrB,kBAAC6K,GAAA,EAAD,CACIlwC,OACI,kBAAC8Z,EAAA,EAAD,CACI5b,aAAW,SACX/B,IACI,uBACArT,KAAKqJ,MAAMwH,MAAMqC,QAAQ1N,IACzB,OAIZ4K,MAAOpQ,KAAKqJ,MAAMwH,MAAMqC,QAAQC,KAAO,kCACvCk0C,UAAWrnD,KAAKqJ,MAAMwH,MAAMy2C,cAEhC,kBAACxrC,EAAA,EAAD,MACA,kBAAC0vC,GAAA,EAAD,KACI,0BAAM/oC,SAAUziB,KAAKiyC,QACjB,kBAACj0B,GAAA,EAAD,CACI1Y,GAAG,MACHmQ,MAAM,uCACNhQ,MAAOzF,KAAKiI,MAAMyrC,IAClBr+B,SAAUrV,KAAKwb,aAAa,OAC5B9H,OAAO,SACPpS,KAAK,WACL+U,WAAS,EACTnB,WAAS,EACTpJ,MAAM,gBAIlB,kBAACw8C,GAAA,EAAD,CACI7+C,UAAWG,EAAQusC,QACnBoS,sBAAoB,GAEpB,kBAACzvC,EAAA,EAAD,CACIvI,QAASvQ,KAAKiyC,OACdnmC,MAAM,YACNrC,UAAWG,EAAQsjD,SACnBv3C,QAAQ,YACRM,SACuB,KAAnBjW,KAAKiI,MAAMyrC,KAAc1zC,KAAKqJ,MAAMuL,SAN5C,kBAaR,yBAAKnL,UAAWG,EAAQkjC,KACpB,kBAAC,KAAQkZ,OAAT,CACI32C,MAAO,CAAE+E,QAAQ,eAAeZ,SAAS,IAAIyB,SAAS,IAAIjM,MAAM,OAAOoK,OAAO,IAC9E6yC,OAAO,0BACPC,KAAK,aACLnuB,OAAO,W,GA/EGvU,aA4FnB8pC,GALI5pC,aAnGK,WACpB,MAAO,MAGgB,SAACzgB,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,QA4F5C4X,CAGjBnK,cAtIa,SAACzQ,GAAD,MAAY,CACvByzC,KAAM,CACFtnC,SAAU,IACVvB,OAAQ,UAEZyiC,QAAS,CACL/hC,QAAS,QAEbkT,OAAO,aACHte,MAAO,OACPsL,UAAW,QACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAC1B7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SAGrBy8C,SAAU,CACN71C,WAAY,OACZ5G,YAAa,OACb88C,aAAc,QAElBzgB,IAAI,CACA9jC,MAAO,OACPoK,OAAQ,GACR25B,UAAW,GACXliB,UAAW,SACXvW,UAAW,aAyGjBiF,CAAmBoK,YAAWypC,M,UCjJ1BxkD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrC0kD,UAAW,CACP3iC,UAAW,SACX5hB,QAAS,IAEbiO,OAAQ,CACJ5N,gBAAiBR,EAAMe,QAAQgK,UAAU8b,KACzCjc,OAAQ,SACR1K,MAAO,GACPoK,OAAQ,GACRq6C,OAAQ,WAEZC,SAAU,CACNp5C,UAAW,IAEf/I,UAAW,CACPO,MAAOhD,EAAMe,QAAQ2N,KAAKvB,SAC1B5D,SAAU,QAIH,SAASs7C,GAAQtkD,GAC5B,IAAMO,EAAUhB,KACVwC,EAAU4xB,cAcV4wB,EAAc,WAChBxiD,EAAQ8N,KAAK,YAAc7P,EAAMwH,MAAMqC,QAAQ1N,KAC/C6D,EAAMmJ,SAAWnJ,EAAMmJ,WAG3B,OACI,yBAAK/I,UAAWG,EAAQ4jD,WACpB,kBAACx8B,EAAA,EAAD,CACIvnB,UAAWG,EAAQsN,OACnBo4B,IAAKjmC,EAAMwH,MAAMqC,QAAQC,KACzBE,IAAK,uBAAyBhK,EAAMwH,MAAMqC,QAAQ1N,IAAM,KACxD+K,QAAS,kBAAMq9C,OAEnB,kBAAChwC,EAAA,EAAD,CAAYjI,QAAQ,KAAKlM,UAAWG,EAAQ8jD,UACvCrkD,EAAMqxC,UACH,+DACS,IACL,kBAACzM,EAAA,EAAD,CACI19B,QAAS,kBAAMq9C,KACf5sD,KAAM,qBACN8K,MAAM,WAELzC,EAAMwH,MAAMqC,QAAQC,MACjB,IARZ,iBAYF9J,EAAMqxC,UACJ,oCACK,IACD,kBAACzM,EAAA,EAAD,CACI19B,QAAS,kBAAMq9C,KACf5sD,KAAM,qBACN8K,MAAM,WAELzC,EAAMwH,MAAMqC,QAAQC,MACjB,IARZ,wDAaR,kBAACyK,EAAA,EAAD,CAAYnU,UAAWG,EAAQ2B,WAC1BlC,EAAMwH,MAAMg9C,MADjB,8BAC+BxkD,EAAMwH,MAAMkK,UAD3C,6BAC4D,IArD5D1R,EAAMwH,MAAMuK,OAAS,EACjB/R,EAAMwH,MAAMuK,QAAU,MAElBnR,KAAKwgD,MAAMphD,EAAMwH,MAAMuK,OAAZ,OAAoC,4BAGhDnR,KAAKwgD,MAAMphD,EAAMwH,MAAMuK,OAAS,MAAQ,kCAE5Cyc,aAAgBxuB,EAAMwH,MAAMy2C,YAAa,wB,mCChBxDr4C,cACA,IA6GMwU,GAAS/I,IAAM+P,MAAK,kBAAM,4CAC1BqjC,GAAapzC,IAAM+P,MAAK,kBAAM,4CAE9BsjC,G,+MACF9lD,MAAQ,CACJqK,SAAU,KACV3Q,MAAM,EACNie,iBAAkB,KAClBhL,SAAS,EACThD,YAAY,G,EAGhBoO,YAAa,E,EAGb3E,QAAU,WACN,GAAIkF,IAAWrc,YAAY,EAAKmF,MAAMtI,SAASyf,UAAW,CACtD,IAAK5f,IAAKuE,QAON,YANA,EAAKkE,MAAM8I,eACP,MACA,QACA,2BACA,WAIR,IAAMgS,EAAOvjB,IAAKgE,UAClB,IAAKhE,IAAKuE,SAAWgf,IAASA,EAAKtD,MAAMuD,cAOrC,YANA,EAAK/a,MAAM8I,eACP,MACA,QACA,2BACA,WAMZ,OAAQmS,aAAc,EAAKjb,MAAMwH,MAAMxI,OAAOlG,OAC1C,IAAK,MAKD,YAJA,EAAKkH,MAAMkb,eAAe,CACtB/e,IAAK,EAAK6D,MAAMwH,MAAMrL,IACtBrD,KAAM,EAAKkH,MAAMwH,MAAMxI,OAAOlG,OAGtC,IAAK,QAMD,YALA,EAAKkH,MAAM+B,QAAQ8N,KACf,EAAK7P,MAAMwH,MAAMrL,IACb,aACAyb,mBAAmB,EAAK5X,MAAMwH,MAAMxI,OAAOlG,OAGvD,IAAK,QAQD,OAPA,EAAKkH,MAAMya,kBAAkB,CACzB,CACIte,IAAK,EAAK6D,MAAMwH,MAAMrL,IACtBlE,KAAM,gBAGd,EAAK+H,MAAMmb,kBAEf,IAAK,QAMD,YALA,EAAKnb,MAAM+B,QAAQ8N,KACf,EAAK7P,MAAMwH,MAAMrL,IACb,eACAyb,mBAAmB,EAAK5X,MAAMwH,MAAMxI,OAAOlG,OAGvD,IAAK,OAMD,YALA,EAAKkH,MAAM+B,QAAQ8N,KACf,EAAK7P,MAAMwH,MAAMrL,IACb,cACAyb,mBAAmB,EAAK5X,MAAMwH,MAAMxI,OAAOlG,OAGvD,IAAK,MAMD,YALA,EAAKkH,MAAM+B,QAAQ8N,KACf,EAAK7P,MAAMwH,MAAMrL,IACb,aACAyb,mBAAmB,EAAK5X,MAAMwH,MAAMxI,OAAOlG,OAGvD,IAAK,OAMD,YALA,EAAKkH,MAAM+B,QAAQ8N,KACf,EAAK7P,MAAMwH,MAAMrL,IACb,cACAyb,mBAAmB,EAAK5X,MAAMwH,MAAMxI,OAAOlG,OAGvD,QAOI,YANA,EAAKkH,MAAM8I,eACP,MACA,QACA,6CACA,a,EAUhB67C,YAAc,SAAC73C,GAAD,OAAc,SAACzD,GACzB,GAAI,EAAKrJ,MAAMwH,MAAMuF,MAAQ,EAAG,CAC5B,IAAKxV,IAAKuE,QAON,YANA,EAAKkE,MAAM8I,eACP,MACA,QACA,yDACA,WAIR,IAAKvR,IAAKgE,UAAUic,MAAMC,YAAc,EAAKd,WASzC,YARA,EAAKF,SAAS,CACVF,iBAAkB,WACd,EAAKE,SAAS,CACVF,iBAAkB,OAEtBzJ,EAASzD,MAMzByD,EAASzD,K,EAGbu7C,SAAW,WACP,EAAKnuC,SAAS,CAAElL,SAAS,IACzBiB,IAAIqL,IAAI,mBAAqB,EAAK7X,MAAMwH,MAAMrL,KACzCuQ,MAAK,SAACxV,GACH,EAAKyf,YAAa,EAClBlf,OAAOC,SAASoH,OAAO5H,EAASG,SAEnCsV,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,WAEJ,EAAKwJ,MAAM+B,QAAQ8N,KAAK,iBAE3BnD,MAAK,WACF,EAAK+J,SAAS,CAAElL,SAAS,Q,EAIrCs5C,QAAU,WACDttD,IAAKuE,QASVrE,OAAOsR,aAAa,EAAK/I,MAAMwH,MAAMrL,KARjC,EAAK6D,MAAM8I,eACP,MACA,QACA,yDACA,Y,2DAzDZ,WACInS,KAAKqJ,MAAMya,kBAAkB,M,oBA+DjC,WAAU,IAAD,OACGla,EAAY5J,KAAKqJ,MAAjBO,QACFua,EAAOvjB,IAAKgE,UACZstB,EAAUtxB,IAAKuE,QAErB,OACI,yBAAKsE,UAAWG,EAAQ0d,QACpB,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC9E,GAAA,EAAD,CACIrM,SAAUnW,KAAKiI,MAAM2X,iBACrBxJ,MAAOpW,KAAKqJ,MAAMwH,MAAMuF,MACxB5D,QAAS,kBAAM,EAAKsN,SAAS,CAAEF,iBAAkB,UAErD,kBAACrL,GAAA,EAAD,CACI5S,KAAM3B,KAAKiI,MAAM2J,WACjBf,MAAO7Q,KAAKqJ,MAAMwH,MAClB2B,QAAS,kBAAM,EAAKsN,SAAS,CAAElO,YAAY,OAE/C,yBAAKnI,UAAWG,EAAQukD,KACpB,kBAACR,GAAD,CAAS98C,MAAO7Q,KAAKqJ,MAAMwH,QAC3B,kBAACiL,EAAA,EAAD,MACA,yBAAKrS,UAAWG,EAAQwkD,YACpB,kBAAC5uB,GAAA,EAAD,CACI/1B,UAAWG,EAAQ2F,KACnBuwB,UAAQ,EACRthB,SAAUxe,KAAKqJ,MAAMwH,MAAMxI,OAAOlG,OAEtC,yBAAKsH,UAAWG,EAAQ4U,UACpB,kBAACZ,EAAA,EAAD,CAAYvO,MAAO,CAAE43B,UAAW,cAC3BjnC,KAAKqJ,MAAMwH,MAAMxI,OAAOlG,MAE7B,kBAACyb,EAAA,EAAD,CAAYnU,UAAWG,EAAQykD,UAC1BvkD,YAAa9J,KAAKqJ,MAAMwH,MAAMxI,OAAOrG,MAD1C,oHAKR,kBAAC8Z,EAAA,EAAD,MACA,yBAAKrS,UAAWG,EAAQ0kD,WACpB,yBAAK7kD,UAAWG,EAAQ2kD,YACpB,kBAACz1C,EAAA,EAAD,CACIvI,QAAS,kBACL,EAAKlH,MAAMmlD,WAAW,EAAKnlD,MAAMwH,MAAMrL,MAE3CsG,MAAM,aAJV,4BAQA,kBAACgN,EAAA,EAAD,CACIvI,QAAS,kBACL,EAAKuP,SAAS,CAAElO,YAAY,KAEhC9F,MAAM,aAJV,iBASJ,yBAAKrC,UAAWG,EAAQusC,SACpB,kBAACn5B,GAAA,EAAD,CAAYlR,MAAM,YAAYuD,MAAO,CAAEpG,QAAQ,QAAQ0wB,aAAa,QAASvpB,MAAM,eAAKgF,aAAW,YAAY7E,QAAS,kBAAM,EAAK29C,YACjI,kBAAC,KAAD,OAEDluD,KAAKqJ,MAAMwH,MAAMwK,SACd,kBAACvC,EAAA,EAAD,CACInD,QAAQ,WACR7J,MAAM,YACNyE,QAASvQ,KAAKguD,YAAYhuD,KAAKqb,SAC/BpF,SAAUjW,KAAKiI,MAAM2M,SAJzB,gBASJ,kBAACkE,EAAA,EAAD,CACInD,QAAQ,YACR7J,MAAM,YACNrC,UAAWG,EAAQ6kD,eACnBl+C,QAASvQ,KAAKguD,YAAYhuD,KAAKiuD,UAC/Bh4C,SAAUjW,KAAKiI,MAAM2M,SALzB,eAQK5U,KAAKqJ,MAAMwH,MAAMuF,MAAQ,KACpB8b,IAAY/N,EAAKtD,MAAMC,YACzB,KAAO9gB,KAAKqJ,MAAMwH,MAAMuF,MAAQ,gBACnCpW,KAAKqJ,MAAMwH,MAAMuF,MAAQ,GACtB8b,GACA/N,EAAKtD,MAAMC,WACX,4BAKpB,yBAAKrX,UAAWG,EAAQkjC,KACpB,kBAAC,KAAQkZ,OAAT,CACI32C,MAAO,CAAE+E,QAAQ,eAAeZ,SAAS,IAAIyB,SAAS,IAAIjM,MAAM,OAAOoK,OAAO,IAC9E6yC,OAAO,0BACPC,KAAK,aACLnuB,OAAO,W,GAhQGvU,aA6QnBkrC,GALIhrC,aAnSK,WACpB,MAAO,MAGgB,SAACzgB,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,KAEvD0Y,gBAAiB,WACbvhB,EAASuhB,gBAEbV,kBAAmB,SAACvb,GAChBtF,EAAS6gB,YAAkBvb,KAE/Bgc,eAAgB,SAAC9c,GACbxE,EAASshB,YAAe9c,KAE5B+mD,WAAY,SAAChpD,GACTvC,EAASoO,YAAiB7L,QAgRnBke,CAGjBnK,cA3Xa,SAACzQ,GAAD,cAAY,CACvBwe,QAAM,GACFte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPsL,UAAW,OACX+C,WAAY,OACZ5G,YAAa,SATf,cAWD3H,EAAMI,YAAYC,KAAK,MAAQ,CAC5BmL,UAAW,EACX+C,WAAY,EACZ5G,YAAa,IAdf,+BAgBc,UAhBd,wBAiBO,QAjBP,8BAkBa,UAlBb,2BAmBU,UAnBV,GAqBN+W,OAAQ,CACJC,aAAc,OAElBknC,aAAc,CACV3lD,MAAO,QACP0K,OAAQ,UAEZk7C,eAAgB,CACZ5lD,MAAO,QACP0K,OAAQ,SACRmX,UAAW,SACXvW,UAAW,QAEfwgB,MAAO,CACH7rB,QAASH,EAAM6K,QAAQ,IAE3BpE,KAAM,CACFkY,aAAc,MACdnT,UAAW,GAGf65C,KAAG,GACCnlD,MAAO,OACPiM,SAAU,IACV3L,gBAAiBR,EAAMe,QAAQqQ,WAAW4a,MAC1CrN,aAAc,GACd/N,UAAW,iCALZ,cAME5Q,EAAMI,YAAYC,KAAK,MAAQ,CAE5Bse,aAAc,EACdxS,SAAU,MATf,wBAWU,QAXV,8BAYgB,UAZhB,GAcHm5C,WAAY,CACRnlD,QAAS,GACTmL,QAAS,OACT8xB,KAAM,KAEV1nB,SAAU,CACNnH,WAAY,IAEhBg3C,SAAU,CACNviD,MAAOhD,EAAMe,QAAQ2N,KAAKvB,SAC1B5D,SAAU,IAEdi8C,UAAW,CACPl6C,QAAS,OACTnL,QAAS,YACTwwB,eAAgB,iBAEpBg1B,eAAgB,CACZp3C,WAAY,GAEhBy1B,IAAI,CACA9jC,MAAO,OACPoK,OAAQ,GACR25B,UAAW,GACXliB,UAAW,SACXvW,UAAW,aAySjBiF,CAAmBoK,YAAWoqC,M,sBChW1Bc,GAASn0C,IAAM+P,MAAK,kBAAM,mCAgC1BqkC,G,+MACF7mD,MAAQ,G,EAWR8mD,gBAAkB,WACTxuC,IAAWjc,YACZ,EAAK+E,MAAMya,kBAAkB,K,gEAXrC,WACIhjB,OAAOyK,UAAYvL,KAAKqJ,MAAMwH,Q,kCAGlC,WACI/P,OAAOyK,UAAY,KACnBvL,KAAKqJ,MAAMya,kBAAkB,M,oBASjC,WAAU,IAAD,OACGla,EAAY5J,KAAKqJ,MAAjBO,QACJolD,GAAe,EACb1pD,EAA6B,OAAxBtF,KAAKqJ,MAAMiJ,SAAoB,sBAAmB3R,EAE7D,OACI,yBAAK8I,UAAWG,EAAQ0d,QACpB,kBAAC2nC,GAAA,EAAD,CAAmBC,YAAalvD,KAAK+uD,iBACjC,kBAACha,EAAA,EAAD,CAAOtrC,UAAWG,EAAQulD,kBACtB,kBAAC,GAAD,CAAalrC,SAAO,EAACpT,MAAO7Q,KAAKqJ,MAAMwH,UAI9C7Q,KAAKqJ,MAAM7F,SAASqK,KAAI,SAACpI,GACtB,IACkC,cAA7BA,EAAMtD,KAAKssB,eACqB,eAA7BhpB,EAAMtD,KAAKssB,iBACdugC,EAGD,OADAA,GAAe,EACR,kBAACH,GAAD,CAAQh+C,MAAO,EAAKxH,MAAMwH,MAAOxJ,KAAM5B,OAGtD,kBAACkrB,GAAA,EAAD,CACIrrB,GAAIA,EACJ3D,KAA8B,OAAxB3B,KAAKqJ,MAAMiJ,SACjBA,SAAUtS,KAAKqJ,MAAMiJ,SACrBE,QAAS,kBAAM,EAAKnJ,MAAMkI,oBAAoB,OAC9C6e,aAAc,CACVne,SAAU,SACVC,WAAY,UAEhB0e,gBAAiB,CACb3e,SAAU,MACVC,WAAY,WAGhB,kBAAC0L,EAAA,EAAD,KACI,kBAAC+vC,GAAD,CACIjT,UAAQ,EACRloC,QAAS,kBAAM,EAAKnJ,MAAMkI,oBAAoB,OAC9CV,MAAO7Q,KAAKqJ,MAAMwH,UAI9B,yBAAKpH,UAAWG,EAAQkjC,KACpB,kBAAC,KAAQkZ,OAAT,CACI32C,MAAO,CAAE+E,QAAQ,eAAeZ,SAAS,IAAIyB,SAAS,IAAIjM,MAAM,OAAOoK,OAAO,IAC9E6yC,OAAO,0BACPC,KAAK,aACLnuB,OAAO,W,GApEKvU,aAiFrB4rC,GALM1rC,aA1GG,SAACzb,GACrB,MAAO,CACHqK,SAAUrK,EAAM7E,WAAWisD,yBAC3B7rD,SAAUyE,EAAMrE,SAASJ,aAIN,SAACP,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,KAEvD0Y,gBAAiB,WACbvhB,EAASuhB,gBAEbV,kBAAmB,SAACvb,GAChBtF,EAAS6gB,YAAkBvb,KAE/Bgc,eAAgB,SAAC9c,GACbxE,EAASshB,YAAe9c,KAE5B+mD,WAAY,SAAChpD,GACTvC,EAASoO,YAAiB7L,KAE9B+L,oBAAqB,SAAChL,GAClBtD,EAASsO,YAAoBhL,QAiFpBmd,CAGnBnK,cAjJa,SAACzQ,GAAD,YAAY,CACvBwe,QAAM,GACFte,MAAO,OACPsL,UAAW,GACXmiB,aAAc,GACdpf,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IALzB,cAMD7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SATf,cAWD3H,EAAMI,YAAYC,KAAK,MAAQ,CAC5BmL,UAAWxL,EAAM6K,QAAQ,GACzB0D,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,KAd7B,GAiBNw7C,iBAAiB,aACb/3B,UAAW,QACVtuB,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiK,OAAQ,UAIhB05B,IAAI,CACA9jC,MAAO,OACPoK,OAAQ,GACR25B,UAAW,GACXliB,UAAW,SACXvW,UAAW,aAmHjBiF,CAAmBoK,YAAWmrC,MCxJjB,SAASQ,KACpB,IAAMrsD,EAAW6M,cACTxK,EAAOgjB,cAAPhjB,GAF2B,EAITS,wBAASpF,GAJA,mBAI5BkQ,EAJ4B,KAIrB0+C,EAJqB,OAKLxpD,oBAAS,GALJ,mBAK5B6O,EAL4B,KAKnBC,EALmB,OAMH9O,mBAAS,IANN,mBAM5B+U,EAN4B,KAMlB00C,EANkB,KAQ7BjnC,EAAcvY,uBAChB,SAACI,GAAD,OAAWnN,EAASulB,aAAepY,MACnC,CAACnN,IAGC6R,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IA+CL,OA5CAoD,qBAAU,WACFwK,EACIA,EAAM4+C,QACNlnC,EAAY1X,EAAMqC,QAAQC,KAAO,kCAChB,KAAb2H,GACAhG,EAAe,MAAO,QAAS,iCAAS,YAG5CyT,EAAY1X,EAAMxI,OAAOlG,MAG7BomB,MAGL,CAAC1X,EAAO0X,EAAazT,IAExBzO,qBAAU,WACN,OAAO,WACHkiB,OAGL,IAEHliB,qBAAU,WACNwO,GAAW,GACX,IAAI66C,EAAe,GACF,KAAb50C,IACA40C,EAAe,aAAe50C,GAElCjF,IAAImJ,IAAI,eAAiB1Z,EAAKoqD,GACzB35C,MAAK,SAACxV,GACHgvD,EAAShvD,EAASG,MAClBmU,GAAW,MAEdmB,OAAM,SAACjW,GACJ8U,GAAW,GACQ,MAAf9U,EAAMD,KACNyvD,EAAS,MAETz6C,EAAe,MAAO,QAAS/U,EAAMF,QAAS,cAG3D,CAACyF,EAAIwV,EAAUhG,IAGd,kBAAC,WAAD,CAAUuW,SAAU,kBAAC,EAAD,YACL1qB,IAAVkQ,GAAuB,kBAAC,EAAD,MACb,OAAVA,GAAkB,kBAACm8B,EAAD,CAAQ/rC,IAAK,2DAC/B4P,GAASA,EAAM4+C,QACZ,kBAAC,GAAD,CACI76C,QAASA,EACTy4C,YAAamC,EACb3+C,MAAOA,IAGdA,IAAUA,EAAM4+C,SAAW5+C,EAAMwN,QAC9B,kBAAC,GAAD,CAAYxN,MAAOA,IAEtBA,IAAUA,EAAM4+C,QAAU5+C,EAAMwN,QAC7B,kBAAC,GAAD,CAAcxN,MAAOA,KCjFrC,IAAMjI,GAAYC,aAAW,iBAAO,CAChCye,OAAQ,CACJte,MAAO,OACPsL,UAAW,SAGfugB,UAAW,CACPpb,OAAQ,OACRzQ,MAAO,OACPoK,OAAQ,qBACRqjB,cAAe,OAQR,SAASk5B,KAAa,IAAD,EACV5pD,mBAAS,IADC,mBACzBgF,EADyB,KACpB6kD,EADoB,KAE1B9nC,EAAOC,cACPhnB,EAAWmnB,cACXC,EAPC,IAAIC,gBAAgBF,cAAcG,QAQjC/iB,EAAOgjB,cAAPhjB,GAEFrC,EAAW6M,cAEXyY,EAAcvY,uBAChB,SAACI,GAAD,OAAWnN,EAASulB,aAAepY,MACnC,CAACnN,IAGC6R,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGLoD,qBAAU,WACN,GAAKka,IAAWrc,YAAYnD,EAASyf,UAIjC+H,EAAYJ,EAAMnJ,IAAI,aAJsB,CAC5C,IAAM/a,EAAOkkB,EAAMnJ,IAAI,KAAKhS,MAAM,KAClCub,EAAYtkB,EAAKA,EAAK8D,OAAS,OAKpC,CAAC+f,EAAKW,OAAO,GAAI1nB,IAEpBsF,qBAAU,WACN,IAAIqiB,EAAa,aAAeP,EAAMnJ,IAAI,MACtCuB,IAAWrc,YAAYnD,EAASyf,YAChCkI,EAAa,cAAgBpjB,EACG,KAA5B6iB,EAAMnJ,IAAI,gBACV0J,GACI,SAAWzH,mBAAmBkH,EAAMnJ,IAAI,iBAGpDnJ,IAAImJ,IAAI0J,GACH3S,MAAK,SAACxV,GACHqvD,EAAOrvD,EAASG,SAEnBsV,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,cAGvD,CAACioB,EAAKW,OAAO,GAAI1nB,IAEpB,IAAM6I,EAAUhB,KAChB,OACI,yBAAKa,UAAWG,EAAQ0d,QACX,KAARvc,GACG,4BAAQqF,MAAO,KAAM3G,UAAWG,EAAQirB,UAAWxhB,IAAKtI,K,cCkClE8kD,G,+MACF5nD,MAAQ,CACJvH,KAAM,CACFovD,MAAO,EACP/1B,KAAM,EACNC,MAAO,EACP+1B,KAAM,EACNC,GAAI,EACJC,GAAI,EACJC,GAAI,GAERC,MAAO,I,EAGXj2B,WAAY,E,wDAEZ,WAAqB,IAAD,OACZl6B,KAAKk6B,YACLl6B,KAAKk6B,WAAal6B,KAAKk6B,UACvBrkB,IAAImJ,IAAI,aACHjJ,MAAK,SAACxV,GACH,IAAI6vD,EACAC,EACAC,EAAQ,EACR/vD,EAASG,KAAKq5B,KAAOx5B,EAASG,KAAKiO,MAEnC0hD,EAAQ,EACRC,EAAQ,GAFRF,EAAQ7vD,EAASG,KAAKq5B,KAAOx5B,EAASG,KAAKs5B,QAQ3Cs2B,EAAQ,GAJRF,EAAQ7vD,EAASG,KAAKq5B,KAAOx5B,EAASG,KAAKs5B,QAC3Cq2B,GACK9vD,EAASG,KAAKiO,KAAOpO,EAASG,KAAKq5B,MACpCx5B,EAASG,KAAKs5B,OAItB,EAAKla,SAAS,CACVpf,KAAM,CACFq5B,KAAMx5B,EAASG,KAAKq5B,KACpBg2B,KAAMxvD,EAASG,KAAKqvD,KACpB/1B,MAAOz5B,EAASG,KAAKs5B,MACrB81B,MAAOvvD,EAASG,KAAKiO,KACrBqhD,GAAII,EAAQ,EAAI,IAAc,IAARA,EACtBH,GAAIG,EAAQ,EAAI,EAAY,IAARC,EACpBH,GAAIE,EAAQ,EAAI,EAAY,IAARE,GAExBH,MAAO5vD,EAASG,KAAKyvD,WAG5Bn6C,OAAM,SAACjW,GACJ,EAAK+f,SAAS,CACVlL,SAAS,IAEb,EAAKvL,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,e,oBAKpB,WAAU,IAAD,OACG+J,EAAY5J,KAAKqJ,MAAjBO,QAER,OACI,yBAAKH,UAAWG,EAAQ0d,QACpB,kBAAC1J,EAAA,EAAD,CAAY9R,MAAM,gBAAgB6J,QAAQ,MAA1C,4BAGA,kBAAC4sC,GAAA,EAAD,CAAM1tB,WAAS,EAACprB,UAAWG,EAAQ28C,KAAM5yC,QAAS,GAC9C,kBAAC4uC,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,GAAIE,GAAI,GACnB,kBAAC3N,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAClX,EAAA,EAAD,CAAYnU,UAAWG,EAAQlJ,MAC1BoJ,YAAa9J,KAAKiI,MAAMvH,KAAKovD,QAElC,kBAAClyC,EAAA,EAAD,qDAGR,kBAAC2kC,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,GAAIE,GAAI,GACnB,kBAAC3N,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAClX,EAAA,EAAD,CAAYnU,UAAWG,EAAQlJ,MAC1BoJ,YAAa9J,KAAKiI,MAAMvH,KAAKqvD,OAElC,kBAACnyC,EAAA,EAAD,6EAGR,kBAAC2kC,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,GAAIE,GAAI,GACnB,kBAAC3N,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAClX,EAAA,EAAD,CAAYnU,UAAWG,EAAQlJ,MAC1BoJ,YAAa9J,KAAKiI,MAAMvH,KAAKq5B,OAElC,kBAACnc,EAAA,EAAD,yCAGR,kBAAC2kC,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,GAAIE,GAAI,GACnB,kBAAC3N,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAClX,EAAA,EAAD,CAAYnU,UAAWG,EAAQlJ,MAC1BoJ,YAAa9J,KAAKiI,MAAMvH,KAAKs5B,QAElC,kBAACpc,EAAA,EAAD,6BAGR,kBAAC2kC,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,IACX,kBAACzN,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,yBAAKrrB,UAAWG,EAAQ2mD,QACpB,yBACI9mD,UAAWG,EAAQomD,GACnB3gD,MAAO,CAAErG,MAAOhJ,KAAKiI,MAAMvH,KAAKsvD,GAAK,OAEzC,yBACIvmD,UAAWG,EAAQqmD,GACnB5gD,MAAO,CAAErG,MAAOhJ,KAAKiI,MAAMvH,KAAKuvD,GAAK,OAEzC,yBACIxmD,UAAWG,EAAQsmD,GACnB7gD,MAAO,CAAErG,MAAOhJ,KAAKiI,MAAMvH,KAAKwvD,GAAK,QAG7C,yBAAK7gD,MAAO,CAAEwb,UAAW,UACrB,0BACIphB,UAAW6G,KACP1G,EAAQ4mD,SACR5mD,EAAQ6mD,cAJpB,2BAQI,0BACIhnD,UAAW6G,KACP1G,EAAQ8mD,SACR9mD,EAAQ6mD,cAXpB,6CAeI,0BACIhnD,UAAW6G,KACP1G,EAAQ+mD,SACR/mD,EAAQ6mD,cAlBpB,yEA0BZ,kBAAC7yC,EAAA,EAAD,CACI9R,MAAM,gBACN6J,QAAQ,KACRlM,UAAWG,EAAQwG,OAHvB,kCAOA,kBAAC2kC,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAChc,EAAA,EAAD,CACInD,QAAQ,YACR7J,MAAM,YACNrC,UAAWG,EAAQsS,OACnB3L,QAAS,kBAAM,EAAKlH,MAAM+B,QAAQ8N,KAAK,UAJ3C,kCAQA,kBAACJ,EAAA,EAAD,CACInD,QAAQ,YACRlM,UAAWG,EAAQsS,OACnB3L,QAAS,kBAAM,EAAKlH,MAAM+B,QAAQ8N,KAAK,gBAH3C,8CAOA,yBAAKzP,UAAWG,EAAQi4C,OACpB,kBAACD,GAAA,EAAD,KACI,kBAACE,GAAA,EAAD,KACI,kBAACrE,GAAA,EAAD,KACI,kBAACQ,GAAA,EAAD,CAAW2S,MAAM,QAAjB,kCAGA,kBAAC3S,GAAA,EAAD,CAAW2S,MAAM,UAAjB,gBACA,kBAAC3S,GAAA,EAAD,CAAW2S,MAAM,UAAjB,4BAGA,kBAAC3S,GAAA,EAAD,CAAW2S,MAAM,UAAjB,sBACA,kBAAC3S,GAAA,EAAD,CAAW2S,MAAM,UAAjB,8BAKR,kBAAC1O,GAAA,EAAD,KACKliD,KAAKiI,MAAMkoD,MAAMtiD,KAAI,SAACg7C,EAAKvjD,GAAN,OAClB,kBAACm4C,GAAA,EAAD,CAAUj4C,IAAKF,GACX,kBAAC24C,GAAA,EAAD,CAAW9oC,UAAU,KAAKgpC,MAAM,OAC3B0K,EAAI1mD,MAET,kBAAC87C,GAAA,EAAD,CAAW2S,MAAM,UACZ9mD,YAAa++C,EAAI7mD,OAEtB,kBAACi8C,GAAA,EAAD,CAAW2S,MAAM,UACZ/4B,aACGgxB,EAAIgI,cACJ,uBAGR,kBAAC5S,GAAA,EAAD,CAAW2S,MAAM,UACZ3mD,KAAKwgD,MAAM5B,EAAIiI,WAAa,OADjC,UAIA,kBAAC7S,GAAA,EAAD,CAAW2S,MAAM,UACZ/4B,aACGgxB,EAAIkI,gBACJ,oC,GA/MnBvtC,aAkOdwtC,GALDttC,aAzOU,WACpB,MAAO,MAGgB,SAACzgB,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,QAkOjD4X,CAGZnK,cA5Ta,SAACzQ,GAAD,YAAY,CACvBwe,QAAM,GACFte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,QAVZ,GAaN81C,KAAM,CACFjyC,UAAW,QAEfwgB,MAAO,CACH7rB,QAASH,EAAM6K,QAAQ,GACvB7H,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9BnT,KAAM,CACF2R,SAAU,OACVvG,MAAOhD,EAAMe,QAAQwS,QAAQsT,MAEjC4gC,OAAQ,CACJn9C,OAAQ,QAEZ48C,GAAI,CACA1mD,gBAAiB,UACjBusB,WAAY,iBACZziB,OAAQ,OACRf,SAAU,OACV4+C,WAAY,OACZC,MAAO,QAEXjB,GAAI,CACA3mD,gBAAiB,UACjBusB,WAAY,iBACZziB,OAAQ,OACRf,SAAU,OACV4+C,WAAY,OACZC,MAAO,QAEXhB,GAAI,CACA5mD,gBAAiB,UACjBusB,WAAY,iBACZziB,OAAQ,OACRf,SAAU,OACV4+C,WAAY,OACZC,MAAO,QAEXT,WAAY,CACRznD,MAAO,OACPoK,OAAQ,OACRgB,QAAS,eACT1E,SAAU,WACV2H,WAAY,OACZ5G,YAAa,OAEjB+/C,SAAU,CACNlnD,gBAAiB,WAErBonD,SAAU,CACNpnD,gBAAiB,WAErBqnD,SAAU,CACNrnD,gBAAiB,WAErB8G,MAAO,CACHkE,UAAW,OACXmiB,aAAc,QAElBva,OAAQ,CACJxI,OAAQ5K,EAAM6K,QAAQ,IAE1BkuC,MAAO,CACHn6B,UAAW,WA+OjBnO,CAAmBoK,YAAWksC,M,0CCtS1BsB,G,gKACF,WAAU,IAAD,EACqBnxD,KAAKqJ,MAAvBO,EADH,EACGA,QAASmmD,EADZ,EACYA,KACjB,OACI,kBAAC3V,GAAA,EAAD,CACI3wC,UAAW6G,KAAW1G,EAAQirB,UAAT,eAChBjrB,EAAQ0sC,OAASt2C,KAAKqJ,MAAMitC,SAEjC/lC,QAASvQ,KAAKqJ,MAAMsP,UAEpB,yBAAKlP,UAAWG,EAAQwnD,SACpB,kBAACxzC,EAAA,EAAD,CACIjI,QAAQ,YACRlM,UAAWG,EAAQynD,UAElBtB,EAAK5tD,MAEM,IAAf4tD,EAAK35C,OACF,kBAACwH,EAAA,EAAD,CAAYnU,UAAWG,EAAQ0nD,OAA/B,UACOvB,EAAKuB,MAAQ,KAAKjnD,QAAQ,IAGrB,IAAf0lD,EAAK35C,OACF,kBAACwH,EAAA,EAAD,CAAYnU,UAAWG,EAAQ2nD,gBAA/B,UACOxB,EAAKuB,MAAQ,KAAKjnD,QAAQ,GADjC,MACwC0lD,EAAK35C,MAAO,IADpD,iBAMR,yBAAK3M,UAAWG,EAAQ4nD,WACpB,kBAAC5zC,EAAA,EAAD,gCACS3T,KAAK8T,KAAKgyC,EAAKj4B,KAAO,OAD/B,gB,GA9BKtU,aAuCVjK,iBAhFA,SAACzQ,GAAD,MAAY,CACvB+rB,UAAW,CACPnb,UAAW,oBACX+N,aAAc,MACdoO,WAAY,iBACZ7sB,MAAO,OACPoL,QAAS,SAEbkiC,OAAQ,CACJ58B,UAAW,aAAe5Q,EAAMe,QAAQwS,QAAQsT,MAEpDyhC,QAAS,CACLvmC,UAAW,SACX5hB,QAAS,iBACT0Q,aAAc,oBACd7N,MAAOhD,EAAMe,QAAQ2N,KAAKmY,KAC1B3mB,MAAO,QAEXsoD,MAAO,CACHj/C,SAAU,OACV6oC,WAAY,MACZ+V,WAAY,OACZnlD,MAAOhD,EAAMe,QAAQwS,QAAQsT,MAEjC4hC,eAAgB,CACZl/C,SAAU,OACV6oC,WAAY,MACZ+V,WAAY,OACZnlD,MAAOhD,EAAMe,QAAQwS,QAAQsT,MAEjC0hC,SAAU,CACN/8C,UAAW,MACXmiB,aAAc,OAElB+6B,UAAW,CACP1lD,MAAOhD,EAAMe,QAAQ2N,KAAKmY,KAC1B9E,UAAW,SACX5hB,QAAS,UA2CFsQ,CAAmB43C,I,iKCiD5BM,G,oDAEF,WAAYpoD,GAAQ,IAAD,wBACf,cAAMA,IAFVqoD,WAAa,KACM,EA2DnBC,cAAgB,WACZ,EAAK7xC,SAAS,CACVlL,SAAS,IAEbiB,IAAIC,KAAK,eAAiB,EAAK7N,MAAM2pD,YAChC77C,MAAK,WACF,EAAK+J,SAAS,CACVlL,SAAS,EACTi9C,OAAQ,eAGf77C,OAAM,SAACjW,GACJ,EAAK+f,SAAS,CACVlL,SAAS,IAEb,EAAKvL,MAAM8I,eACP,MACA,QACA,qBAAQpS,EAAMF,QACd,aA9EG,EAmFnBiyD,SAAW,WACuB,KAA1B,EAAK7pD,MAAM2pD,YASf,EAAK9xC,SAAS,CACVlL,SAAS,IAEbiB,IAAImJ,IAAI,eAAiB,EAAK/W,MAAM2pD,YAC/B77C,MAAK,SAACxV,GACH,EAAKuf,SAAS,CACVlL,SAAS,EACTi9C,OAAQ,SACRE,WAAYxxD,EAASG,UAG5BsV,OAAM,SAACjW,GACJ,EAAK+f,SAAS,CACVlL,SAAS,IAEb,EAAKvL,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,aA3BR,EAAKwJ,MAAM8I,eACP,MACA,QACA,uCACA,YAzFO,EAqHnB6/C,QAAU,SAACC,GACU,SAAbA,IAAoD,IAA7B,EAAKhqD,MAAMiqD,cAStC,EAAKpyC,SAAS,CACVlL,SAAS,IAEbiB,IAAIC,KAAK,aAAc,CACnB5N,OAAQ+pD,EACRxwD,OAAQ,EAAKwG,MAAMkqD,cACnB7sD,GACiB,UAAb2sD,EACM,EACa,SAAbA,EACA,EAAKhqD,MAAMkoD,MAAM,EAAKloD,MAAMiqD,cAAc5sD,GAC1C,EAAK2C,MAAMmqD,OAAO,EAAKnqD,MAAMoqD,eAAe/sD,GACtDgtD,IACiB,UAAbL,EACM3kD,SAAS,EAAKrF,MAAMsqD,UACpBjlD,SAAS,EAAKrF,MAAMuqD,SAE7Bz8C,MAAK,SAACxV,GACEA,EAASG,KAAK+xD,QAOflyD,EAASG,KAAKgyD,UACd,EAAK5yC,SAAS,CACVlL,SAAS,EACTi9C,OAAQ,KACRY,QAAS,CACLnxD,KAAM,EAAK2G,MAAMkqD,cACjBjoC,IAAK3pB,EAASG,KAAKgyD,WAG3B,EAAKhB,WAAa5wD,OAAO6xD,aAAY,WACjC,EAAKC,WAAWryD,EAASG,KAAK4E,MAC/B,MAjBH,EAAKwa,SAAS,CACVlL,SAAS,EACTi9C,OAAQ,eAkBnB77C,OAAM,SAACjW,GACJ,EAAK+f,SAAS,CACVlL,SAAS,IAEb,EAAKvL,MAAM8I,eACP,MACA,QACA,qBAAQpS,EAAMF,QACd,aAvDR,EAAKwJ,MAAM8I,eACP,MACA,QACA,yDACA,YA3HO,EAmLnBygD,WAAa,SAACttD,GACVuQ,IAAImJ,IAAI,cAAgB1Z,GACnByQ,MAAK,SAACxV,GACmB,IAAlBA,EAASG,OACT,EAAKof,SAAS,CACV+xC,OAAQ,YAEZ/wD,OAAO+xD,cAAc,EAAKnB,gBAGjC17C,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACA,qBAAQpS,EAAMF,QACd,SAEJiB,OAAO+xD,cAAc,EAAKnB,gBApMnB,EAwMnBl2C,aAAe,SAAC9I,EAAOjN,GACnB,EAAKqa,SAAS,CACVqyC,cACiC,UAA7B,EAAKlqD,MAAMkqD,cACL,KACA,EAAKlqD,MAAMkqD,gBAEzB,EAAKryC,SAAS,CAAEra,WA/MD,EAkNnBqtD,kBAAoB,SAACxrD,GACjB,EAAKwY,SAAS,CAAEra,MAAO6B,KAnNR,EAsNnB6oB,YAAc,WACVrvB,OAAO+xD,cAAc,EAAKnB,YAC1B,EAAK5xC,SAAS,CACV+xC,OAAQ,QAzNG,EA6NnBkB,iBAAmB,SAAC5wD,GAAD,OAAU,SAACuQ,GAC1B,EAAKoN,SAAL,eAAiB3d,EAAOuQ,EAAMtK,OAAO3C,UA9NtB,EAiOnButD,WAAa,SAAC1tD,GACV,EAAKwa,SAAS,CACVoyC,aAAc5sD,EACd6sD,cACiC,UAA7B,EAAKlqD,MAAMkqD,cACL,KACA,EAAKlqD,MAAMkqD,iBAvOV,EA2OnBc,YAAc,SAAC3tD,GACX,EAAKwa,SAAS,CACVuyC,cAAe/sD,EACfusD,OAAQ,WACRM,cACiC,UAA7B,EAAKlqD,MAAMkqD,cACL,KACA,EAAKlqD,MAAMkqD,iBAlPV,EAsPnBe,oBAAsB,SAACxgD,GACnB,EAAKoN,SAAS,CACVqyC,cAAez/C,EAAMtK,OAAO3C,SArPhC,IACM6B,EADM,IAAI8gB,gBAAgB,EAAK/e,MAAMtI,SAASsnB,QAClCrJ,IAAI,OAJP,OAMf,EAAK/W,MAAQ,CACTxC,MAAO6B,EAAQgG,SAAShG,GAAS,EACjC4qD,cAAe,EACfG,eAAgB,EAChBG,MAAO,EACPD,SAAU,EACV39C,SAAS,EACTg9C,WAAY,GACZC,OAAQ,KACRY,QAAS,CACLnxD,KAAM,GACN4oB,IAAK,IAETipC,WAAY,EACZpB,WAAY,KACZ5B,MAAO,GACPiC,OAAQ,GACRgB,QAAQ,EACRC,OAAO,EACPC,QAAQ,EACRnB,cAAe,MA1BJ,E,yDA8BnB,WACIrxD,OAAO+xD,cAAc7yD,KAAK0xD,c,+BAG9B,WAAqB,IAAD,OAChB77C,IAAImJ,IAAI,gBACHjJ,MAAK,SAACxV,GACH,EAAKuf,SAAS,CACVqwC,MAAO5vD,EAASG,KAAKyvD,MACrBiC,OAAQ7xD,EAASG,KAAK0xD,OACtBgB,OAAQ7yD,EAASG,KAAK0yD,OACtBC,MAAO9yD,EAASG,KAAK2yD,MACrBC,OAAQ/yD,EAASG,KAAK4yD,OACtBH,WAAY5yD,EAASG,KAAK6yD,iBAGjCv9C,OAAM,SAACjW,GACJ,EAAK+f,SAAS,CACVlL,SAAS,IAEb,EAAKvL,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,c,oBAsMhB,WAAU,IAAD,OACG+J,EAAY5J,KAAKqJ,MAAjBO,QAEF4pD,EACF,6BACI,kBAACC,GAAA,EAAD,mDACA,kBAACC,GAAA,EAAD,CACIvxD,KAAK,UACLiT,aAAW,UACX3P,MAAOzF,KAAKiI,MAAMkqD,cAClB98C,SAAUrV,KAAKkzD,oBACfrK,KAAG,IAED7oD,KAAKiI,MAAMmrD,SACRpzD,KAAKiI,MAAMorD,OACS,IAArBrzD,KAAKiI,MAAMxC,SACmB,IAA7BzF,KAAKiI,MAAMiqD,cAEJ,IADJlyD,KAAKiI,MAAMkoD,MAAMnwD,KAAKiI,MAAMiqD,cAAc97C,QAEzB,IAArBpW,KAAKiI,MAAMxC,SACoB,IAA9BzF,KAAKiI,MAAMoqD,eAEO,IADfryD,KAAKiI,MAAMmqD,OAAOpyD,KAAKiI,MAAMoqD,eACxBj8C,QACL,kBAACwH,EAAA,EAAD,mDAEP5d,KAAKiI,MAAMmrD,QACR,kBAACtK,GAAA,EAAD,CACIrjD,MAAO,SACP+P,QAAS,kBAACm+C,GAAA,EAAD,MACTl+C,MAAO,mCAGdzV,KAAKiI,MAAMorD,OACR,kBAACvK,GAAA,EAAD,CACIrjD,MAAO,QACP+P,QAAS,kBAACm+C,GAAA,EAAD,MACTl+C,MAAO,6BAGdzV,KAAKiI,MAAMqrD,QACR,kBAACxK,GAAA,EAAD,CACIrjD,MAAO,SACP+P,QAAS,kBAACm+C,GAAA,EAAD,MACTl+C,MAAO,6BAGO,IAArBzV,KAAKiI,MAAMxC,QACqB,IAA7BzF,KAAKiI,MAAMiqD,cAEP,IADJlyD,KAAKiI,MAAMkoD,MAAMnwD,KAAKiI,MAAMiqD,cAAc97C,OAEtC,kBAAC0yC,GAAA,EAAD,CACIrjD,MAAO,QACP+P,QAAS,kBAACm+C,GAAA,EAAD,MACTl+C,MAAO,6BAGG,IAArBzV,KAAKiI,MAAMxC,QACsB,IAA9BzF,KAAKiI,MAAMoqD,eAEP,IADJryD,KAAKiI,MAAMmqD,OAAOpyD,KAAKiI,MAAMoqD,eAAej8C,OAExC,kBAAC0yC,GAAA,EAAD,CACIrjD,MAAO,QACP+P,QAAS,kBAACm+C,GAAA,EAAD,MACTl+C,MAAO,8BAIvB,6BAC0B,IAArBzV,KAAKiI,MAAMxC,OACR,kBAACguD,GAAA,EAAD,mDAEkB,IAArBzzD,KAAKiI,MAAMxC,OACR,kBAACguD,GAAA,EAAD,oDAGc,IAArBzzD,KAAKiI,MAAMxC,OACR,kBAACuY,GAAA,EAAD,CACIvU,UAAWG,EAAQgqD,UACnBtyD,KAAK,SACLuc,WAAY,CACRC,IAAK,IACLmH,IAAK,KACL4uC,KAAM,KAEVpuD,MAAOzF,KAAKiI,MAAMuqD,MAClBn9C,SAAUrV,KAAK+yD,iBAAiB,WAGlB,IAArB/yD,KAAKiI,MAAMxC,OACR,kBAACuY,GAAA,EAAD,CACIvU,UAAWG,EAAQgqD,UACnBtyD,KAAK,SACLuc,WAAY,CACRC,IAAK,IACL+1C,KAAM,IACN5uC,IAAK,WAETxf,MAAOzF,KAAKiI,MAAMsqD,SAClBl9C,SAAUrV,KAAK+yD,iBAAiB,eAMhD,OACI,yBAAKtpD,UAAWG,EAAQ0d,QACpB,kBAAC1J,EAAA,EAAD,CACI9R,MAAM,gBACNrC,UAAWG,EAAQwG,MACnBuF,QAAQ,MAHZ,gBAOA,kBAACqwB,GAAA,EAAD,CAAQt2B,SAAS,UACb,kBAACokD,GAAA,EAAD,CACIruD,MAAOzF,KAAKiI,MAAMxC,MAClB4P,SAAUrV,KAAKwb,aACf7F,QAAQ,aAER,kBAACo+C,GAAA,EAAD,CAAKt+C,MAAM,qBAAMlG,KAAM,kBAAC,KAAD,QACvB,kBAACwkD,GAAA,EAAD,CAAKt+C,MAAM,eAAKlG,KAAM,kBAAC,KAAD,QACrBvP,KAAKiI,MAAMkrD,WAAa,GACrB,kBAACY,GAAA,EAAD,CACIt+C,MAAM,2BACNlG,KAAM,kBAACykD,GAAA,EAAD,QAGd,kBAACD,GAAA,EAAD,CAAKt+C,MAAM,iCAAQlG,KAAM,kBAAC,KAAD,UAGX,IAArBvP,KAAKiI,MAAMxC,OACR,kBAACsvC,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,MAAOoE,QAAQ,GACrC,kBAACqpB,GAAA,EAAD,CAAM1tB,WAAS,EAAClhB,QAAS,GACpB3T,KAAKiI,MAAMkoD,MAAMtiD,KAAI,SAACpI,EAAOH,GAAR,OAClB,kBAACi9C,GAAA,EAAD,CAAMlc,MAAI,EAACmc,GAAI,GAAIC,GAAI,EAAGj9C,IAAKF,GAC3B,kBAAC,GAAD,CACIyqD,KAAMtqD,EACNkT,SAAU,kBAAM,EAAKq6C,WAAW1tD,IAChCgxC,OAAQ,EAAKruC,MAAMiqD,eAAiB5sD,SAKpD,kBAACi9C,GAAA,EAAD,CACI1tB,WAAS,EACTprB,UAAWG,EAAQqqD,UACnBtgD,QAAS,GAET,kBAAC4uC,GAAA,EAAD,CAAMG,GAAI,EAAGF,GAAI,IACZgR,GAEL,kBAACjR,GAAA,EAAD,CAAMG,GAAI,EAAGF,GAAI,IACb,yBAAK/4C,UAAWG,EAAQ1B,QACpB,8DAGQ,UADHlI,KAAKiI,MAAMkqD,eAER,0BAAM1oD,UAAWG,EAAQsqD,WAAzB,UAGS,IADJl0D,KAAKiI,MAAMiqD,cACF,qCAEL,IADJlyD,KAAKiI,MAAMiqD,cAERlyD,KAAKiI,MAAMuqD,OAAS,IACpBxyD,KAAKiI,MAAMuqD,OAAS,GAChB,+BAESxyD,KAAKiI,MACDkoD,MACDnwD,KAAKiI,MACAiqD,cACPZ,MACE,IACJtxD,KAAKiI,MAAMuqD,OACbnoD,QAAQ,KAM1B,UADHrK,KAAKiI,MAAMkqD,eAER,0BAAM1oD,UAAWG,EAAQsqD,YAEhB,IADJl0D,KAAKiI,MAAMiqD,cACF,qCAEL,IADJlyD,KAAKiI,MAAMiqD,cAERlyD,KAAKiI,MAAMuqD,OAAS,IACpBxyD,KAAKiI,MAAMuqD,OAAS,GAChB,8BACKxyD,KAAKiI,MAAMkoD,MACRnwD,KAAKiI,MACAiqD,cACP97C,MACEpW,KAAKiI,MACAuqD,MAAO,IANpB,kBAapB,6BACI,kBAAC15C,EAAA,EAAD,CACI9W,KAAK,QACL2T,QAAQ,YACR7J,MAAM,YACNrC,UAAWG,EAAQsS,OACnBjG,SACIjW,KAAKiI,MAAM2M,SAEP,OADJ5U,KAAKiI,MAAMkqD,cAGf5hD,QAAS,kBAAM,EAAKyhD,QAAQ,UAE5B,kBAAC,KAAD,MAZJ,kCAoBF,IAArBhyD,KAAKiI,MAAMxC,OACR,kBAACsvC,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,MAAOoE,QAAQ,GACrC,kBAACqpB,GAAA,EAAD,CAAM1tB,WAAS,EAAClhB,QAAS,EAAGO,WAAW,YAClClU,KAAKiI,MAAMmqD,OAAOvkD,KAAI,SAACsmD,EAAM7uD,GAAP,OAEnB,kBAACi9C,GAAA,EAAD,CAAMlc,MAAI,EAAC7gC,IAAKF,EAAIk9C,GAAI,GAAIE,GAAI,EAAGD,GAAI,GACnC,kBAAC0E,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CACIh3C,MAAO+jD,EAAKhyD,KACZklD,UACI8M,EAAKC,UAAY,eAAO,KAE5BC,qBAAsB,CAClBzD,MAAO,UAEX0D,yBAA0B,CACtB1D,MAAO,UAEX1oD,OACIisD,EAAKC,UACD,kBAAC,KAAD,MACA,KAER3qD,UAAWG,EAAQ2qD,aAEvB,kBAAC/I,GAAA,EAAD,KACI,yBACI/hD,UAAWG,EAAQ4qD,aAEnB,kBAAC52C,EAAA,EAAD,CACIzI,UAAU,KACVQ,QAAQ,KACR7J,MAAM,eAHV,SAKMqoD,EAAK7C,MAAQ,KAEnB,kBAAC1zC,EAAA,EAAD,CACIjI,QAAQ,KACR7J,MAAM,iBAFV,IAKK7B,KAAK8T,KACFo2C,EAAKr8B,KAAO,OANpB,WAWHq8B,EAAKz/C,IAAI7G,KAAI,SAAC4mD,GAAD,OACV,kBAAC72C,EAAA,EAAD,CACIjI,QAAQ,YACRi7C,MAAM,SACNprD,IAAKivD,GAEJA,OAIb,kBAACnM,GAAA,EAAD,CACI7+C,UAAWG,EAAQ8qD,aAEnB,kBAAC57C,EAAA,EAAD,CACI5D,WAAS,EACTS,QACIw+C,EAAKC,UACC,YACA,WAEVtoD,MAAM,UACNyE,QAAS,kBACL,EAAK0iD,YAAY3tD,KATzB,oCAsBN,IAArBtF,KAAKiI,MAAMxC,OACR,kBAACsvC,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,MAAOoE,QAAQ,GACrC,kBAACqpB,GAAA,EAAD,CACI1tB,WAAS,EACTprB,UAAWG,EAAQqqD,UACnBtgD,QAAS,GAET,kBAAC4uC,GAAA,EAAD,CAAMG,GAAI,EAAGF,GAAI,IACZgR,GAEL,kBAACjR,GAAA,EAAD,CAAMG,GAAI,EAAGF,GAAI,IACb,yBAAK/4C,UAAWG,EAAQ1B,QACpB,8DAGQ,UADHlI,KAAKiI,MAAMkqD,eAER,0BAAM1oD,UAAWG,EAAQsqD,WAAzB,SAEI,+BAESl0D,KAAKiI,MAAMkrD,WACR,IACJnzD,KAAKiI,MAAMsqD,UACbloD,QAAQ,MAK1B,6BACI,kBAACyO,EAAA,EAAD,CACI9W,KAAK,QACL2T,QAAQ,YACR7J,MAAM,YACNrC,UAAWG,EAAQsS,OACnBjG,SACIjW,KAAKiI,MAAM2M,SAEP,OADJ5U,KAAKiI,MAAMkqD,cAGf5hD,QAAS,kBACL,EAAKyhD,QAAQ,WAGjB,kBAAC,KAAD,MAdJ,kCAuBF,IAArBhyD,KAAKiI,MAAMxC,OACR,kBAACsvC,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,MAAOoE,QAAQ,GACrC,yBAAKzvB,UAAWG,EAAQ+qD,iBACpB,kBAAC32C,GAAA,EAAD,CACI1Y,GAAG,gBACHmQ,MAAM,iCACNhQ,MAAOzF,KAAKiI,MAAM2pD,WAClBv8C,SAAUrV,KAAK+yD,iBAAiB,cAChCr/C,OAAO,SACPmK,WAAY,CACRxO,MAAO,CAAEknC,cAAe,cAE5BrhC,WAAS,IAEb,yBAAKzL,UAAWG,EAAQkoD,UACpB,kBAACh5C,EAAA,EAAD,CACI9W,KAAK,QACL2T,QAAQ,YACR7J,MAAM,YACNrC,UAAWG,EAAQsS,OACnBjG,SAAUjW,KAAKiI,MAAM2M,QACrBrE,QAASvQ,KAAK8xD,UANlB,yBAchB,kBAACp6C,GAAA,EAAD,CACI/V,KAA4B,OAAtB3B,KAAKiI,MAAM4pD,OACjBr/C,QAASxS,KAAKmwB,YACdnb,kBAAgB,qBAChB8a,mBAAiB,4BAEjB,kBAACtX,GAAA,EAAD,CAAalT,GAAG,sBAAhB,gBACA,kBAACqS,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAmBtS,GAAG,4BAAtB,qBAEiC,WAA5BtF,KAAKiI,MAAMwqD,QAAQnxD,MAChB,oDAEyB,UAA5BtB,KAAKiI,MAAMwqD,QAAQnxD,MAChB,8CANR,gKAUA,yBAAKmI,UAAWG,EAAQgrD,eACpB,kBAAC,KAAD,CAAQnvD,MAAOzF,KAAKiI,MAAMwqD,QAAQvoC,MADtC,MAIJ,kBAACrR,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,kBAMR,kBAAC4L,GAAA,EAAD,CACI/V,KAA4B,YAAtB3B,KAAKiI,MAAM4pD,OACjBr/C,QAASxS,KAAKmwB,YACdnb,kBAAgB,qBAChB8a,mBAAiB,4BAEjB,kBAACtX,GAAA,EAAD,CAAalT,GAAG,sBAAhB,4BACA,kBAACqS,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAmBtS,GAAG,4BAAtB,uEAIJ,kBAACuT,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,kBAMR,kBAAC4L,GAAA,EAAD,CACI/V,KAA4B,WAAtB3B,KAAKiI,MAAM4pD,OACjBr/C,QAASxS,KAAKmwB,YACdnb,kBAAgB,qBAChB8a,mBAAiB,4BAEjB,kBAACtX,GAAA,EAAD,CAAalT,GAAG,sBAAhB,4BACA,kBAACqS,GAAA,EAAD,KAC+B,OAA1B3X,KAAKiI,MAAM8pD,YACR,kBAACn6C,GAAA,EAAD,CAAmBtS,GAAG,4BAClB,kBAACsY,EAAA,EAAD,CAAYjI,QAAQ,aAApB,kCAGA,kBAACiI,EAAA,EAAD,KACK5d,KAAKiI,MAAM8pD,WAAW5vD,MAE3B,kBAACyb,EAAA,EAAD,CAAYjI,QAAQ,aACgB,IAA/B3V,KAAKiI,MAAM8pD,WAAWzwD,KACjB,qBACA,sBAEV,kBAACsc,EAAA,EAAD,KACoC,IAA/B5d,KAAKiI,MAAM8pD,WAAWzwD,MACnB,oCAAGtB,KAAKiI,MAAM8pD,WAAWO,KAEG,IAA/BtyD,KAAKiI,MAAM8pD,WAAWzwD,MACnB,oCACK2I,KAAK8T,KACF/d,KAAKiI,MAAM8pD,WAAWj6B,KAClB,OACJ93B,KAAKiI,MAAM8pD,WAAWO,IAJ9B,aAYpB,kBAACz5C,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,aAAtB,gBACA,kBAACrX,EAAA,EAAD,CACIvI,QAASvQ,KAAK2xD,cACd7lD,MAAM,UACNmK,SAAUjW,KAAKiI,MAAM2M,SAHzB,8BAUR,kBAAC8C,GAAA,EAAD,CACI/V,KAA4B,aAAtB3B,KAAKiI,MAAM4pD,OACjBr/C,QAASxS,KAAKmwB,YACdnb,kBAAgB,qBAChB8a,mBAAiB,4BAEjB,kBAACtX,GAAA,EAAD,CAAalT,GAAG,sBAAhB,kCAGA,kBAACqS,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAmBtS,GAAG,4BAAtB,sBAEmC,IAA9BtF,KAAKiI,MAAMoqD,eACRryD,KAAKiI,MAAMmqD,OAAOpyD,KAAKiI,MAAMoqD,eACxBlwD,MAEZqxD,EACD,8DAEkC,UAA7BxzD,KAAKiI,MAAMkqD,eACR,0BAAM1oD,UAAWG,EAAQsqD,WAAzB,UAEmC,IAA9Bl0D,KAAKiI,MAAMoqD,eACR,qCAE2B,IAA9BryD,KAAKiI,MAAMoqD,eACRryD,KAAKiI,MAAMuqD,OAAS,IACpBxyD,KAAKiI,MAAMuqD,OAAS,GAChB,+BAESxyD,KAAKiI,MAAMmqD,OACRpyD,KAAKiI,MAAMoqD,eACbf,MACE,IACJtxD,KAAKiI,MAAMuqD,OACbnoD,QAAQ,KAKA,UAA7BrK,KAAKiI,MAAMkqD,eACR,0BAAM1oD,UAAWG,EAAQsqD,YACU,IAA9Bl0D,KAAKiI,MAAMoqD,eACR,qCAE2B,IAA9BryD,KAAKiI,MAAMoqD,eACRryD,KAAKiI,MAAMuqD,OAAS,IACpBxyD,KAAKiI,MAAMuqD,OAAS,GAChB,8BACKxyD,KAAKiI,MAAMmqD,OACRpyD,KAAKiI,MAAMoqD,eACbj8C,MAAQpW,KAAKiI,MAAMuqD,MAAO,IAHhC,mBAWxB,kBAAC35C,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CACIvI,QAASvQ,KAAKmwB,YACdla,SAAUjW,KAAKiI,MAAM2M,SAFzB,gBAMA,kBAACkE,EAAA,EAAD,CACI7C,SACIjW,KAAKiI,MAAM2M,SACkB,OAA7B5U,KAAKiI,MAAMkqD,cAEf5hD,QAAS,kBAAM,EAAKyhD,QAAQ,UAC5BlmD,MAAM,WANV,uB,GAnyBQ0X,aAyzBjBqxC,GALEnxC,aAh0BO,WACpB,MAAO,MAGgB,SAACzgB,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,QAyzB9C4X,CAGfnK,cAn5Ba,SAACzQ,GAAD,cAAY,CACvBwe,QAAM,GACFte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,QAVZ,GAaN81C,KAAM,CACFjyC,UAAW,QAEfwgB,MAAO,CACH7rB,QAASH,EAAM6K,QAAQ,GACvB7H,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9BzD,MAAO,CACHkE,UAAW,OACXmiB,aAAc,QAElBva,OAAQ,CACJxI,OAAQ5K,EAAM6K,QAAQ,IAE1BzL,OAAQ,CACJ2iB,UAAW,QACXvW,UAAW,QAEfs/C,UAAW,CACPv8C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,GAC3B3K,MAAO,GACP6hB,UAAW,oBAEfqpC,UAAW,CACPpoD,MAAOhD,EAAMe,QAAQgK,UAAU8b,KAC/Btd,SAAU,QAEduiD,cAAe,CACX/pC,UAAW,SACXvW,UAAW,QAEfigD,WAAY,CACRjrD,gBAC2B,SAAvBR,EAAMe,QAAQvI,KACRwH,EAAMe,QAAQqQ,WAAWC,QACzBrR,EAAMe,QAAQirD,KAAK,MAEjCN,YAAa,CACTpgD,QAAS,OACTqlB,eAAgB,SAChBvlB,WAAY,WACZuiB,aAAc3tB,EAAM6K,QAAQ,IAEhC+gD,YAAY,eACP5rD,EAAMI,YAAYqe,GAAG,MAAQ,CAC1BqS,cAAe9wB,EAAM6K,QAAQ,KAGrCghD,iBAAe,mBACV7rD,EAAMI,YAAYqe,GAAG,MAAQ,CAC1BlQ,WAAY,OACZ5G,YAAa,OACbzH,MAAO,SAJA,0BAMA,QANA,6BAOG,QAPH,GASf8oD,SAAU,CACNjnC,UAAW,SAEfopC,UAAW,CACP3/C,UAAWxL,EAAM6K,QAAQ,GACzB1K,QAASH,EAAM6K,QAAQ,OAs0B7B4F,CAAmBoK,YAAW8tC,M,gECl7B1B7oD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCisD,UAAW,CACP3gD,QAAS,OACTE,UAAWxL,EAAM6K,QAAQ,IAE7BqhD,SAAU,CACN1gD,UAAW,GACX7D,YAAa,GACb3E,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9B6K,MAAO,CACH1V,MAAO,KAEXm9B,cAAe,CACXzM,WAAY,GACZC,aAAc,GACdC,cAAe,EACftD,YAAa,IAEjBpa,OAAQ,CACJ5H,UAAW,OAIJ,SAAS2gD,GAAoB5rD,GAAQ,IAAD,EACrBtD,mBAAS,CAC/B5D,KAAM,GACN8B,KAAM,MAHqC,mBACxCwB,EADwC,KACjCyvD,EADiC,OAKCx6C,IAAM3U,UAAS,GALhB,mBAKxCovD,EALwC,KAKtBC,EALsB,OAMPrvD,mBAAS,IANF,mBAMxCiS,EANwC,KAM1BC,EAN0B,OAQClS,mBAAS,IARV,mBAQtBoS,GARsB,WASzCvO,EAAUhB,KAWViX,EAAoB,SAAC1d,GAAD,OAAU,SAACoE,GACjC2uD,EAAS,2BACFzvD,GADC,kBAEHtD,EAAOoE,EAAE6B,OAAO3C,WAYzB,OACI,kBAACiS,GAAA,EAAD,CACI/V,KAAM0H,EAAM1H,KACZ6Q,QAASnJ,EAAMmJ,QACfwC,kBAAgB,qBAEhB,kBAAC0C,GAAA,EAAD,CACI/V,KAAMwzD,EACN3iD,QAAS,kBAAM4iD,GAAoB,IACnCpgD,kBAAgB,qBAEhB,kBAACwD,GAAA,EAAD,CAAalT,GAAG,qBAAhB,4BACA,kBAACmT,GAAA,EAAD,CACIC,YAAY,IACZ3R,SAAU,GACV4R,SAvCM,SAACC,GACnB,IAAM3U,EACc,MAAhB2U,EAAO3U,KACD2U,EAAO3U,KAAO2U,EAAOzW,KACrByW,EAAO3U,KAAO,IAAM2U,EAAOzW,KACrC8V,EAAgBhU,GAChBkU,EAAoBS,EAAOzW,SAoCnB,kBAAC0W,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAAS,kBAAM6kD,GAAoB,KAA3C,gBAGA,kBAACt8C,EAAA,EAAD,CACIvI,QA/BD,WACf2kD,EAAS,2BACFzvD,GADC,IAEJxB,KAAuB,OAAjB+T,EAAwB,IAAMA,KAExCo9C,GAAoB,IA2BJtpD,MAAM,UACNmK,SAA2B,KAAjB+B,GAHd,kBASR,yBAAKvO,UAAWG,EAAQu8B,eACpB,yBAAK18B,UAAWG,EAAQyrD,eACpB,yBAAK5rD,UAAWG,EAAQmrD,WACpB,yBAAKtrD,UAAWG,EAAQorD,UACpB,kBAACM,GAAA,EAAD,OAGJ,kBAACt3C,GAAA,EAAD,CACIvU,UAAWG,EAAQ8U,MACnBjZ,MAAOA,EAAMtD,KACbkT,SAAUwK,EAAkB,QAC5BpK,MAAM,wBAGd,yBAAKhM,UAAWG,EAAQmrD,WACpB,yBAAKtrD,UAAWG,EAAQorD,UACpB,kBAACO,GAAA,EAAD,OAEJ,6BACI,kBAACv3C,GAAA,EAAD,CACIvY,MAAOA,EAAMxB,KACboR,SAAUwK,EAAkB,QAC5BpW,UAAWG,EAAQ8U,MACnBjJ,MAAM,mCAEV,6BACA,kBAACqD,EAAA,EAAD,CACIrP,UAAWG,EAAQsS,OACnBpQ,MAAM,UACNyE,QAAS,kBAAM6kD,GAAoB,KAHvC,gCAWhB,kBAACv8C,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASlH,EAAMmJ,SAAvB,gBACA,kBAACsG,EAAA,EAAD,CACI7C,SAAyB,KAAfxQ,EAAMxB,MAA8B,KAAfwB,EAAMtD,KACrC2J,MAAM,UACNyE,QAAS,kBAAMlH,EAAM8M,SAAS1Q,KAHlC,kB,eC1HVmD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCisD,UAAW,CACP3gD,QAAS,OACTE,UAAWxL,EAAM6K,QAAQ,IAE7BqhD,SAAU,CACN1gD,UAAW,GACX7D,YAAa,GACb3E,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9B6K,MAAO,CACH1V,MAAO,KAEXm9B,cAAe,CACXzM,WAAY,GACZC,aAAc,GACdC,cAAe,EACftD,YAAa,IAEjBpa,OAAQ,CACJ5H,UAAW,OAIJ,SAASkhD,GAAkBnsD,GAAQ,IAAD,EACnBtD,mBAAS,CAC/B0jC,OAAQ,GACRxlC,KAAM,MAHmC,mBACtCwB,EADsC,KAC/ByvD,EAD+B,OAKbnvD,mBAAS,IALI,mBAKtC+Y,EALsC,KAK5BC,EAL4B,OAMGrE,IAAM3U,UAAS,GANlB,mBAMtCovD,EANsC,KAMpBC,EANoB,OAOLrvD,mBAAS,IAPJ,mBAOtCiS,EAPsC,KAOxBC,EAPwB,OASGlS,mBAAS,IATZ,mBASpBoS,GAToB,WAWvCvO,EAAUhB,KAEV3F,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAYC4c,EAAoB,SAAC1d,GAAD,OAAU,SAACoE,GACjC2uD,EAAS,2BACFzvD,GADC,kBAEHtD,EAAOoE,EAAE6B,OAAO3C,WAuBzB,OAXAY,qBAAU,WACNwP,IAAImJ,IAAI,0BACHjJ,MAAK,SAACxV,GACHwe,EAAYxe,EAASG,KAAKue,YAE7BjJ,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,cAGvD,IAGC,kBAAC6X,GAAA,EAAD,CACI/V,KAAM0H,EAAM1H,KACZ6Q,QAASnJ,EAAMmJ,QACfwC,kBAAgB,qBAEhB,kBAAC0C,GAAA,EAAD,CACI/V,KAAMwzD,EACN3iD,QAAS,kBAAM4iD,GAAoB,IACnCpgD,kBAAgB,qBAEhB,kBAACwD,GAAA,EAAD,CAAalT,GAAG,qBAAhB,4BACA,kBAACmT,GAAA,EAAD,CACIC,YAAY,IACZ3R,SAAU,GACV4R,SAlDM,SAACC,GACnB,IAAM3U,EACc,MAAhB2U,EAAO3U,KACD2U,EAAO3U,KAAO2U,EAAOzW,KACrByW,EAAO3U,KAAO,IAAM2U,EAAOzW,KACrC8V,EAAgBhU,GAChBkU,EAAoBS,EAAOzW,SA+CnB,kBAAC0W,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAAS,kBAAM6kD,GAAoB,KAA3C,gBAGA,kBAACt8C,EAAA,EAAD,CACIvI,QA1CD,WACf2kD,EAAS,2BACFzvD,GADC,IAEJxB,KAAuB,OAAjB+T,EAAwB,IAAMA,KAExCo9C,GAAoB,IAsCJtpD,MAAM,UACNmK,SAA2B,KAAjB+B,GAHd,kBASR,yBAAKvO,UAAWG,EAAQu8B,eACpB,yBAAK18B,UAAWG,EAAQyrD,eACpB,yBAAK5rD,UAAWG,EAAQmrD,WACpB,yBAAKtrD,UAAWG,EAAQorD,UACpB,kBAACS,GAAA,EAAD,OAEJ,kBAACh5C,EAAA,EAAD,CAAahT,UAAWG,EAAQ+gB,aAC5B,kBAACjO,EAAA,EAAD,CAAYpX,GAAG,4BAAf,4BAGA,kBAACmY,GAAA,EAAD,CACIhU,UAAWG,EAAQ8U,MACnBhB,QAAQ,2BACRjY,MAAOA,EAAMgkC,OACbp0B,SAAUwK,EAAkB,WAE3Bf,EAASjR,KAAI,SAACgB,EAAG0G,GAAJ,OACV,kBAACoI,GAAA,EAAD,CAAUnY,IAAK+P,EAAG9P,MAAOoJ,EAAEvJ,IACtBuJ,EAAE1M,YAMvB,yBAAKsH,UAAWG,EAAQmrD,WACpB,yBAAKtrD,UAAWG,EAAQorD,UACpB,kBAACO,GAAA,EAAD,OAEJ,6BACI,kBAACv3C,GAAA,EAAD,CACIvY,MAAOA,EAAMxB,KACboR,SAAUwK,EAAkB,QAC5BpW,UAAWG,EAAQ8U,MACnBjJ,MAAM,iBAEV,6BACA,kBAACqD,EAAA,EAAD,CACIrP,UAAWG,EAAQsS,OACnBpQ,MAAM,UACNyE,QAAS,kBAAM6kD,GAAoB,KAHvC,gCAWhB,kBAACv8C,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASlH,EAAMmJ,SAAvB,gBACA,kBAACsG,EAAA,EAAD,CACI7C,SAAyB,KAAfxQ,EAAMxB,MAAgC,KAAjBwB,EAAMgkC,OACrC39B,MAAM,UACNyE,QAAS,kBAAMlH,EAAM8M,SAAS1Q,KAHlC,kBCvJhB,IAAMmD,GAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,QAVZ,GAYNsJ,QAAS,CACLzF,UAAWxL,EAAM6K,QAAQ,IAE7B+hD,YAAa,CACTzsD,QAASH,EAAM6K,QAAQ,IAE3BgiD,eAAgB,CACZjuC,UAAW,QAEfjoB,OAAQ,CACJ6U,UAAWxL,EAAM6K,QAAQ,IAE7BiP,KAAM,CACFvL,WAAY,QAIL,SAASu+C,KAAU,IAAD,EACP7vD,mBAAS,GADF,mBACtB8vD,EADsB,KACjBC,EADiB,OAED/vD,oBAAS,GAFR,mBAEtBtG,EAFsB,KAEds2D,EAFc,OAGHhwD,oBAAS,GAHN,mBAGtBiwD,EAHsB,KAGfC,EAHe,OAIGlwD,mBAAS,IAJZ,mBAItBmwD,EAJsB,KAIZC,EAJY,OAKCpwD,mBAAS,IALV,mBAKtB+G,EALsB,KAKbspD,EALa,KAOvBnzD,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAQC0kD,EAAW,WACb9xC,IAAImJ,IAAI,oBACHjJ,MAAK,SAACxV,GACH41D,EAAY51D,EAASG,KAAKw1D,UAC1BE,EAAW71D,EAASG,KAAKoM,YAE5BkJ,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,aAG1DwG,qBAAU,WACNshD,MAED,IAEH,IAmEM/9C,EAAUhB,KACVub,EAAOvjB,IAAKgE,UAElB,OACI,yBAAK6E,UAAWG,EAAQ0d,QACpB,kBAAC2tC,GAAD,CACI9+C,SA3CO,SAACkgD,GAChBN,GAAU,GACVlgD,IAAIC,KAAK,mBAAoB,CACzB7R,KAAMoyD,EAAQpyD,KACd9B,KAAMk0D,EAAQl0D,OAEb4T,MAAK,SAACxV,GACH41D,EAAY,CACR,CACIG,GAAI/1D,EAASG,KAAK4E,GAClB4vC,SAAU30C,EAASG,KAAKoa,SACxBy7C,UAAWh2D,EAASG,KAAKwkD,WACzBsR,KAAMH,EAAQl0D,KACds0D,KAAMJ,EAAQpyD,OANX,oBAQJiyD,QAGVlgD,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,aAyB9C8B,KAAMlC,EACN+S,QAAS,kBAAMujD,GAAU,MAE7B,kBAACP,GAAD,CACIr/C,SAzBK,SAACugD,GACdT,GAAS,GACTpgD,IAAIC,KAAK,gBAAiB,CACtB7R,KAAMyyD,EAAUzyD,KAChBwlC,OAAQitB,EAAUjtB,SAEjB1zB,MAAK,WACF4xC,OAEH3xC,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,aAgB9C8B,KAAMq0D,EACNxjD,QAAS,kBAAMyjD,GAAS,MAE5B,kBAACr4C,EAAA,EAAD,CAAY9R,MAAM,gBAAgB6J,QAAQ,MAA1C,UAGA,kBAACo/B,EAAA,EAAD,CAAOrrB,UAAW,EAAGjgB,UAAWG,EAAQmQ,SACpC,kBAAC+5C,GAAA,EAAD,CACIruD,MAAOowD,EACPc,eAAe,UACfC,UAAU,UACVvhD,SAAU,SAAC3C,EAAOmkD,GAAR,OAAqBf,EAAOe,IACtCzhD,aAAW,yBAEX,kBAAC2+C,GAAA,EAAD,CAAKt+C,MAAM,6BACX,kBAACs+C,GAAA,EAAD,CAAKt+C,MAAM,0CAEf,yBAAKhM,UAAWG,EAAQ8rD,aACX,IAARG,GACG,6BACI,kBAACiB,GAAA,EAAD,CAAOC,SAAS,QAAhB,uCAEKj2D,OAAOC,SAASi2D,OAAS,OAF9B,+DAGe7yC,EAAKiN,UAAW,IAH/B,kFAMA,kBAAC6lC,GAAA,EAAD,CAAgBxtD,UAAWG,EAAQ+rD,gBAC/B,kBAAC/T,GAAA,EAAD,CACIn4C,UAAWG,EAAQi4C,MACnBzsC,aAAW,gBAEX,kBAAC0sC,GAAA,EAAD,KACI,kBAACrE,GAAA,EAAD,KACI,kBAACQ,GAAA,EAAD,2BACA,kBAACA,GAAA,EAAD,qBACA,kBAACA,GAAA,EAAD,CAAW2S,MAAM,SAAjB,sBAGA,kBAAC3S,GAAA,EAAD,CAAW2S,MAAM,SAAjB,4BAGA,kBAAC3S,GAAA,EAAD,CAAW2S,MAAM,SAAjB,kBAKR,kBAAC1O,GAAA,EAAD,KACKgU,EAASroD,KAAI,SAACg7C,EAAKvjD,GAAN,OACV,kBAACm4C,GAAA,EAAD,CAAUj4C,IAAKF,GACX,kBAAC24C,GAAA,EAAD,CACI9oC,UAAU,KACVgpC,MAAM,OAEL0K,EAAI2N,MAET,kBAACvY,GAAA,EAAD,KACK4K,EAAI3T,SACL,kBAACjH,EAAA,EAAD,CACIxkC,UAAWG,EAAQgZ,KACnBrS,QAAS,kBA9JpCiH,EAgKmCqxC,EAAI3T,SA/J5D7yC,UAAU60D,UAAUC,UAAU3/C,QAC9B1C,EAAe,MAAO,SAAU,6CAAW,WAFvB,IAAC0C,GAmK2BxW,KAAM,mBAPV,iBAYJ,kBAACi9C,GAAA,EAAD,CAAW2S,MAAM,SACZ/H,EAAI4N,MAET,kBAACxY,GAAA,EAAD,CAAW2S,MAAM,SACb,kBAAC,KAAD,CACIzL,SAAU0D,EAAI0N,UACdlR,OAAO,WAGf,kBAACpH,GAAA,EAAD,CAAW2S,MAAM,SACb,kBAAC5zC,GAAA,EAAD,CACIhb,KAAM,QACNuO,QAAS,kBAhKvC,SAACjL,GACnB,IAAM+wD,EAAUH,EAAS5wD,GACzBuQ,IAAIyL,OAAO,oBAAsB+0C,EAAQC,IACpCvgD,MAAK,WACF,IAAIqhD,EAAW,aAAOlB,GACtBkB,EAAcA,EAAY9zD,QAAO,SAACuL,EAAG7E,GACjC,OAAOA,IAAM1E,KAEjB6wD,EAAYiB,MAEfphD,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YAsJFw3D,CAAc/xD,KAGlB,kBAAC,KAAD,eAQ5B,kBAACwT,EAAA,EAAD,CACIvI,QAAS,kBAAMwlD,GAAU,IACzBtsD,UAAWG,EAAQnK,OACnBkW,QAAQ,YACR7J,MAAM,aAJV,mCAUC,IAAR+pD,GACG,6BACI,kBAACiB,GAAA,EAAD,CAAOC,SAAS,QAAhB,sbAIA,kBAACE,GAAA,EAAD,CAAgBxtD,UAAWG,EAAQ+rD,gBAC/B,kBAAC/T,GAAA,EAAD,CACI5/C,KAAK,QACLyH,UAAWG,EAAQi4C,MACnBzsC,aAAW,gBAEX,kBAAC0sC,GAAA,EAAD,KACI,kBAACrE,GAAA,EAAD,KACI,kBAACQ,GAAA,EAAD,2BACA,kBAACA,GAAA,EAAD,CAAW2S,MAAM,SAAjB,wCAGA,kBAAC3S,GAAA,EAAD,CAAW2S,MAAM,SAAjB,kBAKR,kBAAC1O,GAAA,EAAD,KACKp1C,EAAQe,KAAI,SAACg7C,EAAKvjD,GAAN,OACT,kBAACm4C,GAAA,EAAD,CAAUj4C,IAAKF,GACX,kBAAC24C,GAAA,EAAD,CACI9oC,UAAU,KACVgpC,MAAM,OAEL0K,EAAI1mD,MAET,kBAAC87C,GAAA,EAAD,CAAW2S,MAAM,SACZ/H,EAAIyO,aAET,kBAACrZ,GAAA,EAAD,CAAW2S,MAAM,SACb,kBAAC5zC,GAAA,EAAD,CACIhb,KAAM,QACNuO,QAAS,kBA7MzC,SAACjL,GACjB,IAAMsT,EAAS9L,EAAQxH,GACvBuQ,IAAIyL,OAAO,iBAAmB1I,EAAOtT,IAChCyQ,MAAK,WACF,IAAIwhD,EAAU,aAAOzqD,GACrByqD,EAAaA,EAAWj0D,QAAO,SAACuL,EAAG7E,GAC/B,OAAOA,IAAM1E,KAEjB8wD,EAAWmB,MAEdvhD,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YAmMF23D,CAAYlyD,KAGhB,kBAAC,KAAD,eAQ5B,kBAACwT,EAAA,EAAD,CACIvI,QAAS,kBAAM0lD,GAAS,IACxBxsD,UAAWG,EAAQnK,OACnBkW,QAAQ,YACR7J,MAAM,aAJV,sCCjT5B,IAAMlD,GAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,KACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,QAVZ,GAYNsJ,QAAS,CACLzF,UAAWxL,EAAM6K,QAAQ,GACzB+T,UAAW,QAEfguC,YAAa,CACTzsD,QAASH,EAAM6K,QAAQ,IAE3BgiD,eAAgB,CACZjuC,UAAW,QAEfjoB,OAAQ,CACJ6U,UAAWxL,EAAM6K,QAAQ,IAE7Bud,OAAQ,CACJ+V,UAAW,WAEfwwB,OAAQ,CACJxuD,QAASH,EAAM6K,QAAQ,QAIhB,SAAS+jD,KAAS,IAAD,EACF3xD,mBAAS,IADP,mBACrB07B,EADqB,KACdk2B,EADc,OAEF5xD,mBAAS,GAFP,mBAErBi0B,EAFqB,KAEd6sB,EAFc,OAGJ9gD,mBAAS,GAHL,mBAGrB4gD,EAHqB,KAGfC,EAHe,KAKtB3jD,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAcLoD,qBAAU,YAXO,SAACsgD,GACd9wC,IAAImJ,IAAI,4BAA8B2nC,GACjC5wC,MAAK,SAACxV,GACHo3D,EAASp3D,EAASG,KAAK+gC,OACvBolB,EAAStmD,EAASG,KAAKs5B,UAE1BhkB,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YAKtD8nD,CAAShB,KAEV,CAACA,IAEJ,IAYM/8C,EAAUhB,KAEhB,OACI,yBAAKa,UAAWG,EAAQ0d,QACpB,kBAAC1J,EAAA,EAAD,CAAY9R,MAAM,gBAAgB6J,QAAQ,MAA1C,4BAGA,kBAACo/B,EAAA,EAAD,CAAOrrB,UAAW,EAAGjgB,UAAWG,EAAQmQ,SACpC,kBAAC6nC,GAAA,EAAD,CAAOn4C,UAAWG,EAAQi4C,MAAOzsC,aAAW,gBACxC,kBAAC0sC,GAAA,EAAD,KACI,kBAACrE,GAAA,EAAD,KACI,kBAACQ,GAAA,EAAD,CAAW2Z,OAAO,UAAlB,sBACA,kBAAC3Z,GAAA,EAAD,CAAW2Z,OAAO,SAAShH,MAAM,SAAjC,4BAGA,kBAAC3S,GAAA,EAAD,CAAW2Z,OAAO,SAAShH,MAAM,SAAjC,gBAGA,kBAAC3S,GAAA,EAAD,CAAW2Z,OAAO,SAAShH,MAAM,SAAjC,4BAGA,kBAAC3S,GAAA,EAAD,CAAW2Z,OAAO,UAAlB,8BAGR,kBAAC1V,GAAA,EAAD,KACKzgB,EAAM5zB,KAAI,SAACg7C,EAAKvjD,GAAN,OACP,kBAACm4C,GAAA,EAAD,CAAUj4C,IAAKF,GACX,kBAAC24C,GAAA,EAAD,CACI2Z,OAAO,SACPziD,UAAU,KACVgpC,MAAM,OAELtmB,aACGgxB,EAAIvB,YACJ,uBAGR,kBAACrJ,GAAA,EAAD,CAAW2Z,OAAO,SAAShH,MAAM,SAC5B5hC,aAAY65B,EAAIvnD,OAErB,kBAAC28C,GAAA,EAAD,CAAW2Z,OAAO,SAAShH,MAAM,SAC5B7hC,aAAc85B,EAAI5xC,SAEvB,kBAACgnC,GAAA,EAAD,CAAW2Z,OAAO,SAAShH,MAAM,SAC5B3hC,aAAgB45B,EAAIvnD,KAAMunD,EAAItiB,WAEnC,kBAAC0X,GAAA,EAAD,CAAWx0C,UAAWG,EAAQsnB,QA1DzC,SAACnxB,GACd,GAAc,KAAVA,EACA,MAAO,IAEX,IAEI,OADY8E,KAAKhC,MAAM9C,GACZkB,IACb,MAAOsF,GACL,MAAO,gBAmDkBsxD,CAAShP,EAAI9oD,cAMlC,yBAAK0J,UAAWG,EAAQ6tD,QACpB,kBAAClQ,GAAA,EAAD,CACIC,MAAOv9C,KAAK8T,KAAKic,EAAQ,IACzB3kB,SAAU,SAAC9O,EAAGsI,GAAJ,OAAU+3C,EAAQ/3C,IAC5B/C,MAAM,iBC/If,SAASgsD,KACpB,IAAMrvC,EAASH,YAAU,UACxByvC,EAAe,QACfC,EAAS,KAkBT,OACG,4BACQ3oD,MAAO,CAACrG,MAAM,OAAQ6xB,SAAS,WAC/B8W,OAAQ,WACnBomB,EAAgBrtD,SAAS0E,gBAAgB6oD,aAAwD,KAAxCvtD,SAAS0E,gBAAgB6oD,aAAyB,KAC3GD,EAAO5kD,OAAS2kD,GAEjBpuC,IAAK,SAACtd,GAAQ2rD,EAAS3rD,GACXgH,IAVD,kBAAoBoV,EAAOvgB,OAAS,UAd9B,SAAC/F,GAIV,IAHJ,IACUgxB,EADQzoB,SAASC,OACKqC,MAAM,MAExBhD,EAAI,EAAGA,EAAImpB,EAAUprB,OAAQiC,IAAK,CACxC,IAAMopB,EAAMD,EAAUnpB,GAAGgD,MAAM,KAC/B,GAAIomB,EAAI,IAAMjxB,EACV,OAAOkxB,SAASD,EAAI,IAGhC,OAAO,KAIgDF,CAAU,SAWzDlqB,MAAM,OACNoK,OAAQ2kD,EACRG,YAAY,IACxBC,UAAU,SCdd,IA0GMC,G,+MACFnwD,MAAQ,CACJowD,SAAU,EACVvR,UAAW,GACXH,KAAM,EACNxiC,KAAM,KACN6V,MAAO,G,EAGXxe,aAAe,SAAC9I,EAAO2lD,GACnB,EAAKv4C,SAAS,CAAEu4C,aACC,IAAbA,EACA,EAAK1Q,SAAS,EAAG,OACG,IAAb0Q,GACP,EAAK1Q,SAAS,EAAG,Y,EAIzBn1B,kBAAoB,WAChB,EAAKm1B,SAAS,EAAG,Y,EAGrBA,SAAW,SAAChB,EAAMO,GACdrxC,IAAImJ,IACA,iBACI,EAAK3V,MAAMijC,MAAM7jB,OAAOnjB,GACxB,SACAqhD,EACA,SACAO,GAEHnxC,MAAK,SAACxV,GACH,EAAKuf,SAAS,CACVgnC,UAAWvmD,EAASG,KAAKuY,MACzBkL,KAAM5jB,EAASG,KAAKyjB,KACpB6V,MAAOz5B,EAASG,KAAKs5B,WAG5BhkB,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,a,EAKhBy4D,SAAW,WACP,EAAK3Q,SACD,EAAK1/C,MAAM0+C,KAAO,EACM,IAAxB,EAAK1+C,MAAMowD,SAAiB,UAAY,Q,EAIhDE,SAAW,WACP,EAAK5Q,SACD,EAAK1/C,MAAM0+C,KAAO,EACM,IAAxB,EAAK1+C,MAAMowD,SAAiB,UAAY,Q,6CAIhD,WAAU,IAAD,OACGzuD,EAAY5J,KAAKqJ,MAAjBO,QAER,OACI,yBAAKH,UAAWG,EAAQ0d,QACC,OAApBtnB,KAAKiI,MAAMkc,MAAiB,8BACR,OAApBnkB,KAAKiI,MAAMkc,MACR,kBAAC4wB,EAAA,EAAD,CAAO7b,QAAM,GACT,yBAAKzvB,UAAWG,EAAQoxB,SACpB,6BACI,kBAAChK,EAAA,EAAD,CACIvnB,UAAWG,EAAQ4uD,gBACnBnlD,IACI,uBACArT,KAAKiI,MAAMkc,KAAK7e,GAChB,QAIZ,6BACI,kBAACsY,EAAA,EAAD,CAAYnU,UAAWG,EAAQwxB,SAAUlK,QAAM,GAC1ClxB,KAAKiI,MAAMkc,KAAKhR,QAI7B,kBAAC2gD,GAAA,EAAD,CACIruD,MAAOzF,KAAKiI,MAAMowD,SAClB1B,eAAe,UACfC,UAAU,UACVvhD,SAAUrV,KAAKwb,aACfi9C,UAAQ,GAER,kBAAC1E,GAAA,EAAD,CAAKt+C,MAAM,6BACX,kBAACs+C,GAAA,EAAD,CAAKt+C,MAAM,6BACX,kBAACs+C,GAAA,EAAD,CAAKt+C,MAAM,8BAEU,IAAxBzV,KAAKiI,MAAMowD,UACR,yBAAK5uD,UAAWG,EAAQ8uD,eACpB,kBAACnW,GAAA,EAAD,CAAM1tB,WAAS,EAAClhB,QAAS,IACrB,kBAAC4uC,GAAA,EAAD,CACIlc,MAAI,EACJoc,GAAI,EACJD,GAAI,GACJ/4C,UAAWG,EAAQ+uD,UAEnB,kBAAC/6C,EAAA,EAAD,CACI9R,MAAM,gBACN6J,QAAQ,MAFZ,OAMA,kBAACiI,EAAA,EAAD,KACK5d,KAAKiI,MAAMkc,KAAK7e,KAGzB,kBAACi9C,GAAA,EAAD,CACIlc,MAAI,EACJoc,GAAI,EACJD,GAAI,GACJ/4C,UAAWG,EAAQ+uD,UAEnB,kBAAC/6C,EAAA,EAAD,CACI9R,MAAM,gBACN6J,QAAQ,MAFZ,gBAMA,kBAACiI,EAAA,EAAD,KACK5d,KAAKiI,MAAMkc,KAAKhR,OAGzB,kBAACovC,GAAA,EAAD,CACIlc,MAAI,EACJoc,GAAI,EACJD,GAAI,GACJ/4C,UAAWG,EAAQ+uD,UAEnB,kBAAC/6C,EAAA,EAAD,CACI9R,MAAM,gBACN6J,QAAQ,MAFZ,sBAMA,kBAACiI,EAAA,EAAD,KACK5d,KAAKiI,MAAMkc,KAAKtD,QAGzB,kBAAC0hC,GAAA,EAAD,CACIlc,MAAI,EACJoc,GAAI,EACJD,GAAI,GACJ/4C,UAAWG,EAAQ+uD,UAEnB,kBAAC/6C,EAAA,EAAD,CACI9R,MAAM,gBACN6J,QAAQ,MAFZ,4BAMA,kBAACiI,EAAA,EAAD,KACK5d,KAAKiI,MAAM+xB,QAGpB,kBAACuoB,GAAA,EAAD,CACIlc,MAAI,EACJoc,GAAI,EACJD,GAAI,GACJ/4C,UAAWG,EAAQ+uD,UAEnB,kBAAC/6C,EAAA,EAAD,CACI9R,MAAM,gBACN6J,QAAQ,MAFZ,4BAMA,kBAACiI,EAAA,EAAD,KACK5d,KAAKiI,MAAMkc,KAAKrhB,UAMX,IAAxB9C,KAAKiI,MAAMowD,UACe,IAAxBr4D,KAAKiI,MAAMowD,WACX,6BACI,yBAAK5uD,UAAWG,EAAQ+rD,gBACpB,kBAAC/T,GAAA,EAAD,CAAOn4C,UAAWG,EAAQi4C,OACtB,kBAACC,GAAA,EAAD,KACI,kBAACrE,GAAA,EAAD,KACI,kBAACQ,GAAA,EAAD,2BACA,kBAACA,GAAA,EAAD,CACIx0C,UACIG,EAAQgvD,YAFhB,4BAOA,kBAAC3a,GAAA,EAAD,CACIx0C,UAAW,CACPG,EAAQivD,GACRjvD,EAAQgvD,aAHhB,4BAQA,kBAAC3a,GAAA,EAAD,CACIx0C,UAAW,CACPG,EAAQivD,GACRjvD,EAAQgvD,aAHhB,8BAUR,kBAAC1W,GAAA,EAAD,KACKliD,KAAKiI,MAAM6+C,UAAUj5C,KAClB,SAACg7C,EAAKvjD,GAAN,OACI,kBAACm4C,GAAA,EAAD,CACIj4C,IAAKF,EACLmE,UACIG,EAAQkvD,UAEZvoD,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KACf,MAAQ2vC,EAAIrjD,OAIpB,kBAACy4C,GAAA,EAAD,KACI,kBAACrgC,EAAA,EAAD,KACKirC,EAAIxgD,OACCwgD,EAAIxgD,OACClG,KACL,yBAGd,kBAAC87C,GAAA,EAAD,CACI2Z,OAAQ,SACRnuD,UACIG,EAAQgvD,YAGX/P,EAAIvB,aAET,kBAACrJ,GAAA,EAAD,CACIx0C,UACIG,EAAQgvD,YAGX/P,EAAI9tC,WAET,kBAACkjC,GAAA,EAAD,CACIx0C,UACIG,EAAQgvD,YAGX/P,EAAIgF,cAQA,IAAhC7tD,KAAKiI,MAAM6+C,UAAU/+C,QACM,IAAxB/H,KAAKiI,MAAMowD,UACP,yBAAK5uD,UAAWG,EAAQvH,WACpB,kBAACklD,GAAA,EAAD,CACIC,MAAOv9C,KAAK8T,KACR/d,KAAKiI,MAAM+xB,MAAQ,IAEvB3kB,SAAU,SAAC9O,EAAGsI,GAAJ,OACN,EAAK84C,SACD94C,EAEI,IADJ,EAAK5G,MAAMowD,SAEL,UACA,QAGdvsD,MAAM,sB,GA3RvB0X,aA6ShBu1C,GALCr1C,aApTQ,WACpB,MAAO,MAGgB,SAACzgB,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,QA6S/C4X,CAGdnK,cArZa,SAACzQ,GAAD,MAAY,CACvBwe,OAAO,aACHte,MAAO,OACPsL,UAAW,OACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,GAC3B8iB,aAAc,QACb3tB,EAAMI,YAAYqe,GAAG,MAAQ,CAC1Bve,MAAO,IACPqO,WAAY,OACZ5G,YAAa,SAGrBuqB,QAAS,CACL5nB,OAAQ,QACR9J,gBAAiBR,EAAMe,QAAQwS,QAAQsT,KACvC1mB,QAAS,gBACTsyB,gBACI,gHACAzyB,EAAMe,QAAQwS,QAAQvI,MAAMlH,QAAQ,IAAK,OACzC,2DACA9D,EAAMe,QAAQwS,QAAQ9S,KAAKqD,QAAQ,IAAK,OACxC,6DACA9D,EAAMe,QAAQgK,UAAU8b,KAAK/iB,QAAQ,IAAK,OAC1C,0DACA9D,EAAMe,QAAQgK,UAAUtK,KAAKqD,QAAQ,IAAK,OAC1C,0DACA9D,EAAMe,QAAQgK,UAAUC,MAAMlH,QAAQ,IAAK,OAC3C,4DACA9D,EAAMe,QAAQgK,UAAU8b,KAAK/iB,QAAQ,IAAK,OAC1C,6DACA9D,EAAMe,QAAQwS,QAAQ9S,KAAKqD,QAAQ,IAAK,OACxC,0DACA9D,EAAMe,QAAQwS,QAAQsT,KAAK/iB,QAAQ,IAAK,OACxC,0DACA9D,EAAMe,QAAQgK,UAAUC,MAAMlH,QAAQ,IAAK,OAC3C,6DACA9D,EAAMe,QAAQgK,UAAUtK,KAAKqD,QAAQ,IAAK,OAC1C,6DACA9D,EAAMe,QAAQgK,UAAU8b,KAAK/iB,QAAQ,IAAK,OAC1C,2DACA9D,EAAMe,QAAQgK,UAAUtK,KAAKqD,QAAQ,IAAK,OAC1C,uDACJ4uB,eAAgB,QAChBw9B,mBAAoB,UAExBR,gBAAiB,CACbplD,OAAQ,OACRpK,MAAO,OACPiwD,aAAc,MACdvlD,OAAQ,OACRY,UAAW,OACXoF,UACI,8DACJD,OAAQ,kBAEZ2hB,SAAU,CACNpyB,MAAO,QACP0K,OAAQ,OACRmX,UAAW,SACXvW,UAAW,MACXjC,SAAU,OACVvG,MAAO,UACP0D,QAAS,QAEbqpD,GAAI,CACArlD,SAAU,SAEdolD,WAAW,eACN9vD,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,SAGjB0kD,UAAW,CACPrL,OAAQ,WAEZprD,UAAW,CACP4G,QAASH,EAAM6K,QAAQ,IAE3BulD,SAAU,CACN5kD,UAAW,OACX+C,WAAY,QAEhBshD,SAAU,CACNriC,YAAa,iBACbsD,cAAe,kBAEnB8+B,cAAe,CACXpkD,UAAW,QAEfqhD,eAAgB,CACZjuC,UAAW,WA0TjBnO,CAAmBoK,YAAWy0C,M,qeCnZ1BxvD,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCqwD,aAAc,CACVv/B,cAAe,OACfF,WAAY,QAEhBqgB,UAAW,CACPzlC,UAAW,MACX7D,YAAa,OACb3E,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9BulD,UAAW,CACP1/B,WAAY,EACZE,cAAe,GAEnBnG,QAAS,CACLhjB,YAAa,OACb4G,WAAY,MACZ7D,SAAU,IAEd6lD,cAAe,CACXjlD,QAAS,YAIF,SAASklD,GAAMjwD,GAAQ,IAAD,EACDtD,mBAAS,IADR,mBAC1BgB,EAD0B,KAChBwyD,EADgB,OAEHxzD,oBAAS,GAFN,mBAE1ByzD,EAF0B,KAEjBC,EAFiB,KAG3Bx2D,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAGCy2D,EAAmB,SAACp0D,GACtBuQ,IAAI6L,MAAM,sBAAuB,CAC7Bpc,GAAIA,IAEHyQ,MAAK,WACFjB,EAAe,MAAO,QAAS,iCAAS,WACxCzL,EAAM0Z,OAAOzd,MAEhB0Q,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YAEjDkW,MAAK,WACF0jD,GAAW,OAIjB7vD,EAAUhB,KAkEhB,OACI,6BACI,kBAAC8O,GAAA,EAAD,CAAQ/V,KAAM63D,EAAShnD,QAAS,kBAAMinD,GAAW,KAC7C,kBAACjhD,GAAA,EAAD,iCACA,kBAACb,GAAA,EAAD,2EACA,kBAACkB,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAAS,kBAAMkpD,GAAW,IAAQ3tD,MAAM,WAAhD,gBAGA,kBAACgN,EAAA,EAAD,CACIvI,QAAS,kBAAMmpD,EAAiB3yD,IAChC+E,MAAM,WAFV,kBASR,kBAAC8R,EAAA,EAAD,CAAYnU,UAAWG,EAAQuvD,aAAcxjD,QAAQ,aAArD,kCAGA,kBAACo/B,EAAA,EAAD,KACI,kBAACh5B,GAAA,EAAD,CAAMtS,UAAWG,EAAQwvD,WACpB/vD,EAAMhI,KAAKwM,KAAI,SAACgB,GAAD,OACZ,oCACI,kBAACoN,GAAA,EAAD,CACIC,QAAM,EACN7M,MAAO,CACHsqB,aAAc,IAElBppB,QAAS,WACLkpD,GAAW,GACXF,EAAY1qD,EAAEvJ,MAGlB,kBAAC6W,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAACwiB,GAAA,EAAD,OAEJ,kBAAC75B,GAAA,EAAD,CAAcC,QAASxN,EAAE8qD,cAEzB,kBAACr9C,GAAA,EAAD,CACI/L,QAAS,kBAAMmpD,EAAiB7qD,EAAEvJ,KAClCmE,UAAWG,EAAQyvD,eAEnB,kBAACvN,GAAA,EAAD,CACIriD,UAAWG,EAAQmwC,cAI/B,kBAACj+B,EAAA,EAAD,UAGR,kBAACG,GAAA,EAAD,CAAUC,QAAM,EAAC3L,QAAS,WAnHjClO,UAAU8yC,YAKft/B,IAAIqL,IAAI,cAAe,IAClBnL,MAAK,SAACxV,GACH,IAAMq5D,EAA4Br5D,EAASG,KAO3C,GANAk5D,EAA0BvkB,UAAUC,UAAYrpC,YAC5C2tD,EAA0BvkB,UAAUC,WAExCskB,EAA0BvkB,UAAUlxB,KAAK7e,GAAK2G,YAC1C2tD,EAA0BvkB,UAAUlxB,KAAK7e,IAEzCs0D,EAA0BvkB,UAAUwkB,mBACpC,IACI,IAAI7vD,EAAI,EACRA,EACA4vD,EAA0BvkB,UAAUwkB,mBAC/B9xD,OACLiC,IAEA4vD,EAA0BvkB,UAAUwkB,mBAChC7vD,GACF1E,GAAK2G,YACH2tD,EAA0BvkB,UACrBwkB,mBAAmB7vD,GAAG1E,IAKvC,OAAOjD,UAAU8yC,YAAY11C,OAAO,CAChC41C,UAAWukB,EAA0BvkB,eAG5Ct/B,MAAK,SAAC+jD,GACH,IAAMC,EAAoBD,EAAWv5D,SAASw5D,kBACxCnkB,EAAiBkkB,EAAWv5D,SAASq1C,eACrCC,EAAQikB,EAAWjkB,MACzB,OAAOhgC,IAAIqL,IACP,qBACArc,KAAKK,UAAU,CACXI,GAAIw0D,EAAWx0D,GACfuwC,MAAOtpC,YAAaspC,GACpBv0C,KAAMw4D,EAAWx4D,KACjBf,SAAU,CACNw5D,kBAAmBxtD,YAAawtD,GAChCnkB,eAAgBrpC,YAAaqpC,UAK5C7/B,MAAK,SAACxV,GACH8I,EAAM2wD,IAAIz5D,EAASG,MACnBoU,EAAe,MAAO,QAAS,uCAAU,cAG5CkB,OAAM,SAACjW,GACJ0pB,QAAQtf,IAAIpK,GACZ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,YA1DlDiV,EAAe,MAAO,QAAS,qEAAe,aAmHlC,kBAACqH,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAACo5B,GAAA,EAAD,OAEJ,kBAACzwC,GAAA,EAAD,CAAcC,QAAQ,yCAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAAC,KAAD,CAAW5vD,UAAWG,EAAQmwC,iBC/K1D,IAAMnxC,GAAYC,aAAW,SAACC,GAAD,MAAY,MAE1B,SAASmxD,GAAe5wD,GAAQ,IAAD,EACAtD,mBAAS4xB,MADT,mBACnCuiC,EADmC,KACpBC,EADoB,KAEpCl3D,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAaC2G,EAAUhB,KAEhB,OACI,kBAAC8O,GAAA,EAAD,CACI/V,KAAM0H,EAAM1H,KACZ6Q,QAASnJ,EAAMmJ,QACfwC,kBAAgB,qBAEhB,kBAACwD,GAAA,EAAD,CAAalT,GAAG,qBAAhB,4BAEA,kBAACqS,GAAA,EAAD,KACI,kBAAC8E,EAAA,EAAD,KACI,kBAACuB,GAAA,EAAD,CACIvI,MAAO,4CACPhQ,MAAOy0D,EACP7kD,SAAU,SAAC9O,GAAD,OAAO4zD,EAAiB5zD,EAAE6B,OAAO3C,YAKvD,kBAACoT,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASlH,EAAMmJ,SAAvB,gBACA,yBAAK/I,UAAWG,EAAQ6J,SACpB,kBAACqF,EAAA,EAAD,CACIhN,MAAM,UACNmK,SAA4B,KAAlBikD,EACV3pD,QAAS,WAnCpB0nB,aAAiBiiC,IAItBt5D,IAAK2E,cAAc,WAAY20D,GAC/BtiC,eACAvuB,EAAMmJ,WALFsC,EAAe,MAAO,QAAS,6CAAW,aA+BlC,eAMKzL,EAAMgQ,eACH,kBAACxB,GAAA,EAAD,CACI7V,KAAM,GACNyH,UAAWG,EAAQgK,qBCXnD,IAyHMwmD,G,oDACF,WAAY/wD,GAAQ,IAAD,+BACf,cAAMA,IAIVpB,MAAQ,CACJoyD,aAAa,EACbC,WAAW,EACXC,gBAAgB,EAChB3lD,QAAS,GACT4lD,OAAQ,GACRzS,OAAQ,GACR0S,UAAW,GACXC,aAAc,GACdC,WAAW,EACXC,SAAU,GACVC,aAAa,EACbC,YAAa,KACbC,eAAe,EACfC,oBAAoB,EACpBC,iBAAiB,EACjBC,gBAAgB,EAChBC,cAAc,EACdC,gBAAgB,EAChBC,SAAU,CACN3vD,IAAK,EACL4vD,cAAe,EACf7xB,OAAQ,CACJvqB,QAAS,CACL/c,KAAM,IACNmD,GAAI,IAER2Z,QAAS,IAEbs8C,GAAI,GACJC,UAAU,EACVC,WAAY,GACZC,cAAe,GACfC,aAAc,GACdxuB,OAAQ,GACRiH,MAAO,KAxCI,EA4CnBjkB,YAAc,WACV,EAAKrQ,SAAS,CACVu6C,aAAa,EACbC,WAAW,EACXC,gBAAgB,EAChB3lD,QAAS,GACT+lD,WAAW,EACXE,aAAa,EACbE,eAAe,EACfC,oBAAoB,EACpBC,iBAAiB,EACjBC,gBAAgB,EAChBC,cAAc,KAxDH,EAgEnBrpD,iBAAmB,WACf,IAAMC,EACwB,SAA1B,EAAK1I,MAAM0H,WACL,OAC0B,SAA1B,EAAK1H,MAAM0H,WACX,YACA,OACVnQ,IAAK2E,cAAc,cAAewM,GAClC,EAAK1I,MAAMuyD,WAAW7pD,IAxEP,EA2EnB8pD,YAAc,WACVhmD,IAAImJ,IAAI,iBACHjJ,MAAK,SAACxV,GACH,IAAMuI,EAAQjE,KAAKhC,MAAMtC,EAASG,KAAKysC,QACvC5sC,EAASG,KAAKysC,OAASrkC,EACvB,EAAKgX,SAAS,CACVu7C,SAAU96D,EAASG,UAG1BsV,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,aAzFG,EA8FnBi8D,cAAgB,WACZjmD,IAAI6L,MAAM,oBAAqB,IAC1B3L,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,6FACA,WAEJ,EAAKge,iBAERna,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,aA9GG,EAmHnBk8D,YAAc,WACV,EAAKj8C,SAAS,CACVlL,QAAS,aAEbiB,IAAIqL,IAAI,wBACHnL,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,qEACA,WAEJ,EAAK2N,SAAS,CACVlL,QAAS,QAGhBoB,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKigB,SAAS,CACVlL,QAAS,SA3IN,EAgJnBumD,aAAe,SAAC71D,GACZuQ,IAAI6L,MAAM,uBAAwB,CAC9Bpc,GAAIA,IAEHyQ,MAAK,WACFjV,OAAOC,SAAS2vB,YAEnB1a,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKigB,SAAS,CACVlL,QAAS,SA/JN,EAoKnBonD,WAAa,WACT,EAAKl8C,SAAS,CACVlL,QAAS,SAEbiB,IAAI6L,MAAM,qBAAsB,CAC5BvO,KAAM,EAAKlL,MAAMkL,OAEhB4C,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,qEACA,WAEJ,EAAK2N,SAAS,CACVlL,QAAS,KAEb,EAAKub,iBAERna,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKigB,SAAS,CACVlL,QAAS,SA/LN,EAoMnBqnD,OAAS,WACL,EAAKn8C,SAAS,CACVlL,QAAS,SAEbiB,IAAI6L,MAAM,mBAAoB,IACzB3L,MAAK,SAACxV,GACmB,KAAlBA,EAASG,MACT,EAAK2I,MAAM8I,eACP,MACA,QACA,2DACA,WAEJ,EAAK2N,SAAS,CACVu7C,SAAS,2BACF,EAAKpzD,MAAMozD,UADV,IAEJE,IAAI,OAIZz6D,OAAOC,SAASC,KAAOT,EAASG,KAEpC,EAAKyvB,iBAERna,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,YAGPkW,MAAK,WACF,EAAK+J,SAAS,CACVlL,QAAS,SAtON,EA2OnBsnD,aAAe,WACX,EAAKp8C,SAAS,CACVlL,QAAS,WAEb,IAAMunD,EAAW,IAAIC,SACrBD,EAASE,OAAO,SAAU,EAAKC,UAAUp9C,QAAQmlB,MAAM,IACvDxuB,IAAIC,KAAK,uBAAwBqmD,EAAU,CACvCI,QAAS,CACL,eAAgB,yBAGnBxmD,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,qEACA,WAEJ,EAAK2N,SAAS,CACVlL,QAAS,QAGhBoB,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKigB,SAAS,CACVlL,QAAS,SAzQN,EA8QnB4nD,aAAe,WACX3mD,IAAI6L,MAAM,yBAA0B,CAChCzK,QAAS,EAAKhP,MAAMozD,SAASG,WAE5BzlD,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,iCACA,WAEJ,EAAK2N,SAAS,CACVu7C,SAAS,2BACF,EAAKpzD,MAAMozD,UADV,IAEJG,UAAW,EAAKvzD,MAAMozD,SAASG,gBAI1CxlD,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,aArSG,EA0SnB48D,WAAa,WACL,EAAKx0D,MAAM8/C,SAAW,EAAK9/C,MAAMyyD,cASrC,EAAK56C,SAAS,CACVlL,QAAS,mBAEbiB,IAAI6L,MAAM,yBAA0B,CAChCg7C,IAAK,EAAKz0D,MAAMuyD,OAChBmC,IAAK,EAAK10D,MAAM8/C,SAEfhyC,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,iCACA,WAEJ,EAAK2N,SAAS,CACVlL,QAAS,KAEb,EAAKub,iBAERna,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKigB,SAAS,CACVlL,QAAS,SAnCjB,EAAKvL,MAAM8I,eACP,MACA,QACA,yDACA,YAhTO,EAoVnB0oD,YAAc,WACV,EAAK/6C,SAAS,CACVlL,QAAS,gBAEbiB,IAAI6L,MAAM,sBAAuB,CAC7B5Y,MAAO,EAAKb,MAAM6yD,cAEjB/kD,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,6CACA,WAEJ,EAAK9I,MAAMmd,YAAY,EAAKve,MAAM6yD,aAClC,EAAKh7C,SAAS,CACVlL,QAAS,QAGhBoB,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKigB,SAAS,CACVlL,QAAS,SA/WN,EAoXnBgoD,iBAAmB,WACf,EAAK98C,SAAS,CACVlL,QAAS,qBAEbpV,KACKsW,KAAK,uBAAwB,CAC1B49B,IAAK,EAAKzrC,MAAMwyD,YAEnB1kD,MAAK,SAACxV,GACyB,MAAxBA,EAASG,KAAKX,OACd,EAAKsJ,MAAM8I,eACP,MACA,QACA5R,EAASG,KAAKO,IACd,SAEJ,EAAK6e,SAAS,CACVlL,QAAS,OAGb,EAAKvL,MAAM8I,eACP,MACA,QACA5R,EAASG,KAAKO,IACd,WAEJ,EAAK6e,SAAS,CACVlL,QAAS,GACTqmD,iBAAiB,QAI5BjlD,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKigB,SAAS,CACVlL,QAAS,SA5ZN,EAianBioD,QAAU,WACF,EAAK50D,MAAMozD,SAASI,WACpB,EAAK37C,SAAS,CAAE66C,WAAW,IAG/B9kD,IAAImJ,IAAI,qBACHjJ,MAAK,SAACxV,GACH,EAAKuf,SAAS,CACV47C,cAAen7D,EAASG,KACxBi6D,WAAW,OAGlB3kD,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,aAlbG,EAubnB86D,UAAY,WACR,EAAK76C,SAAS,CACVlL,QAAS,cAEbiB,IAAI6L,MAAM,oBAAqB,CAC3B5hB,KAAM,EAAKmI,MAAM2yD,WAEhB7kD,MAAK,WACF,EAAK1M,MAAM8I,eACP,MACA,QACA,iCACA,WAEJ,EAAK2N,SAAS,CACVlL,QAAS,GACTymD,SAAS,2BACF,EAAKpzD,MAAMozD,UADV,IAEJI,YAAa,EAAKxzD,MAAMozD,SAASI,eAGzC,EAAKtrC,iBAERna,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,SAEJ,EAAKigB,SAAS,CACVlL,QAAS,SAtdN,EA2dnB4G,aAAe,SAACrZ,GAAD,OAAU,SAACuQ,GACtB,EAAKoN,SAAL,eAAiB3d,EAAOuQ,EAAMtK,OAAO3C,UA5dtB,EA+dnBq3D,gBAAkB,SAACpqD,EAAOooD,GAAR,OAAwB,EAAKh7C,SAAS,CAAEg7C,iBA/dvC,EAienBiC,gBAAkB,SAAC79C,GACC,OAAZA,IACA,EAAK7V,MAAM4G,qBACXrP,IAAK2E,cAAc,aAAc,QAlerC,EAAK+2D,UAAY5hD,IAAMuN,YAFR,E,sDA4DnB,WACIjoB,KAAK67D,gB,oBA2aT,WAAU,IAAD,OACGjyD,EAAY5J,KAAKqJ,MAAjBO,QACFua,EAAOvjB,IAAKgE,UACZ2E,EAAO3I,IAAK+E,cAAc,cAEhC,OACI,6BACI,yBAAK8D,UAAWG,EAAQ0d,QACpB,kBAAC1J,EAAA,EAAD,CACInU,UAAWG,EAAQuvD,aACnBxjD,QAAQ,aAFZ,4BAMA,kBAACo/B,EAAA,EAAD,KACI,kBAACh5B,GAAA,EAAD,CAAMtS,UAAWG,EAAQwvD,WACrB,kBAACn9C,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKuP,SAAS,CAAEu6C,aAAa,MAGjC,kBAACxoC,GAAA,EAAD,KACI,kBAACb,EAAA,EAAD,CACI3d,IACI,uBACA8Q,EAAK7e,GACL,QAIZ,kBAAC8W,GAAA,EAAD,CAAcC,QAAQ,iBACtB,kBAACC,GAAA,EAAD,KACI,kBAAC,KAAD,CAAW7S,UAAWG,EAAQmwC,cAGtC,kBAACj+B,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CAAUC,QAAM,GACZ,kBAACC,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,QAEtB,kBAACC,GAAA,EAAD,KACI,kBAACsB,EAAA,EAAD,CACInU,UAAWG,EAAQozD,iBACnBlxD,MAAM,iBAEL9L,KAAKiI,MAAMozD,SAAS3vD,OAIjC,kBAACoQ,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKuP,SAAS,CAAEw6C,WAAW,MAG/B,kBAACn+C,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,iBAEtB,kBAACC,GAAA,EAAD,CACI/L,QAAS,kBACL,EAAKuP,SAAS,CAAEw6C,WAAW,KAE/B7wD,UAAWG,EAAQyvD,eAEnB,kBAACz7C,EAAA,EAAD,CACInU,UAAWG,EAAQozD,iBACnBlxD,MAAM,iBAELqY,EAAKgN,UAEV,kBAAC,KAAD,CACI1nB,UAAWG,EAAQqzD,sBAI/B,kBAACnhD,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CAAUC,QAAM,GACZ,kBAACC,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,UAEtB,kBAACC,GAAA,EAAD,KACI,kBAACsB,EAAA,EAAD,CACInU,UAAWG,EAAQszD,SACnBpxD,MAAM,iBAELqY,EAAKiN,aAIlB,kBAACtV,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KAAK,gBAG5B,kBAACiD,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,uBAEtB,kBAACC,GAAA,EAAD,KACI,kBAACsB,EAAA,EAAD,CACInU,UAAWG,EAAQszD,SACnBpxD,MAAM,iBAELqY,EAAKtD,MAAM1e,KACXnC,KAAKiI,MAAMozD,SAASC,eACjB,8BACK,IACD,kBAACv+C,GAAA,EAAD,CACI3M,MAAOynB,aACH73B,KAAKiI,MAAMozD,SACNC,cACL,uBAGJ,kBAAC,KAAD,CACInW,SACInlD,KAAKiI,MAAMozD,SACNC,cAETjW,OAAO,WAEJ,IAhBf,mBAuBfrlD,KAAKiI,MAAMozD,SAASC,cAAgB,GACjC,6BACI,kBAACx/C,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKuP,SAAS,CACVo7C,gBAAgB,MAIxB,kBAAC/+C,GAAA,EAAD,CACI1S,UAAWG,EAAQ6pB,SAEnB,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,2DAEtB,kBAACC,GAAA,EAAD,KACI,kBAAC,KAAD,CACI7S,UAAWG,EAAQmwC,eAMvC,kBAACj+B,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CAAUC,QAAM,EAAC3L,QAAS,kBAAM,EAAK0rD,WACjC,kBAAC9/C,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,mBAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAACz7C,EAAA,EAAD,CACInU,UAAWG,EAAQozD,iBACnBlxD,MAAM,iBAEL9L,KAAKiI,MAAMozD,SAASE,GACf,2BACA,gBAEV,kBAAC,KAAD,CACI9xD,UAAWG,EAAQqzD,sBAI/B,kBAACnhD,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKuP,SAAS,CAAEq7C,cAAc,MAGlC,kBAACh/C,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAACz7C,EAAA,EAAD,CACInU,UAAWG,EAAQozD,iBACnBlxD,MAAM,iBAGF9L,KAAKiI,MAAMozD,SAAS5xB,OAAOvqB,QACtB/c,MAGb,kBAAC,KAAD,CACIsH,UAAWG,EAAQqzD,sBAI/B,kBAACnhD,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CAAUC,QAAM,GACZ,kBAACC,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC0pC,GAAA,EAAD,OAEJ,kBAAC/gD,GAAA,EAAD,CAAcC,QAAQ,iBAEtB,kBAACC,GAAA,EAAD,KACI,kBAACsB,EAAA,EAAD,CACInU,UAAWG,EAAQszD,SACnBpxD,MAAM,iBAELqY,EAAK/N,SAIlB,kBAAC0F,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CAAUC,QAAM,GACZ,kBAACC,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,KACI,kBAACsB,EAAA,EAAD,CACInU,UAAWG,EAAQszD,SACnBpxD,MAAM,iBAEL+rB,aACG1T,EAAK+gC,WACL,2BAOxB,kBAACtnC,EAAA,EAAD,CACInU,UAAWG,EAAQuvD,aACnBxjD,QAAQ,aAFZ,4BAMA,kBAACo/B,EAAA,EAAD,KACI,kBAACh5B,GAAA,EAAD,CAAMtS,UAAWG,EAAQwvD,WACrB,kBAACn9C,GAAA,EAAD,CAAUC,QAAM,GACZ,kBAACC,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,KACI,kBAAC8gD,GAAA,EAAD,CACI/nD,SAAUrV,KAAKw8D,aACfhgD,QAASxc,KAAKiI,MAAMozD,SAASG,aAIzC,kBAAC1/C,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKuP,SAAS,CAAEy6C,gBAAgB,MAGpC,kBAACp+C,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAAC,KAAD,CAAW5vD,UAAWG,EAAQmwC,cAGtC,kBAACj+B,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CAAUC,QAAM,EAAC3L,QAAS,kBAAM,EAAKssD,YACjC,kBAAC1gD,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAACz7C,EAAA,EAAD,CACInU,UAAWG,EAAQozD,iBACnBlxD,MAAM,iBAEJ9L,KAAKiI,MAAMozD,SAASI,WAEhB,qBADA,sBAGV,kBAAC,KAAD,CACIhyD,UAAWG,EAAQqzD,wBAOvC,kBAAC3D,GAAD,CACIj4D,KAAMrB,KAAKiI,MAAMozD,SAASjnB,MAC1B4lB,IAAK,SAACF,GACF,EAAKh6C,SAAS,CACVu7C,SAAS,2BACF,EAAKpzD,MAAMozD,UADV,IAEJjnB,MAAM,GAAD,oBACE,EAAKnsC,MAAMozD,SAASjnB,OADtB,CAED0lB,SAKhB/2C,OAAQ,SAACzd,GACL,IAAI6vC,EAAW,aAAO,EAAKltC,MAAMozD,SAASjnB,OAC1Ce,EAAcA,EAAY7xC,QAAO,SAACuL,GAC9B,OAAOA,EAAEvJ,KAAOA,KAEpB,EAAKwa,SAAS,CACVu7C,SAAS,2BACF,EAAKpzD,MAAMozD,UADV,IAEJjnB,MAAOe,SAMvB,kBAACv3B,EAAA,EAAD,CACInU,UAAWG,EAAQuvD,aACnBxjD,QAAQ,aAFZ,sBAMA,kBAACo/B,EAAA,EAAD,KACI,kBAACh5B,GAAA,EAAD,CAAMtS,UAAWG,EAAQwvD,WACrB,kBAACn9C,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKuP,SAAS,CAAE+6C,aAAa,MAGjC,kBAAC1+C,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,yBAAK5vD,UAAWG,EAAQyzD,aACxB,yBAAK5zD,UAAWG,EAAQ0zD,gBAGhC,kBAACxhD,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBAAM,EAAKwsD,gBAAgBxzD,KAEpC,kBAAC4S,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC8pC,GAAA,EAAD,OAEJ,kBAACnhD,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAACz7C,EAAA,EAAD,CACInU,UAAWG,EAAQozD,iBACnBlxD,MAAM,iBAELvC,IACa,SAATA,EACK,2BACA,4BACA,OAATA,GAAiB,4BAEtB,kBAAC,KAAD,CACIE,UAAWG,EAAQqzD,sBAI/B,kBAACnhD,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBAAM,EAAKuB,qBAEpB,kBAACqK,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAAC+pC,GAAA,EAAD,OAEJ,kBAACphD,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAACz7C,EAAA,EAAD,CACInU,UAAWG,EAAQozD,iBACnBlxD,MAAM,iBAEqB,SAA1B9L,KAAKqJ,MAAM0H,YACR,qBACuB,SAA1B/Q,KAAKqJ,MAAM0H,YACR,eAEA,cADH/Q,KAAKqJ,MAAM0H,YACO,sBAEvB,kBAAC,KAAD,CACItH,UAAWG,EAAQqzD,sBAI/B,kBAACnhD,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACI1L,QAAS,kBACL,EAAKuP,SAAS,CAAEs7C,gBAAgB,KAEpCl/C,QAAM,GAEN,kBAACC,GAAA,EAAD,CAAc1S,UAAWG,EAAQ6pB,SAC7B,kBAACgqC,GAAA,EAAD,OAEJ,kBAACrhD,GAAA,EAAD,CAAcC,QAAQ,iBAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAACz7C,EAAA,EAAD,CACInU,UAAWG,EAAQozD,iBACnBlxD,MAAM,iBAEL6rB,MAEL,kBAAC,KAAD,CACIluB,UAAWG,EAAQqzD,wBAMtC94C,EAAKtD,MAAM6S,QACR,6BACI,kBAAC9V,EAAA,EAAD,CACInU,UAAWG,EAAQuvD,aACnBxjD,QAAQ,aAFZ,UAMA,kBAACo/B,EAAA,EAAD,KACI,kBAACh5B,GAAA,EAAD,CAAMtS,UAAWG,EAAQwvD,WACrB,kBAACn9C,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKuP,SAAS,CACVi7C,eAAe,MAIvB,kBAAC5+C,GAAA,EAAD,CACI1S,UAAWG,EAAQ6pB,SAEnB,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAAC,KAAD,CACI5vD,UAAWG,EAAQmwC,cAI/B,kBAACj+B,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKuP,SAAS,CACVk7C,oBAAoB,MAI5B,kBAAC7+C,GAAA,EAAD,CACI1S,UAAWG,EAAQ6pB,SAEnB,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,uBAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAAC,KAAD,CACI5vD,UAAWG,EAAQmwC,cAI/B,kBAACj+B,EAAA,EAAD,MACA,kBAACG,GAAA,EAAD,CACIC,QAAM,EACN3L,QAAS,kBACL,EAAKlH,MAAM+B,QAAQ8N,KAAK,cAG5B,kBAACiD,GAAA,EAAD,CACI1S,UAAWG,EAAQ6pB,SAEnB,kBAAC,KAAD,OAEJ,kBAACrX,GAAA,EAAD,CAAcC,QAAQ,6BAEtB,kBAACC,GAAA,EAAD,CACI7S,UAAWG,EAAQyvD,eAEnB,kBAAC,KAAD,CACI5vD,UAAWG,EAAQmwC,iBAQ/C,yBAAKtwC,UAAWG,EAAQgwB,iBAE5B,kBAACqgC,GAAD,CACIznD,QAAS,kBAAM,EAAKsN,SAAS,CAAEs7C,gBAAgB,KAC/Cz5D,KAAM3B,KAAKiI,MAAMmzD,iBAErB,kBAAC1jD,GAAA,EAAD,CACI/V,KAAM3B,KAAKiI,MAAMkzD,aACjB3oD,QAASxS,KAAKmwB,aAEd,kBAAC3X,GAAA,EAAD,6CACA,kBAACuD,GAAA,EAAD,KACK/b,KAAKiI,MAAMozD,SAAS5xB,OAAOxqB,QAAQpR,KAChC,SAACpI,EAAO6B,GAAR,OACI,kBAAC2U,GAAA,EAAD,CACIC,QAAM,EACN/G,UAAU,QACV3P,IAAK8B,EACLiJ,QAAS,kBAAM,EAAK4qD,aAAa11D,EAAMH,MAEvC,kBAACusB,GAAA,EAAD,KACKpsB,EAAMH,KACH,EAAK2C,MAAMozD,SAAS5xB,OAAOvqB,QACtB5Z,IACL,kBAAC0rB,EAAA,EAAD,CACIvnB,UACIG,EAAQ6nB,gBAGZ,kBAACtsB,GAAA,EAAD,OAGPM,EAAMH,KACH,EAAK2C,MAAMozD,SAAS5xB,OAAOvqB,QACtB5Z,IACL,kBAAC0rB,EAAA,EAAD,CACIvnB,UACIG,EAAQ4nB,gBAGZ,kBAAC,KAAD,QAIZ,kBAACpV,GAAA,EAAD,CAAcC,QAAS5W,EAAMtD,aAMjD,kBAACuV,GAAA,EAAD,CACI/V,KAAM3B,KAAKiI,MAAMoyD,YACjB7nD,QAASxS,KAAKmwB,aAEd,kBAAC3X,GAAA,EAAD,iCACA,kBAACuD,GAAA,EAAD,KACI,kBAACE,GAAA,EAAD,CACIC,QAAM,EACN/G,UAAU,QACVc,SAAiC,WAAvBjW,KAAKiI,MAAM2M,SAErB,2BACItT,KAAK,OACLq1C,OAAO,UACPtnC,MAAO,CAAE+E,QAAS,QAClBuV,IAAK3pB,KAAKs8D,UACVjnD,SAAUrV,KAAKk8D,eAEnB,kBAACrqC,GAAA,EAAD,KACI,kBAACb,EAAA,EAAD,CAAQvnB,UAAWG,EAAQ4nB,gBACvB,kBAAC,KAAD,QAGR,kBAACpV,GAAA,EAAD,CAAcC,QAAQ,oCAE1B,kBAACJ,GAAA,EAAD,CACIC,QAAM,EACN3L,QAASvQ,KAAK+7D,YACd9lD,SAAiC,aAAvBjW,KAAKiI,MAAM2M,SAErB,kBAACid,GAAA,EAAD,KACI,kBAACb,EAAA,EAAD,CAAQvnB,UAAWG,EAAQ8zD,cACvB,kBAAC,KAAD,QAGR,kBAACthD,GAAA,EAAD,CACI3S,UAAWG,EAAQ+zD,YACnBthD,QAAQ,0CAIpB,kBAACxD,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,kBAKR,kBAAC4L,GAAA,EAAD,CAAQ/V,KAAM3B,KAAKiI,MAAMqyD,UAAW9nD,QAASxS,KAAKmwB,aAC9C,kBAAC3X,GAAA,EAAD,iCACA,kBAACb,GAAA,EAAD,KACI,kBAACqG,GAAA,EAAD,CACI1Y,GAAG,gBACHmQ,MAAM,eACNhM,UAAWG,EAAQgqD,UACnBnuD,MAAOzF,KAAKiI,MAAMkL,KAClBkC,SAAUrV,KAAKwb,aAAa,QAC5B9H,OAAO,SACP2C,WAAS,KAGjB,kBAACwC,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,gBAGA,kBAACgN,EAAA,EAAD,CACIvI,QAASvQ,KAAKg8D,WACdlwD,MAAM,UACNmK,SAC2B,SAAvBjW,KAAKiI,MAAM2M,SACS,KAApB5U,KAAKiI,MAAMkL,MALnB,kBAYR,kBAACuE,GAAA,EAAD,CACI/V,KAAM3B,KAAKiI,MAAMizD,eACjB1oD,QAASxS,KAAKmwB,aAEd,kBAAC3X,GAAA,EAAD,uCACA,kBAACb,GAAA,EAAD,uLAGA,kBAACkB,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,gBAGA,kBAACgN,EAAA,EAAD,CAAQvI,QAASvQ,KAAK87D,cAAehwD,MAAM,WAA3C,kBAKR,kBAAC4L,GAAA,EAAD,CACI/V,KAAM3B,KAAKiI,MAAMsyD,eACjB/nD,QAASxS,KAAKmwB,aAEd,kBAAC3X,GAAA,EAAD,6CACA,kBAACb,GAAA,EAAD,KACI,6BACI,kBAACqG,GAAA,EAAD,CACI1Y,GAAG,gBACHmQ,MAAM,qBACNnU,KAAK,WACLmI,UAAWG,EAAQgqD,UACnBnuD,MAAOzF,KAAKiI,MAAMuyD,OAClBnlD,SAAUrV,KAAKwb,aAAa,UAC5B9H,OAAO,SACP2C,WAAS,KAGjB,6BACI,kBAAC2H,GAAA,EAAD,CACI1Y,GAAG,gBACHmQ,MAAM,qBACNnU,KAAK,WACLmI,UAAWG,EAAQgqD,UACnBnuD,MAAOzF,KAAKiI,MAAM8/C,OAClB1yC,SAAUrV,KAAKwb,aAAa,UAC5B9H,OAAO,YAGf,6BACI,kBAACsK,GAAA,EAAD,CACI1Y,GAAG,gBACHmQ,MAAM,iCACNnU,KAAK,WACLmI,UAAWG,EAAQgqD,UACnBnuD,MAAOzF,KAAKiI,MAAMyyD,aAClBrlD,SAAUrV,KAAKwb,aAAa,gBAC5B9H,OAAO,aAInB,kBAACmF,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,gBAGA,kBAACgN,EAAA,EAAD,CACIvI,QAASvQ,KAAKy8D,WACd3wD,MAAM,UACNmK,SAC2B,mBAAvBjW,KAAKiI,MAAM2M,SACW,KAAtB5U,KAAKiI,MAAMuyD,QACiB,KAA5Bx6D,KAAKiI,MAAMyyD,cACW,KAAtB16D,KAAKiI,MAAM8/C,QAPnB,kBAcR,kBAACrwC,GAAA,EAAD,CAAQ/V,KAAM3B,KAAKiI,MAAM0yD,UAAWnoD,QAASxS,KAAKmwB,aAC9C,kBAAC3X,GAAA,EAAD,KACKxY,KAAKiI,MAAMozD,SAASI,WAAa,eAAO,eAD7C,4BAIA,kBAAC9jD,GAAA,EAAD,KACI,yBAAKlO,UAAWG,EAAQg0D,wBAClB59D,KAAKiI,MAAMozD,SAASI,YAClB,yBAAKhyD,UAAWG,EAAQi0D,QACpB,kBAAC,KAAD,CACIp4D,MACI,kBACAzF,KAAKqJ,MAAM+G,MACX,WACApQ,KAAKiI,MAAMyzD,iBAM3B,yBAAKjyD,UAAWG,EAAQk0D,UAClB99D,KAAKiI,MAAMozD,SAASI,YAClB,kBAAC79C,EAAA,EAAD,0YAIH5d,KAAKiI,MAAMozD,SAASI,YACjB,kBAAC79C,EAAA,EAAD,iFAIJ,kBAACI,GAAA,EAAD,CACI1Y,GAAG,gBACHmQ,MAAM,4BACNnU,KAAK,SACLmI,UAAWG,EAAQgqD,UACnBnuD,MAAOzF,KAAKiI,MAAM2yD,SAClBvlD,SAAUrV,KAAKwb,aAAa,YAC5B9H,OAAO,SACP2C,WAAS,EACTnB,WAAS,OAKzB,kBAAC2D,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,gBAGA,kBAACgN,EAAA,EAAD,CACIvI,QAASvQ,KAAK26D,UACd7uD,MAAM,UACNmK,SAC2B,cAAvBjW,KAAKiI,MAAM2M,SACa,KAAxB5U,KAAKiI,MAAM2yD,UAGd56D,KAAKiI,MAAMozD,SAASI,WAAa,eAAO,eAR7C,8BAaR,kBAAC/jD,GAAA,EAAD,CACI/V,KAAM3B,KAAKiI,MAAM4yD,YACjBroD,QAASxS,KAAKmwB,aAEd,kBAAC3X,GAAA,EAAD,6CACA,kBAACb,GAAA,EAAD,KACI,kBAAComD,GAAA,EAAD,CACIt4D,MAAOzF,KAAKiI,MAAM6yD,YAClBkD,WAAS,EACT3oD,SAAUrV,KAAK88D,iBAEd18D,OAAOgrB,KAAKprB,KAAKiI,MAAMozD,SAASluB,QAAQt/B,KACrC,SAACpI,EAAOD,GAAR,OACI,kBAACy4D,GAAA,EAAD,CAAcx4D,MAAOA,EAAOD,IAAKA,GAC7B,yBACIiE,UAAWG,EAAQs0D,WACnB7uD,MAAO,CAAE/F,gBAAiB7D,WAOlD,kBAACoT,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,gBAGA,kBAACgN,EAAA,EAAD,CACIvI,QAASvQ,KAAK66D,YACd/uD,MAAM,UACNmK,SAC2B,gBAAvBjW,KAAKiI,MAAM2M,SACgB,OAA3B5U,KAAKiI,MAAM6yD,aALnB,kBAYR,kBAACpjD,GAAA,EAAD,CACI/V,KAAM3B,KAAKiI,MAAM8yD,cACjBvoD,QAASxS,KAAKmwB,aAEd,kBAAC3X,GAAA,EAAD,uCACA,kBAACb,GAAA,EAAD,KACI,kBAACqG,GAAA,EAAD,CACI1Y,GAAG,gBACHmE,UAAWG,EAAQgqD,UACnBnuD,MAAO3E,OAAOC,SAASi2D,OAAS,OAChCtjD,OAAO,SACP2C,WAAS,KAGjB,kBAACwC,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,kBAKR,kBAAC4L,GAAA,EAAD,CACI/V,KAAM3B,KAAKiI,MAAM+yD,mBACjBxoD,QAASxS,KAAKmwB,aAEd,kBAAC3X,GAAA,EAAD,iCACA,kBAACb,GAAA,EAAD,KACI,kBAACqG,GAAA,EAAD,CACI1Y,GAAG,gBACHmE,UAAWG,EAAQgqD,UACnBnuD,MAAO0e,EAAKiN,UACZ1d,OAAO,SACP2C,WAAS,KAGjB,kBAACwC,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAASvQ,KAAKmwB,YAAarkB,MAAM,WAAzC,uB,GAv1CW0X,aAs2CpB26C,GALKz6C,aA13CI,SAACzb,GACrB,MAAO,CACHmI,MAAOnI,EAAM4H,WAAWO,MACxBgkC,MAAOnsC,EAAM4H,WAAWukC,MACxBrjC,WAAY9I,EAAM7E,WAAW4N,uBAIV,SAAC/N,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,KAEvD0a,YAAa,SAAC1a,GACV7I,EAASujB,YAAY1a,KAEzBmE,mBAAoB,WAChBhN,EAASgN,gBAEb2rD,WAAY,SAACn6D,GACTwB,EAASiO,YAAiBzP,QAs2ClBiiB,CAGlBnK,cA79Ca,SAACzQ,GAAD,MAAY,CACvBwe,OAAO,aACHte,MAAO,OACPqO,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAC1B7K,EAAMI,YAAYqe,GAAG,KAA0B,EAAnBze,EAAM6K,QAAQ,IAAU,CACjD3K,MAAO,IACPqO,WAAY,OACZ5G,YAAa,SAGrB0oD,aAAc,CACVv/B,cAAe,OACfF,WAAY,QAEhBqgB,UAAW,CACPzlC,UAAW,MACX7D,YAAa,OACb3E,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9B2d,eAAgB,CACZloB,gBAAiB6N,KAAK,KACtBrL,MAAOqL,KAAK,MAEhBumD,aAAc,CACVp0D,gBAAiB80D,KAAO,KACxBtyD,MAAOsyD,KAAO,MAElB3sC,eAAgB,CACZnoB,gBAAiBsN,KAAM,KACvB9K,MAAO8K,KAAM,MAEjBsmD,SAAU,CACNzsD,YAAa,QAEjBusD,iBAAkB,CACdvsD,YAAa,OACb6D,UAAW,OAEf2oD,kBAAmB,CACf3oD,UAAW,MACX7D,YAAa,OACb3E,MAAOhD,EAAMe,QAAQ2N,KAAK3D,WAE9B4f,QAAS,CACLhjB,YAAa,OACb4G,WAAY,MACZ7D,SAAU,IAEd6lD,cAAe,CACXjlD,QAAS,QAEbglD,UAAW,CACP1/B,WAAY,EACZE,cAAe,GAEnBgkC,sBAAsB,aAClBxpD,QAAS,QACRtL,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,YAGjB0pD,QAAS,CACLxpD,UAAW,QAEfgpD,YAAa,CACTlqD,OAAQ,OACRpK,MAAO,OACPM,gBAAiBR,EAAMe,QAAQgK,UAAU8b,KACzClI,aAAc,MACdhX,YAAa,QAEjB4sD,WAAY,CACRjqD,OAAQ,OACRpK,MAAO,OACPM,gBAAiBR,EAAMe,QAAQwS,QAAQsT,KACvClI,aAAc,MACdhX,YAAa,OAEjBytD,WAAY,CACR9qD,OAAQ,OACRpK,MAAO,QAEX4wB,cAAe,CACXnD,aAAc,QAElBknC,YAAa,CACThkC,aAAc7wB,EAAM6K,QAAQ,IAEhCkqD,OAAQ,CACJ70D,MAAO,IACPsL,UAAW,GACX7D,YAAa,OAi4CnB8I,CAAmBoK,YAAWy2C,MCphDjB,SAASiE,KACpB,IAAMl2C,EAJC,IAAIC,gBAAgBF,cAAcG,QAKnCtnB,EAAWmnB,cACX9c,EAAU4xB,cACV/5B,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAECoxC,EAAcrkC,uBAAY,SAAClH,GAAD,OAAW7F,EAASujB,YAAY1d,MAAS,CACrE7F,IAEEqxC,EAAmBtkC,uBACrB,SAACiH,GAAD,OAAYhU,EAASwjB,YAAiBxP,MACtC,CAAChU,IAf4B,EAkBX8C,mBAAS,IAlBE,mBAkB1B9E,EAlB0B,KAkBrBq9D,EAlBqB,KAuC3B5pB,EAAa,SAACh0C,GAChBE,IAAK6D,aAAa/D,GAGc,KAA5BA,EAAI,iBACJ2zC,EAAY3zC,EAAI,iBAEpB0sC,KAGAkH,GAAiB,GACjB,IAAMK,EAjBY,SAACxyC,GACnB,IAAMqyC,EAAM,IAAIzmC,OAAO,QAAU5L,EAAO,gBAAgB,KAClDsyC,EAAI3zC,OAAOC,SAASsnB,OAAOtb,OAAO,GAAGu/B,MAAMkI,GACjD,OAAO,MAAHC,EAAiBA,EAAE,GAAY,GAcnBF,CAAe,WAClB,IAATI,EACAvpC,EAAQ8N,KAAK,SAGQ,SADAy7B,EAAQ3nC,MAAM,KAClB,GACb5B,EAAQ8N,KAAK,SAEbpY,OAAOC,SAASC,KAAO4zC,mBAAmBD,GAAS,UAtC9C,SAACxyC,GAIV,IAHJ,IACUgxB,EADQzoB,SAASC,OACKqC,MAAM,MAExBhD,EAAI,EAAGA,EAAImpB,EAAUprB,OAAQiC,IAAK,CACxC,IAAMopB,EAAMD,EAAUnpB,GAAGgD,MAAM,KAC/B,GAAIomB,EAAI,IAAMjxB,EACV,OAAOkxB,SAASD,EAAI,IAGhC,OAAO,KA4B8DF,CAAU,SAG/Epe,EAAe,MAAO,QAAS,2BAAQ,WAEvChQ,aAAa+vC,WAAW,oBA4B5B,OAzBAxuC,qBAAU,WACF8hB,EAAMnJ,IAAI,qBACVs/C,EAAOn2C,EAAMnJ,IAAI,sBAGK,OAAtBmJ,EAAMnJ,IAAI,SAGdnJ,IAAIC,KAAK,eAAgB,CACrBhW,KAAMqoB,EAAMnJ,IAAI,QAChB/W,MAAOkgB,EAAMnJ,IAAI,WAEhBjJ,MAAK,SAACxV,GAC2B,MAA1BA,EAASE,QAAQX,KACjB40C,EAAWn0C,EAASG,MAEpB0K,EAAQ8N,KAAK3Y,EAASG,SAG7BsV,OAAM,SAACjW,GACJu+D,EAAOv+D,EAAMF,cAGtB,CAACkB,IAEG,oCAAW,KAARE,GAAc,kBAAC+rC,EAAD,CAAQ/rC,IAAKA,K,8CCnFnC2H,GAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,QACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,MAAQ,CAC1Bve,MAAO,IACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,KAVZ,GAYNqkB,MAAO,CACHxgB,UAAWxL,EAAM6K,QAAQ,GACzBS,QAAS,OACT++B,cAAe,SACfj/B,WAAY,SACZjL,QAAQ,GAAD,OAAKH,EAAM6K,QAAQ,GAAnB,cAA2B7K,EAAM6K,QAAQ,GAAzC,cAAiD7K,EAAM6K,QAC1D,GADG,OAIXuD,OAAQ,CACJxD,OAAQ5K,EAAM6K,QAAQ,GACtBrK,gBAAiBR,EAAMe,QAAQgK,UAAU8b,MAE7CyjB,KAAM,CACFpqC,MAAO,OACPsL,UAAWxL,EAAM6K,QAAQ,IAE7Bs+B,OAAQ,CACJ39B,UAAWxL,EAAM6K,QAAQ,IAE7BwW,KAAM,CACF7V,UAAW,OACXF,QAAS,OACTpL,MAAO,OACPywB,eAAgB,iBAEpBwV,iBAAiB,aACb76B,QAAS,OACTE,UAAW,QACVxL,EAAMI,YAAYC,KAAK,MAAQ,CAC5BiL,QAAS,UAGjBi7B,mBAAoB,CAChBrmC,MAAO,KAEXqqC,gBAAiB,CACbj/B,QAAS,QAEbk/B,UAAW,CACPzoB,UAAW,SACXvW,UAAW,IAEfiqD,cAAe,CACX7qD,OAAQ5K,EAAM6K,QAAQ,GACtBrK,gBAAiBR,EAAMe,QAAQwS,QAAQsT,UA8KhC6uC,OA1Kf,WAAqB,IAAD,EACUz4D,mBAAS,CAC/BytC,MAAO,GACP14B,SAAU,GACV2jD,gBAAiB,KAJL,mBACT//C,EADS,KACFggD,EADE,OAMc34D,oBAAS,GANvB,mBAMT6O,EANS,KAMAC,EANA,OAOsB9O,oBAAS,GAP/B,mBAOT44D,EAPS,KAOIC,EAPJ,KASVxuD,EAAQR,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAWO,SAChDyuD,EAAajvD,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAWgvD,cAErD57D,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAECmI,EAAU4xB,cAEVnd,EAAoB,SAAC1d,GAAD,OAAU,SAACoE,GACjCm4D,EAAS,2BACFhgD,GADC,kBAEHvc,EAAOoE,EAAE6B,OAAO3C,WAvBT,EAkCZ0sC,KANAG,EA5BY,EA4BZA,eACAN,EA7BY,EA6BZA,WACAa,EA9BY,EA8BZA,SACAD,EA/BY,EA+BZA,cACAJ,EAhCY,EAgCZA,kBACAG,EAjCY,EAiCZA,iBAEE/oC,EAAUhB,KAoChB,OACI,yBAAKa,UAAWG,EAAQ0d,QACpB,qCACMq3C,GACE,kBAAC5pB,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAC9D,EAAA,EAAD,CAAQvnB,UAAWG,EAAQsN,QACvB,kBAAC,KAAD,OAEJ,kBAAC0G,EAAA,EAAD,CAAYzI,UAAU,KAAKQ,QAAQ,MAAnC,gBACQvF,GAGR,0BAAM3G,UAAWG,EAAQwpC,KAAM3wB,SA9ClC,SAAXmpB,EAAYrlC,GACdA,EAAEwS,iBAEE2F,EAAM5D,WAAa4D,EAAM+/C,iBAK7B5pD,GAAW,GACNm9B,EAAW9yB,QAAQ8yB,aAAc6sB,EAItChpD,IAAIC,KAAK,QAAT,aACIm/B,SAAUv2B,EAAM80B,MAChB0B,SAAUx2B,EAAM5D,UACb63B,EAAiBzzB,UAEnBnJ,MAAK,SAACxV,GACHsU,GAAW,GACmB,MAA1BtU,EAASE,QAAQX,KACjB8+D,GAAe,IAEfxzD,EAAQ8N,KAAK,mBAAqBwF,EAAM80B,OACxC1+B,EAAe,MAAO,QAAS,2BAAQ,eAG9CkB,OAAM,SAACjW,GACJ8U,GAAW,GACXC,EAAe,MAAO,QAAS/U,EAAMF,QAAS,WAC9C2yC,EAAkBtzB,aApBtB2zB,GAAS,kBAAMjH,EAASrlC,KAAIsO,IAN5BC,EAAe,MAAO,QAAS,yDAAa,aA2C5B,kBAAC2H,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,SAApB,4BAGA,kBAACwyB,EAAA,EAAD,CACI7pC,GAAG,QACHhE,KAAK,QACLa,KAAK,QACLkT,SAAUwK,EAAkB,SAC5BuvB,cAAY,EACZ3pC,MAAOiZ,EAAM80B,MACbn9B,WAAS,KAGjB,kBAACoG,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,YAApB,gBACA,kBAACwyB,EAAA,EAAD,CACIhtC,KAAK,WACLkT,SAAUwK,EAAkB,YAC5Bve,KAAK,WACLgE,GAAG,WACHG,MAAOiZ,EAAM5D,SACbs0B,cAAY,KAGpB,kBAAC3yB,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,YAApB,4BAGA,kBAACwyB,EAAA,EAAD,CACIhtC,KAAK,YACLkT,SAAUwK,EACN,mBAEJve,KAAK,WACLgE,GAAG,YACHG,MAAOiZ,EAAM+/C,gBACbrvB,cAAY,KAGnByvB,GAAc,kBAACjsB,EAAD,MAEf,kBAAC95B,EAAA,EAAD,CACIxX,KAAK,SACL4T,WAAS,EACTS,QAAQ,YACR7J,MAAM,UACNmK,SACIrB,KACCiqD,GAAavsB,EAElB7oC,UAAWG,EAAQqoC,QATvB,6BAeJ,kBAACn2B,EAAA,EAAD,MACA,yBAAKrS,UAAWG,EAAQugB,MACpB,6BACI,kBAAC8jB,EAAA,EAAD,CAAMjtC,KAAM,UAAZ,6BAEJ,6BACI,kBAACitC,EAAA,EAAD,CAAMjtC,KAAM,qDAAsDoH,OAAO,UAAzE,+BAKfu2D,GACG,kBAAC5pB,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAC9D,EAAA,EAAD,CAAQvnB,UAAWG,EAAQ20D,eACvB,kBAAC,KAAD,OAEJ,kBAAC3gD,EAAA,EAAD,CAAYzI,UAAU,KAAKQ,QAAQ,MAAnC,4BAGA,kBAACiI,EAAA,EAAD,CAAYvO,MAAO,CAAEiF,UAAW,SAAhC,8MChOTwqD,OAhBf,WAWI,OACI,6BAVY,WACZ,IAAM1zD,EAAU4xB,cAEV+hC,EAAM,IAAIn8D,KAChBm8D,EAAIv0D,QAAQu0D,EAAIt0D,UAAYu0D,SAC5Bt0D,SAASC,OAAS,uBAAuBo0D,EAAIE,cAAc,WAC3D7zD,EAAQ8N,KAAK,SAIPgmD,KCNRt2D,GAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,QACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,MAAQ,CAC1Bve,MAAO,IACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,KAVZ,GAYNqkB,MAAO,CACHxgB,UAAWxL,EAAM6K,QAAQ,GACzBS,QAAS,OACT++B,cAAe,SACfj/B,WAAY,SACZjL,QAAQ,GAAD,OAAKH,EAAM6K,QAAQ,GAAnB,cAA2B7K,EAAM6K,QAAQ,GAAzC,cAAiD7K,EAAM6K,QAC1D,GADG,OAIXuD,OAAQ,CACJxD,OAAQ5K,EAAM6K,QAAQ,GACtBrK,gBAAiBR,EAAMe,QAAQgK,UAAU8b,MAE7CsiB,OAAQ,CACJ39B,UAAWxL,EAAM6K,QAAQ,QAqElBwrD,OA7Df,WACI,IAAMh3C,EAJC,IAAIC,gBAAgBF,cAAcG,QAKnCtnB,EAAWmnB,cAFC,EAIYniB,oBAAS,GAJrB,mBAIXopB,EAJW,KAIFiwC,EAJE,OAKQr5D,mBAAS,IALjB,mBAKXytC,EALW,KAKJC,EALI,KAOZxwC,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAECmI,EAAU4xB,cAEVpzB,EAAUhB,KAiBhB,OAfAvC,qBAAU,WACNwP,IAAImJ,IACA,kBAAoBmJ,EAAMnJ,IAAI,MAAQ,SAAWmJ,EAAMnJ,IAAI,SAE1DjJ,MAAK,SAACxV,GACHkzC,EAASlzC,EAASG,MAClB0+D,GAAW,MAEdppD,OAAM,SAACjW,GACJ+U,EAAe,MAAO,QAAS/U,EAAMF,QAAS,WAC9CuL,EAAQ8N,KAAK,eAGtB,CAACnY,IAGA,yBAAK0I,UAAWG,EAAQ0d,QACnB6H,GACG,kBAAC4lB,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAC9D,EAAA,EAAD,CAAQvnB,UAAWG,EAAQsN,QACvB,kBAAC,KAAD,OAEJ,kBAAC0G,EAAA,EAAD,CAAYzI,UAAU,KAAKQ,QAAQ,MAAnC,4BAGA,kBAACiI,EAAA,EAAD,CAAYvO,MAAO,CAAEiF,UAAW,SAAhC,sEAGA,kBAACwE,EAAA,EAAD,CACIxX,KAAK,SACL4T,WAAS,EACTS,QAAQ,YACR7J,MAAM,UACNrC,UAAWG,EAAQqoC,OACnB1hC,QAAS,kBAAMnF,EAAQ8N,KAAK,mBAAqBs6B,KANrD,+BCtEd5qC,GAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,QACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,MAAQ,CAC1Bve,MAAO,IACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,KAVZ,GAYNqkB,MAAO,CACHxgB,UAAWxL,EAAM6K,QAAQ,GACzBS,QAAS,OACT++B,cAAe,SACfj/B,WAAY,SACZjL,QAAQ,GAAD,OAAKH,EAAM6K,QAAQ,GAAnB,cAA2B7K,EAAM6K,QAAQ,GAAzC,cAAiD7K,EAAM6K,QAC1D,GADG,OAIXuD,OAAQ,CACJxD,OAAQ5K,EAAM6K,QAAQ,GACtBrK,gBAAiBR,EAAMe,QAAQgK,UAAU8b,MAE7CsiB,OAAQ,CACJ39B,UAAWxL,EAAM6K,QAAQ,IAE7BwW,KAAM,CACF7V,UAAW,OACXF,QAAS,OACTpL,MAAO,OACPywB,eAAgB,qBAiHT4lC,OAzGf,WACI,IAAMl3C,EAJC,IAAIC,gBAAgBF,cAAcG,QAGxB,EAEStiB,mBAAS,CAC/B+U,SAAU,GACV2jD,gBAAiB,KAJJ,mBAEV//C,EAFU,KAEHggD,EAFG,OAMa34D,oBAAS,GANtB,mBAMV6O,EANU,KAMDC,EANC,KAOXgL,EAAoB,SAAC1d,GAAD,OAAU,SAACoE,GACjCm4D,EAAS,2BACFhgD,GADC,kBAEHvc,EAAOoE,EAAE6B,OAAO3C,WAGnBxC,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAECmI,EAAU4xB,cAyBVpzB,EAAUhB,KAEhB,OACI,yBAAKa,UAAWG,EAAQ0d,QACpB,kBAACytB,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAC9D,EAAA,EAAD,CAAQvnB,UAAWG,EAAQsN,QACvB,kBAAC,KAAD,OAEJ,kBAAC0G,EAAA,EAAD,CAAYzI,UAAU,KAAKQ,QAAQ,MAAnC,4BAGA,0BAAMlM,UAAWG,EAAQwpC,KAAM3wB,SAlC5B,SAAClc,GACZA,EAAEwS,iBACE2F,EAAM5D,WAAa4D,EAAM+/C,iBAI7B5pD,GAAW,GACXgB,IAAI6L,MAAM,cAAe,CACrB49C,OAAQn3C,EAAMnJ,IAAI,QAClB1Z,GAAI6iB,EAAMnJ,IAAI,MACdk2B,SAAUx2B,EAAM5D,WAEf/E,MAAK,WACFlB,GAAW,GACXzJ,EAAQ8N,KAAK,UACbpE,EAAe,MAAO,QAAS,iCAAS,cAE3CkB,OAAM,SAACjW,GACJ8U,GAAW,GACXC,EAAe,MAAO,QAAS/U,EAAMF,QAAS,eAhBlDiV,EAAe,MAAO,QAAS,yDAAa,aAgCpC,kBAAC2H,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,SAApB,sBACA,kBAACwyB,EAAA,EAAD,CACI7pC,GAAG,MACHhE,KAAK,WACLa,KAAK,MACLkT,SAAUwK,EAAkB,YAC5BuvB,cAAY,EACZ3pC,MAAOiZ,EAAM5D,SACbzE,WAAS,KAGjB,kBAACoG,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,SAApB,kCACA,kBAACwyB,EAAA,EAAD,CACI7pC,GAAG,YACHhE,KAAK,WACLa,KAAK,YACLkT,SAAUwK,EAAkB,mBAC5BuvB,cAAY,EACZ3pC,MAAOiZ,EAAM+/C,gBACbpoD,WAAS,KAGjB,kBAACyC,EAAA,EAAD,CACIxX,KAAK,SACL4T,WAAS,EACTS,QAAQ,YACR7J,MAAM,UACNmK,SAAUrB,EACVnL,UAAWG,EAAQqoC,QANvB,4BASU,KACN,IACR,kBAACn2B,EAAA,EAAD,MACA,yBAAKrS,UAAWG,EAAQugB,MACpB,6BACI,kBAAC8jB,EAAA,EAAD,CAAMjtC,KAAM,UAAZ,6BAEJ,6BACI,kBAACitC,EAAA,EAAD,CAAMjtC,KAAM,WAAZ,iCC1IlB4H,GAAYC,aAAW,SAACC,GAAD,YAAY,CACrCwe,QAAM,GACFte,MAAO,OACPsL,UAAW,QACX+C,WAAYvO,EAAM6K,QAAQ,GAC1BlD,YAAa3H,EAAM6K,QAAQ,IAJzB,cAKD7K,EAAMI,YAAYqe,GAAG,MAAQ,CAC1Bve,MAAO,IACPqO,WAAY,OACZ5G,YAAa,SARf,6BAUY,KAVZ,GAYNqkB,MAAO,CACHxgB,UAAWxL,EAAM6K,QAAQ,GACzBS,QAAS,OACT++B,cAAe,SACfj/B,WAAY,SACZjL,QAAQ,GAAD,OAAKH,EAAM6K,QAAQ,GAAnB,cAA2B7K,EAAM6K,QAAQ,GAAzC,cAAiD7K,EAAM6K,QAC1D,GADG,OAIXuD,OAAQ,CACJxD,OAAQ5K,EAAM6K,QAAQ,GACtBrK,gBAAiBR,EAAMe,QAAQgK,UAAU8b,MAE7CsiB,OAAQ,CACJ39B,UAAWxL,EAAM6K,QAAQ,IAE7Bs7B,iBAAkB,CACd76B,QAAS,OACTE,UAAW,QAEf+6B,mBAAoB,CAChBrmC,MAAO,KAEXmhB,KAAM,CACF7V,UAAW,OACXF,QAAS,OACTpL,MAAO,OACPywB,eAAgB,qBAiHT8lC,OA7Gf,WAAkB,IAcap9D,EAdd,EACa4D,mBAAS,CAC/BytC,MAAO,KAFE,mBACN90B,EADM,KACCggD,EADD,OAIiB34D,oBAAS,GAJ1B,mBAIN6O,EAJM,KAIGC,EAJH,KAKP2qD,EAAgB5vD,aAClB,SAAC3H,GAAD,OAAWA,EAAM4H,WAAW2vD,iBAE1Bv8D,EAAW6M,cACXgF,EAAiB9E,uBACnB,SAACiC,EAAUC,EAAYjR,EAAK6K,GAA5B,OACI7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,MACvD,CAAC7I,IAZQ,EA4BTkvC,KANAG,EAtBS,EAsBTA,eACAN,EAvBS,EAuBTA,WACAa,EAxBS,EAwBTA,SACAD,EAzBS,EAyBTA,cACAJ,EA1BS,EA0BTA,kBACAG,EA3BS,EA2BTA,iBA8BE/oC,EAAUhB,KAEhB,OACI,yBAAKa,UAAWG,EAAQ0d,QACpB,kBAACytB,EAAA,EAAD,CAAOtrC,UAAWG,EAAQkrB,OACtB,kBAAC9D,EAAA,EAAD,CAAQvnB,UAAWG,EAAQsN,QACvB,kBAAC,KAAD,OAEJ,kBAAC0G,EAAA,EAAD,CAAYzI,UAAU,KAAKQ,QAAQ,MAAnC,4BAGA,0BAAMlM,UAAWG,EAAQwpC,KAAM3wB,SAtC5B,SAATwvB,EAAU1rC,GACZA,EAAEwS,iBACFlE,GAAW,GACNm9B,EAAW9yB,QAAQ8yB,aAAcwtB,EAItC3pD,IAAIC,KAAK,cAAT,aACIm/B,SAAUv2B,EAAM80B,OACbb,EAAiBzzB,UAEnBnJ,MAAK,WACFlB,GAAW,GACXC,EACI,MACA,QACA,6FACA,cAGPkB,OAAM,SAACjW,GACJ8U,GAAW,GACXC,EAAe,MAAO,QAAS/U,EAAMF,QAAS,WAC9C2yC,EAAkBtzB,aAnBtB2zB,GAAS,kBAAMZ,EAAO1rC,KAAIsO,KAmClB,kBAAC4H,EAAA,EAAD,CAAa/I,OAAO,SAASw7B,UAAQ,EAACh6B,WAAS,GAC3C,kBAACwH,EAAA,EAAD,CAAYC,QAAQ,SAApB,4BACA,kBAACwyB,EAAA,EAAD,CACI7pC,GAAG,QACHhE,KAAK,QACLa,KAAK,QACLkT,UA7DGlT,EA6DyB,QA7DhB,SAACoE,GACjCm4D,EAAS,2BACFhgD,GADC,kBAEHvc,EAAOoE,EAAE6B,OAAO3C,WA2DD2pC,cAAY,EACZ3pC,MAAOiZ,EAAM80B,MACbn9B,WAAS,KAGhBmpD,GAAiB,kBAAC5sB,EAAD,MAClB,kBAAC95B,EAAA,EAAD,CACIxX,KAAK,SACL4T,WAAS,EACTS,QAAQ,YACR7J,MAAM,UACNmK,SACIrB,KAAY4qD,GAAgBltB,EAEhC7oC,UAAWG,EAAQqoC,QARvB,oDAWU,KACN,IACR,kBAACn2B,EAAA,EAAD,MACA,yBAAKrS,UAAWG,EAAQugB,MACpB,6BACI,kBAAC8jB,EAAA,EAAD,CAAMjtC,KAAM,UAAZ,6BAEJ,6BACI,kBAACitC,EAAA,EAAD,CAAMjtC,KAAM,WAAZ,iC,UClJlB4H,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCwK,eAAgB,GAChByG,QAAS,CACL0lD,aAAc,kBAIP,SAASC,KACpB,IAAM3lD,EAAUnK,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAW8vD,eAClD/1D,EAAUhB,KAFiB,EAGT7C,oBAAS,GAHA,mBAG1B+nC,EAH0B,KAGpBC,EAHoB,KAcjC,OANA1nC,qBAAU,WACN,IAAMu5D,EAAYh/D,IAAK+E,cAAc,eACrB,KAAZoU,GAAkB6lD,IAAc7lD,GAChCg0B,GAAQ,KAEb,CAACh0B,IAEA,kBAACrC,GAAA,EAAD,CACI/V,KAAMmsC,EACNt7B,QAAS,kBAAMu7B,GAAQ,IACvB/4B,kBAAgB,oBAChBC,SAAS,KACTC,WAAS,GAET,kBAACsD,GAAA,EAAD,CAAalT,GAAG,qBAAhB,gBACA,kBAACqS,GAAA,EAAD,CACIlO,UAAWG,EAAQmQ,QACnB8lD,wBAAyB,CAAEC,OAAQ/lD,KAGvC,kBAAClB,GAAA,EAAD,KACI,kBAACC,EAAA,EAAD,CAAQvI,QAAS,kBAxBzBw9B,GAAQ,QACRntC,IAAK2E,cAAc,cAAewU,IAuBQjO,MAAM,WAAxC,4BAGA,kBAACgN,EAAA,EAAD,CAAQvI,QAAS,kBAAMw9B,GAAQ,KAA/B,kBClBhB,IAAMgyB,GAAYrlD,IAAM+P,MAAK,kBACzB,+DAGW,SAASu1C,KACpB,IAAMC,EAAcrwD,aAAY,SAAC3H,GAAD,OAAWA,EAAM4H,WAAW/G,SACtDopB,EAAUtiB,aAAY,SAAC3H,GAAD,OAAWA,EAAM7E,WAAW8uB,WAClDguC,EAAkBC,YAAc,gCAEhCr3D,EAAQ4R,IAAM0lD,SAAQ,WACxBH,EAAYp2D,QAAQvI,KAAO4+D,EAAkB,OAAS,QACtD,IAAMG,EAASz/D,IAAK+E,cAAc,cAC9B06D,IACAJ,EAAYp2D,QAAQvI,KAAO++D,GAE/B,IAAMv3D,EAAQw3D,YAAe,2BACtBL,GADqB,IAExBp2D,QAAQ,2BACDo2D,EAAYp2D,SADZ,IAEHwS,QAAQ,2BACD4jD,EAAYp2D,QAAQwS,SADpB,IAEHsT,KACiC,SAA7BswC,EAAYp2D,QAAQvI,KACdq+B,YAAQsgC,EAAYp2D,QAAQwS,QAAQsT,KAAM,IAC1CswC,EAAYp2D,QAAQwS,QAAQsT,YASlD,OALA9jB,YACiC,SAA7Bo0D,EAAYp2D,QAAQvI,KACdwH,EAAMe,QAAQqQ,WAAWC,QACzBrR,EAAMe,QAAQwS,QAAQsT,MAEzB7mB,IACR,CAACo3D,EAAiBD,IAcfr2D,EAZYf,aAAW,SAACC,GAAD,MAAY,CACrC0Q,KAAM,CACFpF,QAAS,QAEb2F,QAAS,CACLqc,SAAU,EACVntB,QAASH,EAAM6K,QAAQ,GACvBH,SAAU,GAEdqW,QAAS/gB,EAAM8sB,OAAO/L,WAGVjhB,GAER3E,EAAS8jB,cAAT9jB,KACR,OACI,kBAAC,IAAMs8D,SAAP,KACI,kBAACC,EAAA,EAAD,CAAe13D,MAAOA,GAClB,yBAAKW,UAAWG,EAAQ4P,KAAMlU,GAAG,aAC7B,kBAACm7D,EAAA,EAAD,MACA,kBAAC,IAAD,MACA,kBAACjrC,EAAA,EAAD,MACA,0BAAM/rB,UAAWG,EAAQmQ,SACrB,yBAAKtQ,UAAWG,EAAQigB,UACxB,kBAAC,IAAD,KACI,kBAAC,EAAD,CAAW62C,OAAK,EAACz8D,KAAMA,EAAMiuB,QAASA,GAClC,kBAAC,IAAD,CACIwa,GAAI,CACAlsB,SAAU,YAKtB,kBAAC,EAAD,CAAWvc,KAAI,UAAKA,EAAL,QAAiBiuB,QAASA,GACrC,oCACI,kBAACwtC,GAAD,MACA,kBAAC,GAAD,QAIR,kBAAC,EAAD,CAAWz7D,KAAI,UAAKA,EAAL,SAAkBiuB,QAASA,GACtC,kBAAC,GAAD,OAGJ,kBAAC,EAAD,CAAWjuB,KAAI,UAAKA,EAAL,QAAiBiuB,QAASA,GACrC,kBAACyuC,GAAA,EAAD,OAGJ,kBAAC,EAAD,CAAW18D,KAAI,UAAKA,EAAL,OAAgBiuB,QAASA,GACpC,kBAACy9B,GAAD,OAGJ,kBAAC,EAAD,CAAW1rD,KAAI,UAAKA,EAAL,OAAgBiuB,QAASA,GACpC,kBAAC,WAAD,CAAU7G,SAAU,kBAAC,EAAD,OAChB,kBAAC00C,GAAD,QAIR,kBAAC,EAAD,CAAW97D,KAAI,UAAKA,EAAL,QAAiBiuB,QAASA,GACrC,kBAAC0uC,GAAA,EAAD,OAGJ,kBAAC,EAAD,CAAW38D,KAAI,UAAKA,EAAL,SAAkBiuB,QAASA,GACtC,kBAAC,GAAD,OAGJ,kBAAC,EAAD,CAAWjuB,KAAI,UAAKA,EAAL,UAAmBiuB,QAASA,GACvC,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAOjuB,KAAI,UAAKA,EAAL,UAAmBiuB,QAASA,GACnC,kBAACw0B,GAAD,OAGJ,kBAAC,EAAD,CAAWziD,KAAI,UAAKA,EAAL,SAAkBiuB,QAASA,GACtC,kBAAC,GAAD,OAGJ,kBAAC,EAAD,CAAWjuB,KAAI,UAAKA,EAAL,OAAgBiuB,QAASA,GACpC,kBAAC,GAAD,OAGJ,kBAAC,EAAD,CACIjuB,KAAI,UAAKA,EAAL,WACJiuB,QAASA,GAET,kBAAC,GAAD,OAGJ,kBAAC,EAAD,CACIjuB,KAAI,UAAKA,EAAL,eACJiuB,QAASA,GAET,kBAAC,GAAD,OAGJ,kBAAC,EAAD,CAAWjuB,KAAI,UAAKA,EAAL,UAAmBiuB,QAASA,GACvC,kBAAC0jC,GAAD,OAGJ,kBAAC,EAAD,CAAW3xD,KAAI,UAAKA,EAAL,SAAkBiuB,QAASA,GACtC,kBAACwlC,GAAD,OAGJ,kBAAC,EAAD,CAAWzzD,KAAI,UAAKA,EAAL,eAAwBiuB,QAASA,GAC5C,kBAAC4lC,GAAD,OAGJ,kBAAC,IAAD,CAAO7zD,KAAI,UAAKA,EAAL,QAAiBy8D,OAAK,GAC7B,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAOz8D,KAAI,UAAKA,EAAL,SAAkBy8D,OAAK,GAC9B,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAOz8D,KAAI,UAAKA,EAAL,UAAmBy8D,OAAK,GAC/B,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAOz8D,KAAI,UAAKA,EAAL,YAAqBy8D,OAAK,GACjC,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAOz8D,KAAI,UAAKA,EAAL,SAAkBy8D,OAAK,GAC9B,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAOz8D,KAAI,UAAKA,EAAL,UAAmBy8D,OAAK,GAC/B,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAOz8D,KAAI,UAAKA,EAAL,aACP,kBAACo6D,GAAD,OAGJ,kBAAC,IAAD,CAAOqC,OAAK,EAACz8D,KAAI,UAAKA,EAAL,UACb,kBAACqrD,GAAD,OAGJ,kBAAC,IAAD,CAAOrrD,KAAI,UAAKA,EAAL,oBACP,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAOA,KAAI,UAAKA,EAAL,kBACP,kBAAC0rD,GAAD,OAGJ,kBAAC,IAAD,CAAO1rD,KAAI,UAAKA,EAAL,mBACP,kBAAC08D,GAAA,EAAD,OAGJ,kBAAC,IAAD,CAAO18D,KAAI,UAAKA,EAAL,kBACP,kBAAC,WAAD,CAAUonB,SAAU,kBAAC,EAAD,OAChB,kBAAC00C,GAAD,QAIR,kBAAC,IAAD,CAAO97D,KAAI,UAAKA,EAAL,mBACP,kBAAC28D,GAAA,EAAD,OAGJ,kBAAC,IAAD,CAAO38D,KAAK,KACR,kBAAC,EAAD,CAAUhD,IAAK,yC,wBCnLlC0F,GAA6B,CAEtCurB,QAAStxB,IAAKuE,QACdwtB,cAAc,EACdhxB,MAAM,EACNqP,mBAAoB,OACpB7N,WAAY,UACZoxB,SAAU,KACV0sB,YAAa,OACbC,aAAa,EACbP,UAAU,EACVr7B,kBAAkB,EAClBy9B,gBAAgB,EAChBG,kBAAmB,KACnB7pC,eAAe,EACfshB,gBAAgB,EAChBpJ,oBAAqB,KACrB89B,yBAA0B,KAC1B93C,OAAQ,CACJmL,iBAAiB,EACjBC,eAAe,EACftC,QAAQ,EACRwC,MAAM,EACNE,QAAQ,EACRlS,OAAO,EACPmS,OAAO,EACPE,gBAAgB,EAChBE,iBAAiB,EACjB9C,WAAW,EACXsC,MAAM,EACNE,QAAQ,EACRQ,UAAU,EACVC,UAAU,EACVF,YAAY,EACZzO,SAAS,EACT6C,YAAa,IAEjBwY,SAAU,CACNC,QAAQ,EACRje,SAAU,MACVC,WAAY,SACZjR,IAAK,GACL6K,MAAO,KAuOA1I,GApOI,WAA4D,IAA3D6E,EAA0D,uDAAjCtB,GAAWuB,EAAsB,uCAC1E,OAAQA,EAAO5G,MACX,IAAK,gBACD,OAAOlB,OAAO+H,OAAO,GAAIF,EAAO,CAC5BtG,KAAMuG,EAAOvG,OAErB,IAAK,qBACD,OAAOvB,OAAO+H,OAAO,GAAIF,EAAO,CAC5B+I,mBAAoB9I,EAAOzG,SAEnC,IAAK,+BACD,OAAOrB,OAAO+H,OAAO,GAAIF,EAAO,CAC5Bqd,iBAAkBpd,EAAO+O,SAEjC,IAAK,sBACD,OAAO7W,OAAO+H,OAAO,GAAIF,EAAO,CAC5B86C,eAAgB76C,EAAO+O,OACvBisC,kBAAmBh7C,EAAOjH,MAElC,IAAK,4BACD,OAAOb,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpCmL,iBAAiB,IAErBw+B,aAAa,IAErB,IAAK,0BACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpCoL,eAAe,IAEnBu+B,aAAa,IAErB,IAAK,qBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpC8I,QAAQ,IAEZ6gC,aAAa,IAErB,IAAK,qBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpCwL,QAAQ,IAEZm+B,aAAa,IAErB,IAAK,mBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpCsL,MAAM,IAEVq+B,aAAa,IAErB,IAAK,qBAED,OADApgD,OAAO0gB,SAAWtZ,EAAO1C,IAClBpF,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpCuL,QAAQ,IAEZo+B,aAAa,IAErB,IAAK,mBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BspB,oBAAqBrpB,EAAOie,SAEpC,IAAK,yBACD,OAAO/lB,OAAO+H,OAAO,GAAIF,EAAO,CAC5BonD,yBAA0BnnD,EAAOie,SAEzC,IAAK,oBACD,OAAO/lB,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpC1G,OAAO,IAEXqwC,aAAa,IAErB,IAAK,oBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpCyL,OAAO,IAEXk+B,aAAa,IAErB,IAAK,8BACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpC2L,gBAAgB,IAEpBg+B,aAAa,IAErB,IAAK,+BACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpC6L,iBAAiB,IAErB89B,aAAa,IAErB,IAAK,yBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpC8L,YAAY,IAEhB69B,aAAa,IAErB,IAAK,uBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpC+L,UAAU,IAEd49B,aAAa,IAErB,IAAK,yBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpC+I,WAAW,IAEf4gC,aAAa,IAErB,IAAK,uBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpCgM,UAAU,IAEd29B,aAAa,IAErB,IAAK,mBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpCqL,MAAM,IAEVs+B,aAAa,IAErB,IAAK,sBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpC3C,SAAS,EACT6C,YAAavP,EAAOsP,OAExB0pC,aAAa,IAErB,IAAK,qBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5Bi5C,aAAa,IAErB,IAAK,mBACD,OAAO9gD,OAAO+H,OAAO,GAAIF,EAAO,CAC5BsP,OAAQnX,OAAO+H,OAAO,GAAIF,EAAMsP,OAAQ,CACpCmL,iBAAiB,EACjBC,eAAe,EACftC,QAAQ,EACRwC,MAAM,EACNE,QAAQ,EACRlS,OAAO,EACPmS,OAAO,EACPE,gBAAgB,EAChBE,iBAAiB,EACjB9C,WAAW,EACXwC,QAAQ,EACRF,MAAM,EACNhO,SAAS,EACT2O,UAAU,EACVD,UAAU,EACVD,YAAY,MAGxB,IAAK,kBACD,OAAOjjB,OAAO+H,OAAO,GAAIF,EAAO,CAC5BgoB,SAAU,CACNC,QAASjoB,EAAMgoB,SAASC,OACxBje,SAAU/J,EAAO+J,SACjBC,WAAYhK,EAAOgK,WACnBjR,IAAKiH,EAAOjH,IACZ6K,MAAO5D,EAAO4D,SAG1B,IAAK,qBACD,OAAO1L,OAAO+H,OAAO,GAAIF,EAAO,CAC5BoR,cAAenR,EAAO+O,SAE9B,IAAK,qBACD,OAAO,2BACAhP,GADP,IAEIiqB,QAAShqB,EAAO+O,SAExB,IAAK,uBACD,OAAO7W,OAAO+H,OAAO,GAAIF,EAAO,CAC5B0qB,cAAc,IAEtB,IAAK,kBACD,OAAOvyB,OAAO+H,OAAO,GAAIF,EAAO,CAC5B0yB,gBAAiB1yB,EAAM0yB,iBAE/B,IAAK,iBACD,OAAOv6B,OAAO+H,OAAO,GAAIF,EAAO,CAC5Bi5C,aAAa,EACb6B,gBAAgB,EAChBz9B,kBAAkB,IAE1B,IAAK,sBACD,OAAIrd,EAAMi5C,aAAeh5C,EAAOvG,KACrBvB,OAAO+H,OAAO,GAAIF,GAEtB7H,OAAO+H,OAAO,GAAIF,EAAO,CAC5Bi5C,YAAah5C,EAAOvG,KACpBs/C,YAAa/4C,EAAO2d,WAE5B,IAAK,eACD,OAAOzlB,OAAO+H,OAAO,GAAIF,EAAO,CAC5BssB,SAAUrsB,EAAOkI,QAEzB,IAAK,kBACD,OAAO,2BACAnI,GADP,IAEI9E,WAAY+E,EAAOzG,SAE3B,IAAK,gBACD,OAAO,2BACAwG,GADP,IAEIi5C,aAAa,EACb6B,gBAAgB,EAChBz9B,iBAAkBpd,EAAOod,mBAEjC,QACI,OAAOrd,I,UClUb44D,GAAa,SAAC58D,EAAMgE,GAEtB,OADAnH,OAAOgoC,WAAa7kC,EACb7D,OAAO+H,OAAO,GAAIF,EAAO,CAC5B5F,UAAWjC,OAAO+H,OAAO,GAAIF,EAAM5F,UAAW,CAC1C4B,KAAMA,OA+DZ68D,G/DvCwB,SAACC,GAE3B,IAAMC,EAAcn8D,KAAKhC,MAAMiC,aAAaC,QAAQ,oBACjC,MAAfi8D,IACAD,EAASlxD,WAAamxD,GAK1B,IAAMxsB,EAAM,IAAIzmC,OAAO,yBAAmC,KACpD0mC,EAAI3zC,OAAOC,SAASsnB,OAAOtb,OAAO,GAAGu/B,MAAMkI,GAC3CnoC,EAAO,MAAHooC,EAAUG,mBAAmBH,EAAE,IAAM,KAQ/C,OANAssB,EAAS1+D,UAAU4B,KAAa,OAANoI,EAAa,IAAMA,EAE7C00D,EAASlxD,WAAaq9B,GAAe6zB,EAASlxD,YAG9CnF,SAAS0F,MAAQ2wD,EAASlxD,WAAWO,MAC9B2wD,E+DoBWE,CA1DG,CACrBpxD,WAAY,CACRO,MAAOtP,OAAOyzB,SACdsZ,UAAW,GACXqG,cAAc,EACd2qB,YAAY,EACZW,eAAe,EACfb,aAAa,EACbxqB,SAAS,EACThH,OAAQ,KACRiH,OAAO,EACPtrC,MAAO,CACHe,QAAS,CACLyvB,OAAQ,CAAE4nC,MAAO,OAAQ3nC,MAAO,QAChCrf,WAAY,CAAE4a,MAAO,OAAQ3a,QAAS,WACtCkC,QAAS,CACLvI,MAAO,UACP6b,KAAM,UACNpmB,KAAM,UACN43D,aAAc,QAElBttD,UAAW,CACPC,MAAO,UACP6b,KAAM,UACNpmB,KAAM,UACN43D,aAAc,QAElBphE,MAAO,CACH+T,MAAO,UACP6b,KAAM,UACNpmB,KAAM,UACN43D,aAAc,QAElB3pD,KAAM,CACF6E,QAAS,sBACTxI,UAAW,sBACXoC,SAAU,sBACVqtC,KAAM,uBAEV1/C,SAAU,CACNuK,SAAU,UACVoB,KAAM,UACN6xD,WAAY,UACZje,UAAW,aAIvB/R,qBAAsB,aACtBuuB,YAAa,GACbttB,aAAc,SACdX,wBAAyB,IAE7BrvC,UAAW,CACP4B,KAAM,IACNm2B,SAAS,KCxDXinC,G,oDACF,WAAYh4D,GAAQ,IAAD,+BACf,cAAMA,IACDpB,MAAQ,CAAE05B,UAAU,EAAO5hC,MAAO,KAAMuhE,UAAW,MAFzC,E,sDAUnB,SAAkBvhE,EAAOuhE,GACrBthE,KAAK8f,SAAS,CACV/f,MAAOA,EACPuhE,UAAWA,M,oBAInB,WAAU,IACE13D,EAAY5J,KAAKqJ,MAAjBO,QACR,OAAI5J,KAAKiI,MAAM05B,SAGP,oCACI,wBAAIl4B,UAAWG,EAAQkgB,IAAvB,MACA,wBAAIrgB,UAAWG,EAAQmgB,IAAvB,gHAGC/pB,KAAKiI,MAAMlI,OACRC,KAAKiI,MAAMq5D,WACXthE,KAAKiI,MAAMq5D,UAAUC,gBACjB,iCACI,6DACA,6BACI,8BAAOvhE,KAAKiI,MAAMlI,MAAMwN,aAE5B,6BACI,8BACKvN,KAAKiI,MAAMq5D,UAAUC,mBAS/CvhE,KAAKqJ,MAAMxD,Y,uCAzCtB,WAEI,MAAO,CAAE87B,UAAU,O,GARCjnB,IAAM8I,WAmDnBjK,gBA7DA,CACXuQ,GAAI,CACAhe,MAAO,UACP4H,OAAQ,WAEZqW,GAAI,CACArW,OAAQ,aAuDD6F,CAAmB8nD,I,oBChElC,yCAgBA,IAAMG,GAAQ9mD,IAAM+P,MAAK,kBAAM,wDAEF,KAAzB3pB,OAAOC,SAAS0gE,OAChB3gE,OAAOC,SAASC,KAAOF,OAAOC,SAAS0gE,KAAKz0D,MAAM,KAAK,IrE2EpD,SAAkBqa,GACrB,GAA6C,kBAAmBhlB,UAAW,CAGvE,GADkB,IAAIq/D,IAAI7tC,GAAwB/yB,OAAOC,SAASC,MACpDg2D,SAAWl2D,OAAOC,SAASi2D,OAIrC,OAGJl2D,OAAOwF,iBAAiB,QAAQ,WAC5B,IAAMolC,EAAK,UAAM7X,GAAN,sBAEPuY,IArDhB,SAAiCV,EAAOrkB,GAEpCs6C,MAAMj2B,GACD31B,MAAK,SAACxV,GAEH,IAAMqhE,EAAcrhE,EAASg8D,QAAQv9C,IAAI,gBAEjB,MAApBze,EAAS0W,QACO,MAAf2qD,IAC0C,IAAvCA,EAAY52D,QAAQ,cAGxB3I,UAAUspC,cAAck2B,MAAM9rD,MAAK,SAAC81B,GAChCA,EAAai2B,aAAa/rD,MAAK,WAC3BjV,OAAOC,SAAS2vB,eAKxB+a,EAAgBC,EAAOrkB,MAG9BrR,OAAM,WACHyT,QAAQtf,IACJ,oEA+BA43D,CAAwBr2B,EAAOrkB,GAI/BhlB,UAAUspC,cAAck2B,MAAM9rD,MAAK,WAC/B0T,QAAQtf,IACJ,iHAMRshC,EAAgBC,EAAOrkB,OqEpGvCskB,GACO,IAAMvgC,GAAU42D,eACnBC,GAAeC,YAAgBC,aAAiB/2D,IAAU82B,KAQ9D,IF2HgB92B,GE3HVkiC,GAAQ80B,aF2HEh3D,GE3HsBA,GF2HV,SAACnD,EAAOC,GAAY,IAAD,EAEvCD,GAAS,GADOo6D,EADuB,EACnCj/D,WAAuCk/D,EADJ,EACN1+D,SAE/B2+D,EAlFW,WAAoC,IAAnCt6D,EAAkC,uDAA1B64D,GAAe54D,EAAW,uCACpD,OAAQA,EAAO5G,MACX,IAAK,gBACD,OAAOu/D,GAAW34D,EAAOjE,KAAMgE,GACnC,IAAK,uBACD,IAAM2a,EAAOxiB,OAAO+H,OAAO,GAAIF,GAC/B,YAC2CtH,IAAvCiiB,EAAK/S,WAAW/G,MAAMe,QAAQvI,MACS,UAAvCshB,EAAK/S,WAAW/G,MAAMe,QAAQvI,KAEvB,2BACA2G,GADP,IAEI4H,WAAW,2BACJ5H,EAAM4H,YADH,IAEN/G,MAAM,2BACCb,EAAM4H,WAAW/G,OADnB,IAEDe,QAAQ,2BACD5B,EAAM4H,WAAW/G,MAAMe,SADvB,IAEHvI,KAAM,eAMnB,2BACA2G,GADP,IAEI4H,WAAW,2BACJ5H,EAAM4H,YADH,IAEN/G,MAAM,2BACCb,EAAM4H,WAAW/G,OADnB,IAEDe,QAAQ,2BACD5B,EAAM4H,WAAW/G,MAAMe,SADvB,IAEHvI,KAAM,gBAM1B,IAAK,cACD,GAAgC,OAA5B2G,EAAM4H,WAAWs9B,OAAiB,CAClC,IAAMA,EAAStoC,KAAKhC,MAAMoF,EAAM4H,WAAWs9B,QAC3C,YAA6BxsC,IAAzBwsC,EAAOjlC,EAAOY,OACPb,EAEJ7H,OAAO+H,OAAO,GAAIF,EAAO,CAC5B4H,WAAYzP,OAAO+H,OAAO,GAAIF,EAAM4H,WAAY,CAC5C/G,MAAOqkC,EAAOjlC,EAAOY,WAIjC,MACJ,IAAK,eACD,OAAO+3D,GAAW34D,EAAOjE,KAAMgE,GACnC,IAAK,kBACD,OAAO7H,OAAO+H,OAAO,GAAIF,EAAO,CAC5B4H,WAAY3H,EAAOmf,SAG3B,IAAK,oBACD,OAAOjnB,OAAO+H,OAAO,GAAIF,EAAO,CAC5B5F,UAAWjC,OAAO+H,OAAO,GAAIF,EAAM5F,UAAW,CAC1C+3B,SAAUnyB,EAAM5F,UAAU+3B,YAGtC,IAAK,iBACD,OAAOh6B,OAAO+H,OAAO,GAAIF,EAAO,CAC5B5F,UAAWjC,OAAO+H,OAAO,GAAIF,EAAM5F,UAAW,CAC1C4B,KAAM,4BACNm2B,QACgC,KAA5BnyB,EAAMrE,SAAS+D,SACTM,EAAM5F,UAAU+3B,SACfnyB,EAAM5F,UAAU+3B,YAGvC,QACI,OAAOnyB,GAOEu6D,CAAav6D,EAAOC,GAC/Bu6D,EGxJqB,SAACrsB,GAC5B,IAAMssB,EAAkBC,YAAQvsB,GAEhC,OAAO,SAACnuC,EAAYC,GAChB,GACIA,EAAO5G,OACN4G,EAAO5G,KAAK6C,WAAW,OACxB+D,EAAO5G,KAAK0L,MAAM,KAAKjF,OAAS,EAClC,CACE,IAAM66D,EAAY16D,EAAO5G,KAAK0L,MAAM,KAAK,GACnC61D,EAAUzsB,EAASwsB,GAEzB,OADAE,OAAYD,EAAH,kBAAuBD,EAAvB,mBACFC,GAAWA,EAAQ56D,EAAOC,GAErC,OAAOw6D,EAAgBz6D,EAAOC,IH0IZ66D,CAAgB,CAClC3/D,cACAQ,oBACAogB,OAAQg/C,aAAc53D,KAHJ23D,CAInB,CAAE3/D,WAAYi/D,EAAiBz+D,SAAU0+D,GAAiBp6D,GAC7D,OAAO,2BACAq6D,GACAE,KEtIqCR,KjEgCzC,SAAP,4BiE/BAgB,CAAiB31B,IAEjB41B,IAASz2B,OACL,kBAAC,GAAD,KACI,kBAAC,IAAD,CAAUa,MAAOA,IACb,kBAAC,KAAD,CAAiBliC,QAASA,IACtB,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOnH,KAAK,UACR,kBAAC,WAAD,CAAUonB,SAAU,cAChB,kBAACm2C,GAAD,QAGR,kBAAC,IAAD,CAAOd,OAAK,EAACz8D,KAAK,IACd,kBAAC+7D,GAAD,WAMpBt1D,SAASy4D,eAAe,U,gPEItBC,E,4MACFn7D,MAAQ,CACJyQ,YAAa,IACbrV,QAAS,GACTggE,eAAgB,M,EAGpB7wC,kBAAoB,WAChB,IAAM8wC,EAAW,EAAKj6D,MAAMqP,YAC5B,EAAKymC,YAAoC,KAAxB,EAAK91C,MAAM1B,SAAkB27D,EAAW,M,EAG7DC,KAAO,WACH,IAAMC,EAAQ,EAAKv7D,MAAMyQ,YAAY1L,MAAM,KAC3Cw2D,EAAMt1D,MACN,IAAMo1D,EAAWE,EAAMt2D,KAAK,KAC5B,EAAKiyC,YAAyB,KAAbmkB,EAAkB,IAAMA,I,EAG7CnkB,YAAc,SAACmkB,GAGA,KAFKxiE,OAAOC,SAASC,KACbgM,MAAM,KAClB,KAASs2D,EAAW,KAC3BztD,IAAImJ,KACC,EAAK3V,MAAMo6D,IAAM,EAAKp6D,MAAMo6D,IAAM,cAC/BxiD,mBAAmBqiD,IAEtBvtD,MAAK,SAACxV,GACH,IAAM8C,EAAU9C,EAASG,KAAK23C,QAAQ/0C,QAAO,SAACC,GAC1C,MACe,QAAXA,EAAEjC,OAKM,IAJR,EAAK+H,MAAMtC,SAASib,WAAU,SAACvc,GAC3B,OACIA,EAAMtD,OAASoB,EAAEpB,MAAQsD,EAAMxB,OAASV,EAAEU,WAKzC,MAAbq/D,GACAjgE,EAAQqgE,QAAQ,CAAEvhE,KAAM,IAAK8B,KAAM,KAEvC,EAAK6b,SAAS,CACVpH,YAAa4qD,EACbjgE,QAASA,EACTggE,eAAgB,UAGvBrtD,OAAM,SAACjW,GACJ,EAAKsJ,MAAM8I,eACP,MACA,QACApS,EAAMF,QACN,e,EAKhB8jE,aAAe,SAACr8D,GACZ,EAAKwY,SAAS,CAAEujD,eAAgB/7D,IAChC,EAAK+B,MAAMsP,SAAS,EAAK1Q,MAAM5E,QAAQiE,K,4CAG3C,WAAU,IAAD,OACGsC,EAAY5J,KAAKqJ,MAAjBO,QAER,OACI,yBAAKH,UAAWG,EAAQirB,WACpB,kBAAC,IAAD,CAAUprB,UAAWG,EAAQg6D,UACG,MAA3B5jE,KAAKiI,MAAMyQ,aACR,kBAAC,IAAD,CAAUnI,QAASvQ,KAAKujE,MACpB,kBAAC,IAAD,KACI,kBAAC,IAAD,OAEJ,kBAAC,IAAD,CAAclnD,QAAQ,oCAG7Brc,KAAKiI,MAAM5E,QAAQwK,KAAI,SAACpI,EAAO6B,GAAR,OACpB,kBAAC,IAAD,CACIsC,QAAS,CACL7C,SAAU6C,EAAQ7C,UAEtBvB,IAAK8B,EACLP,SAAU,EAAKkB,MAAMo7D,iBAAmB/7D,EACxCiJ,QAAS,kBAAM,EAAKozD,aAAar8D,KAEjC,kBAAC,IAAD,CAAcmC,UAAWG,EAAQ2F,MAC7B,kBAAC,IAAD,OAEJ,kBAAC,IAAD,CACI3F,QAAS,CAAEyS,QAASzS,EAAQyS,SAC5BA,QAAS5W,EAAMtD,KACf0hE,uBAAwB,CACpBx0D,MAAO,CAAEwsB,WAAY,aAGb,MAAfp2B,EAAMtD,MACH,kBAAC,IAAD,CACIsH,UAAWG,EAAQk6D,YAEnB,kBAAC,IAAD,CACIr6D,UAAW6G,IAAW,eACjB1G,EAAQm6D,UACL,EAAK97D,MAAMo7D,iBACX/7D,IAERiJ,QAAS,kBACL,EAAK4uC,YACc,MAAf15C,EAAMxB,KACAwB,EAAMxB,KAAOwB,EAAMtD,KACnBsD,EAAMxB,KACF,IACAwB,EAAMtD,QAIxB,kBAAC,IAAD,kB,GAnHJqhB,aAqIrBE,iBAzKS,SAACzb,GACrB,MAAO,CACHN,SAAUM,EAAMrE,SAAS+D,aAIN,SAAC1E,GACxB,MAAO,CACHkP,eAAgB,SAACF,EAAUC,EAAYjR,EAAK6K,GACxC7I,EAASkP,YAAeF,EAAUC,EAAYjR,EAAK6K,QAgKhD4X,CAGbnK,aA9Ja,SAACzQ,GAAD,MAAY,CACvBi7D,UAAW,CACPj4D,MAAOhD,EAAMe,QAAQyvB,OAAOC,OAEhCxyB,SAAU,CACNuC,gBAAiBR,EAAMe,QAAQwS,QAAQsT,KAAO,aAC9C,sBAAuB,CACnB7jB,MAAOhD,EAAMe,QAAQyvB,OAAOC,QAGpCld,QAAS,GACT9M,KAAM,GACNu0D,WAAY,GACZF,SAAU,CACNpwD,SAAU,SAEdqhB,UAAW,CACPkY,UAAW,QACX3V,UAAW,YA4IjB7d,CAAmB6pD,K,gCCzLrB,oEAAO,IAOMt/D,EAAmB,WAC5B,MAAO,CACHxC,KAAM,uBAIDknB,EAAiB,SAC1BpY,GAEA,OAAO,SAACnN,EAAUC,GACd,IAAM+E,EAAQ/E,IACdwH,SAAS0F,MACK,OAAVA,QAA4BzP,IAAVyP,EACZnI,EAAM4H,WAAWO,MACjBA,EAAQ,MAAQnI,EAAM4H,WAAWO,MAC3CnN,EAtBmB,SAACmN,GACxB,MAAO,CACH9O,KAAM,eACN8O,SAmBS4zD,CAAY5zD,Q","file":"static/js/main.73288c94.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport Auth from \"./Auth\";\r\n\r\nexport const baseURL = \"/api/v3\";\r\n\r\nexport const getBaseURL = () => {\r\n    return baseURL;\r\n};\r\n\r\nconst instance = axios.create({\r\n    baseURL: getBaseURL(),\r\n    withCredentials: true,\r\n    crossDomain: true,\r\n});\r\n\r\nfunction AppError(message, code, error) {\r\n    this.code = code;\r\n    this.message = message || \"未知错误\";\r\n    this.message += error ? \" \" + error : \"\";\r\n    this.stack = new Error().stack;\r\n}\r\nAppError.prototype = Object.create(Error.prototype);\r\nAppError.prototype.constructor = AppError;\r\n\r\ninstance.interceptors.response.use(\r\n    function (response) {\r\n        response.rawData = response.data;\r\n        response.data = response.data.data;\r\n        if (\r\n            response.rawData.code !== undefined &&\r\n            response.rawData.code !== 0 &&\r\n            response.rawData.code !== 203\r\n        ) {\r\n            // 登录过期\r\n            if (response.rawData.code === 401) {\r\n                Auth.signout();\r\n                window.location.href = \"/login\";\r\n            }\r\n\r\n            // 非管理员\r\n            if (response.rawData.code === 40008) {\r\n                window.location.href = \"/home\";\r\n            }\r\n            throw new AppError(\r\n                response.rawData.msg,\r\n                response.rawData.code,\r\n                response.rawData.error\r\n            );\r\n        }\r\n        return response;\r\n    },\r\n    function (error) {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default instance;\r\n","import { AnyAction } from \"redux\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { CloudreveFile, SortMethod } from \"./../../types/index\";\r\nimport { closeContextMenu } from \"../viewUpdate/action\";\r\n\r\nexport interface ActionSetFileList extends AnyAction {\r\n    type: \"SET_FILE_LIST\";\r\n    list: CloudreveFile[];\r\n}\r\nexport const setFileList = (list: CloudreveFile[]): ActionSetFileList => {\r\n    return {\r\n        type: \"SET_FILE_LIST\",\r\n        list,\r\n    };\r\n};\r\n\r\nexport interface ActionSetDirList extends AnyAction {\r\n    type: \"SET_DIR_LIST\";\r\n    list: CloudreveFile[];\r\n}\r\nexport const setDirList = (list: CloudreveFile[]): ActionSetDirList => {\r\n    return {\r\n        type: \"SET_DIR_LIST\",\r\n        list,\r\n    };\r\n};\r\n\r\nexport interface ActionSetSortMethod extends AnyAction {\r\n    type: \"SET_SORT_METHOD\";\r\n    method: SortMethod;\r\n}\r\nexport const setSortMethod = (method: SortMethod): ActionSetSortMethod => {\r\n    return {\r\n        type: \"SET_SORT_METHOD\",\r\n        method,\r\n    };\r\n};\r\n\r\nexport const setSideBar = (open: boolean) => {\r\n    return {\r\n        type: \"SET_SIDE_BAR\",\r\n        open,\r\n    };\r\n};\r\n\r\ntype SortFunc = (a: CloudreveFile, b: CloudreveFile) => number;\r\nconst sortMethodFuncs: Record<SortMethod, SortFunc> = {\r\n    sizePos: (a: CloudreveFile, b: CloudreveFile) => {\r\n        return a.size - b.size;\r\n    },\r\n    sizeRes: (a: CloudreveFile, b: CloudreveFile) => {\r\n        return b.size - a.size;\r\n    },\r\n    namePos: (a: CloudreveFile, b: CloudreveFile) => {\r\n        return a.name.localeCompare(\r\n            b.name,\r\n            navigator.languages[0] || navigator.language,\r\n            { numeric: true, ignorePunctuation: true }\r\n        );\r\n    },\r\n    nameRev: (a: CloudreveFile, b: CloudreveFile) => {\r\n        return b.name.localeCompare(\r\n            a.name,\r\n            navigator.languages[0] || navigator.language,\r\n            { numeric: true, ignorePunctuation: true }\r\n        );\r\n    },\r\n    timePos: (a: CloudreveFile, b: CloudreveFile) => {\r\n        return Date.parse(a.date) - Date.parse(b.date);\r\n    },\r\n    timeRev: (a: CloudreveFile, b: CloudreveFile) => {\r\n        return Date.parse(b.date) - Date.parse(a.date);\r\n    },\r\n};\r\n\r\nexport const updateFileList = (\r\n    list: CloudreveFile[]\r\n): ThunkAction<any, any, any, any> => {\r\n    return (dispatch, getState): void => {\r\n        const state = getState();\r\n        // TODO: define state type\r\n        const { sortMethod } = state.viewUpdate;\r\n        const dirList = list.filter((x) => {\r\n            return x.type === \"dir\";\r\n        });\r\n        const fileList = list.filter((x) => {\r\n            return x.type === \"file\";\r\n        });\r\n        const sortFunc = sortMethodFuncs[sortMethod as SortMethod];\r\n        dispatch(setDirList(dirList.sort(sortFunc)));\r\n        dispatch(setFileList(fileList.sort(sortFunc)));\r\n    };\r\n};\r\n\r\nexport const changeSortMethod = (\r\n    method: SortMethod\r\n): ThunkAction<any, any, any, any> => {\r\n    return (dispatch, getState): void => {\r\n        const state = getState();\r\n        const { fileList, dirList } = state.explorer;\r\n        const sortFunc = sortMethodFuncs[method];\r\n        dispatch(setSortMethod(method));\r\n        dispatch(setDirList(dirList.sort(sortFunc)));\r\n        dispatch(setFileList(fileList.sort(sortFunc)));\r\n    };\r\n};\r\n\r\nexport const toggleObjectInfoSidebar = (\r\n    open: boolean\r\n): ThunkAction<any, any, any, any> => {\r\n    return (dispatch, getState): void => {\r\n        const state = getState();\r\n        if (open) {\r\n            dispatch(closeContextMenu());\r\n        }\r\n        dispatch(setSideBar(true));\r\n    };\r\n};\r\n","const statusHelper = {\r\n    isHomePage(path) {\r\n        return path === \"/home\";\r\n    },\r\n    isSharePage(path) {\r\n        return path && path.startsWith(\"/s/\");\r\n    },\r\n    isAdminPage(path) {\r\n        return path && path.startsWith(\"/admin\");\r\n    },\r\n    isLoginPage(path) {\r\n        return path && path.startsWith(\"/login\");\r\n    },\r\n    isMobile() {\r\n        return window.innerWidth < 600;\r\n    },\r\n};\r\nexport default statusHelper;\r\n","const Auth = {\r\n    isAuthenticated: false,\r\n    authenticate(cb: any) {\r\n        Auth.SetUser(cb);\r\n        Auth.isAuthenticated = true;\r\n    },\r\n    GetUser() {\r\n        return JSON.parse(localStorage.getItem(\"user\") || \"null\");\r\n    },\r\n    SetUser(newUser: any) {\r\n        localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n    },\r\n    Check(): boolean {\r\n        if (Auth.isAuthenticated) {\r\n            return true;\r\n        }\r\n        if (localStorage.getItem(\"user\") !== null) {\r\n            return !Auth.GetUser().anonymous;\r\n        }\r\n        return false;\r\n    },\r\n    signout() {\r\n        Auth.isAuthenticated = false;\r\n        const oldUser = Auth.GetUser();\r\n        oldUser.id = 0;\r\n        localStorage.setItem(\"user\", JSON.stringify(oldUser));\r\n    },\r\n    SetPreference(key: string, value: any) {\r\n        let preference = JSON.parse(\r\n            localStorage.getItem(\"user_preference\") || \"{}\"\r\n        );\r\n        preference = preference == null ? {} : preference;\r\n        preference[key] = value;\r\n        localStorage.setItem(\"user_preference\", JSON.stringify(preference));\r\n    },\r\n    GetPreference(key: string): any | null {\r\n        const preference = JSON.parse(\r\n            localStorage.getItem(\"user_preference\") || \"{}\"\r\n        );\r\n        if (preference && preference[key]) {\r\n            return preference[key];\r\n        }\r\n        return null;\r\n    },\r\n};\r\n\r\nexport default Auth;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nfunction AutoHidden({ children, enable }) {\r\n    const [hidden, setHidden] = useState(false);\r\n\r\n    let prev = window.scrollY;\r\n    let lastUpdate = window.scrollY;\r\n    const show = 50;\r\n\r\n    useEffect(() => {\r\n        const handleNavigation = (e) => {\r\n            const window = e.currentTarget;\r\n\r\n            if (prev > window.scrollY) {\r\n                if (lastUpdate - window.scrollY > show) {\r\n                    lastUpdate = window.scrollY;\r\n                    setHidden(false);\r\n                }\r\n            } else if (prev < window.scrollY) {\r\n                if (window.scrollY - lastUpdate > show) {\r\n                    lastUpdate = window.scrollY;\r\n                    setHidden(true);\r\n                }\r\n            }\r\n            prev = window.scrollY;\r\n        };\r\n        if (enable) {\r\n            window.addEventListener(\"scroll\", (e) => handleNavigation(e));\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [enable]);\r\n\r\n    return <Zoom in={!hidden}>{children}</Zoom>;\r\n}\r\n\r\nexport default AutoHidden;\r\n","/* eslint-disable no-case-declarations */\r\nimport { AnyAction } from \"redux\";\r\nimport { CloudreveFile } from \"../../types\";\r\n\r\ninterface SelectProps {\r\n    isMultiple: boolean;\r\n    withFolder: boolean;\r\n    withFile: boolean;\r\n}\r\n\r\nexport interface ExplorerState {\r\n    dndSignal: boolean;\r\n    dndTarget: any;\r\n    dndSource: any;\r\n    fileList: CloudreveFile[];\r\n    dirList: CloudreveFile[];\r\n    selected: CloudreveFile[];\r\n    selectProps: SelectProps;\r\n    lastSelect: {\r\n        file: CloudreveFile;\r\n        index: number;\r\n    };\r\n    shiftSelectedIds: string[];\r\n    imgPreview: {\r\n        first: CloudreveFile;\r\n        other: [];\r\n    };\r\n    keywords: string;\r\n    fileSave: boolean;\r\n    sideBarOpen: boolean;\r\n}\r\n\r\nexport const initState: ExplorerState = {\r\n    dndSignal: false,\r\n    dndTarget: null,\r\n    dndSource: null,\r\n    fileList: [],\r\n    dirList: [],\r\n    selected: [],\r\n    selectProps: {\r\n        isMultiple: false,\r\n        withFolder: false,\r\n        withFile: false,\r\n    },\r\n    lastSelect: {\r\n        file: {\r\n            id: \"\",\r\n            name: \"\",\r\n            size: 0,\r\n            type: \"file\",\r\n            date: \"\",\r\n        },\r\n        index: -1,\r\n    },\r\n    shiftSelectedIds: [],\r\n    imgPreview: {\r\n        first: {\r\n            id: \"\",\r\n            name: \"\",\r\n            size: 0,\r\n            type: \"file\",\r\n            date: \"\",\r\n        },\r\n        other: [],\r\n    },\r\n    keywords: \"\",\r\n    fileSave: false,\r\n    sideBarOpen: false,\r\n};\r\n\r\nconst checkSelectedProps = (selected: CloudreveFile[]): SelectProps => {\r\n    const isMultiple = selected.length > 1;\r\n    let withFolder = false;\r\n    let withFile = false;\r\n    selected.forEach((value) => {\r\n        if (value.type === \"dir\") {\r\n            withFolder = true;\r\n        } else if (value.type === \"file\") {\r\n            withFile = true;\r\n        }\r\n    });\r\n    return {\r\n        isMultiple,\r\n        withFolder,\r\n        withFile,\r\n    };\r\n};\r\n\r\nconst explorer = (\r\n    state: ExplorerState = initState,\r\n    action: AnyAction\r\n): ExplorerState => {\r\n    switch (action.type) {\r\n        case \"DRAG_AND_DROP\":\r\n            return Object.assign({}, state, {\r\n                dndSignal: !state.dndSignal,\r\n                dndTarget: action.target,\r\n                dndSource: action.source,\r\n            });\r\n        case \"SET_FILE_LIST\":\r\n            return Object.assign({}, state, {\r\n                fileList: action.list,\r\n            });\r\n        case \"SET_DIR_LIST\":\r\n            return Object.assign({}, state, {\r\n                dirList: action.list,\r\n            });\r\n        case \"ADD_SELECTED_TARGETS\":\r\n            const addedSelected = [...state.selected, ...action.targets];\r\n            return Object.assign({}, state, {\r\n                selected: addedSelected,\r\n                selectProps: checkSelectedProps(addedSelected),\r\n            });\r\n        case \"SET_SELECTED_TARGET\":\r\n            const newSelected = action.targets;\r\n            return Object.assign({}, state, {\r\n                selected: newSelected,\r\n                selectProps: checkSelectedProps(newSelected),\r\n            });\r\n        case \"RMOVE_SELECTED_TARGETS\":\r\n            const { fileIds } = action;\r\n            const filteredSelected = state.selected.filter((file) => {\r\n                return !fileIds.includes(file.id);\r\n            });\r\n            return Object.assign({}, state, {\r\n                selected: filteredSelected,\r\n                selectProps: checkSelectedProps(filteredSelected),\r\n            });\r\n        case \"REFRESH_FILE_LIST\":\r\n            return Object.assign({}, state, {\r\n                selected: [],\r\n                selectProps: {\r\n                    isMultiple: false,\r\n                    withFolder: false,\r\n                    withFile: false,\r\n                },\r\n            });\r\n        case \"SEARCH_MY_FILE\":\r\n            return Object.assign({}, state, {\r\n                selected: [],\r\n                selectProps: {\r\n                    isMultiple: false,\r\n                    withFolder: false,\r\n                    withFile: false,\r\n                },\r\n                keywords: action.keywords,\r\n            });\r\n        case \"SHOW_IMG_PREIVEW\":\r\n            return Object.assign({}, state, {\r\n                imgPreview: {\r\n                    first: action.first,\r\n                    other: state.fileList,\r\n                },\r\n            });\r\n        case \"SAVE_FILE\":\r\n            return {\r\n                ...state,\r\n                fileSave: !state.fileSave,\r\n            };\r\n        case \"SET_LAST_SELECT\":\r\n            const { file, index } = action;\r\n            return {\r\n                ...state,\r\n                lastSelect: {\r\n                    file,\r\n                    index,\r\n                },\r\n            };\r\n        case \"SET_SHIFT_SELECTED_IDS\":\r\n            const { shiftSelectedIds } = action;\r\n            return {\r\n                ...state,\r\n                shiftSelectedIds,\r\n            };\r\n        case \"SET_NAVIGATOR\":\r\n            return {\r\n                ...state,\r\n                selected: [],\r\n                selectProps: {\r\n                    isMultiple: false,\r\n                    withFolder: false,\r\n                    withFile: false,\r\n                },\r\n                keywords: \"\",\r\n            };\r\n        case \"SET_SIDE_BAR\":\r\n            return {\r\n                ...state,\r\n                sideBarOpen: action.open,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default explorer;\r\n","import React from \"react\";\r\nimport { Code } from \"react-content-loader\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    loader: {\r\n        width: \"70%\",\r\n        padding: 40,\r\n        [theme.breakpoints.down(\"md\")]: {\r\n            width: \"100%\",\r\n            padding: 10,\r\n        },\r\n    },\r\n}));\r\n\r\nconst MyLoader = (props) => (\r\n    <Code\r\n        backgroundColor={props.dark ? \"#333\" : \"#f5f6f7\"}\r\n        foregroundColor={props.dark ? \"#636363\" : \"#eee\"}\r\n        className={props.className}\r\n    />\r\n);\r\n\r\nfunction TextLoading() {\r\n    const theme = useTheme();\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div>\r\n            <MyLoader\r\n                dark={theme.palette.type === \"dark\"}\r\n                className={classes.loader}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TextLoading;\r\n","export const sizeToString = (bytes) => {\r\n    if (bytes === 0 || bytes === \"0\") return \"0 B\";\r\n    const k = 1024;\r\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return (bytes / Math.pow(k, i)).toFixed(1) + \" \" + sizes[i];\r\n};\r\n\r\nexport const fixUrlHash = (path) => {\r\n    return path;\r\n};\r\n\r\nexport const setCookie = (name, value, days) => {\r\n    if (days) {\r\n        const date = new Date();\r\n        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\r\n    }\r\n    document.cookie = name + \"=\" + (value || \"\") + \"; path=/\";\r\n};\r\n\r\nexport const setGetParameter = (paramName, paramValue) => {\r\n    let url = window.location.href;\r\n\r\n    if (url.indexOf(paramName + \"=\") >= 0) {\r\n        const prefix = url.substring(0, url.indexOf(paramName));\r\n        let suffix = url.substring(url.indexOf(paramName));\r\n        suffix = suffix.substring(suffix.indexOf(\"=\") + 1);\r\n        suffix =\r\n            suffix.indexOf(\"&\") >= 0\r\n                ? suffix.substring(suffix.indexOf(\"&\"))\r\n                : \"\";\r\n        url = prefix + paramName + \"=\" + paramValue + suffix;\r\n    } else {\r\n        if (url.indexOf(\"?\") < 0) url += \"?\" + paramName + \"=\" + paramValue;\r\n        else url += \"&\" + paramName + \"=\" + paramValue;\r\n    }\r\n    if (url === window.location.href) {\r\n        return;\r\n    }\r\n    window.history.pushState(null, null, url);\r\n};\r\n\r\nexport const allowSharePreview = () => {\r\n    if (!window.isSharePage) {\r\n        return true;\r\n    }\r\n    if (window.isSharePage) {\r\n        if (window.shareInfo.allowPreview) {\r\n            return true;\r\n        }\r\n        if (window.userInfo.uid === -1) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n};\r\n\r\nexport const checkGetParameters = (field) => {\r\n    const url = window.location.href;\r\n    if (url.indexOf(\"?\" + field + \"=\") !== -1) return true;\r\n    else if (url.indexOf(\"&\" + field + \"=\") !== -1) return true;\r\n    return false;\r\n};\r\n\r\nexport const changeThemeColor = (color) => {\r\n    const metaThemeColor = window.document.querySelector(\r\n        \"meta[name=theme-color]\"\r\n    );\r\n    metaThemeColor.setAttribute(\"content\", color);\r\n};\r\n\r\nexport function bufferDecode(value) {\r\n    return Uint8Array.from(atob(value), (c) => c.charCodeAt(0));\r\n}\r\n\r\n// ArrayBuffer to URLBase64\r\nexport function bufferEncode(value) {\r\n    return btoa(String.fromCharCode.apply(null, new Uint8Array(value)))\r\n        .replace(/\\+/g, \"-\")\r\n        .replace(/\\//g, \"_\")\r\n        .replace(/=/g, \"\");\r\n}\r\n\r\nexport function pathBack(path) {\r\n    const folders =\r\n        path !== null\r\n            ? path.substr(1).split(\"/\")\r\n            : this.props.path.substr(1).split(\"/\");\r\n    return \"/\" + folders.slice(0, folders.length - 1).join(\"/\");\r\n}\r\n\r\nexport function filePath(file) {\r\n    return file.path === \"/\"\r\n        ? file.path + file.name\r\n        : file.path + \"/\" + file.name;\r\n}\r\n\r\nexport function hex2bin(hex) {\r\n    return parseInt(hex, 16).toString(2).padStart(8, \"0\");\r\n}\r\n\r\nexport function pathJoin(parts, sep) {\r\n    const separator = sep || \"/\";\r\n    parts = parts.map((part, index) => {\r\n        if (index) {\r\n            part = part.replace(new RegExp(\"^\" + separator), \"\");\r\n        }\r\n        if (index !== parts.length - 1) {\r\n            part = part.replace(new RegExp(separator + \"$\"), \"\");\r\n        }\r\n        return part;\r\n    });\r\n    return parts.join(separator);\r\n}\r\n\r\nexport function basename(path) {\r\n    const pathList = path.split(\"/\");\r\n    pathList.pop();\r\n    return pathList.join(\"/\") === \"\" ? \"/\" : pathList.join(\"/\");\r\n}\r\n\r\nexport function filename(path) {\r\n    const pathList = path.split(\"/\");\r\n    return pathList.pop();\r\n}\r\n\r\nexport function randomStr(length) {\r\n    let result = \"\";\r\n    const characters =\r\n        \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n    const charactersLength = characters.length;\r\n    for (let i = 0; i < length; i++) {\r\n        result += characters.charAt(\r\n            Math.floor(Math.random() * charactersLength)\r\n        );\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function getNumber(base, conditions) {\r\n    conditions.forEach((v) => {\r\n        if (v) {\r\n            base++;\r\n        }\r\n    });\r\n    return base;\r\n}\r\n\r\nexport const isMac = () => {\r\n    return navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0;\r\n};\r\n\r\nexport function vhCheck() {\r\n    const vh = window.innerHeight;\r\n    document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { IconButton, makeStyles } from \"@material-ui/core\";\r\nimport DayIcon from \"@material-ui/icons/Brightness7\";\r\nimport NightIcon from \"@material-ui/icons/Brightness4\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toggleDaylightMode } from \"../../actions\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport classNames from \"classnames\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    icon: {\r\n        color: \"rgb(255, 255, 255)\",\r\n        opacity: \"0.54\",\r\n    },\r\n}));\r\n\r\nconst DarkModeSwitcher = ({ position }) => {\r\n    const ThemeType = useSelector(\r\n        (state) => state.siteConfig.theme.palette.type\r\n    );\r\n    const dispatch = useDispatch();\r\n    const ToggleThemeMode = useCallback(() => dispatch(toggleDaylightMode()), [\r\n        dispatch,\r\n    ]);\r\n    const isDayLight = (ThemeType && ThemeType === \"light\") || !ThemeType;\r\n    const isDark = ThemeType && ThemeType === \"dark\";\r\n    const toggleMode = () => {\r\n        Auth.SetPreference(\"theme_mode\", isDayLight ? \"dark\" : \"light\");\r\n        ToggleThemeMode();\r\n    };\r\n    const classes = useStyles();\r\n    return (\r\n        <Tooltip\r\n            title={isDayLight ? \"切换到深色模式\" : \"切换到浅色模式\"}\r\n            placement=\"bottom\"\r\n        >\r\n            <IconButton\r\n                className={classNames({\r\n                    [classes.icon]: \"left\" === position,\r\n                })}\r\n                onClick={toggleMode}\r\n                color=\"inherit\"\r\n            >\r\n                {isDayLight && <NightIcon />}\r\n                {isDark && <DayIcon />}\r\n            </IconButton>\r\n        </Tooltip>\r\n    );\r\n};\r\n\r\nexport default DarkModeSwitcher;\r\n","import React, { useCallback, useState } from \"react\";\r\nimport { IconButton, makeStyles, Menu, MenuItem } from \"@material-ui/core\";\r\nimport ViewListIcon from \"@material-ui/icons/ViewList\";\r\nimport ViewSmallIcon from \"@material-ui/icons/ViewComfy\";\r\nimport ViewModuleIcon from \"@material-ui/icons/ViewModule\";\r\nimport TextTotateVerticalIcon from \"@material-ui/icons/TextRotateVertical\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport { Report as ReportIcon } from \"@material-ui/icons\";\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\nimport Report from \"../../Modals/Report\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Auth from \"../../../middleware/Auth\";\r\nimport {\r\n    changeViewMethod,\r\n    openResaveDialog,\r\n    setShareUserPopover,\r\n    toggleSnackbar,\r\n} from \"../../../actions\";\r\nimport { changeSortMethod } from \"../../../redux/explorer/action\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    sideButton: {\r\n        padding: \"8px\",\r\n        marginRight: \"5px\",\r\n    },\r\n}));\r\n\r\nconst sortOptions = [\"A-Z\", \"Z-A\", \"最早\", \"最新\", \"最小\", \"最大\"];\r\n\r\nexport default function SubActions({ isSmall, share, inherit }) {\r\n    const dispatch = useDispatch();\r\n    const viewMethod = useSelector(\r\n        (state) => state.viewUpdate.explorerViewMethod\r\n    );\r\n    const OpenLoadingDialog = useCallback(\r\n        (method) => dispatch(changeViewMethod(method)),\r\n        [dispatch]\r\n    );\r\n    const ChangeSortMethod = useCallback(\r\n        (method) => dispatch(changeSortMethod(method)),\r\n        [dispatch]\r\n    );\r\n    const OpenResaveDialog = useCallback(\r\n        (key) => dispatch(openResaveDialog(key)),\r\n        [dispatch]\r\n    );\r\n    const SetShareUserPopover = useCallback(\r\n        (e) => dispatch(setShareUserPopover(e)),\r\n        [dispatch]\r\n    );\r\n    const [anchorSort, setAnchorSort] = useState(null);\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const [openReport, setOpenReport] = useState(false);\r\n    const showSortOptions = (e) => {\r\n        setAnchorSort(e.currentTarget);\r\n    };\r\n    const handleMenuItemClick = (e, index) => {\r\n        setSelectedIndex(index);\r\n        const optionsTable = {\r\n            0: \"namePos\",\r\n            1: \"nameRev\",\r\n            2: \"timePos\",\r\n            3: \"timeRev\",\r\n            4: \"sizePos\",\r\n            5: \"sizeRes\",\r\n        };\r\n        ChangeSortMethod(optionsTable[index]);\r\n        setAnchorSort(null);\r\n    };\r\n\r\n    const toggleViewMethod = () => {\r\n        const newMethod =\r\n            viewMethod === \"icon\"\r\n                ? \"list\"\r\n                : viewMethod === \"list\"\r\n                ? \"smallIcon\"\r\n                : \"icon\";\r\n        Auth.SetPreference(\"view_method\", newMethod);\r\n        OpenLoadingDialog(newMethod);\r\n    };\r\n\r\n    const toggleSnackbars = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const rewards = () => {\r\n        if (!Auth.Check()) {\r\n            toggleSnackbars(\r\n                \"top\",\r\n                \"right\",\r\n                \"登录后才能继续操作\",\r\n                \"warning\"\r\n            );\r\n            return;\r\n        }\r\n        window.opensendgift(share.key);\r\n    };\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <>  \r\n            {share && (\r\n            <IconButton title=\"打赏\" className={classes.sideButton} onClick={rewards}>\r\n              <MonetizationOnIcon fontSize=\"small\"/>\r\n            </IconButton>\r\n            )}\r\n            {viewMethod === \"icon\" && (\r\n                <IconButton\r\n                    title=\"列表展示\"\r\n                    className={classes.sideButton}\r\n                    onClick={toggleViewMethod}\r\n                    color={inherit ? \"inherit\" : \"default\"}\r\n                >\r\n                    <ViewListIcon fontSize={isSmall ? \"small\" : \"default\"} />\r\n                </IconButton>\r\n            )}\r\n            {viewMethod === \"list\" && (\r\n                <IconButton\r\n                    title=\"小图标展示\"\r\n                    className={classes.sideButton}\r\n                    onClick={toggleViewMethod}\r\n                    color={inherit ? \"inherit\" : \"default\"}\r\n                >\r\n                    <ViewSmallIcon fontSize={isSmall ? \"small\" : \"default\"} />\r\n                </IconButton>\r\n            )}\r\n\r\n            {viewMethod === \"smallIcon\" && (\r\n                <IconButton\r\n                    title=\"大图标展示\"\r\n                    className={classes.sideButton}\r\n                    onClick={toggleViewMethod}\r\n                    color={inherit ? \"inherit\" : \"default\"}\r\n                >\r\n                    <ViewModuleIcon fontSize={isSmall ? \"small\" : \"default\"} />\r\n                </IconButton>\r\n            )}\r\n\r\n            <IconButton\r\n                title=\"排序方式\"\r\n                className={classes.sideButton}\r\n                onClick={showSortOptions}\r\n                color={inherit ? \"inherit\" : \"default\"}\r\n            >\r\n                <TextTotateVerticalIcon\r\n                    fontSize={isSmall ? \"small\" : \"default\"}\r\n                />\r\n            </IconButton>\r\n            <Menu\r\n                id=\"sort-menu\"\r\n                anchorEl={anchorSort}\r\n                open={Boolean(anchorSort)}\r\n                onClose={() => setAnchorSort(null)}\r\n            >\r\n                {sortOptions.map((option, index) => (\r\n                    <MenuItem\r\n                        key={option}\r\n                        selected={index === selectedIndex}\r\n                        onClick={(event) => handleMenuItemClick(event, index)}\r\n                    >\r\n                        {option}\r\n                    </MenuItem>\r\n                ))}\r\n            </Menu>\r\n            {share && (\r\n                <>\r\n                    <IconButton\r\n                        title={\"保存到我的文件\"}\r\n                        className={classes.sideButton}\r\n                        onClick={() => OpenResaveDialog(share.key)}\r\n                    >\r\n                        <SaveIcon fontSize={isSmall ? \"small\" : \"default\"} />\r\n                    </IconButton>\r\n                    <IconButton\r\n                        title={\"举报\"}\r\n                        className={classes.sideButton}\r\n                        onClick={() => setOpenReport(true)}\r\n                    >\r\n                        <ReportIcon fontSize={isSmall ? \"small\" : \"default\"} />\r\n                    </IconButton>\r\n                    <Report\r\n                        open={openReport}\r\n                        share={share}\r\n                        onClose={() => setOpenReport(false)}\r\n                    />\r\n                </>\r\n            )}\r\n            {share && (\r\n                <IconButton\r\n                    title={\"由 \" + share.creator.nick + \" 创建\"}\r\n                    className={classes.sideButton}\r\n                    onClick={(e) => SetShareUserPopover(e.currentTarget)}\r\n                    style={{ padding: 5 }}\r\n                >\r\n                    <Avatar\r\n                        style={{ height: 23, width: 23 }}\r\n                        src={\"/api/v3/user/avatar/\" + share.creator.key + \"/s\"}\r\n                    />\r\n                </IconButton>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n","import React, { useCallback, useState } from \"react\";\r\nimport { FormControl, makeStyles, TextField } from \"@material-ui/core\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport { toggleSnackbar } from \"../../actions/index\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport API from \"../../middleware/Api\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport { reportReasons } from \"../../config\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    widthAnimation: {},\r\n    shareUrl: {\r\n        minWidth: \"400px\",\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: \"relative\",\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.secondary.light,\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n    },\r\n    flexCenter: {\r\n        alignItems: \"center\",\r\n    },\r\n    noFlex: {\r\n        display: \"block\",\r\n    },\r\n    scoreCalc: {\r\n        marginTop: 10,\r\n    },\r\n}));\r\n\r\nexport default function Report(props) {\r\n    const dispatch = useDispatch();\r\n    const classes = useStyles();\r\n    const [reason, setReason] = useState(\"0\");\r\n    const [des, setDes] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const onClose = () => {\r\n        props.onClose();\r\n        setTimeout(() => {\r\n            setDes(\"\");\r\n            setReason(\"0\");\r\n        }, 500);\r\n    };\r\n\r\n    const submitReport = () => {\r\n        setLoading(true);\r\n        API.post(\"/share/report/\" + props.share.key, {\r\n            des: des,\r\n            reason: parseInt(reason),\r\n        })\r\n            .then(() => {\r\n                ToggleSnackbar(\"top\", \"right\", \"举报成功\", \"success\");\r\n                setLoading(false);\r\n                onClose();\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n                setLoading(false);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            className={classes.widthAnimation}\r\n            maxWidth=\"xs\"\r\n            fullWidth\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">举报</DialogTitle>\r\n            <DialogContent>\r\n                <FormControl component=\"fieldset\">\r\n                    <RadioGroup\r\n                        aria-label=\"gender\"\r\n                        name=\"gender1\"\r\n                        value={reason}\r\n                        onChange={(e) => setReason(e.target.value)}\r\n                    >\r\n                        {reportReasons.map((v, k) => (\r\n                            <FormControlLabel\r\n                                key={k}\r\n                                value={k.toString()}\r\n                                control={<Radio />}\r\n                                label={v}\r\n                            />\r\n                        ))}\r\n                    </RadioGroup>\r\n                </FormControl>\r\n                <TextField\r\n                    fullWidth\r\n                    id=\"standard-multiline-static\"\r\n                    label=\"补充描述\"\r\n                    multiline\r\n                    value={des}\r\n                    onChange={(e) => setDes(e.target.value)}\r\n                    variant=\"filled\"\r\n                    rows={4}\r\n                />\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Button onClick={onClose}>关闭</Button>\r\n                <Button\r\n                    onClick={submitReport}\r\n                    color=\"secondary\"\r\n                    disabled={loading}\r\n                >\r\n                    提交\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { Dialog } from \"@material-ui/core\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\n\r\nexport default function PurchaseShareDialog(props) {\r\n    return (\r\n        <Dialog\r\n            open={props.callback}\r\n            onClose={props.onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"alert-dialog-title\">\r\n                确定要支付 {props.score}积分 购买此分享？\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText id=\"alert-dialog-description\">\r\n                    购买后，您可以自由预览、下载此分享的所有内容，一定期限内不会重复扣费。\r\n                </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={props.onClose}>取消</Button>\r\n                <Button\r\n                    onClick={() => props.callback()}\r\n                    color=\"primary\"\r\n                    autoFocus\r\n                >\r\n                    确定\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport AutoHidden from \"./AutoHidden\";\r\nimport statusHelper from \"../../utils/page\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport clsx from \"clsx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    fab: {\r\n        margin: 0,\r\n        top: \"auto\",\r\n        right: 20,\r\n        bottom: 20,\r\n        left: \"auto\",\r\n        zIndex: 5,\r\n        position: \"fixed\",\r\n    },\r\n    badge: {\r\n        position: \"absolute\",\r\n        bottom: 26,\r\n        top: \"auto\",\r\n        zIndex: 9999,\r\n        right: 7,\r\n    },\r\n    fabProgress: {\r\n        color: green[500],\r\n        position: \"absolute\",\r\n        top: -6,\r\n        left: -6,\r\n        zIndex: 1,\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: \"relative\",\r\n    },\r\n    buttonSuccess: {\r\n        backgroundColor: green[500],\r\n        \"&:hover\": {\r\n            backgroundColor: green[700],\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function SaveButton(props) {\r\n    const classes = useStyles();\r\n    const buttonClassname = clsx({\r\n        [classes.buttonSuccess]: props.status === \"success\",\r\n    });\r\n\r\n    return (\r\n        <AutoHidden enable={statusHelper.isMobile()}>\r\n            <div className={classes.fab}>\r\n                <div className={classes.wrapper}>\r\n                    <Tooltip title={\"保存\"} placement={\"left\"}>\r\n                        <Fab\r\n                            onClick={props.onClick}\r\n                            color=\"primary\"\r\n                            className={buttonClassname}\r\n                            disabled={props.status === \"loading\"}\r\n                            aria-label=\"add\"\r\n                        >\r\n                            {props.status === \"success\" ? (\r\n                                <CheckIcon />\r\n                            ) : (\r\n                                <SaveIcon />\r\n                            )}\r\n                        </Fab>\r\n                    </Tooltip>\r\n                    {props.status === \"loading\" && (\r\n                        <CircularProgress\r\n                            size={68}\r\n                            className={classes.fabProgress}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </AutoHidden>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport { blue } from \"@material-ui/core/colors\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles({\r\n    avatar: {\r\n        backgroundColor: blue[100],\r\n        color: blue[600],\r\n    },\r\n    loadingContainer: {\r\n        display: \"flex\",\r\n    },\r\n    loading: {\r\n        marginTop: 10,\r\n        marginLeft: 20,\r\n    },\r\n});\r\n\r\nexport default function LoadingDialog() {\r\n    const classes = useStyles();\r\n    const open = useSelector((state) => state.viewUpdate.modals.loading);\r\n    const text = useSelector((state) => state.viewUpdate.modals.loadingText);\r\n\r\n    return (\r\n        <Dialog aria-labelledby=\"simple-dialog-title\" open={open}>\r\n            <DialogContent>\r\n                <DialogContentText className={classes.loadingContainer}>\r\n                    <CircularProgress color=\"secondary\" />\r\n                    <div className={classes.loading}>{text}</div>\r\n                </DialogContentText>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogContentText,\r\n    CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport {\r\n    toggleSnackbar,\r\n    setModalsLoading,\r\n    refreshFileList,\r\n} from \"../../actions/index\";\r\nimport PathSelector from \"../FileManager/PathSelector\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport API from \"../../middleware/Api\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    contentFix: {\r\n        padding: \"10px 24px 0px 24px\",\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: \"relative\",\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.secondary.light,\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n}));\r\n\r\nexport default function CopyDialog(props) {\r\n    const [selectedPath, setSelectedPath] = useState(\"\");\r\n    const [selectedPathName, setSelectedPathName] = useState(\"\");\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const SetModalsLoading = useCallback(\r\n        (status) => {\r\n            dispatch(setModalsLoading(status));\r\n        },\r\n        [dispatch]\r\n    );\r\n    const RefreshFileList = useCallback(() => {\r\n        dispatch(refreshFileList());\r\n    }, [dispatch]);\r\n\r\n    const setMoveTarget = (folder) => {\r\n        const path =\r\n            folder.path === \"/\"\r\n                ? folder.path + folder.name\r\n                : folder.path + \"/\" + folder.name;\r\n        setSelectedPath(path);\r\n        setSelectedPathName(folder.name);\r\n    };\r\n\r\n    const submitMove = (e) => {\r\n        if (e != null) {\r\n            e.preventDefault();\r\n        }\r\n        SetModalsLoading(true);\r\n        const dirs = [],\r\n            items = [];\r\n        // eslint-disable-next-line\r\n\r\n        if (props.selected[0].type === \"dir\") {\r\n            dirs.push(props.selected[0].id);\r\n        } else {\r\n            items.push(props.selected[0].id);\r\n        }\r\n\r\n        API.post(\"/object/copy\", {\r\n            src_dir: props.selected[0].path,\r\n            src: {\r\n                dirs: dirs,\r\n                items: items,\r\n            },\r\n            dst: selectedPath === \"//\" ? \"/\" : selectedPath,\r\n        })\r\n            .then(() => {\r\n                props.onClose();\r\n                RefreshFileList();\r\n                SetModalsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n                SetModalsLoading(false);\r\n            });\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">复制到</DialogTitle>\r\n            <PathSelector\r\n                presentPath={props.presentPath}\r\n                selected={props.selected}\r\n                onSelect={setMoveTarget}\r\n            />\r\n\r\n            {selectedPath !== \"\" && (\r\n                <DialogContent className={classes.contentFix}>\r\n                    <DialogContentText>\r\n                        复制到 <strong>{selectedPathName}</strong>\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n            )}\r\n            <DialogActions>\r\n                <Button onClick={props.onClose}>取消</Button>\r\n                <div className={classes.wrapper}>\r\n                    <Button\r\n                        onClick={submitMove}\r\n                        color=\"primary\"\r\n                        disabled={selectedPath === \"\" || props.modalsLoading}\r\n                    >\r\n                        确定\r\n                        {props.modalsLoading && (\r\n                            <CircularProgress\r\n                                size={24}\r\n                                className={classes.buttonProgress}\r\n                            />\r\n                        )}\r\n                    </Button>\r\n                </div>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport {\r\n    Checkbox,\r\n    FormControl,\r\n    makeStyles,\r\n    TextField,\r\n} from \"@material-ui/core\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { toggleSnackbar } from \"../../actions/index\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport API from \"../../middleware/Api\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport TimerIcon from \"@material-ui/icons/Timer\";\r\nimport CasinoIcon from \"@material-ui/icons/Casino\";\r\nimport AccountBalanceWalletIcon from \"@material-ui/icons/AccountBalanceWallet\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport MuiExpansionPanel from \"@material-ui/core/ExpansionPanel\";\r\nimport MuiExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\r\nimport MuiExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport EyeIcon from \"@material-ui/icons/RemoveRedEye\";\r\nimport ToggleIcon from \"material-ui-toggle-icon\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    widthAnimation: {},\r\n    shareUrl: {\r\n        minWidth: \"400px\",\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: \"relative\",\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.secondary.light,\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n    },\r\n    flexCenter: {\r\n        alignItems: \"center\",\r\n    },\r\n    noFlex: {\r\n        display: \"block\",\r\n    },\r\n    scoreCalc: {\r\n        marginTop: 10,\r\n    },\r\n}));\r\n\r\nconst ExpansionPanel = withStyles({\r\n    root: {\r\n        border: \"0px solid rgba(0, 0, 0, .125)\",\r\n        boxShadow: \"none\",\r\n        \"&:not(:last-child)\": {\r\n            borderBottom: 0,\r\n        },\r\n        \"&:before\": {\r\n            display: \"none\",\r\n        },\r\n        \"&$expanded\": {\r\n            margin: \"auto\",\r\n        },\r\n    },\r\n    expanded: {},\r\n})(MuiExpansionPanel);\r\n\r\nconst ExpansionPanelSummary = withStyles({\r\n    root: {\r\n        padding: 0,\r\n        \"&$expanded\": {},\r\n    },\r\n    content: {\r\n        margin: 0,\r\n        display: \"initial\",\r\n        \"&$expanded\": {\r\n            margin: \"0 0\",\r\n        },\r\n    },\r\n    expanded: {},\r\n})(MuiExpansionPanelSummary);\r\n\r\nconst ExpansionPanelDetails = withStyles((theme) => ({\r\n    root: {\r\n        padding: 24,\r\n        backgroundColor: theme.palette.background.default,\r\n    },\r\n}))(MuiExpansionPanelDetails);\r\n\r\nexport default function CreatShare(props) {\r\n    const dispatch = useDispatch();\r\n    const classes = useStyles();\r\n\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const scoreEnabled = useSelector((state) => state.siteConfig.score_enabled);\r\n    const scoreRate = useSelector((state) => state.siteConfig.share_score_rate);\r\n\r\n    const [expanded, setExpanded] = React.useState(false);\r\n    const [shareURL, setShareURL] = React.useState(\"\");\r\n    const [values, setValues] = React.useState({\r\n        password: \"\",\r\n        downloads: 1,\r\n        expires: 24 * 3600,\r\n        showPassword: false,\r\n        score: 0,\r\n    });\r\n    const [shareOption, setShareOption] = React.useState({\r\n        password: false,\r\n        expire: false,\r\n        score: false,\r\n        preview: true,\r\n    });\r\n\r\n    const handleChange = (prop) => (event) => {\r\n        // 输入密码\r\n        if (prop === \"password\") {\r\n            if (event.target.value === \"\") {\r\n                setShareOption({ ...shareOption, password: false });\r\n            } else {\r\n                setShareOption({ ...shareOption, password: true });\r\n            }\r\n        }\r\n\r\n        // 输入积分\r\n        if (prop === \"score\") {\r\n            if (event.target.value == \"0\") {\r\n                setShareOption({ ...shareOption, score: false });\r\n            } else {\r\n                setShareOption({ ...shareOption, score: true });\r\n            }\r\n        }\r\n\r\n        setValues({ ...values, [prop]: event.target.value });\r\n    };\r\n\r\n    const handleClickShowPassword = () => {\r\n        setValues({ ...values, showPassword: !values.showPassword });\r\n    };\r\n\r\n    const handleMouseDownPassword = (event) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    const randomPassword = () => {\r\n        setShareOption({ ...shareOption, password: true });\r\n        setValues({\r\n            ...values,\r\n            password: Math.random().toString(36).substr(2).slice(2, 8),\r\n            showPassword: true,\r\n        });\r\n    };\r\n\r\n    const handleExpand = (panel) => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? panel : false);\r\n    };\r\n\r\n    const handleCheck = (prop) => () => {\r\n        if (!shareOption[prop]) {\r\n            handleExpand(prop)(null, true);\r\n        }\r\n        if (prop === \"password\" && shareOption[prop]) {\r\n            setValues({\r\n                ...values,\r\n                password: \"\",\r\n            });\r\n        }\r\n        if (prop === \"score\" && shareOption[prop]) {\r\n            setValues({\r\n                ...values,\r\n                score: 0,\r\n            });\r\n        }\r\n        setShareOption({ ...shareOption, [prop]: !shareOption[prop] });\r\n    };\r\n\r\n    const onClose = () => {\r\n        props.onClose();\r\n        setTimeout(() => {\r\n            setShareURL(\"\");\r\n        }, 500);\r\n    };\r\n\r\n    const submitShare = (e) => {\r\n        e.preventDefault();\r\n        props.setModalsLoading(true);\r\n        const submitFormBody = {\r\n            id: props.selected[0].id,\r\n            is_dir: props.selected[0].type === \"dir\",\r\n            password: values.password,\r\n            downloads: shareOption.expire ? values.downloads : -1,\r\n            expire: values.expires,\r\n            score: parseInt(values.score),\r\n            preview: shareOption.preview,\r\n        };\r\n\r\n        API.post(\"/share\", submitFormBody)\r\n            .then((response) => {\r\n                setShareURL(response.data);\r\n                setValues({\r\n                    password: \"\",\r\n                    downloads: 1,\r\n                    expires: 24 * 3600,\r\n                    showPassword: false,\r\n                    score: 0,\r\n                });\r\n                setShareOption({\r\n                    password: false,\r\n                    expire: false,\r\n                    score: false,\r\n                });\r\n                props.setModalsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n                props.setModalsLoading(false);\r\n            });\r\n    };\r\n\r\n    const handleFocus = (event) => event.target.select();\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            className={classes.widthAnimation}\r\n            maxWidth=\"xs\"\r\n            fullWidth\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">创建分享链接</DialogTitle>\r\n\r\n            {shareURL === \"\" && (\r\n                <>\r\n                    <Divider />\r\n                    <List>\r\n                        <ExpansionPanel\r\n                            expanded={expanded === \"password\"}\r\n                            onChange={handleExpand(\"password\")}\r\n                        >\r\n                            <ExpansionPanelSummary\r\n                                aria-controls=\"panel1a-content\"\r\n                                id=\"panel1a-header\"\r\n                            >\r\n                                <ListItem button>\r\n                                    <ListItemIcon>\r\n                                        <LockIcon />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"使用密码保护\" />\r\n                                    <ListItemSecondaryAction>\r\n                                        <Checkbox\r\n                                            checked={shareOption.password}\r\n                                            onChange={handleCheck(\"password\")}\r\n                                        />\r\n                                    </ListItemSecondaryAction>\r\n                                </ListItem>\r\n                            </ExpansionPanelSummary>\r\n                            <ExpansionPanelDetails>\r\n                                <FormControl\r\n                                    variant=\"outlined\"\r\n                                    color=\"secondary\"\r\n                                    fullWidth\r\n                                >\r\n                                    <InputLabel htmlFor=\"filled-adornment-password\">\r\n                                        分享密码\r\n                                    </InputLabel>\r\n                                    <OutlinedInput\r\n                                        fullWidth\r\n                                        id=\"outlined-adornment-password\"\r\n                                        type={\r\n                                            values.showPassword\r\n                                                ? \"text\"\r\n                                                : \"password\"\r\n                                        }\r\n                                        value={values.password}\r\n                                        onChange={handleChange(\"password\")}\r\n                                        endAdornment={\r\n                                            <InputAdornment position=\"end\">\r\n                                                <Tooltip title=\"随机生成\">\r\n                                                    <IconButton\r\n                                                        aria-label=\"toggle password visibility\"\r\n                                                        onClick={randomPassword}\r\n                                                        edge=\"end\"\r\n                                                    >\r\n                                                        <CasinoIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                                <IconButton\r\n                                                    aria-label=\"toggle password visibility\"\r\n                                                    onClick={\r\n                                                        handleClickShowPassword\r\n                                                    }\r\n                                                    onMouseDown={\r\n                                                        handleMouseDownPassword\r\n                                                    }\r\n                                                    edge=\"end\"\r\n                                                >\r\n                                                    <ToggleIcon\r\n                                                        on={values.showPassword}\r\n                                                        onIcon={<Visibility />}\r\n                                                        offIcon={\r\n                                                            <VisibilityOff />\r\n                                                        }\r\n                                                    />\r\n                                                </IconButton>\r\n                                            </InputAdornment>\r\n                                        }\r\n                                        labelWidth={70}\r\n                                    />\r\n                                </FormControl>\r\n                            </ExpansionPanelDetails>\r\n                        </ExpansionPanel>\r\n                        <ExpansionPanel\r\n                            expanded={expanded === \"expire\"}\r\n                            onChange={handleExpand(\"expire\")}\r\n                        >\r\n                            <ExpansionPanelSummary\r\n                                aria-controls=\"panel1a-content\"\r\n                                id=\"panel1a-header\"\r\n                            >\r\n                                <ListItem button>\r\n                                    <ListItemIcon>\r\n                                        <TimerIcon />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"自动过期\" />\r\n                                    <ListItemSecondaryAction>\r\n                                        <Checkbox\r\n                                            checked={shareOption.expire}\r\n                                            onChange={handleCheck(\"expire\")}\r\n                                        />\r\n                                    </ListItemSecondaryAction>\r\n                                </ListItem>\r\n                            </ExpansionPanelSummary>\r\n                            <ExpansionPanelDetails\r\n                                className={classes.flexCenter}\r\n                            >\r\n                                <FormControl\r\n                                    style={{\r\n                                        marginRight: 10,\r\n                                    }}\r\n                                >\r\n                                    <Select\r\n                                        labelId=\"demo-simple-select-label\"\r\n                                        id=\"demo-simple-select\"\r\n                                        value={values.downloads}\r\n                                        onChange={handleChange(\"downloads\")}\r\n                                    >\r\n                                        <MenuItem value={1}>1 次下载</MenuItem>\r\n                                        <MenuItem value={2}>2 次下载</MenuItem>\r\n                                        <MenuItem value={3}>3 次下载</MenuItem>\r\n                                        <MenuItem value={4}>4 次下载</MenuItem>\r\n                                        <MenuItem value={5}>5 次下载</MenuItem>\r\n                                        <MenuItem value={20}>\r\n                                            20 次下载\r\n                                        </MenuItem>\r\n                                        <MenuItem value={50}>\r\n                                            50 次下载\r\n                                        </MenuItem>\r\n                                        <MenuItem value={100}>\r\n                                            100 次下载\r\n                                        </MenuItem>\r\n                                    </Select>\r\n                                </FormControl>\r\n                                <Typography>或者</Typography>\r\n                                <FormControl\r\n                                    style={{\r\n                                        marginRight: 10,\r\n                                        marginLeft: 10,\r\n                                    }}\r\n                                >\r\n                                    <Select\r\n                                        labelId=\"demo-simple-select-label\"\r\n                                        id=\"demo-simple-select\"\r\n                                        value={values.expires}\r\n                                        onChange={handleChange(\"expires\")}\r\n                                    >\r\n                                        <MenuItem value={300}>5 分钟</MenuItem>\r\n                                        <MenuItem value={3600}>1 小时</MenuItem>\r\n                                        <MenuItem value={24 * 3600}>\r\n                                            1 天\r\n                                        </MenuItem>\r\n                                        <MenuItem value={7 * 24 * 3600}>\r\n                                            7 天\r\n                                        </MenuItem>\r\n                                        <MenuItem value={30 * 24 * 3600}>\r\n                                            30 天\r\n                                        </MenuItem>\r\n                                    </Select>\r\n                                </FormControl>\r\n                                <Typography>后过期</Typography>\r\n                            </ExpansionPanelDetails>\r\n                        </ExpansionPanel>\r\n                        {scoreEnabled && (\r\n                            <ExpansionPanel\r\n                                expanded={expanded === \"score\"}\r\n                                onChange={handleExpand(\"score\")}\r\n                            >\r\n                                <ExpansionPanelSummary\r\n                                    aria-controls=\"panel1a-content\"\r\n                                    id=\"panel1a-header\"\r\n                                >\r\n                                    <ListItem button>\r\n                                        <ListItemIcon>\r\n                                            <AccountBalanceWalletIcon />\r\n                                        </ListItemIcon>\r\n                                        <ListItemText primary=\"付积分下载\" />\r\n                                        <ListItemSecondaryAction>\r\n                                            <Checkbox\r\n                                                checked={shareOption.score}\r\n                                                onChange={handleCheck(\"score\")}\r\n                                            />\r\n                                        </ListItemSecondaryAction>\r\n                                    </ListItem>\r\n                                </ExpansionPanelSummary>\r\n\r\n                                <ExpansionPanelDetails\r\n                                    className={classes.noFlex}\r\n                                >\r\n                                    <FormControl\r\n                                        variant=\"outlined\"\r\n                                        color=\"secondary\"\r\n                                        fullWidth\r\n                                    >\r\n                                        <InputLabel htmlFor=\"filled-adornment-password\">\r\n                                            每人次下载需支付的积分\r\n                                        </InputLabel>\r\n                                        <OutlinedInput\r\n                                            fullWidth\r\n                                            id=\"outlined-adornment-password\"\r\n                                            type=\"number\"\r\n                                            inputProps={{ min: 0 }}\r\n                                            value={values.score}\r\n                                            onChange={handleChange(\"score\")}\r\n                                            labelWidth={180}\r\n                                        />\r\n                                    </FormControl>\r\n                                    {values.score !== 0 && scoreRate !== \"100\" && (\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            className={classes.scoreCalc}\r\n                                        >\r\n                                            {\"预计每人次下载可到账 \" +\r\n                                                Math.ceil(\r\n                                                    (values.score * scoreRate) /\r\n                                                        100\r\n                                                ) +\r\n                                                \" 积分\"}\r\n                                        </Typography>\r\n                                    )}\r\n                                </ExpansionPanelDetails>\r\n                            </ExpansionPanel>\r\n                        )}\r\n                        <ExpansionPanel\r\n                            expanded={expanded === \"preview\"}\r\n                            onChange={handleExpand(\"preview\")}\r\n                        >\r\n                            <ExpansionPanelSummary\r\n                                aria-controls=\"panel1a-content\"\r\n                                id=\"panel1a-header\"\r\n                            >\r\n                                <ListItem button>\r\n                                    <ListItemIcon>\r\n                                        <LockIcon />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"允许预览\" />\r\n                                    <ListItemSecondaryAction>\r\n                                        <Checkbox\r\n                                            checked={shareOption.preview}\r\n                                            onChange={handleCheck(\"preview\")}\r\n                                        />\r\n                                    </ListItemSecondaryAction>\r\n                                </ListItem>\r\n                            </ExpansionPanelSummary>\r\n                            <ExpansionPanelDetails>\r\n                                <Typography>\r\n                                    是否允许在分享页面预览文件内容\r\n                                </Typography>\r\n                            </ExpansionPanelDetails>\r\n                        </ExpansionPanel>\r\n                    </List>\r\n                    <Divider />\r\n                </>\r\n            )}\r\n            {shareURL !== \"\" && (\r\n                <DialogContent>\r\n                    <TextField\r\n                        onFocus={handleFocus}\r\n                        autoFocus\r\n                        inputProps={{ readonly: true }}\r\n                        label=\"分享链接\"\r\n                        value={shareURL}\r\n                        variant=\"outlined\"\r\n                        fullWidth\r\n                    />\r\n                </DialogContent>\r\n            )}\r\n\r\n            <DialogActions>\r\n                <Button onClick={onClose}>关闭</Button>\r\n\r\n                {shareURL === \"\" && (\r\n                    <div className={classes.wrapper}>\r\n                        <Button\r\n                            onClick={submitShare}\r\n                            color=\"secondary\"\r\n                            disabled={props.modalsLoading}\r\n                        >\r\n                            创建分享链接\r\n                            {props.modalsLoading && (\r\n                                <CircularProgress\r\n                                    size={24}\r\n                                    className={classes.buttonProgress}\r\n                                />\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                )}\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogContentText,\r\n    CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { toggleSnackbar, setModalsLoading } from \"../../actions/index\";\r\nimport PathSelector from \"../FileManager/PathSelector\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport API from \"../../middleware/Api\";\r\nimport { filePath } from \"../../utils\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    contentFix: {\r\n        padding: \"10px 24px 0px 24px\",\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: \"relative\",\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.secondary.light,\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n}));\r\n\r\nexport default function DecompressDialog(props) {\r\n    const [selectedPath, setSelectedPath] = useState(\"\");\r\n    const [selectedPathName, setSelectedPathName] = useState(\"\");\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const SetModalsLoading = useCallback(\r\n        (status) => {\r\n            dispatch(setModalsLoading(status));\r\n        },\r\n        [dispatch]\r\n    );\r\n\r\n    const setMoveTarget = (folder) => {\r\n        const path =\r\n            folder.path === \"/\"\r\n                ? folder.path + folder.name\r\n                : folder.path + \"/\" + folder.name;\r\n        setSelectedPath(path);\r\n        setSelectedPathName(folder.name);\r\n    };\r\n\r\n    const submitMove = (e) => {\r\n        if (e != null) {\r\n            e.preventDefault();\r\n        }\r\n        SetModalsLoading(true);\r\n        API.post(\"/file/decompress\", {\r\n            src: filePath(props.selected[0]),\r\n            dst: selectedPath === \"//\" ? \"/\" : selectedPath,\r\n        })\r\n            .then(() => {\r\n                props.onClose();\r\n                ToggleSnackbar(\"top\", \"right\", \"解压缩任务已创建\", \"success\");\r\n                SetModalsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n                SetModalsLoading(false);\r\n            });\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">解压送至</DialogTitle>\r\n            <PathSelector\r\n                presentPath={props.presentPath}\r\n                selected={props.selected}\r\n                onSelect={setMoveTarget}\r\n            />\r\n\r\n            {selectedPath !== \"\" && (\r\n                <DialogContent className={classes.contentFix}>\r\n                    <DialogContentText>\r\n                        解压送至 <strong>{selectedPathName}</strong>\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n            )}\r\n            <DialogActions>\r\n                <Button onClick={props.onClose}>取消</Button>\r\n                <div className={classes.wrapper}>\r\n                    <Button\r\n                        onClick={submitMove}\r\n                        color=\"primary\"\r\n                        disabled={selectedPath === \"\" || props.modalsLoading}\r\n                    >\r\n                        确定\r\n                        {props.modalsLoading && (\r\n                            <CircularProgress\r\n                                size={24}\r\n                                className={classes.buttonProgress}\r\n                            />\r\n                        )}\r\n                    </Button>\r\n                </div>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogContentText,\r\n    CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { toggleSnackbar, setModalsLoading } from \"../../actions/index\";\r\nimport PathSelector from \"../FileManager/PathSelector\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport API from \"../../middleware/Api\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    contentFix: {\r\n        padding: \"10px 24px 0px 24px\",\r\n        backgroundColor: theme.palette.background.default,\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: \"relative\",\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.secondary.light,\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n}));\r\n\r\nexport default function CompressDialog(props) {\r\n    const [selectedPath, setSelectedPath] = useState(\"\");\r\n    const [fileName, setFileName] = useState(\"\");\r\n    // eslint-disable-next-line\r\n    const [selectedPathName, setSelectedPathName] = useState(\"\");\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const SetModalsLoading = useCallback(\r\n        (status) => {\r\n            dispatch(setModalsLoading(status));\r\n        },\r\n        [dispatch]\r\n    );\r\n\r\n    const setMoveTarget = (folder) => {\r\n        const path =\r\n            folder.path === \"/\"\r\n                ? folder.path + folder.name\r\n                : folder.path + \"/\" + folder.name;\r\n        setSelectedPath(path);\r\n        setSelectedPathName(folder.name);\r\n    };\r\n\r\n    const submitMove = (e) => {\r\n        if (e != null) {\r\n            e.preventDefault();\r\n        }\r\n        SetModalsLoading(true);\r\n\r\n        const dirs = [],\r\n            items = [];\r\n        // eslint-disable-next-line\r\n        props.selected.map((value) => {\r\n            if (value.type === \"dir\") {\r\n                dirs.push(value.id);\r\n            } else {\r\n                items.push(value.id);\r\n            }\r\n        });\r\n\r\n        API.post(\"/file/compress\", {\r\n            src: {\r\n                dirs: dirs,\r\n                items: items,\r\n            },\r\n            name: fileName,\r\n            dst: selectedPath === \"//\" ? \"/\" : selectedPath,\r\n        })\r\n            .then(() => {\r\n                props.onClose();\r\n                ToggleSnackbar(\"top\", \"right\", \"压缩任务已创建\", \"success\");\r\n                SetModalsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n                SetModalsLoading(false);\r\n            });\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">存放到</DialogTitle>\r\n            <PathSelector\r\n                presentPath={props.presentPath}\r\n                selected={props.selected}\r\n                onSelect={setMoveTarget}\r\n            />\r\n\r\n            {selectedPath !== \"\" && (\r\n                <DialogContent className={classes.contentFix}>\r\n                    <DialogContentText>\r\n                        <TextField\r\n                            onChange={(e) => setFileName(e.target.value)}\r\n                            value={fileName}\r\n                            fullWidth\r\n                            autoFocus\r\n                            id=\"standard-basic\"\r\n                            label=\"压缩文件名\"\r\n                        />\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n            )}\r\n            <DialogActions>\r\n                <Button onClick={props.onClose}>取消</Button>\r\n                <div className={classes.wrapper}>\r\n                    <Button\r\n                        onClick={submitMove}\r\n                        color=\"primary\"\r\n                        disabled={\r\n                            selectedPath === \"\" ||\r\n                            fileName === \"\" ||\r\n                            props.modalsLoading\r\n                        }\r\n                    >\r\n                        确定\r\n                        {props.modalsLoading && (\r\n                            <CircularProgress\r\n                                size={24}\r\n                                className={classes.buttonProgress}\r\n                            />\r\n                        )}\r\n                    </Button>\r\n                </div>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogContentText,\r\n    CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { toggleSnackbar, setModalsLoading } from \"../../actions/index\";\r\nimport PathSelector from \"../FileManager/PathSelector\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport API from \"../../middleware/Api\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: \"relative\",\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.secondary.light,\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    input: {\r\n        width: 250,\r\n    },\r\n}));\r\n\r\nexport default function RelocateDialog(props) {\r\n    const [selectedPolicy, setSelectedPolicy] = useState(\"\");\r\n    const [policies, setPolicies] = useState([]);\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const SetModalsLoading = useCallback(\r\n        (status) => {\r\n            dispatch(setModalsLoading(status));\r\n        },\r\n        [dispatch]\r\n    );\r\n\r\n    const submitRelocate = (e) => {\r\n        if (e != null) {\r\n            e.preventDefault();\r\n        }\r\n        SetModalsLoading(true);\r\n\r\n        const dirs = [],\r\n            items = [];\r\n        // eslint-disable-next-line\r\n        props.selected.map((value) => {\r\n            if (value.type === \"dir\") {\r\n                dirs.push(value.id);\r\n            } else {\r\n                items.push(value.id);\r\n            }\r\n        });\r\n\r\n        API.post(\"/file/relocate\", {\r\n            src: {\r\n                dirs: dirs,\r\n                items: items,\r\n            },\r\n            dst_policy_id: selectedPolicy,\r\n        })\r\n            .then(() => {\r\n                props.onClose();\r\n                ToggleSnackbar(\"top\", \"right\", \"转移任务已创建\", \"success\");\r\n                SetModalsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n                SetModalsLoading(false);\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (props.open) {\r\n            API.get(\"/user/setting/policies\")\r\n                .then((response) => {\r\n                    setPolicies(response.data.options);\r\n                    setSelectedPolicy(response.data.current.id);\r\n                })\r\n                .catch((error) => {\r\n                    ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n                });\r\n        }\r\n\r\n        // eslint-disable-next-line\r\n    }, [props.open]);\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">转移到存储策略</DialogTitle>\r\n\r\n            <DialogContent className={classes.contentFix}>\r\n                <Select\r\n                    className={classes.input}\r\n                    labelId=\"demo-simple-select-label\"\r\n                    value={selectedPolicy}\r\n                    onChange={(e) => setSelectedPolicy(e.target.value)}\r\n                >\r\n                    {policies.map((v, k) => (\r\n                        <MenuItem key={k} value={v.id}>\r\n                            {v.name}\r\n                        </MenuItem>\r\n                    ))}\r\n                </Select>\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Button onClick={props.onClose}>取消</Button>\r\n                <div className={classes.wrapper}>\r\n                    <Button\r\n                        onClick={submitRelocate}\r\n                        color=\"primary\"\r\n                        disabled={selectedPolicy === \"\" || props.modalsLoading}\r\n                    >\r\n                        确定\r\n                        {props.modalsLoading && (\r\n                            <CircularProgress\r\n                                size={24}\r\n                                className={classes.buttonProgress}\r\n                            />\r\n                        )}\r\n                    </Button>\r\n                </div>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    closeAllModals,\r\n    toggleSnackbar,\r\n    setModalsLoading,\r\n    refreshFileList,\r\n    refreshStorage,\r\n    openLoadingDialog,\r\n} from \"../../actions/index\";\r\nimport PathSelector from \"./PathSelector\";\r\nimport API, { baseURL } from \"../../middleware/Api\";\r\nimport {\r\n    withStyles,\r\n    Button,\r\n    TextField,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogContentText,\r\n    CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport Loading from \"../Modals/Loading\";\r\nimport CopyDialog from \"../Modals/Copy\";\r\nimport CreatShare from \"../Modals/CreateShare\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport PurchaseShareDialog from \"../Modals/PurchaseShare\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport DecompressDialog from \"../Modals/Decompress\";\r\nimport CompressDialog from \"../Modals/Compress\";\r\nimport RelocateDialog from \"../Modals/Relocate\";\r\n\r\nconst styles = (theme) => ({\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: \"relative\",\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.secondary.light,\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    contentFix: {\r\n        padding: \"10px 24px 0px 24px\",\r\n    },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        path: state.navigator.path,\r\n        selected: state.explorer.selected,\r\n        modalsStatus: state.viewUpdate.modals,\r\n        modalsLoading: state.viewUpdate.modalsLoading,\r\n        dirList: state.explorer.dirList,\r\n        fileList: state.explorer.fileList,\r\n        dndSignale: state.explorer.dndSignal,\r\n        dndTarget: state.explorer.dndTarget,\r\n        dndSource: state.explorer.dndSource,\r\n        loading: state.viewUpdate.modals.loading,\r\n        loadingText: state.viewUpdate.modals.loadingText,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        closeAllModals: () => {\r\n            dispatch(closeAllModals());\r\n        },\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n        setModalsLoading: (status) => {\r\n            dispatch(setModalsLoading(status));\r\n        },\r\n        refreshFileList: () => {\r\n            dispatch(refreshFileList());\r\n        },\r\n        refreshStorage: () => {\r\n            dispatch(refreshStorage());\r\n        },\r\n        openLoadingDialog: (text) => {\r\n            dispatch(openLoadingDialog(text));\r\n        },\r\n    };\r\n};\r\n\r\nclass ModalsCompoment extends Component {\r\n    state = {\r\n        newFolderName: \"\",\r\n        newFileName: \"\",\r\n        newName: \"\",\r\n        selectedPath: \"\",\r\n        selectedPathName: \"\",\r\n        secretShare: false,\r\n        sharePwd: \"\",\r\n        shareUrl: \"\",\r\n        downloadURL: \"\",\r\n        remoteDownloadPathSelect: false,\r\n        source: \"\",\r\n        purchaseCallback: null,\r\n    };\r\n\r\n    handleInputChange = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value,\r\n        });\r\n    };\r\n\r\n    newNameSuffix = \"\";\r\n    downloaded = false;\r\n\r\n    UNSAFE_componentWillReceiveProps = (nextProps) => {\r\n        if (this.props.dndSignale !== nextProps.dndSignale) {\r\n            this.dragMove(nextProps.dndSource, nextProps.dndTarget);\r\n            return;\r\n        }\r\n        if (this.props.loading !== nextProps.loading) {\r\n            // 打包下载\r\n            if (nextProps.loading === true) {\r\n                if (nextProps.loadingText === \"打包中...\") {\r\n                    if (\r\n                        pathHelper.isSharePage(this.props.location.pathname) &&\r\n                        this.props.share &&\r\n                        this.props.share.score > 0\r\n                    ) {\r\n                        this.scoreHandler(this.archiveDownload);\r\n                        return;\r\n                    }\r\n                    this.archiveDownload();\r\n                } else if (nextProps.loadingText === \"获取下载地址...\") {\r\n                    if (\r\n                        pathHelper.isSharePage(this.props.location.pathname) &&\r\n                        this.props.share &&\r\n                        this.props.share.score > 0\r\n                    ) {\r\n                        this.scoreHandler(this.Download);\r\n                        return;\r\n                    }\r\n                    this.Download();\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        if (this.props.modalsStatus.rename !== nextProps.modalsStatus.rename) {\r\n            const name = nextProps.selected[0].name;\r\n            this.setState({\r\n                newName: name,\r\n            });\r\n            return;\r\n        }\r\n        if (\r\n            this.props.modalsStatus.getSource !==\r\n                nextProps.modalsStatus.getSource &&\r\n            nextProps.modalsStatus.getSource === true\r\n        ) {\r\n            API.get(\"/file/source/\" + this.props.selected[0].id)\r\n                .then((response) => {\r\n                    this.setState({\r\n                        source: response.data.url,\r\n                    });\r\n                })\r\n                .catch((error) => {\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        error.message,\r\n                        \"error\"\r\n                    );\r\n                });\r\n        }\r\n    };\r\n\r\n    scoreHandler = (callback) => {\r\n        // 分享页面需要积分下载\r\n        if (!Auth.Check()) {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"登录后才能继续操作\",\r\n                \"warning\"\r\n            );\r\n            this.onClose();\r\n            return;\r\n        }\r\n        if (!Auth.GetUser().group.shareFree && !this.downloaded) {\r\n            this.setState({\r\n                purchaseCallback: () => {\r\n                    this.setState({\r\n                        purchaseCallback: null,\r\n                    });\r\n                    callback();\r\n                },\r\n            });\r\n        } else {\r\n            callback();\r\n        }\r\n    };\r\n\r\n    Download = () => {\r\n        let reqURL = \"\";\r\n        if (this.props.selected[0].key) {\r\n            const downloadPath =\r\n                this.props.selected[0].path === \"/\"\r\n                    ? this.props.selected[0].path + this.props.selected[0].name\r\n                    : this.props.selected[0].path +\r\n                      \"/\" +\r\n                      this.props.selected[0].name;\r\n            reqURL =\r\n                \"/share/download/\" +\r\n                this.props.selected[0].key +\r\n                \"?path=\" +\r\n                encodeURIComponent(downloadPath);\r\n        } else {\r\n            reqURL = \"/file/download/\" + this.props.selected[0].id;\r\n        }\r\n\r\n        API.put(reqURL)\r\n            .then((response) => {\r\n                window.location.assign(response.data);\r\n                this.onClose();\r\n                this.downloaded = true;\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.onClose();\r\n            });\r\n    };\r\n\r\n    archiveDownload = () => {\r\n        const dirs = [],\r\n            items = [];\r\n        this.props.selected.map((value) => {\r\n            if (value.type === \"dir\") {\r\n                dirs.push(value.id);\r\n            } else {\r\n                items.push(value.id);\r\n            }\r\n            return null;\r\n        });\r\n\r\n        let reqURL = \"/file/archive\";\r\n        const postBody = {\r\n            items: items,\r\n            dirs: dirs,\r\n        };\r\n        if (pathHelper.isSharePage(this.props.location.pathname)) {\r\n            reqURL = \"/share/archive/\" + window.shareInfo.key;\r\n            postBody[\"path\"] = this.props.selected[0].path;\r\n        }\r\n\r\n        API.post(reqURL, postBody)\r\n            .then((response) => {\r\n                if (response.rawData.code === 0) {\r\n                    this.onClose();\r\n                    window.location.assign(response.data);\r\n                } else {\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        response.rawData.msg,\r\n                        \"warning\"\r\n                    );\r\n                }\r\n                this.onClose();\r\n                this.props.refreshStorage();\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.onClose();\r\n            });\r\n    };\r\n\r\n    submitRemove = (e) => {\r\n        e.preventDefault();\r\n        this.props.setModalsLoading(true);\r\n        const dirs = [],\r\n            items = [];\r\n        // eslint-disable-next-line\r\n        this.props.selected.map((value) => {\r\n            if (value.type === \"dir\") {\r\n                dirs.push(value.id);\r\n            } else {\r\n                items.push(value.id);\r\n            }\r\n        });\r\n        API.delete(\"/object\", {\r\n            data: {\r\n                items: items,\r\n                dirs: dirs,\r\n            },\r\n        })\r\n            .then((response) => {\r\n                if (response.rawData.code === 0) {\r\n                    this.onClose();\r\n                    setTimeout(this.props.refreshFileList, 500);\r\n                } else {\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        response.rawData.msg,\r\n                        \"warning\"\r\n                    );\r\n                }\r\n                this.props.setModalsLoading(false);\r\n                this.props.refreshStorage();\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.props.setModalsLoading(false);\r\n            });\r\n    };\r\n\r\n    submitResave = (e) => {\r\n        e.preventDefault();\r\n        this.props.setModalsLoading(true);\r\n        API.post(\"/share/save/\" + window.shareKey, {\r\n            path:\r\n                this.state.selectedPath === \"//\"\r\n                    ? \"/\"\r\n                    : this.state.selectedPath,\r\n        })\r\n            .then(() => {\r\n                this.onClose();\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"文件已保存\",\r\n                    \"success\"\r\n                );\r\n                this.props.refreshFileList();\r\n                this.props.setModalsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.props.setModalsLoading(false);\r\n            });\r\n    };\r\n\r\n    submitMove = (e) => {\r\n        if (e != null) {\r\n            e.preventDefault();\r\n        }\r\n        this.props.setModalsLoading(true);\r\n        const dirs = [],\r\n            items = [];\r\n        // eslint-disable-next-line\r\n        this.props.selected.map((value) => {\r\n            if (value.type === \"dir\") {\r\n                dirs.push(value.id);\r\n            } else {\r\n                items.push(value.id);\r\n            }\r\n        });\r\n        API.patch(\"/object\", {\r\n            action: \"move\",\r\n            src_dir: this.props.selected[0].path,\r\n            src: {\r\n                dirs: dirs,\r\n                items: items,\r\n            },\r\n            dst: this.DragSelectedPath\r\n                ? this.DragSelectedPath\r\n                : this.state.selectedPath === \"//\"\r\n                ? \"/\"\r\n                : this.state.selectedPath,\r\n        })\r\n            .then(() => {\r\n                this.onClose();\r\n                this.props.refreshFileList();\r\n                this.props.setModalsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.props.setModalsLoading(false);\r\n            })\r\n            .then(() => {\r\n                this.props.closeAllModals();\r\n            });\r\n    };\r\n\r\n    dragMove = (source, target) => {\r\n        if (this.props.selected.length === 0) {\r\n            this.props.selected[0] = source;\r\n        }\r\n        let doMove = true;\r\n\r\n        // eslint-disable-next-line\r\n        this.props.selected.map((value) => {\r\n            // 根据ID过滤\r\n            if (value.id === target.id && value.type === target.type) {\r\n                doMove = false;\r\n                // eslint-disable-next-line\r\n                return;\r\n            }\r\n            // 根据路径过滤\r\n            if (\r\n                value.path ===\r\n                target.path + (target.path === \"/\" ? \"\" : \"/\") + target.name\r\n            ) {\r\n                doMove = false;\r\n            }\r\n        });\r\n        if (doMove) {\r\n            this.DragSelectedPath =\r\n                target.path === \"/\"\r\n                    ? target.path + target.name\r\n                    : target.path + \"/\" + target.name;\r\n            this.props.openLoadingDialog(\"处理中...\");\r\n            this.submitMove();\r\n        }\r\n    };\r\n\r\n    submitRename = (e) => {\r\n        e.preventDefault();\r\n        this.props.setModalsLoading(true);\r\n        const newName = this.state.newName;\r\n\r\n        const src = {\r\n            dirs: [],\r\n            items: [],\r\n        };\r\n\r\n        if (this.props.selected[0].type === \"dir\") {\r\n            src.dirs[0] = this.props.selected[0].id;\r\n        } else {\r\n            src.items[0] = this.props.selected[0].id;\r\n        }\r\n\r\n        // 检查重名\r\n        if (\r\n            this.props.dirList.findIndex((value) => {\r\n                return value.name === newName;\r\n            }) !== -1 ||\r\n            this.props.fileList.findIndex((value) => {\r\n                return value.name === newName;\r\n            }) !== -1\r\n        ) {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"新名称与已有文件重复\",\r\n                \"warning\"\r\n            );\r\n            this.props.setModalsLoading(false);\r\n        } else {\r\n            API.post(\"/object/rename\", {\r\n                action: \"rename\",\r\n                src: src,\r\n                new_name: newName,\r\n            })\r\n                .then(() => {\r\n                    this.onClose();\r\n                    this.props.refreshFileList();\r\n                    this.props.setModalsLoading(false);\r\n                })\r\n                .catch((error) => {\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        error.message,\r\n                        \"error\"\r\n                    );\r\n                    this.props.setModalsLoading(false);\r\n                });\r\n        }\r\n    };\r\n\r\n    submitCreateNewFolder = (e) => {\r\n        e.preventDefault();\r\n        this.props.setModalsLoading(true);\r\n        if (\r\n            this.props.dirList.findIndex((value) => {\r\n                return value.name === this.state.newFolderName;\r\n            }) !== -1\r\n        ) {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"文件夹名称重复\",\r\n                \"warning\"\r\n            );\r\n            this.props.setModalsLoading(false);\r\n        } else {\r\n            API.put(\"/directory\", {\r\n                path:\r\n                    (this.props.path === \"/\" ? \"\" : this.props.path) +\r\n                    \"/\" +\r\n                    this.state.newFolderName,\r\n            })\r\n                .then(() => {\r\n                    this.onClose();\r\n                    this.props.refreshFileList();\r\n                    this.props.setModalsLoading(false);\r\n                })\r\n                .catch((error) => {\r\n                    this.props.setModalsLoading(false);\r\n\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        error.message,\r\n                        \"error\"\r\n                    );\r\n                });\r\n        }\r\n        //this.props.toggleSnackbar();\r\n    };\r\n\r\n    submitCreateNewFile = (e) => {\r\n        e.preventDefault();\r\n        this.props.setModalsLoading(true);\r\n        if (\r\n            this.props.dirList.findIndex((value) => {\r\n                return value.name === this.state.newFileName;\r\n            }) !== -1\r\n        ) {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"文件名称重复\",\r\n                \"warning\"\r\n            );\r\n            this.props.setModalsLoading(false);\r\n        } else {\r\n            API.post(\"/file/create\", {\r\n                path:\r\n                    (this.props.path === \"/\" ? \"\" : this.props.path) +\r\n                    \"/\" +\r\n                    this.state.newFileName,\r\n            })\r\n                .then(() => {\r\n                    this.onClose();\r\n                    this.props.refreshFileList();\r\n                    this.props.setModalsLoading(false);\r\n                })\r\n                .catch((error) => {\r\n                    this.props.setModalsLoading(false);\r\n\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        error.message,\r\n                        \"error\"\r\n                    );\r\n                });\r\n        }\r\n        //this.props.toggleSnackbar();\r\n    };\r\n\r\n    submitTorrentDownload = (e) => {\r\n        e.preventDefault();\r\n        this.props.setModalsLoading(true);\r\n        API.post(\"/aria2/torrent/\" + this.props.selected[0].id, {\r\n            dst:\r\n                this.state.selectedPath === \"//\"\r\n                    ? \"/\"\r\n                    : this.state.selectedPath,\r\n        })\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"任务已创建\",\r\n                    \"success\"\r\n                );\r\n                this.onClose();\r\n                this.props.setModalsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.props.setModalsLoading(false);\r\n            });\r\n    };\r\n\r\n    submitDownload = (e) => {\r\n        e.preventDefault();\r\n        this.props.setModalsLoading(true);\r\n        API.post(\"/aria2/url\", {\r\n            url: this.state.downloadURL,\r\n            dst:\r\n                this.state.selectedPath === \"//\"\r\n                    ? \"/\"\r\n                    : this.state.selectedPath,\r\n        })\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"任务已创建\",\r\n                    \"success\"\r\n                );\r\n                this.onClose();\r\n                this.props.setModalsLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.props.setModalsLoading(false);\r\n            });\r\n    };\r\n\r\n    setMoveTarget = (folder) => {\r\n        const path =\r\n            folder.path === \"/\"\r\n                ? folder.path + folder.name\r\n                : folder.path + \"/\" + folder.name;\r\n        this.setState({\r\n            selectedPath: path,\r\n            selectedPathName: folder.name,\r\n        });\r\n    };\r\n\r\n    remoteDownloadNext = () => {\r\n        this.props.closeAllModals();\r\n        this.setState({\r\n            remoteDownloadPathSelect: true,\r\n        });\r\n    };\r\n\r\n    onClose = () => {\r\n        this.setState({\r\n            newFolderName: \"\",\r\n            newFileName: \"\",\r\n            newName: \"\",\r\n            selectedPath: \"\",\r\n            selectedPathName: \"\",\r\n            secretShare: false,\r\n            sharePwd: \"\",\r\n            downloadURL: \"\",\r\n            shareUrl: \"\",\r\n            remoteDownloadPathSelect: false,\r\n            source: \"\",\r\n        });\r\n        this.newNameSuffix = \"\";\r\n        this.props.closeAllModals();\r\n    };\r\n\r\n    handleChange = (name) => (event) => {\r\n        this.setState({ [name]: event.target.checked });\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Loading />\r\n                <PurchaseShareDialog\r\n                    callback={this.state.purchaseCallback}\r\n                    score={this.props.share ? this.props.share.score : 0}\r\n                    onClose={() => {\r\n                        this.setState({ purchaseCallback: null });\r\n                        this.onClose();\r\n                    }}\r\n                />\r\n                <Dialog\r\n                    open={this.props.modalsStatus.getSource}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">\r\n                        获取文件外链\r\n                    </DialogTitle>\r\n\r\n                    <DialogContent>\r\n                        <form onSubmit={this.submitCreateNewFolder}>\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                id=\"newFolderName\"\r\n                                label=\"外链地址\"\r\n                                type=\"text\"\r\n                                value={this.state.source}\r\n                                fullWidth\r\n                            />\r\n                        </form>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>关闭</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.props.modalsStatus.createNewFolder}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">新建文件夹</DialogTitle>\r\n\r\n                    <DialogContent>\r\n                        <form onSubmit={this.submitCreateNewFolder}>\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                id=\"newFolderName\"\r\n                                label=\"文件夹名称\"\r\n                                type=\"text\"\r\n                                value={this.state.newFolderName}\r\n                                onChange={(e) => this.handleInputChange(e)}\r\n                                fullWidth\r\n                            />\r\n                        </form>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>取消</Button>\r\n                        <div className={classes.wrapper}>\r\n                            <Button\r\n                                onClick={this.submitCreateNewFolder}\r\n                                color=\"primary\"\r\n                                disabled={\r\n                                    this.state.newFolderName === \"\" ||\r\n                                    this.props.modalsLoading\r\n                                }\r\n                            >\r\n                                创建\r\n                                {this.props.modalsLoading && (\r\n                                    <CircularProgress\r\n                                        size={24}\r\n                                        className={classes.buttonProgress}\r\n                                    />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                <Dialog\r\n                    open={this.props.modalsStatus.createNewFile}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">新建文件</DialogTitle>\r\n\r\n                    <DialogContent>\r\n                        <form onSubmit={this.submitCreateNewFile}>\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                id=\"newFileName\"\r\n                                label=\"文件名称\"\r\n                                type=\"text\"\r\n                                value={this.state.newFileName}\r\n                                onChange={(e) => this.handleInputChange(e)}\r\n                                fullWidth\r\n                            />\r\n                        </form>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>取消</Button>\r\n                        <div className={classes.wrapper}>\r\n                            <Button\r\n                                onClick={this.submitCreateNewFile}\r\n                                color=\"primary\"\r\n                                disabled={\r\n                                    this.state.newFileName === \"\" ||\r\n                                    this.props.modalsLoading\r\n                                }\r\n                            >\r\n                                创建\r\n                                {this.props.modalsLoading && (\r\n                                    <CircularProgress\r\n                                        size={24}\r\n                                        className={classes.buttonProgress}\r\n                                    />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                <Dialog\r\n                    open={this.props.modalsStatus.rename}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                    maxWidth=\"sm\"\r\n                    fullWidth={true}\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">重命名</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText>\r\n                            输入{\" \"}\r\n                            <strong>\r\n                                {this.props.selected.length === 1\r\n                                    ? this.props.selected[0].name\r\n                                    : \"\"}\r\n                            </strong>{\" \"}\r\n                            的新名称：\r\n                        </DialogContentText>\r\n                        <form onSubmit={this.submitRename}>\r\n                            <TextField\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                id=\"newName\"\r\n                                label=\"新名称\"\r\n                                type=\"text\"\r\n                                value={this.state.newName}\r\n                                onChange={(e) => this.handleInputChange(e)}\r\n                                fullWidth\r\n                            />\r\n                        </form>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>取消</Button>\r\n                        <div className={classes.wrapper}>\r\n                            <Button\r\n                                onClick={this.submitRename}\r\n                                color=\"primary\"\r\n                                disabled={\r\n                                    this.state.newName === \"\" ||\r\n                                    this.props.modalsLoading\r\n                                }\r\n                            >\r\n                                确定\r\n                                {this.props.modalsLoading && (\r\n                                    <CircularProgress\r\n                                        size={24}\r\n                                        className={classes.buttonProgress}\r\n                                    />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <CopyDialog\r\n                    open={this.props.modalsStatus.copy}\r\n                    onClose={this.onClose}\r\n                    presentPath={this.props.path}\r\n                    selected={this.props.selected}\r\n                    modalsLoading={this.props.modalsLoading}\r\n                />\r\n\r\n                <Dialog\r\n                    open={this.props.modalsStatus.move}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">移动至</DialogTitle>\r\n                    <PathSelector\r\n                        presentPath={this.props.path}\r\n                        selected={this.props.selected}\r\n                        onSelect={this.setMoveTarget}\r\n                    />\r\n\r\n                    {this.state.selectedPath !== \"\" && (\r\n                        <DialogContent className={classes.contentFix}>\r\n                            <DialogContentText>\r\n                                移动至{\" \"}\r\n                                <strong>{this.state.selectedPathName}</strong>\r\n                            </DialogContentText>\r\n                        </DialogContent>\r\n                    )}\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>取消</Button>\r\n                        <div className={classes.wrapper}>\r\n                            <Button\r\n                                onClick={this.submitMove}\r\n                                color=\"primary\"\r\n                                disabled={\r\n                                    this.state.selectedPath === \"\" ||\r\n                                    this.props.modalsLoading\r\n                                }\r\n                            >\r\n                                确定\r\n                                {this.props.modalsLoading && (\r\n                                    <CircularProgress\r\n                                        size={24}\r\n                                        className={classes.buttonProgress}\r\n                                    />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.props.modalsStatus.resave}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">保存至</DialogTitle>\r\n                    <PathSelector\r\n                        presentPath={this.props.path}\r\n                        selected={this.props.selected}\r\n                        onSelect={this.setMoveTarget}\r\n                    />\r\n\r\n                    {this.state.selectedPath !== \"\" && (\r\n                        <DialogContent className={classes.contentFix}>\r\n                            <DialogContentText>\r\n                                保存至{\" \"}\r\n                                <strong>{this.state.selectedPathName}</strong>\r\n                            </DialogContentText>\r\n                        </DialogContent>\r\n                    )}\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>取消</Button>\r\n                        <div className={classes.wrapper}>\r\n                            <Button\r\n                                onClick={this.submitResave}\r\n                                color=\"primary\"\r\n                                disabled={\r\n                                    this.state.selectedPath === \"\" ||\r\n                                    this.props.modalsLoading\r\n                                }\r\n                            >\r\n                                确定\r\n                                {this.props.modalsLoading && (\r\n                                    <CircularProgress\r\n                                        size={24}\r\n                                        className={classes.buttonProgress}\r\n                                    />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.props.modalsStatus.remove}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">删除对象</DialogTitle>\r\n\r\n                    <DialogContent>\r\n                        <DialogContentText>\r\n                            确定要删除\r\n                            {this.props.selected.length === 1 && (\r\n                                <strong> {this.props.selected[0].name} </strong>\r\n                            )}\r\n                            {this.props.selected.length > 1 && (\r\n                                <span>\r\n                                    这{this.props.selected.length}个对象\r\n                                </span>\r\n                            )}\r\n                            吗？\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>取消</Button>\r\n                        <div className={classes.wrapper}>\r\n                            <Button\r\n                                onClick={this.submitRemove}\r\n                                color=\"primary\"\r\n                                disabled={this.props.modalsLoading}\r\n                            >\r\n                                确定\r\n                                {this.props.modalsLoading && (\r\n                                    <CircularProgress\r\n                                        size={24}\r\n                                        className={classes.buttonProgress}\r\n                                    />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                <CreatShare\r\n                    open={this.props.modalsStatus.share}\r\n                    onClose={this.onClose}\r\n                    modalsLoading={this.props.modalsLoading}\r\n                    setModalsLoading={this.props.setModalsLoading}\r\n                    selected={this.props.selected}\r\n                />\r\n\r\n                <Dialog\r\n                    open={this.props.modalsStatus.music}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">音频播放</DialogTitle>\r\n\r\n                    <DialogContent>\r\n                        <DialogContentText>\r\n                            {this.props.selected.length !== 0 && (\r\n                                <audio\r\n                                    controls\r\n                                    src={\r\n                                        pathHelper.isSharePage(\r\n                                            this.props.location.pathname\r\n                                        )\r\n                                            ? baseURL +\r\n                                              \"/share/preview/\" +\r\n                                              this.props.selected[0].key +\r\n                                              (this.props.selected[0].key\r\n                                                  ? \"?path=\" +\r\n                                                    encodeURIComponent(\r\n                                                        this.props.selected[0]\r\n                                                            .path === \"/\"\r\n                                                            ? this.props\r\n                                                                  .selected[0]\r\n                                                                  .path +\r\n                                                                  this.props\r\n                                                                      .selected[0]\r\n                                                                      .name\r\n                                                            : this.props\r\n                                                                  .selected[0]\r\n                                                                  .path +\r\n                                                                  \"/\" +\r\n                                                                  this.props\r\n                                                                      .selected[0]\r\n                                                                      .name\r\n                                                    )\r\n                                                  : \"\")\r\n                                            : baseURL +\r\n                                              \"/file/preview/\" +\r\n                                              this.props.selected[0].id\r\n                                    }\r\n                                />\r\n                            )}\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>关闭</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.props.modalsStatus.remoteDownload}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                    fullWidth\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">\r\n                        新建离线下载任务\r\n                    </DialogTitle>\r\n\r\n                    <DialogContent>\r\n                        <DialogContentText>\r\n                            <TextField\r\n                                label=\"文件地址\"\r\n                                autoFocus\r\n                                fullWidth\r\n                                id=\"downloadURL\"\r\n                                onChange={this.handleInputChange}\r\n                                placeholder=\"输入文件下载地址，支持 HTTP(s)/FTP/磁力链\"\r\n                            />\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>关闭</Button>\r\n                        <Button\r\n                            onClick={this.remoteDownloadNext}\r\n                            color=\"primary\"\r\n                            disabled={\r\n                                this.props.modalsLoading ||\r\n                                this.state.downloadURL === \"\"\r\n                            }\r\n                        >\r\n                            下一步\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.state.remoteDownloadPathSelect}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">\r\n                        选择存储位置\r\n                    </DialogTitle>\r\n                    <PathSelector\r\n                        presentPath={this.props.path}\r\n                        selected={this.props.selected}\r\n                        onSelect={this.setMoveTarget}\r\n                    />\r\n\r\n                    {this.state.selectedPath !== \"\" && (\r\n                        <DialogContent className={classes.contentFix}>\r\n                            <DialogContentText>\r\n                                下载至{\" \"}\r\n                                <strong>{this.state.selectedPathName}</strong>\r\n                            </DialogContentText>\r\n                        </DialogContent>\r\n                    )}\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>取消</Button>\r\n                        <div className={classes.wrapper}>\r\n                            <Button\r\n                                onClick={this.submitDownload}\r\n                                color=\"primary\"\r\n                                disabled={\r\n                                    this.state.selectedPath === \"\" ||\r\n                                    this.props.modalsLoading\r\n                                }\r\n                            >\r\n                                创建任务\r\n                                {this.props.modalsLoading && (\r\n                                    <CircularProgress\r\n                                        size={24}\r\n                                        className={classes.buttonProgress}\r\n                                    />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.props.modalsStatus.torrentDownload}\r\n                    onClose={this.onClose}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">\r\n                        选择存储位置\r\n                    </DialogTitle>\r\n                    <PathSelector\r\n                        presentPath={this.props.path}\r\n                        selected={this.props.selected}\r\n                        onSelect={this.setMoveTarget}\r\n                    />\r\n\r\n                    {this.state.selectedPath !== \"\" && (\r\n                        <DialogContent className={classes.contentFix}>\r\n                            <DialogContentText>\r\n                                下载至{\" \"}\r\n                                <strong>{this.state.selectedPathName}</strong>\r\n                            </DialogContentText>\r\n                        </DialogContent>\r\n                    )}\r\n                    <DialogActions>\r\n                        <Button onClick={this.onClose}>取消</Button>\r\n                        <div className={classes.wrapper}>\r\n                            <Button\r\n                                onClick={this.submitTorrentDownload}\r\n                                color=\"primary\"\r\n                                disabled={\r\n                                    this.state.selectedPath === \"\" ||\r\n                                    this.props.modalsLoading\r\n                                }\r\n                            >\r\n                                创建任务\r\n                                {this.props.modalsLoading && (\r\n                                    <CircularProgress\r\n                                        size={24}\r\n                                        className={classes.buttonProgress}\r\n                                    />\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                <DecompressDialog\r\n                    open={this.props.modalsStatus.decompress}\r\n                    onClose={this.onClose}\r\n                    presentPath={this.props.path}\r\n                    selected={this.props.selected}\r\n                    modalsLoading={this.props.modalsLoading}\r\n                />\r\n                <CompressDialog\r\n                    open={this.props.modalsStatus.compress}\r\n                    onClose={this.onClose}\r\n                    presentPath={this.props.path}\r\n                    selected={this.props.selected}\r\n                    modalsLoading={this.props.modalsLoading}\r\n                />\r\n                <RelocateDialog\r\n                    open={this.props.modalsStatus.relocate}\r\n                    onClose={this.onClose}\r\n                    selected={this.props.selected}\r\n                    modalsLoading={this.props.modalsLoading}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nModalsCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst Modals = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(ModalsCompoment)));\r\n\r\nexport default Modals;\r\n","import { isMac } from \"../utils\";\r\nimport pathHelper from \"../utils/page\";\r\nimport Auth from \"../middleware/Auth\";\r\nimport {\r\n    changeContextMenu,\r\n    openLoadingDialog,\r\n    openMusicDialog,\r\n    showImgPreivew,\r\n    toggleSnackbar,\r\n} from \"./index\";\r\nimport { isPreviewable } from \"../config\";\r\nimport { push } from \"connected-react-router\";\r\n\r\nexport const removeSelectedTargets = (fileIds) => {\r\n    return {\r\n        type: \"RMOVE_SELECTED_TARGETS\",\r\n        fileIds,\r\n    };\r\n};\r\n\r\nexport const addSelectedTargets = (targets) => {\r\n    return {\r\n        type: \"ADD_SELECTED_TARGETS\",\r\n        targets,\r\n    };\r\n};\r\n\r\nexport const setSelectedTarget = (targets) => {\r\n    return {\r\n        type: \"SET_SELECTED_TARGET\",\r\n        targets,\r\n    };\r\n};\r\n\r\nexport const setLastSelect = (file, index) => {\r\n    return {\r\n        type: \"SET_LAST_SELECT\",\r\n        file,\r\n        index,\r\n    };\r\n};\r\n\r\nexport const setShiftSelectedIds = (shiftSelectedIds) => {\r\n    return {\r\n        type: \"SET_SHIFT_SELECTED_IDS\",\r\n        shiftSelectedIds,\r\n    };\r\n};\r\n\r\nexport const openPreview = () => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            explorer: { selected },\r\n            router: {\r\n                location: { pathname },\r\n            },\r\n        } = getState();\r\n        const isShare = pathHelper.isSharePage(pathname);\r\n        if (isShare) {\r\n            if (!Auth.Check()) {\r\n                dispatch(toggleSnackbar(\"top\", \"right\", \"请先登录\", \"warning\"));\r\n                dispatch(changeContextMenu(\"file\", false));\r\n                return;\r\n            }\r\n            const user = Auth.GetUser();\r\n            if (!Auth.Check() && user && !user.group.shareDownload) {\r\n                dispatch(toggleSnackbar(\"top\", \"right\", \"请先登录\", \"warning\"));\r\n                dispatch(changeContextMenu(\"file\", false));\r\n                return;\r\n            }\r\n        }\r\n\r\n        dispatch(changeContextMenu(\"file\", false));\r\n        const previewPath =\r\n            selected[0].path === \"/\"\r\n                ? selected[0].path + selected[0].name\r\n                : selected[0].path + \"/\" + selected[0].name;\r\n        switch (isPreviewable(selected[0].name)) {\r\n            case \"img\":\r\n                dispatch(showImgPreivew(selected[0]));\r\n                return;\r\n            case \"msDoc\":\r\n                if (isShare) {\r\n                    dispatch(\r\n                        push(\r\n                            selected[0].key +\r\n                                \"/doc?name=\" +\r\n                                encodeURIComponent(selected[0].name) +\r\n                                \"&share_path=\" +\r\n                                encodeURIComponent(previewPath)\r\n                        )\r\n                    );\r\n                    return;\r\n                }\r\n                dispatch(\r\n                    push(\r\n                        \"/doc?p=\" +\r\n                            encodeURIComponent(previewPath) +\r\n                            \"&id=\" +\r\n                            selected[0].id\r\n                    )\r\n                );\r\n                return;\r\n            case \"audio\":\r\n                dispatch(openMusicDialog());\r\n                return;\r\n            case \"video\":\r\n                if (isShare) {\r\n                    dispatch(\r\n                        push(\r\n                            selected[0].key +\r\n                                \"/video?name=\" +\r\n                                encodeURIComponent(selected[0].name) +\r\n                                \"&share_path=\" +\r\n                                encodeURIComponent(previewPath)\r\n                        )\r\n                    );\r\n                    return;\r\n                }\r\n                dispatch(\r\n                    push(\r\n                        \"/video?p=\" +\r\n                            encodeURIComponent(previewPath) +\r\n                            \"&id=\" +\r\n                            selected[0].id\r\n                    )\r\n                );\r\n                return;\r\n            case \"pdf\":\r\n                if (isShare) {\r\n                    dispatch(\r\n                        push(\r\n                            selected[0].key +\r\n                                \"/pdf?name=\" +\r\n                                encodeURIComponent(selected[0].name) +\r\n                                \"&share_path=\" +\r\n                                encodeURIComponent(previewPath)\r\n                        )\r\n                    );\r\n                    return;\r\n                }\r\n                dispatch(\r\n                    push(\r\n                        \"/pdf?p=\" +\r\n                            encodeURIComponent(previewPath) +\r\n                            \"&id=\" +\r\n                            selected[0].id\r\n                    )\r\n                );\r\n                return;\r\n            case \"edit\":\r\n                if (isShare) {\r\n                    dispatch(\r\n                        push(\r\n                            selected[0].key +\r\n                                \"/text?name=\" +\r\n                                encodeURIComponent(selected[0].name) +\r\n                                \"&share_path=\" +\r\n                                encodeURIComponent(previewPath)\r\n                        )\r\n                    );\r\n                    return;\r\n                }\r\n                dispatch(\r\n                    push(\r\n                        \"/text?p=\" +\r\n                            encodeURIComponent(previewPath) +\r\n                            \"&id=\" +\r\n                            selected[0].id\r\n                    )\r\n                );\r\n                return;\r\n            case \"code\":\r\n                if (isShare) {\r\n                    dispatch(\r\n                        push(\r\n                            selected[0].key +\r\n                                \"/code?name=\" +\r\n                                encodeURIComponent(selected[0].name) +\r\n                                \"&share_path=\" +\r\n                                encodeURIComponent(previewPath)\r\n                        )\r\n                    );\r\n                    return;\r\n                }\r\n                dispatch(\r\n                    push(\r\n                        \"/code?p=\" +\r\n                            encodeURIComponent(previewPath) +\r\n                            \"&id=\" +\r\n                            selected[0].id\r\n                    )\r\n                );\r\n                return;\r\n            default:\r\n                dispatch(openLoadingDialog(\"获取下载地址...\"));\r\n                return;\r\n        }\r\n    };\r\n};\r\n\r\nexport const selectFile = (file, event, fileIndex) => {\r\n    const { ctrlKey, metaKey, shiftKey } = event;\r\n    return (dispatch, getState) => {\r\n        // 多种组合操作忽略\r\n        if ([ctrlKey, metaKey, shiftKey].filter(Boolean).length > 1) {\r\n            return;\r\n        }\r\n        const isMacbook = isMac();\r\n        const { explorer } = getState();\r\n        const {\r\n            selected,\r\n            lastSelect,\r\n            dirList,\r\n            fileList,\r\n            shiftSelectedIds,\r\n        } = explorer;\r\n        if (\r\n            shiftKey &&\r\n            !ctrlKey &&\r\n            !metaKey &&\r\n            selected.length !== 0 &&\r\n            // 点击类型一样\r\n            file.type === lastSelect.file.type\r\n        ) {\r\n            // shift 多选\r\n            // 取消原有选择\r\n            dispatch(removeSelectedTargets(selected.map((v) => v.id)));\r\n            // 添加新选择\r\n            const begin = Math.min(lastSelect.index, fileIndex);\r\n            const end = Math.max(lastSelect.index, fileIndex);\r\n            const list = file.type === \"dir\" ? dirList : fileList;\r\n            const newShiftSelected = list.slice(begin, end + 1);\r\n            return dispatch(addSelectedTargets(newShiftSelected));\r\n        }\r\n        dispatch(setLastSelect(file, fileIndex));\r\n        dispatch(setShiftSelectedIds([]));\r\n        if ((ctrlKey && !isMacbook) || (metaKey && isMacbook)) {\r\n            // Ctrl/Command 单击添加/删除\r\n            const presentIndex = selected.findIndex((value) => {\r\n                return value.id === file.id;\r\n            });\r\n            if (presentIndex !== -1) {\r\n                return dispatch(removeSelectedTargets([file.id]));\r\n            }\r\n            return dispatch(addSelectedTargets([file]));\r\n        }\r\n        // 单选\r\n        return dispatch(setSelectedTarget([file]));\r\n    };\r\n};\r\n","export * from \"./explorer\";\r\n\r\nexport const setNavigator = (path, navigatorLoading) => {\r\n    return {\r\n        type: \"SET_NAVIGATOR\",\r\n        path,\r\n        navigatorLoading,\r\n    };\r\n};\r\n\r\nexport const navigateTo = (path) => {\r\n    return (dispatch, getState) => {\r\n        const state = getState();\r\n        const navigatorLoading = path !== state.navigator.path;\r\n        dispatch(setNavigator(path, navigatorLoading));\r\n    };\r\n};\r\n\r\nexport const navigateUp = () => {\r\n    return (dispatch, getState) => {\r\n        const state = getState();\r\n        const pathSplit = state.navigator.path.split(\"/\");\r\n        pathSplit.pop();\r\n        const newPath = pathSplit.length === 1 ? \"/\" : pathSplit.join(\"/\");\r\n        const navigatorLoading = newPath !== state.navigator.path;\r\n        dispatch(setNavigator(newPath, navigatorLoading));\r\n    };\r\n};\r\n\r\nexport const drawerToggleAction = (open) => {\r\n    return {\r\n        type: \"DRAWER_TOGGLE\",\r\n        open: open,\r\n    };\r\n};\r\n\r\nexport const dragAndDrop = (source, target) => {\r\n    return {\r\n        type: \"DRAG_AND_DROP\",\r\n        source: source,\r\n        target: target,\r\n    };\r\n};\r\n\r\nexport const changeViewMethod = (method) => {\r\n    return {\r\n        type: \"CHANGE_VIEW_METHOD\",\r\n        method: method,\r\n    };\r\n};\r\n\r\nexport const toggleDaylightMode = () => {\r\n    return {\r\n        type: \"TOGGLE_DAYLIGHT_MODE\",\r\n    };\r\n};\r\n\r\nexport const changeContextMenu = (type, open) => {\r\n    return {\r\n        type: \"CHANGE_CONTEXT_MENU\",\r\n        menuType: type,\r\n        open: open,\r\n    };\r\n};\r\n\r\nexport const setNavigatorLoadingStatus = (status) => {\r\n    return {\r\n        type: \"SET_NAVIGATOR_LOADING_STATUE\",\r\n        status: status,\r\n    };\r\n};\r\n\r\nexport const setNavigatorError = (status, msg) => {\r\n    return {\r\n        type: \"SET_NAVIGATOR_ERROR\",\r\n        status: status,\r\n        msg: msg,\r\n    };\r\n};\r\n\r\nexport const openCreateFolderDialog = () => {\r\n    return {\r\n        type: \"OPEN_CREATE_FOLDER_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openCreateFileDialog = () => {\r\n    return {\r\n        type: \"OPEN_CREATE_FILE_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const setUserPopover = (anchor) => {\r\n    return {\r\n        type: \"SET_USER_POPOVER\",\r\n        anchor: anchor,\r\n    };\r\n};\r\n\r\nexport const setShareUserPopover = (anchor) => {\r\n    return {\r\n        type: \"SET_SHARE_USER_POPOVER\",\r\n        anchor: anchor,\r\n    };\r\n};\r\n\r\nexport const openRenameDialog = () => {\r\n    return {\r\n        type: \"OPEN_RENAME_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openResaveDialog = (key) => {\r\n    return {\r\n        type: \"OPEN_RESAVE_DIALOG\",\r\n        key: key,\r\n    };\r\n};\r\n\r\nexport const openMoveDialog = () => {\r\n    return {\r\n        type: \"OPEN_MOVE_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openRemoveDialog = () => {\r\n    return {\r\n        type: \"OPEN_REMOVE_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openShareDialog = () => {\r\n    return {\r\n        type: \"OPEN_SHARE_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const applyThemes = (theme) => {\r\n    return {\r\n        type: \"APPLY_THEME\",\r\n        theme: theme,\r\n    };\r\n};\r\n\r\nexport const setSessionStatus = (status) => {\r\n    return {\r\n        type: \"SET_SESSION_STATUS\",\r\n        status: status,\r\n    };\r\n};\r\n\r\nexport const openMusicDialog = () => {\r\n    return {\r\n        type: \"OPEN_MUSIC_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openRemoteDownloadDialog = () => {\r\n    return {\r\n        type: \"OPEN_REMOTE_DOWNLOAD_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openTorrentDownloadDialog = () => {\r\n    return {\r\n        type: \"OPEN_TORRENT_DOWNLOAD_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openDecompressDialog = () => {\r\n    return {\r\n        type: \"OPEN_DECOMPRESS_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openCompressDialog = () => {\r\n    return {\r\n        type: \"OPEN_COMPRESS_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openRelocateDialog = () => {\r\n    return {\r\n        type: \"OPEN_RELOCATE_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openGetSourceDialog = () => {\r\n    return {\r\n        type: \"OPEN_GET_SOURCE_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openCopyDialog = () => {\r\n    return {\r\n        type: \"OPEN_COPY_DIALOG\",\r\n    };\r\n};\r\n\r\nexport const openLoadingDialog = (text) => {\r\n    return {\r\n        type: \"OPEN_LOADING_DIALOG\",\r\n        text: text,\r\n    };\r\n};\r\n\r\nexport const closeAllModals = () => {\r\n    return {\r\n        type: \"CLOSE_ALL_MODALS\",\r\n    };\r\n};\r\n\r\nexport const toggleSnackbar = (vertical, horizontal, msg, color) => {\r\n    return {\r\n        type: \"TOGGLE_SNACKBAR\",\r\n        vertical: vertical,\r\n        horizontal: horizontal,\r\n        msg: msg,\r\n        color: color,\r\n    };\r\n};\r\n\r\nexport const enableLoadUploader = () => {\r\n    return {\r\n        type: \"ENABLE_LOAD_UPLOADER\",\r\n    };\r\n};\r\n\r\nexport const setModalsLoading = (status) => {\r\n    return {\r\n        type: \"SET_MODALS_LOADING\",\r\n        status: status,\r\n    };\r\n};\r\n\r\nexport const refreshFileList = () => {\r\n    return {\r\n        type: \"REFRESH_FILE_LIST\",\r\n    };\r\n};\r\n\r\nexport const searchMyFile = (keywords) => {\r\n    return {\r\n        type: \"SEARCH_MY_FILE\",\r\n        keywords: keywords,\r\n    };\r\n};\r\n\r\nexport const showImgPreivew = (first) => {\r\n    return {\r\n        type: \"SHOW_IMG_PREIVEW\",\r\n        first: first,\r\n    };\r\n};\r\n\r\nexport const refreshStorage = () => {\r\n    return {\r\n        type: \"REFRESH_STORAGE\",\r\n    };\r\n};\r\n\r\nexport const saveFile = () => {\r\n    return {\r\n        type: \"SAVE_FILE\",\r\n    };\r\n};\r\n\r\nexport const setSiteConfig = (config) => {\r\n    return {\r\n        type: \"SET_SITE_CONFIG\",\r\n        config: config,\r\n    };\r\n};\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useLocation, useParams, useRouteMatch } from \"react-router\";\r\nimport API from \"../../middleware/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport { changeSubTitle } from \"../../redux/viewUpdate/action\";\r\nimport Editor from \"for-editor\";\r\nimport SaveButton from \"../Dial/Save\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport TextLoading from \"../Placeholder/TextLoading\";\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"30px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: 50,\r\n    },\r\n    player: {\r\n        borderRadius: \"4px\",\r\n    },\r\n    root: {\r\n        backgroundColor: \"white\",\r\n        borderRadius: \"8px\",\r\n    },\r\n    \"@global\": {\r\n        \".for-toolbar\": {\r\n            overflowX: \"auto!important\",\r\n        },\r\n    },\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function TextViewer() {\r\n    const [content, setContent] = useState(\"\");\r\n    const [status, setStatus] = useState(\"\");\r\n    const [loading, setLoading] = useState(true);\r\n    const math = useRouteMatch();\r\n    const $vm = React.createRef();\r\n    const location = useLocation();\r\n    const query = useQuery();\r\n    const { id } = useParams();\r\n\r\n    const dispatch = useDispatch();\r\n    const SetSubTitle = useCallback(\r\n        (title) => dispatch(changeSubTitle(title)),\r\n        [dispatch]\r\n    );\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (!pathHelper.isSharePage(location.pathname)) {\r\n            const path = query.get(\"p\").split(\"/\");\r\n            SetSubTitle(path[path.length - 1]);\r\n        } else {\r\n            SetSubTitle(query.get(\"name\"));\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [math.params[0], location]);\r\n\r\n    useEffect(() => {\r\n        let requestURL = \"/file/content/\" + query.get(\"id\");\r\n        if (pathHelper.isSharePage(location.pathname)) {\r\n            requestURL = \"/share/content/\" + id;\r\n            if (query.get(\"share_path\") !== \"\") {\r\n                requestURL +=\r\n                    \"?path=\" + encodeURIComponent(query.get(\"share_path\"));\r\n            }\r\n        }\r\n\r\n        setLoading(true);\r\n        API.get(requestURL, { responseType: \"arraybuffer\" })\r\n            .then((response) => {\r\n                const buffer = new Buffer(response.rawData, \"binary\");\r\n                const textdata = buffer.toString(); // for string\r\n                setContent(textdata);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"无法读取文件内容，\" + error.message,\r\n                    \"error\"\r\n                );\r\n            })\r\n            .then(() => {\r\n                setLoading(false);\r\n            });\r\n        // eslint-disable-next-line\r\n    }, [math.params[0]]);\r\n\r\n    const toBase64 = (file) =>\r\n        new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = (error) => reject(error);\r\n        });\r\n\r\n    const save = () => {\r\n        setStatus(\"loading\");\r\n        API.put(\"/file/update/\" + query.get(\"id\"), content)\r\n            .then(() => {\r\n                setStatus(\"success\");\r\n                setTimeout(() => setStatus(\"\"), 2000);\r\n            })\r\n            .catch((error) => {\r\n                setStatus(\"\");\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    const addImg = async ($file) => {\r\n        $vm.current.$img2Url($file.name, await toBase64($file));\r\n        console.log($file);\r\n    };\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.layout}>\r\n            <Paper className={classes.root} elevation={1}>\r\n                {loading && <TextLoading />}\r\n                {!loading && (\r\n                    <Editor\r\n                        ref={$vm}\r\n                        value={content}\r\n                        onSave={() => save()}\r\n                        addImg={($file) => addImg($file)}\r\n                        onChange={(value) => setContent(value)}\r\n                        toolbar={{\r\n                            h1: true, // h1\r\n                            h2: true, // h2\r\n                            h3: true, // h3\r\n                            h4: true, // h4\r\n                            img: true, // 图片\r\n                            link: true, // 链接\r\n                            code: true, // 代码块\r\n                            preview: true, // 预览\r\n                            expand: true, // 全屏\r\n                            /* v0.0.9 */\r\n                            undo: true, // 撤销\r\n                            redo: true, // 重做\r\n                            save: false, // 保存\r\n                            /* v0.2.3 */\r\n                            subfield: true, // 单双栏模式\r\n                        }}\r\n                    />\r\n                )}\r\n            </Paper>\r\n            {!pathHelper.isSharePage(location.pathname) && (\r\n                <SaveButton onClick={save} status={status} />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import React, { Suspense, useCallback, useEffect, useState } from \"react\";\r\nimport { Paper, useTheme } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useLocation, useParams, useRouteMatch } from \"react-router\";\r\nimport API from \"../../middleware/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport { changeSubTitle } from \"../../redux/viewUpdate/action\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport SaveButton from \"../Dial/Save\";\r\nimport { codePreviewSuffix } from \"../../config\";\r\nimport TextLoading from \"../Placeholder/TextLoading\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nconst MonacoEditor = React.lazy(() =>\r\n    import(/* webpackChunkName: \"codeEditor\" */ \"react-monaco-editor\")\r\n);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"30px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: 50,\r\n    },\r\n    editor: {\r\n        borderRadius: \"4px\",\r\n    },\r\n    \"@global\": {\r\n        \".overflow-guard\": {\r\n            borderRadius: \"4px!important\",\r\n        },\r\n    },\r\n    formControl: {\r\n        margin: \"8px 16px 8px 16px\",\r\n    },\r\n    toobar: {\r\n        textAlign: \"right\",\r\n    },\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function CodeViewer() {\r\n    const [content, setContent] = useState(\"\");\r\n    const [status, setStatus] = useState(\"\");\r\n    const [loading, setLoading] = useState(true);\r\n    const [suffix, setSuffix] = useState(\"javascript\");\r\n\r\n    const math = useRouteMatch();\r\n    const location = useLocation();\r\n    const query = useQuery();\r\n    const { id } = useParams();\r\n    const theme = useTheme();\r\n\r\n    const dispatch = useDispatch();\r\n    const SetSubTitle = useCallback(\r\n        (title) => dispatch(changeSubTitle(title)),\r\n        [dispatch]\r\n    );\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (!pathHelper.isSharePage(location.pathname)) {\r\n            const path = query.get(\"p\").split(\"/\");\r\n            const extension = query.get(\"p\").split(\".\");\r\n            setSuffix(codePreviewSuffix[extension.pop()]);\r\n            SetSubTitle(path[path.length - 1]);\r\n        } else {\r\n            const extension = query.get(\"name\").split(\".\");\r\n            setSuffix(codePreviewSuffix[extension.pop()]);\r\n            SetSubTitle(query.get(\"name\"));\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [math.params[0], location]);\r\n\r\n    useEffect(() => {\r\n        let requestURL = \"/file/content/\" + query.get(\"id\");\r\n        if (pathHelper.isSharePage(location.pathname)) {\r\n            requestURL = \"/share/content/\" + id;\r\n            if (query.get(\"share_path\") !== \"\") {\r\n                requestURL +=\r\n                    \"?path=\" + encodeURIComponent(query.get(\"share_path\"));\r\n            }\r\n        }\r\n\r\n        setLoading(true);\r\n        API.get(requestURL, { responseType: \"arraybuffer\" })\r\n            .then((response) => {\r\n                const buffer = new Buffer(response.rawData, \"binary\");\r\n                const textdata = buffer.toString(); // for string\r\n                setContent(textdata);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"无法读取文件内容，\" + error.message,\r\n                    \"error\"\r\n                );\r\n            })\r\n            .then(() => {\r\n                setLoading(false);\r\n            });\r\n        // eslint-disable-next-line\r\n    }, [math.params[0]]);\r\n\r\n    const save = () => {\r\n        setStatus(\"loading\");\r\n        API.put(\"/file/update/\" + query.get(\"id\"), content)\r\n            .then(() => {\r\n                setStatus(\"success\");\r\n                setTimeout(() => setStatus(\"\"), 2000);\r\n            })\r\n            .catch((error) => {\r\n                setStatus(\"\");\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    const classes = useStyles();\r\n    const isSharePage = pathHelper.isSharePage(location.pathname);\r\n    return (\r\n        <div className={classes.layout}>\r\n            <Paper className={classes.root} elevation={1}>\r\n                <div className={classes.toobar}>\r\n                    <FormControl className={classes.formControl}>\r\n                        <Select\r\n                            labelId=\"demo-simple-select-label\"\r\n                            id=\"demo-simple-select\"\r\n                            value={suffix}\r\n                            onChange={(e) => setSuffix(e.target.value)}\r\n                        >\r\n                            {Array.from(\r\n                                new Set(\r\n                                    Object.keys(codePreviewSuffix).map((k) => {\r\n                                        return codePreviewSuffix[k];\r\n                                    })\r\n                                )\r\n                            ).map((extension) => (\r\n                                // eslint-disable-next-line react/jsx-key\r\n                                <MenuItem value={extension}>\r\n                                    {extension}\r\n                                </MenuItem>\r\n                            ))}\r\n                        </Select>\r\n                    </FormControl>\r\n                </div>\r\n                <Divider />\r\n                {loading && <TextLoading />}\r\n                {!loading && (\r\n                    <Suspense fallback={<TextLoading />}>\r\n                        <MonacoEditor\r\n                            height=\"600\"\r\n                            language={suffix}\r\n                            theme={\r\n                                theme.palette.type === \"dark\" ? \"vs-dark\" : \"vs\"\r\n                            }\r\n                            value={content}\r\n                            options={{\r\n                                readOnly: isSharePage,\r\n                                extraEditorClassName: classes.editor,\r\n                            }}\r\n                            onChange={(value) => setContent(value)}\r\n                        />\r\n                    </Suspense>\r\n                )}\r\n            </Paper>\r\n            {!isSharePage && <SaveButton onClick={save} status={status} />}\r\n        </div>\r\n    );\r\n}\r\n","export const imgPreviewSuffix = [\r\n    \"bmp\",\r\n    \"png\",\r\n    \"gif\",\r\n    \"jpg\",\r\n    \"jpeg\",\r\n    \"svg\",\r\n    \"webp\",\r\n];\r\nexport const msDocPreviewSuffix = [\r\n    \"ppt\",\r\n    \"pptx\",\r\n    \"pps\",\r\n    \"doc\",\r\n    \"docx\",\r\n    \"xlsx\",\r\n    \"xls\",\r\n];\r\nexport const audioPreviewSuffix = [\"mp3\", \"ogg\"];\r\n//export const audioPreviewSuffix = [];\r\nexport const videoPreviewSuffix = [\"mp4\", \"mkv\", \"webm\"];\r\nexport const pdfPreviewSuffix = [\"pdf\"];\r\nexport const editSuffix = [\"md\", \"txt\"];\r\nexport const codePreviewSuffix = {\r\n    json: \"json\",\r\n    php: \"php\",\r\n    py: \"python\",\r\n    bat: \"bat\",\r\n    cpp: \"cpp\",\r\n    c: \"cpp\",\r\n    h: \"cpp\",\r\n    cs: \"csharp\",\r\n    css: \"css\",\r\n    dockerfile: \"dockerfile\",\r\n    go: \"go\",\r\n    html: \"html\",\r\n    ini: \"ini\",\r\n    java: \"java\",\r\n    js: \"javascript\",\r\n    jsx: \"javascript\",\r\n    less: \"less\",\r\n    lua: \"lua\",\r\n    sh: \"shell\",\r\n    sql: \"sql\",\r\n    xml: \"xml\",\r\n    yaml: \"yaml\",\r\n};\r\nexport const mediaType = {\r\n    audio: [\"mp3\", \"flac\", \"ape\", \"wav\", \"acc\", \"ogg\"],\r\n    video: [\"mp4\", \"flv\", \"avi\", \"wmv\", \"mkv\", \"rm\", \"rmvb\", \"mov\", \"ogv\"],\r\n    image: [\"bmp\", \"iff\", \"png\", \"gif\", \"jpg\", \"jpeg\", \"psd\", \"svg\", \"webp\"],\r\n    pdf: [\"pdf\"],\r\n    word: [\"doc\", \"docx\"],\r\n    ppt: [\"ppt\", \"pptx\"],\r\n    excel: [\"xls\", \"xlsx\", \"csv\"],\r\n    text: [\"txt\", \"md\", \"html\"],\r\n    torrent: [\"torrent\"],\r\n    zip: [\"zip\", \"gz\", \"tar\", \"rar\", \"7z\"],\r\n    excute: [\"exe\"],\r\n    android: [\"apk\"],\r\n    php: [\"php\"],\r\n    go: [\"go\"],\r\n    python: [\"py\"],\r\n    cpp: [\"cpp\"],\r\n    c: [\"c\"],\r\n    js: [\"js\", \"jsx\"],\r\n};\r\nexport const policyTypeMap = {\r\n    local: \"本机\",\r\n    remote: \"从机\",\r\n    qiniu: \"七牛\",\r\n    upyun: \"又拍云\",\r\n    oss: \"阿里云 OSS\",\r\n    cos: \"腾讯云\",\r\n    onedrive: \"OneDrive\",\r\n    s3: \"Amazon S3\",\r\n};\r\nexport const isPreviewable = (name) => {\r\n    const suffix = name.split(\".\").pop().toLowerCase();\r\n    if (imgPreviewSuffix.indexOf(suffix) !== -1) {\r\n        return \"img\";\r\n    } else if (msDocPreviewSuffix.indexOf(suffix) !== -1) {\r\n        return \"msDoc\";\r\n    } else if (audioPreviewSuffix.indexOf(suffix) !== -1) {\r\n        return \"audio\";\r\n    } else if (videoPreviewSuffix.indexOf(suffix) !== -1) {\r\n        return \"video\";\r\n    } else if (editSuffix.indexOf(suffix) !== -1) {\r\n        return \"edit\";\r\n    } else if (pdfPreviewSuffix.indexOf(suffix) !== -1) {\r\n        return \"pdf\";\r\n    } else if (Object.keys(codePreviewSuffix).indexOf(suffix) !== -1) {\r\n        return \"code\";\r\n    }\r\n    return false;\r\n};\r\nexport const isTorrent = (name) => {\r\n    const suffix = name.split(\".\").pop().toLowerCase();\r\n    if (mediaType.torrent.indexOf(suffix) !== -1) {\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nexport const isCompressFile = (name) => {\r\n    const suffix = name.split(\".\").pop().toLowerCase();\r\n    return suffix === \"zip\";\r\n};\r\n\r\nconst taskStatus = [\"排队中\", \"处理中\", \"失败\", \"取消\", \"已完成\"];\r\nconst taskType = [\"压缩\", \"解压缩\", \"文件中转\", \"导入外部目录\", \"存储策略转移\"];\r\nconst taskProgress = [\r\n    \"等待中\",\r\n    \"压缩中\",\r\n    \"解压缩中\",\r\n    \"下载中\",\r\n    \"转存中\",\r\n    \"索引中\",\r\n    \"插入中\",\r\n];\r\n\r\nexport const getTaskStatus = (status) => {\r\n    return taskStatus[status];\r\n};\r\n\r\nexport const getTaskType = (status) => {\r\n    return taskType[status];\r\n};\r\n\r\nexport const getTaskProgress = (type, status) => {\r\n    if (type === 2) {\r\n        return \"已完成 \" + (status + 1) + \" 个文件\";\r\n    }\r\n    return taskProgress[status];\r\n};\r\n\r\nexport const reportReasons = [\r\n    \"色情信息\",\r\n    \"包含病毒\",\r\n    \"侵权\",\r\n    \"不恰当的言论\",\r\n    \"其他\",\r\n];\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport {} from \"../../actions\";\r\nimport classNames from \"classnames\";\r\nimport ErrorIcon from \"@material-ui/icons/Error\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport WarningIcon from \"@material-ui/icons/Warning\";\r\n\r\nimport { green, amber } from \"@material-ui/core/colors\";\r\n\r\nimport {\r\n    withStyles,\r\n    SnackbarContent,\r\n    Snackbar,\r\n    IconButton,\r\n} from \"@material-ui/core\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        snackbar: state.viewUpdate.snackbar,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = () => {\r\n    return {};\r\n};\r\n\r\nconst variantIcon = {\r\n    success: CheckCircleIcon,\r\n    warning: WarningIcon,\r\n    error: ErrorIcon,\r\n    info: InfoIcon,\r\n};\r\n\r\nconst styles1 = (theme) => ({\r\n    success: {\r\n        backgroundColor: theme.palette.success.main,\r\n    },\r\n    error: {\r\n        backgroundColor: theme.palette.error.dark,\r\n    },\r\n    info: {\r\n        backgroundColor: theme.palette.info.main,\r\n    },\r\n    warning: {\r\n        backgroundColor: theme.palette.warning.main,\r\n    },\r\n    icon: {\r\n        fontSize: 20,\r\n    },\r\n    iconVariant: {\r\n        opacity: 0.9,\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    message: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n    },\r\n});\r\n\r\nfunction MySnackbarContent(props) {\r\n    const { classes, className, message, onClose, variant, ...other } = props;\r\n    const Icon = variantIcon[variant];\r\n\r\n    return (\r\n        <SnackbarContent\r\n            className={classNames(classes[variant], className)}\r\n            aria-describedby=\"client-snackbar\"\r\n            message={\r\n                <span id=\"client-snackbar\" className={classes.message}>\r\n                    <Icon\r\n                        className={classNames(\r\n                            classes.icon,\r\n                            classes.iconVariant\r\n                        )}\r\n                    />\r\n                    {message}\r\n                </span>\r\n            }\r\n            action={[\r\n                <IconButton\r\n                    key=\"close\"\r\n                    aria-label=\"Close\"\r\n                    color=\"inherit\"\r\n                    className={classes.close}\r\n                    onClick={onClose}\r\n                >\r\n                    <CloseIcon className={classes.icon} />\r\n                </IconButton>,\r\n            ]}\r\n            {...other}\r\n        />\r\n    );\r\n}\r\nMySnackbarContent.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    className: PropTypes.string,\r\n    message: PropTypes.node,\r\n    onClose: PropTypes.func,\r\n    variant: PropTypes.oneOf([\"alert\", \"success\", \"warning\", \"error\", \"info\"])\r\n        .isRequired,\r\n};\r\n\r\nconst MySnackbarContentWrapper = withStyles(styles1)(MySnackbarContent);\r\nconst styles = (theme) => ({\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n});\r\nclass SnackbarCompoment extends Component {\r\n    state = {\r\n        open: false,\r\n    };\r\n\r\n    UNSAFE_componentWillReceiveProps = (nextProps) => {\r\n        if (nextProps.snackbar.toggle !== this.props.snackbar.toggle) {\r\n            this.setState({ open: true });\r\n        }\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({ open: false });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Snackbar\r\n                anchorOrigin={{\r\n                    vertical: this.props.snackbar.vertical,\r\n                    horizontal: this.props.snackbar.horizontal,\r\n                }}\r\n                open={this.state.open}\r\n                autoHideDuration={6000}\r\n                onClose={this.handleClose}\r\n            >\r\n                <MySnackbarContentWrapper\r\n                    onClose={this.handleClose}\r\n                    variant={this.props.snackbar.color}\r\n                    message={this.props.snackbar.msg}\r\n                />\r\n            </Snackbar>\r\n        );\r\n    }\r\n}\r\n\r\nconst AlertBar = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(SnackbarCompoment));\r\n\r\nexport default AlertBar;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    LogoutVariant,\r\n    HomeAccount,\r\n    DesktopMacDashboard,\r\n    AccountArrowRight,\r\n    AccountPlus,\r\n} from \"mdi-material-ui\";\r\nimport {\r\n    setSessionStatus,\r\n    setUserPopover,\r\n    toggleSnackbar,\r\n} from \"../../actions\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport {\r\n    withStyles,\r\n    Avatar,\r\n    Popover,\r\n    Typography,\r\n    Chip,\r\n    ListItemIcon,\r\n    MenuItem,\r\n    Divider,\r\n} from \"@material-ui/core\";\r\nimport API from \"../../middleware/Api\";\r\nimport pathHelper from \"../../utils/page\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        anchorEl: state.viewUpdate.userPopoverAnchorEl,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setUserPopover: (anchor) => {\r\n            dispatch(setUserPopover(anchor));\r\n        },\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n        setSessionStatus: (status) => {\r\n            dispatch(setSessionStatus(status));\r\n        },\r\n    };\r\n};\r\nconst styles = () => ({\r\n    avatar: {\r\n        width: \"30px\",\r\n        height: \"30px\",\r\n    },\r\n    header: {\r\n        display: \"flex\",\r\n        padding: \"20px 20px 20px 20px\",\r\n    },\r\n    largeAvatar: {\r\n        height: \"90px\",\r\n        width: \"90px\",\r\n    },\r\n    info: {\r\n        marginLeft: \"10px\",\r\n        width: \"139px\",\r\n    },\r\n    badge: {\r\n        marginTop: \"10px\",\r\n    },\r\n    visitorMenu: {\r\n        width: 200,\r\n    },\r\n});\r\n\r\nclass UserAvatarPopoverCompoment extends Component {\r\n    handleClose = () => {\r\n        this.props.setUserPopover(null);\r\n    };\r\n\r\n    openURL = (url) => {\r\n        window.location.href = url;\r\n    };\r\n\r\n    sigOut = () => {\r\n        API.delete(\"/user/session/\")\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"您已退出登录\",\r\n                    \"success\"\r\n                );\r\n                Auth.signout();\r\n                window.location.reload();\r\n                this.props.setSessionStatus(false);\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"warning\"\r\n                );\r\n            })\r\n            .then(() => {\r\n                this.handleClose();\r\n            });\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const user = Auth.GetUser();\r\n        const isAdminPage = pathHelper.isAdminPage(\r\n            this.props.location.pathname\r\n        );\r\n\r\n        return (\r\n            <Popover\r\n                open={this.props.anchorEl !== null}\r\n                onClose={this.handleClose}\r\n                anchorEl={this.props.anchorEl}\r\n                anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"right\",\r\n                }}\r\n            >\r\n                {!Auth.Check() && (\r\n                    <div className={classes.visitorMenu}>\r\n                        <Divider />\r\n                        <MenuItem\r\n                            onClick={() => this.props.history.push(\"/login\")}\r\n                        >\r\n                            <ListItemIcon>\r\n                                <AccountArrowRight />\r\n                            </ListItemIcon>\r\n                            登录\r\n                        </MenuItem>\r\n                        <MenuItem\r\n                            onClick={() => this.props.history.push(\"/signup\")}\r\n                        >\r\n                            <ListItemIcon>\r\n                                <AccountPlus />\r\n                            </ListItemIcon>\r\n                            注册\r\n                        </MenuItem>\r\n                    </div>\r\n                )}\r\n                {Auth.Check() && (\r\n                    <div>\r\n                        <div className={classes.header}>\r\n                            <div className={classes.largeAvatarContainer}>\r\n                                <Avatar\r\n                                    className={classes.largeAvatar}\r\n                                    src={\r\n                                        \"/api/v3/user/avatar/\" + user.id + \"/l\"\r\n                                    }\r\n                                />\r\n                            </div>\r\n                            <div className={classes.info}>\r\n                                <Typography noWrap>{user.nickname}</Typography>\r\n                                <Typography\r\n                                    color=\"textSecondary\"\r\n                                    style={{\r\n                                        fontSize: \"0.875rem\",\r\n                                    }}\r\n                                    noWrap\r\n                                >\r\n                                    {user.user_name}\r\n                                </Typography>\r\n                                <Chip\r\n                                    className={classes.badge}\r\n                                    color={\r\n                                        user.group.id === 1\r\n                                            ? \"secondary\"\r\n                                            : \"default\"\r\n                                    }\r\n                                    label={user.group.name}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <Divider />\r\n                            {!isAdminPage && (\r\n                                <MenuItem\r\n                                    style={{\r\n                                        padding: \" 11px 16px 11px 16px\",\r\n                                    }}\r\n                                    onClick={() => {\r\n                                        this.handleClose();\r\n                                        this.props.history.push(\r\n                                            \"/profile/\" + user.id\r\n                                        );\r\n                                    }}\r\n                                >\r\n                                    <ListItemIcon>\r\n                                        <HomeAccount />\r\n                                    </ListItemIcon>\r\n                                    个人主页\r\n                                </MenuItem>\r\n                            )}\r\n                            {user.group.id === 1 && (\r\n                                <MenuItem\r\n                                    style={{\r\n                                        padding: \" 11px 16px 11px 16px\",\r\n                                    }}\r\n                                    onClick={() => {\r\n                                        this.handleClose();\r\n                                        this.props.history.push(\"/admin/home\");\r\n                                    }}\r\n                                >\r\n                                    <ListItemIcon>\r\n                                        <DesktopMacDashboard />\r\n                                    </ListItemIcon>\r\n                                    管理面板\r\n                                </MenuItem>\r\n                            )}\r\n\r\n                            <MenuItem\r\n                                style={{\r\n                                    padding: \" 11px 16px 11px 16px\",\r\n                                }}\r\n                                onClick={this.sigOut}\r\n                            >\r\n                                <ListItemIcon>\r\n                                    <LogoutVariant />\r\n                                </ListItemIcon>\r\n                                退出登录\r\n                            </MenuItem>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </Popover>\r\n        );\r\n    }\r\n}\r\n\r\nUserAvatarPopoverCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst UserAvatarPopover = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(UserAvatarPopoverCompoment)));\r\n\r\nexport default UserAvatarPopover;\r\n","import React, { useCallback } from \"react\";\r\nimport {\r\n    Avatar,\r\n    IconButton,\r\n    ListItem,\r\n    ListItemAvatar,\r\n    ListItemText,\r\n    makeStyles,\r\n} from \"@material-ui/core\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport { Nas } from \"mdi-material-ui\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport API from \"../../middleware/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport { Check } from \"@material-ui/icons\";\r\nimport Backup from \"@material-ui/icons/Backup\";\r\nimport { blue, green } from \"@material-ui/core/colors\";\r\nimport List from \"@material-ui/core/List\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    uploadFromFile: {\r\n        backgroundColor: blue[100],\r\n        color: blue[600],\r\n    },\r\n    policySelected: {\r\n        backgroundColor: green[100],\r\n        color: green[800],\r\n    },\r\n}));\r\n\r\nconst PolicySwitcher = () => {\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const [policies, setPolicies] = React.useState({\r\n        current: { id: \"\", name: \"\" },\r\n        options: [],\r\n    });\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const handleClick = (event) => {\r\n        if (policies.current.id === \"\") {\r\n            API.get(\"/user/setting/policies\", {})\r\n                .then((response) => {\r\n                    setPolicies(response.data);\r\n                })\r\n                .catch((error) => {\r\n                    ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n                });\r\n        }\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const switchTo = (id) => {\r\n        if (id === policies.current.id) {\r\n            handleClose();\r\n            return;\r\n        }\r\n        API.patch(\"/user/setting/policy\", {\r\n            id: id,\r\n        })\r\n            .then(() => {\r\n                window.location.reload();\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    const open = Boolean(anchorEl);\r\n    const id = open ? \"simple-popover\" : undefined;\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <>\r\n            <Tooltip title={\"存储策略\"} placement=\"bottom\">\r\n                <IconButton onClick={handleClick} color=\"inherit\">\r\n                    <Nas />\r\n                </IconButton>\r\n            </Tooltip>\r\n            <Popover\r\n                id={id}\r\n                open={open}\r\n                anchorEl={anchorEl}\r\n                onClose={handleClose}\r\n                anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"center\",\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"center\",\r\n                }}\r\n            >\r\n                <List>\r\n                    {policies.options.map((value, index) => (\r\n                        <ListItem\r\n                            button\r\n                            component=\"label\"\r\n                            key={index}\r\n                            onClick={() => switchTo(value.id)}\r\n                        >\r\n                            <ListItemAvatar>\r\n                                {value.id === policies.current.id && (\r\n                                    <Avatar className={classes.policySelected}>\r\n                                        <Check />\r\n                                    </Avatar>\r\n                                )}\r\n                                {value.id !== policies.current.id && (\r\n                                    <Avatar className={classes.uploadFromFile}>\r\n                                        <Backup />\r\n                                    </Avatar>\r\n                                )}\r\n                            </ListItemAvatar>\r\n                            <ListItemText primary={value.name} />\r\n                        </ListItem>\r\n                    ))}\r\n                </List>\r\n            </Popover>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default PolicySwitcher;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport SettingIcon from \"@material-ui/icons/Settings\";\r\nimport UserAvatarPopover from \"./UserAvatarPopover\";\r\nimport { AccountCircle } from \"mdi-material-ui\";\r\nimport { setUserPopover } from \"../../actions\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport {\r\n    withStyles,\r\n    Grow,\r\n    Avatar,\r\n    IconButton,\r\n    Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport DarkModeSwitcher from \"./DarkModeSwitcher\";\r\nimport PolicySwitcher from \"./PolicySwitcher\";\r\nimport { Home } from \"@material-ui/icons\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        selected: state.explorer.selected,\r\n        isMultiple: state.explorer.selectProps.isMultiple,\r\n        withFolder: state.explorer.selectProps.withFolder,\r\n        withFile: state.explorer.selectProps.withFile,\r\n        isLogin: state.viewUpdate.isLogin,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setUserPopover: (anchor) => {\r\n            dispatch(setUserPopover(anchor));\r\n        },\r\n    };\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    mobileHidden: {\r\n        [theme.breakpoints.down(\"xs\")]: {\r\n            display: \"none\",\r\n        },\r\n        whiteSpace: \"nowrap\",\r\n    },\r\n    avatar: {\r\n        width: \"30px\",\r\n        height: \"30px\",\r\n    },\r\n    header: {\r\n        display: \"flex\",\r\n        padding: \"20px 20px 20px 20px\",\r\n    },\r\n    largeAvatar: {\r\n        height: \"90px\",\r\n        width: \"90px\",\r\n    },\r\n    info: {\r\n        marginLeft: \"10px\",\r\n        width: \"139px\",\r\n    },\r\n    badge: {\r\n        marginTop: \"10px\",\r\n    },\r\n    visitorMenu: {\r\n        width: 200,\r\n    },\r\n});\r\n\r\nclass UserAvatarCompoment extends Component {\r\n    state = {\r\n        anchorEl: null,\r\n    };\r\n\r\n    showUserInfo = (e) => {\r\n        this.props.setUserPopover(e.currentTarget);\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({\r\n            anchorEl: null,\r\n        });\r\n    };\r\n\r\n    openURL = (url) => {\r\n        window.location.href = url;\r\n    };\r\n\r\n    returnHome = () => {\r\n        window.location.href = \"/home\";\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const loginCheck = Auth.Check(this.props.isLogin);\r\n        const user = Auth.GetUser(this.props.isLogin);\r\n        const isAdminPage = pathHelper.isAdminPage(\r\n            this.props.location.pathname\r\n        );\r\n\r\n        return (\r\n            <div className={classes.mobileHidden}>\r\n                <Grow\r\n                    in={\r\n                        this.props.selected.length <= 1 &&\r\n                        !(!this.props.isMultiple && this.props.withFile)\r\n                    }\r\n                >\r\n                    <div>\r\n                        {!isAdminPage && (\r\n                            <>\r\n                                <DarkModeSwitcher position=\"top\" />\r\n                                {loginCheck && (\r\n                                    <>\r\n                                        <PolicySwitcher />\r\n                                        <Tooltip\r\n                                            title={\"设置\"}\r\n                                            placement=\"bottom\"\r\n                                        >\r\n                                            <IconButton\r\n                                                onClick={() =>\r\n                                                    this.props.history.push(\r\n                                                        \"/setting?\"\r\n                                                    )\r\n                                                }\r\n                                                color=\"inherit\"\r\n                                            >\r\n                                                <SettingIcon />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </>\r\n                                )}\r\n                            </>\r\n                        )}\r\n                        {isAdminPage && (\r\n                            <Tooltip title={\"返回主页\"} placement=\"bottom\">\r\n                                <IconButton\r\n                                    color=\"inherit\"\r\n                                    onClick={this.returnHome}\r\n                                >\r\n                                    <Home />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        )}\r\n                        <IconButton color=\"inherit\" onClick={this.showUserInfo}>\r\n                            {!loginCheck && <AccountCircle />}\r\n                            {loginCheck && (\r\n                                <Avatar\r\n                                    src={\r\n                                        \"/api/v3/user/avatar/\" + user.id + \"/s\"\r\n                                    }\r\n                                    className={classes.avatar}\r\n                                />\r\n                            )}\r\n                        </IconButton>{\" \"}\r\n                    </div>\r\n                </Grow>\r\n                <UserAvatarPopover />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nUserAvatarCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst UserAvatar = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(UserAvatarCompoment)));\r\n\r\nexport default UserAvatar;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\nimport { connect } from \"react-redux\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport BackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport Pageview from \"@material-ui/icons/Pageview\";\r\nimport OpenIcon from \"@material-ui/icons/OpenInNew\";\r\nimport DownloadIcon from \"@material-ui/icons/CloudDownload\";\r\nimport OpenFolderIcon from \"@material-ui/icons/FolderOpen\";\r\nimport RenameIcon from \"@material-ui/icons/BorderColor\";\r\nimport MoveIcon from \"@material-ui/icons/Input\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport AccountBalanceWallet from \"@material-ui/icons/AccountBalanceWallet\";\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport WebIcon from '@material-ui/icons/Web';\r\nimport LinkIcon from \"@material-ui/icons/InsertLink\";\r\nimport { isPreviewable } from \"../../config\";\r\nimport {\r\n    drawerToggleAction,\r\n    setSelectedTarget,\r\n    navigateTo,\r\n    openCreateFolderDialog,\r\n    openGetSourceDialog,\r\n    changeContextMenu,\r\n    searchMyFile,\r\n    saveFile,\r\n    openMusicDialog,\r\n    showImgPreivew,\r\n    toggleSnackbar,\r\n    openMoveDialog,\r\n    openRemoveDialog,\r\n    openShareDialog,\r\n    openRenameDialog,\r\n    openLoadingDialog,\r\n    setSessionStatus,\r\n    openPreview,\r\n} from \"../../actions\";\r\nimport {\r\n    allowSharePreview,\r\n    checkGetParameters,\r\n    changeThemeColor,\r\n} from \"../../utils\";\r\nimport Uploader from \"../Upload/Uploader.js\";\r\nimport { sizeToString, vhCheck } from \"../../utils\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport SezrchBar from \"./SearchBar\";\r\nimport StorageBar from \"./StorageBar\";\r\nimport UserAvatar from \"./UserAvatar\";\r\nimport UserInfo from \"./UserInfo\";\r\nimport { AccountArrowRight, AccountPlus, LogoutVariant } from \"mdi-material-ui\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport {\r\n    AppBar,\r\n    Toolbar,\r\n    Typography,\r\n    withStyles,\r\n    withTheme,\r\n    Drawer,\r\n    SwipeableDrawer,\r\n    IconButton,\r\n    Hidden,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    List,\r\n    Grow,\r\n    Tooltip,\r\n} from \"@material-ui/core\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport API from \"../../middleware/Api\";\r\nimport FileTag from \"./FileTags\";\r\nimport { Assignment, Devices, MoreHoriz, Settings } from \"@material-ui/icons\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport SubActions from \"../FileManager/Navigator/SubActions\";\r\n\r\nvhCheck();\r\nconst drawerWidth = 240;\r\nconst drawerWidthMobile = 270;\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        desktopOpen: state.viewUpdate.open,\r\n        selected: state.explorer.selected,\r\n        isMultiple: state.explorer.selectProps.isMultiple,\r\n        withFolder: state.explorer.selectProps.withFolder,\r\n        withFile: state.explorer.selectProps.withFile,\r\n        path: state.navigator.path,\r\n        keywords: state.explorer.keywords,\r\n        title: state.siteConfig.title,\r\n        subTitle: state.viewUpdate.subTitle,\r\n        loadUploader: state.viewUpdate.loadUploader,\r\n        isLogin: state.viewUpdate.isLogin,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        handleDesktopToggle: (open) => {\r\n            dispatch(drawerToggleAction(open));\r\n        },\r\n        setSelectedTarget: (targets) => {\r\n            dispatch(setSelectedTarget(targets));\r\n        },\r\n        navigateTo: (path) => {\r\n            dispatch(navigateTo(path));\r\n        },\r\n        openCreateFolderDialog: () => {\r\n            dispatch(openCreateFolderDialog());\r\n        },\r\n        openGetSourceDialog: () => {\r\n            dispatch(openGetSourceDialog());\r\n        },\r\n        changeContextMenu: (type, open) => {\r\n            dispatch(changeContextMenu(type, open));\r\n        },\r\n        searchMyFile: (keywords) => {\r\n            dispatch(searchMyFile(keywords));\r\n        },\r\n        saveFile: () => {\r\n            dispatch(saveFile());\r\n        },\r\n        openMusicDialog: () => {\r\n            dispatch(openMusicDialog());\r\n        },\r\n        showImgPreivew: (first) => {\r\n            dispatch(showImgPreivew(first));\r\n        },\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n        openRenameDialog: () => {\r\n            dispatch(openRenameDialog());\r\n        },\r\n        openMoveDialog: () => {\r\n            dispatch(openMoveDialog());\r\n        },\r\n        openRemoveDialog: () => {\r\n            dispatch(openRemoveDialog());\r\n        },\r\n        openShareDialog: () => {\r\n            dispatch(openShareDialog());\r\n        },\r\n        openLoadingDialog: (text) => {\r\n            dispatch(openLoadingDialog(text));\r\n        },\r\n        setSessionStatus: () => {\r\n            dispatch(setSessionStatus());\r\n        },\r\n        openPreview: () => {\r\n            dispatch(openPreview());\r\n        },\r\n    };\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    appBar: {\r\n        marginLeft: drawerWidth,\r\n        [theme.breakpoints.down(\"xs\")]: {\r\n            marginLeft: drawerWidthMobile,\r\n        },\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        transition: \" background-color 250ms\",\r\n    },\r\n\r\n    drawer: {\r\n        width: 0,\r\n        flexShrink: 0,\r\n    },\r\n    drawerDesktop: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n    },\r\n    icon: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    menuButton: {\r\n        marginRight: 20,\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            display: \"none\",\r\n        },\r\n    },\r\n    menuButtonDesktop: {\r\n        marginRight: 20,\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"none\",\r\n        },\r\n    },\r\n    menuIcon: {\r\n        marginRight: 20,\r\n    },\r\n    toolbar: theme.mixins.toolbar,\r\n    drawerPaper: {\r\n        width: drawerWidthMobile,\r\n    },\r\n    drawerPaperDesktop: {\r\n        width: drawerWidth,\r\n    },\r\n    upDrawer: {\r\n        overflowX: \"hidden\",\r\n    },\r\n    drawerOpen: {\r\n        width: drawerWidth,\r\n        transition: theme.transitions.create(\"width\", {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    drawerClose: {\r\n        transition: theme.transitions.create(\"width\", {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        overflowX: \"hidden\",\r\n        width: 0,\r\n    },\r\n    content: {\r\n        flexGrow: 1,\r\n        padding: theme.spacing(3),\r\n    },\r\n    grow: {\r\n        flexGrow: 1,\r\n    },\r\n    badge: {\r\n        top: 1,\r\n        right: -15,\r\n    },\r\n    nested: {\r\n        paddingLeft: theme.spacing(4),\r\n    },\r\n    sectionForFile: {\r\n        display: \"flex\",\r\n    },\r\n    extendedIcon: {\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    addButton: {\r\n        marginLeft: \"40px\",\r\n        marginTop: \"25px\",\r\n        marginBottom: \"15px\",\r\n    },\r\n    fabButton: {\r\n        borderRadius: \"100px\",\r\n    },\r\n    badgeFix: {\r\n        right: \"10px\",\r\n    },\r\n    iconFix: {\r\n        marginLeft: \"16px\",\r\n    },\r\n    dividerFix: {\r\n        marginTop: \"8px\",\r\n    },\r\n    folderShareIcon: {\r\n        verticalAlign: \"sub\",\r\n        marginRight: \"5px\",\r\n    },\r\n    shareInfoContainer: {\r\n        display: \"flex\",\r\n        marginTop: \"15px\",\r\n        marginBottom: \"20px\",\r\n        marginLeft: \"28px\",\r\n        textDecoration: \"none\",\r\n    },\r\n    shareAvatar: {\r\n        width: \"40px\",\r\n        height: \"40px\",\r\n    },\r\n    stickFooter: {\r\n        bottom: \"0px\",\r\n        position: \"absolute\",\r\n        backgroundColor: theme.palette.background.paper,\r\n        width: \"100%\",\r\n    },\r\n    ownerInfo: {\r\n        marginLeft: \"10px\",\r\n        width: \"150px\",\r\n    },\r\n    minStickDrawer: {\r\n        overflowY: \"auto\",\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            height: \"calc(var(--vh, 100vh) - 145px)\",\r\n        },\r\n\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            minHeight: \"calc(var(--vh, 100vh) - 360px)\",\r\n        },\r\n    },\r\n});\r\nclass NavbarCompoment extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            mobileOpen: false,\r\n        };\r\n        this.UploaderRef = React.createRef();\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        this.unlisten = this.props.history.listen(() => {\r\n            this.setState(() => ({ mobileOpen: false }));\r\n        });\r\n    }\r\n    componentWillUnmount() {\r\n        this.unlisten();\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        changeThemeColor(\r\n            this.props.selected.length <= 1 &&\r\n                !(!this.props.isMultiple && this.props.withFile)\r\n                ? this.props.theme.palette.primary.main\r\n                : this.props.theme.palette.background.default\r\n        );\r\n    };\r\n\r\n    UNSAFE_componentWillReceiveProps = (nextProps) => {\r\n        if (\r\n            (this.props.selected.length <= 1 &&\r\n                !(!this.props.isMultiple && this.props.withFile)) !==\r\n            (nextProps.selected.length <= 1 &&\r\n                !(!nextProps.isMultiple && nextProps.withFile))\r\n        ) {\r\n            changeThemeColor(\r\n                !(\r\n                    this.props.selected.length <= 1 &&\r\n                    !(!this.props.isMultiple && this.props.withFile)\r\n                )\r\n                    ? this.props.theme.palette.type === \"dark\"\r\n                        ? this.props.theme.palette.background.default\r\n                        : this.props.theme.palette.primary.main\r\n                    : this.props.theme.palette.background.default\r\n            );\r\n        }\r\n    };\r\n\r\n    handleDrawerToggle = () => {\r\n        this.setState((state) => ({ mobileOpen: !state.mobileOpen }));\r\n    };\r\n\r\n    loadUploader = () => {\r\n        if (pathHelper.isHomePage(this.props.location.pathname)) {\r\n            return (\r\n                <>\r\n                    {this.props.loadUploader && this.props.isLogin && (\r\n                        <Uploader />\r\n                    )}\r\n                </>\r\n            );\r\n        }\r\n    };\r\n\r\n    openDownload = () => {\r\n        if (!allowSharePreview()) {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"未登录用户无法预览\",\r\n                \"warning\"\r\n            );\r\n            return;\r\n        }\r\n        this.props.openLoadingDialog(\"获取下载地址...\");\r\n    };\r\n\r\n    archiveDownload = () => {\r\n        this.props.openLoadingDialog(\"打包中...\");\r\n    };\r\n\r\n    signOut = () => {\r\n        API.delete(\"/user/session/\")\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"您已退出登录\",\r\n                    \"success\"\r\n                );\r\n                Auth.signout();\r\n                window.location.reload();\r\n                this.props.setSessionStatus(false);\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"warning\"\r\n                );\r\n            })\r\n            .finally(() => {\r\n                this.handleClose();\r\n            });\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const user = Auth.GetUser(this.props.isLogin);\r\n        const isHomePage = pathHelper.isHomePage(this.props.location.pathname);\r\n        const isSharePage = pathHelper.isSharePage(\r\n            this.props.location.pathname\r\n        );\r\n        const getCookie =(name)=> {\r\n            const strcookie = document.cookie;//获取cookie字符串\r\n                const arrcookie = strcookie.split(\"; \");//分割\r\n                //遍历匹配\r\n                for ( let i = 0; i < arrcookie.length; i++) {\r\n                    const arr = arrcookie[i].split(\"=\");\r\n                    if (arr[0] == name){\r\n                        return unescape(arr[1]);\r\n                    }\r\n                }\r\n            return null;\r\n        }\r\n\r\n        const drawer = (\r\n            <div id=\"container\" className={classes.upDrawer}>\r\n                {pathHelper.isMobile() && <UserInfo />}\r\n\r\n                {Auth.Check(this.props.isLogin) && (\r\n                    <>\r\n                        <div className={classes.minStickDrawer}>\r\n                            <FileTag />\r\n                            <List>\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"我的分享\"\r\n                                    onClick={() =>\r\n                                        this.props.history.push(\"/shares?\")\r\n                                    }\r\n                                >\r\n                                    <ListItemIcon>\r\n                                        <ShareIcon\r\n                                            className={classes.iconFix}\r\n                                        />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"我的分享\" />\r\n                                </ListItem>\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"离线下载\"\r\n                                    onClick={() =>\r\n                                        this.props.history.push(\"/aria2?\")\r\n                                    }\r\n                                >\r\n                                    <ListItemIcon>\r\n                                        <DownloadIcon\r\n                                            className={classes.iconFix}\r\n                                        />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"离线下载\" />\r\n                                </ListItem>\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"寻求资源\"\r\n                                    onClick={() => window.open('https://ask.bilnn.com/api/user/panlogin?token='+getCookie(\"token\"))}\r\n                                >\r\n                                    <ListItemIcon>\r\n                                        <Pageview\r\n                                            className={classes.iconFix}\r\n                                        />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"寻求资源\" />\r\n                                </ListItem>\r\n                                {user.group.webdav && (\r\n                                    <ListItem\r\n                                        button\r\n                                        key=\"WebDAV\"\r\n                                        onClick={() =>\r\n                                            this.props.history.push(\"/webdav?\")\r\n                                        }\r\n                                    >\r\n                                        <ListItemIcon>\r\n                                            <Devices\r\n                                                className={classes.iconFix}\r\n                                            />\r\n                                        </ListItemIcon>\r\n                                        <ListItemText primary=\"WebDAV\" />\r\n                                    </ListItem>\r\n                                )}\r\n\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"任务队列\"\r\n                                    onClick={() =>\r\n                                        this.props.history.push(\"/tasks?\")\r\n                                    }\r\n                                >\r\n                                    <ListItemIcon>\r\n                                        <Assignment\r\n                                            className={classes.iconFix}\r\n                                        />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"任务队列\" />\r\n                                </ListItem>\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"财务管理\"\r\n                                    onClick={() =>\r\n                                        this.props.history.push(\"/ifm/c=user&a=account\")\r\n                                    }\r\n                                >\r\n                                    <ListItemIcon>\r\n                                        <AccountBalanceWallet\r\n                                            className={classes.iconFix}\r\n                                        />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"财务管理\" />\r\n                                </ListItem>\r\n                                <ListItem\r\n                                    button\r\n                                    key=\"在线客服\"\r\n                                    onClick={() => window._MEIQIA('showPanel')}\r\n                                >\r\n                                    <ListItemIcon>\r\n                                        <ChatIcon\r\n                                            className={classes.iconFix}\r\n                                        />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText primary=\"在线客服\" />\r\n                                </ListItem>\r\n                            </List>\r\n                        </div>\r\n\r\n                        {pathHelper.isMobile() && (\r\n                            <>\r\n                                <Divider />\r\n                                <List>\r\n                                    <ListItem\r\n                                        button\r\n                                        key=\"个人设置\"\r\n                                        onClick={() =>\r\n                                            this.props.history.push(\"/setting?\")\r\n                                        }\r\n                                    >\r\n                                        <ListItemIcon>\r\n                                            <Settings\r\n                                                className={classes.iconFix}\r\n                                            />\r\n                                        </ListItemIcon>\r\n                                        <ListItemText primary=\"个人设置\" />\r\n                                    </ListItem>\r\n\r\n                                    <ListItem\r\n                                        button\r\n                                        key=\"退出登录\"\r\n                                        onClick={this.signOut}\r\n                                    >\r\n                                        <ListItemIcon>\r\n                                            <LogoutVariant\r\n                                                className={classes.iconFix}\r\n                                            />\r\n                                        </ListItemIcon>\r\n                                        <ListItemText primary=\"退出登录\" />\r\n                                    </ListItem>\r\n                                </List>\r\n                            </>\r\n                        )}\r\n                        <div>\r\n                            <StorageBar></StorageBar>\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                {!Auth.Check(this.props.isLogin) && (\r\n                    <div>\r\n                        <ListItem\r\n                            button\r\n                            key=\"登录\"\r\n                            onClick={() => this.props.history.push(\"/login\")}\r\n                        >\r\n                            <ListItemIcon>\r\n                                <AccountArrowRight\r\n                                    className={classes.iconFix}\r\n                                />\r\n                            </ListItemIcon>\r\n                            <ListItemText primary=\"登录\" />\r\n                        </ListItem>\r\n                        <ListItem\r\n                            button\r\n                            key=\"注册\"\r\n                            onClick={() => this.props.history.push(\"/signup\")}\r\n                        >\r\n                            <ListItemIcon>\r\n                                <AccountPlus className={classes.iconFix} />\r\n                            </ListItemIcon>\r\n                            <ListItemText primary=\"注册\" />\r\n                        </ListItem>\r\n                        <ListItem\r\n                            button\r\n                            key=\"官网首页\"\r\n                            onClick={() => window.location.href='https://www.bilnn.com/'}\r\n                        >\r\n                            <ListItemIcon>\r\n                                <WebIcon className={classes.iconFix} />\r\n                            </ListItemIcon>\r\n                            <ListItemText primary=\"官网首页\" />\r\n                        </ListItem>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n        const iOS =\r\n            process.browser && /iPad|iPhone|iPod/.test(navigator.userAgent);\r\n\r\n        return (\r\n            <div>\r\n                <AppBar\r\n                    position=\"fixed\"\r\n                    className={classes.appBar}\r\n                    color={\r\n                        this.props.theme.palette.type !== \"dark\" &&\r\n                        this.props.selected.length <= 1 &&\r\n                        !(!this.props.isMultiple && this.props.withFile)\r\n                            ? \"primary\"\r\n                            : \"default\"\r\n                    }\r\n                >\r\n                    <Toolbar>\r\n                        {this.props.selected.length <= 1 &&\r\n                            !(\r\n                                !this.props.isMultiple && this.props.withFile\r\n                            ) && (\r\n                                <IconButton\r\n                                    color=\"inherit\"\r\n                                    aria-label=\"Open drawer\"\r\n                                    onClick={this.handleDrawerToggle}\r\n                                    className={classes.menuButton}\r\n                                >\r\n                                    <MenuIcon />\r\n                                </IconButton>\r\n                            )}\r\n                        {this.props.selected.length <= 1 &&\r\n                            !(\r\n                                !this.props.isMultiple && this.props.withFile\r\n                            ) && (\r\n                                <IconButton\r\n                                    color=\"inherit\"\r\n                                    aria-label=\"Open drawer\"\r\n                                    onClick={() =>\r\n                                        this.props.handleDesktopToggle(\r\n                                            !this.props.desktopOpen\r\n                                        )\r\n                                    }\r\n                                    className={classes.menuButtonDesktop}\r\n                                >\r\n                                    <MenuIcon />\r\n                                </IconButton>\r\n                            )}\r\n                        {(this.props.selected.length > 1 ||\r\n                            (!this.props.isMultiple && this.props.withFile)) &&\r\n                            (isHomePage ||\r\n                                pathHelper.isSharePage(\r\n                                    this.props.location.pathname\r\n                                )) && (\r\n                                <Grow\r\n                                    in={\r\n                                        this.props.selected.length > 1 ||\r\n                                        (!this.props.isMultiple &&\r\n                                            this.props.withFile)\r\n                                    }\r\n                                >\r\n                                    <IconButton\r\n                                        color=\"inherit\"\r\n                                        className={classes.menuIcon}\r\n                                        onClick={() =>\r\n                                            this.props.setSelectedTarget([])\r\n                                        }\r\n                                    >\r\n                                        <BackIcon />\r\n                                    </IconButton>\r\n                                </Grow>\r\n                            )}\r\n                        {getCookie(\"thisapp\")!=\"ok\" && !Auth.Check(this.props.isLogin) && this.props.selected.length <= 1 &&\r\n                            !(\r\n                                !this.props.isMultiple && this.props.withFile\r\n                            ) && (\r\n                                <Typography variant=\"h6\" color=\"inherit\" noWrap\r\n                                            onClick={() => {window.location.href='https://www.bilnn.com/'}}\r\n                                >\r\n                                    {this.props.subTitle\r\n                                        ? this.props.subTitle\r\n                                        : this.props.title}\r\n                                </Typography>\r\n                            )}\r\n                        {getCookie(\"thisapp\")==\"ok\" && !Auth.Check(this.props.isLogin) && this.props.selected.length <= 1 &&\r\n                            !(\r\n                                !this.props.isMultiple && this.props.withFile\r\n                            ) && (\r\n                                <Typography variant=\"h6\" color=\"inherit\" noWrap\r\n                                            onClick={() => {this.props.history.push(\"/\")}}\r\n                                >\r\n                                    {this.props.subTitle\r\n                                        ? this.props.subTitle\r\n                                        : this.props.title}\r\n                                </Typography>\r\n                            )}\r\n\r\n                        {!this.props.isMultiple &&\r\n                            this.props.withFile &&\r\n                            !pathHelper.isMobile() && (\r\n                                <Typography variant=\"h6\" color=\"inherit\" noWrap>\r\n                                    {this.props.selected[0].name}{\" \"}\r\n                                    {(isHomePage ||\r\n                                        pathHelper.isSharePage(\r\n                                            this.props.location.pathname\r\n                                        )) &&\r\n                                        \"(\" +\r\n                                            sizeToString(\r\n                                                this.props.selected[0].size\r\n                                            ) +\r\n                                            \")\"}\r\n                                </Typography>\r\n                            )}\r\n\r\n                        {this.props.selected.length > 1 &&\r\n                            !pathHelper.isMobile() && (\r\n                                <Typography variant=\"h6\" color=\"inherit\" noWrap>\r\n                                    {this.props.selected.length}个对象\r\n                                </Typography>\r\n                            )}\r\n                        {this.props.selected.length <= 1 &&\r\n                            !(\r\n                                !this.props.isMultiple && this.props.withFile\r\n                            ) && <SezrchBar />}\r\n                        <div className={classes.grow} />\r\n                        {(this.props.selected.length > 1 ||\r\n                            (!this.props.isMultiple && this.props.withFile)) &&\r\n                            !isHomePage &&\r\n                            !pathHelper.isSharePage(\r\n                                this.props.location.pathname\r\n                            ) &&\r\n                            Auth.Check(this.props.isLogin) &&\r\n                            !checkGetParameters(\"share\") && (\r\n                                <div className={classes.sectionForFile}>\r\n                                    <Tooltip title=\"保存\">\r\n                                        <IconButton\r\n                                            color=\"inherit\"\r\n                                            onClick={() =>\r\n                                                this.props.saveFile()\r\n                                            }\r\n                                        >\r\n                                            <SaveIcon />\r\n                                        </IconButton>\r\n                                    </Tooltip>\r\n                                </div>\r\n                            )}\r\n                        {(this.props.selected.length > 1 ||\r\n                            (!this.props.isMultiple && this.props.withFile)) &&\r\n                            (isHomePage || isSharePage) && (\r\n                                <div className={classes.sectionForFile}>\r\n                                    {!this.props.isMultiple &&\r\n                                        this.props.withFile &&\r\n                                        isPreviewable(\r\n                                            this.props.selected[0].name\r\n                                        ) && (\r\n                                            <Grow\r\n                                                in={\r\n                                                    !this.props.isMultiple &&\r\n                                                    this.props.withFile &&\r\n                                                    isPreviewable(\r\n                                                        this.props.selected[0]\r\n                                                            .name\r\n                                                    )\r\n                                                }\r\n                                            >\r\n                                                <Tooltip title=\"打开\">\r\n                                                    <IconButton\r\n                                                        color=\"inherit\"\r\n                                                        onClick={() =>\r\n                                                            this.props.openPreview()\r\n                                                        }\r\n                                                    >\r\n                                                        <OpenIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                            </Grow>\r\n                                        )}\r\n                                    {!this.props.isMultiple &&\r\n                                        this.props.withFile && (\r\n                                            <Grow\r\n                                                in={\r\n                                                    !this.props.isMultiple &&\r\n                                                    this.props.withFile\r\n                                                }\r\n                                            >\r\n                                                <Tooltip title=\"下载\">\r\n                                                    <IconButton\r\n                                                        color=\"inherit\"\r\n                                                        onClick={() =>\r\n                                                            this.openDownload()\r\n                                                        }\r\n                                                    >\r\n                                                        <DownloadIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                            </Grow>\r\n                                        )}\r\n                                    {(this.props.isMultiple ||\r\n                                        this.props.withFolder) &&\r\n                                        user.group.allowArchiveDownload && (\r\n                                            <Grow\r\n                                                in={\r\n                                                    (this.props.isMultiple ||\r\n                                                        this.props\r\n                                                            .withFolder) &&\r\n                                                    user.group\r\n                                                        .allowArchiveDownload\r\n                                                }\r\n                                            >\r\n                                                <Tooltip title=\"打包下载\">\r\n                                                    <IconButton\r\n                                                        color=\"inherit\"\r\n                                                        onClick={() =>\r\n                                                            this.archiveDownload()\r\n                                                        }\r\n                                                    >\r\n                                                        <DownloadIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                            </Grow>\r\n                                        )}\r\n\r\n                                    {!this.props.isMultiple &&\r\n                                        this.props.withFolder && (\r\n                                            <Grow\r\n                                                in={\r\n                                                    !this.props.isMultiple &&\r\n                                                    this.props.withFolder\r\n                                                }\r\n                                            >\r\n                                                <Tooltip title=\"进入目录\">\r\n                                                    <IconButton\r\n                                                        color=\"inherit\"\r\n                                                        onClick={() =>\r\n                                                            this.props.navigateTo(\r\n                                                                this.props\r\n                                                                    .path ===\r\n                                                                    \"/\"\r\n                                                                    ? this.props\r\n                                                                          .path +\r\n                                                                          this\r\n                                                                              .props\r\n                                                                              .selected[0]\r\n                                                                              .name\r\n                                                                    : this.props\r\n                                                                          .path +\r\n                                                                          \"/\" +\r\n                                                                          this\r\n                                                                              .props\r\n                                                                              .selected[0]\r\n                                                                              .name\r\n                                                            )\r\n                                                        }\r\n                                                    >\r\n                                                        <OpenFolderIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                            </Grow>\r\n                                        )}\r\n                                    {!this.props.isMultiple && !isSharePage && (\r\n                                        <Grow in={!this.props.isMultiple}>\r\n                                            <Tooltip title=\"外链\">\r\n                                                <IconButton\r\n                                                    color=\"inherit\"\r\n                                                    onClick={() =>\r\n                                                        this.props.openGetSourceDialog()\r\n                                                    }\r\n                                                >\r\n                                                    <LinkIcon />\r\n                                                </IconButton>\r\n                                            </Tooltip>\r\n                                        </Grow>\r\n                                    )}\r\n                                    {!this.props.isMultiple &&\r\n                                        !pathHelper.isMobile() &&\r\n                                        !isSharePage && (\r\n                                            <Grow in={!this.props.isMultiple}>\r\n                                                <Tooltip title=\"分享\">\r\n                                                    <IconButton\r\n                                                        color=\"inherit\"\r\n                                                        onClick={() =>\r\n                                                            this.props.openShareDialog()\r\n                                                        }\r\n                                                    >\r\n                                                        <ShareIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                            </Grow>\r\n                                        )}\r\n                                    {!this.props.isMultiple && !isSharePage && (\r\n                                        <Grow in={!this.props.isMultiple}>\r\n                                            <Tooltip title=\"重命名\">\r\n                                                <IconButton\r\n                                                    color=\"inherit\"\r\n                                                    onClick={() =>\r\n                                                        this.props.openRenameDialog()\r\n                                                    }\r\n                                                >\r\n                                                    <RenameIcon />\r\n                                                </IconButton>\r\n                                            </Tooltip>\r\n                                        </Grow>\r\n                                    )}\r\n                                    {!isSharePage && (\r\n                                        <div style={{ display: \"flex\" }}>\r\n                                            {!pathHelper.isMobile() && (\r\n                                                <Grow\r\n                                                    in={\r\n                                                        this.props.selected\r\n                                                            .length !== 0 &&\r\n                                                        !pathHelper.isMobile()\r\n                                                    }\r\n                                                >\r\n                                                    <Tooltip title=\"移动\">\r\n                                                        <IconButton\r\n                                                            color=\"inherit\"\r\n                                                            onClick={() =>\r\n                                                                this.props.openMoveDialog()\r\n                                                            }\r\n                                                        >\r\n                                                            <MoveIcon />\r\n                                                        </IconButton>\r\n                                                    </Tooltip>\r\n                                                </Grow>\r\n                                            )}\r\n\r\n                                            <Grow\r\n                                                in={\r\n                                                    this.props.selected\r\n                                                        .length !== 0\r\n                                                }\r\n                                            >\r\n                                                <Tooltip title=\"删除\">\r\n                                                    <IconButton\r\n                                                        color=\"inherit\"\r\n                                                        onClick={() =>\r\n                                                            this.props.openRemoveDialog()\r\n                                                        }\r\n                                                    >\r\n                                                        <DeleteIcon />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                            </Grow>\r\n\r\n                                            {pathHelper.isMobile() && (\r\n                                                <Grow\r\n                                                    in={\r\n                                                        this.props.selected\r\n                                                            .length !== 0 &&\r\n                                                        pathHelper.isMobile()\r\n                                                    }\r\n                                                >\r\n                                                    <Tooltip title=\"更多操作\">\r\n                                                        <IconButton\r\n                                                            color=\"inherit\"\r\n                                                            onClick={() =>\r\n                                                                this.props.changeContextMenu(\r\n                                                                    \"file\",\r\n                                                                    true\r\n                                                                )\r\n                                                            }\r\n                                                        >\r\n                                                            <MoreHoriz />\r\n                                                        </IconButton>\r\n                                                    </Tooltip>\r\n                                                </Grow>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        {this.props.selected.length <= 1 &&\r\n                            !(\r\n                                !this.props.isMultiple && this.props.withFile\r\n                            ) && <UserAvatar />}\r\n                        {this.props.selected.length <= 1 &&\r\n                            !(!this.props.isMultiple && this.props.withFile) &&\r\n                            isHomePage &&\r\n                            pathHelper.isMobile() && <SubActions inherit />}\r\n                    </Toolbar>\r\n                </AppBar>\r\n                {this.loadUploader()}\r\n\r\n                <Hidden smUp implementation=\"css\">\r\n                    <SwipeableDrawer\r\n                        container={this.props.container}\r\n                        variant=\"temporary\"\r\n                        classes={{\r\n                            paper: classes.drawerPaper,\r\n                        }}\r\n                        anchor=\"left\"\r\n                        open={this.state.mobileOpen}\r\n                        onClose={this.handleDrawerToggle}\r\n                        onOpen={() =>\r\n                            this.setState(() => ({ mobileOpen: true }))\r\n                        }\r\n                        disableDiscovery={iOS}\r\n                        ModalProps={{\r\n                            keepMounted: true, // Better open performance on mobile.\r\n                        }}\r\n                    >\r\n                        {drawer}\r\n                    </SwipeableDrawer>\r\n                </Hidden>\r\n                <Hidden xsDown implementation=\"css\">\r\n                    <Drawer\r\n                        classes={{\r\n                            paper: classes.drawerPaperDesktop,\r\n                        }}\r\n                        className={classNames(classes.drawer, {\r\n                            [classes.drawerOpen]: this.props.desktopOpen,\r\n                            [classes.drawerClose]: !this.props.desktopOpen,\r\n                        })}\r\n                        variant=\"persistent\"\r\n                        anchor=\"left\"\r\n                        open={this.props.desktopOpen}\r\n                    >\r\n                        <div className={classes.toolbar} />\r\n                        {drawer}\r\n                    </Drawer>\r\n                </Hidden>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nNavbarCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    theme: PropTypes.object.isRequired,\r\n};\r\n\r\nconst Navbar = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withTheme(withStyles(styles)(withRouter(NavbarCompoment))));\r\n\r\nexport default Navbar;\r\n","import dayjs from \"dayjs\";\r\nimport timezone from \"dayjs/plugin/timezone\";\r\nimport utc from \"dayjs/plugin/utc\";\r\nimport Auth from \"../middleware/Auth\";\r\ndayjs.extend(utc);\r\ndayjs.extend(timezone);\r\n\r\nconst defaultTimeZone = \"Asia/Shanghai\";\r\nconst preferTimeZone = Auth.GetPreference(\"timeZone\");\r\nexport let timeZone = preferTimeZone ? preferTimeZone : defaultTimeZone;\r\n\r\nexport function refreshTimeZone() {\r\n    timeZone = Auth.GetPreference(\"timeZone\");\r\n    timeZone = timeZone ? timeZone : defaultTimeZone;\r\n}\r\n\r\nexport function formatLocalTime(time, format) {\r\n    return dayjs(time).tz(timeZone).format(format);\r\n}\r\n\r\nexport function validateTimeZone(name) {\r\n    try {\r\n        dayjs().tz(name).format();\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\r\nimport FileIcon from \"@material-ui/icons/InsertDriveFile\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport { connect } from \"react-redux\";\r\nimport { searchMyFile } from \"../../actions\";\r\n\r\nimport {\r\n    withStyles,\r\n    InputBase,\r\n    Popper,\r\n    Fade,\r\n    Paper,\r\n    MenuItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport { HotKeys, configure } from \"react-hotkeys\";\r\n\r\nconfigure({\r\n    ignoreTags: [],\r\n});\r\n\r\nconst mapStateToProps = () => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        searchMyFile: (keywords) => {\r\n            dispatch(searchMyFile(keywords));\r\n        },\r\n    };\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    search: {\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"none\",\r\n        },\r\n        position: \"relative\",\r\n        borderRadius: theme.shape.borderRadius,\r\n        backgroundColor: fade(theme.palette.common.white, 0.15),\r\n        \"&:hover\": {\r\n            backgroundColor: fade(theme.palette.common.white, 0.25),\r\n        },\r\n        marginRight: theme.spacing(2),\r\n        marginLeft: 0,\r\n        width: \"100%\",\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            marginLeft: theme.spacing(7.2),\r\n            width: \"auto\",\r\n        },\r\n    },\r\n    searchIcon: {\r\n        width: theme.spacing(9),\r\n        height: \"100%\",\r\n        position: \"absolute\",\r\n        pointerEvents: \"none\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    },\r\n    inputRoot: {\r\n        color: \"inherit\",\r\n        width: \"100%\",\r\n    },\r\n    inputInput: {\r\n        paddingTop: theme.spacing(1),\r\n        paddingRight: theme.spacing(1),\r\n        paddingBottom: theme.spacing(1),\r\n        paddingLeft: theme.spacing(7),\r\n        transition: theme.transitions.create(\"width\"),\r\n        width: \"100%\",\r\n        [theme.breakpoints.up(\"md\")]: {\r\n            width: 200,\r\n            \"&:focus\": {\r\n                width: 300,\r\n            },\r\n        },\r\n    },\r\n    suggestBox: {\r\n        zIndex: \"9999\",\r\n        width: 364,\r\n    },\r\n});\r\n\r\nconst keyMap = {\r\n    SEARCH: \"enter\",\r\n};\r\n\r\nclass SearchBarCompoment extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            anchorEl: null,\r\n            input: \"\",\r\n        };\r\n    }\r\n\r\n    handlers = {\r\n        SEARCH: (e) => {\r\n            if (pathHelper.isHomePage(this.props.location.pathname)) {\r\n                this.searchMyFile();\r\n            } else {\r\n                this.searchShare();\r\n            }\r\n            e.target.blur();\r\n        },\r\n    };\r\n\r\n    handleChange = (event) => {\r\n        const { currentTarget } = event;\r\n        this.input = event.target.value;\r\n        this.setState({\r\n            anchorEl: currentTarget,\r\n            input: event.target.value,\r\n        });\r\n    };\r\n\r\n    cancelSuggest = () => {\r\n        this.setState({\r\n            input: \"\",\r\n        });\r\n    };\r\n\r\n    searchMyFile = () => {\r\n        this.props.searchMyFile(\"keywords/\" + this.input);\r\n    };\r\n\r\n    searchShare = () => {\r\n        this.props.history.push(\r\n            \"/search?keywords=\" + encodeURIComponent(this.input)\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const { anchorEl } = this.state;\r\n        const id = this.state.input !== \"\" ? \"simple-popper\" : null;\r\n        const isHomePage = pathHelper.isHomePage(this.props.location.pathname);\r\n\r\n        return (\r\n            <div className={classes.search}>\r\n                <div className={classes.searchIcon}>\r\n                    <SearchIcon />\r\n                </div>\r\n                <HotKeys keyMap={keyMap} handlers={this.handlers}>\r\n                    <InputBase\r\n                        placeholder=\"搜索...\"\r\n                        classes={{\r\n                            root: classes.inputRoot,\r\n                            input: classes.inputInput,\r\n                        }}\r\n                        onChange={this.handleChange}\r\n                        onBlur={this.cancelSuggest}\r\n                        value={this.state.input}\r\n                    />\r\n                </HotKeys>\r\n                <Popper\r\n                    id={id}\r\n                    open={this.state.input !== \"\"}\r\n                    anchorEl={anchorEl}\r\n                    className={classes.suggestBox}\r\n                    transition\r\n                >\r\n                    {({ TransitionProps }) => (\r\n                        <Fade {...TransitionProps} timeout={350}>\r\n                            <Paper square={true}>\r\n                                {isHomePage && (\r\n                                    <MenuItem onClick={this.searchMyFile}>\r\n                                        <ListItemIcon className={classes.icon}>\r\n                                            <FileIcon />\r\n                                        </ListItemIcon>\r\n                                        <ListItemText\r\n                                            classes={{\r\n                                                primary: classes.primary,\r\n                                            }}\r\n                                            primary={\r\n                                                <Typography noWrap>\r\n                                                    在我的文件中搜索{\" \"}\r\n                                                    <strong>\r\n                                                        {this.state.input}\r\n                                                    </strong>\r\n                                                </Typography>\r\n                                            }\r\n                                        />\r\n                                    </MenuItem>\r\n                                )}\r\n\r\n                                <MenuItem onClick={this.searchShare}>\r\n                                    <ListItemIcon className={classes.icon}>\r\n                                        <ShareIcon />\r\n                                    </ListItemIcon>\r\n                                    <ListItemText\r\n                                        classes={{ primary: classes.primary }}\r\n                                        primary={\r\n                                            <Typography noWrap>\r\n                                                在全站分享中搜索{\" \"}\r\n                                                <strong>\r\n                                                    {this.state.input}\r\n                                                </strong>\r\n                                            </Typography>\r\n                                        }\r\n                                    />\r\n                                </MenuItem>\r\n                            </Paper>\r\n                        </Fade>\r\n                    )}\r\n                </Popper>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nSearchBarCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst SearchBar = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(SearchBarCompoment)));\r\n\r\nexport default SearchBar;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport StorageIcon from \"@material-ui/icons/Storage\";\r\nimport { connect } from \"react-redux\";\r\nimport API from \"../../middleware/Api\";\r\nimport { sizeToString } from \"../../utils\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\n\r\nimport {\r\n    withStyles,\r\n    LinearProgress,\r\n    Typography,\r\n    Divider,\r\n    Tooltip,\r\n} from \"@material-ui/core\";\r\nimport ButtonBase from \"@material-ui/core/ButtonBase\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        refresh: state.viewUpdate.storageRefresh,\r\n        isLogin: state.viewUpdate.isLogin,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n    };\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    iconFix: {\r\n        marginLeft: \"32px\",\r\n        marginRight: \"17px\",\r\n        color: theme.palette.text.secondary,\r\n        marginTop: \"2px\",\r\n    },\r\n    textFix: {\r\n        padding: \" 0 0 0 16px\",\r\n    },\r\n    storageContainer: {\r\n        display: \"flex\",\r\n        marginTop: \"15px\",\r\n        textAlign: \"left\",\r\n        marginBottom: \"11px\",\r\n    },\r\n    detail: {\r\n        width: \"100%\",\r\n        marginRight: \"35px\",\r\n    },\r\n    info: {\r\n        width: \"131px\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n        [theme.breakpoints.down(\"xs\")]: {\r\n            width: \"162px\",\r\n        },\r\n        marginTop: \"5px\",\r\n    },\r\n    bar: {\r\n        marginTop: \"5px\",\r\n    },\r\n    stickFooter: {\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n});\r\n\r\nclass StorageBarCompoment extends Component {\r\n    state = {\r\n        percent: 0,\r\n        used: null,\r\n        total: null,\r\n        showExpand: false,\r\n    };\r\n\r\n    firstLoad = true;\r\n\r\n    componentDidMount = () => {\r\n        if (this.firstLoad && this.props.isLogin) {\r\n            this.firstLoad = !this.firstLoad;\r\n            this.updateStatus();\r\n        }\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        this.firstLoad = false;\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps = (nextProps) => {\r\n        if (\r\n            (this.props.isLogin && this.props.refresh !== nextProps.refresh) ||\r\n            (this.props.isLogin !== nextProps.isLogin && nextProps.isLogin)\r\n        ) {\r\n            this.updateStatus();\r\n        }\r\n    };\r\n\r\n    updateStatus = () => {\r\n        let percent = 0;\r\n        API.get(\"/user/storage\")\r\n            .then((response) => {\r\n                if (response.data.used / response.data.total >= 1) {\r\n                    percent = 100;\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        \"您的已用容量已超过容量配额，请尽快删除多余文件或购买容量\",\r\n                        \"warning\"\r\n                    );\r\n                } else {\r\n                    percent = (response.data.used / response.data.total) * 100;\r\n                }\r\n                this.setState({\r\n                    percent: percent,\r\n                    used: sizeToString(response.data.used),\r\n                    total: sizeToString(response.data.total),\r\n                });\r\n            })\r\n            // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n            .catch(() => {});\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        return (\r\n            <div\r\n                onMouseEnter={() => this.setState({ showExpand: true })}\r\n                onMouseLeave={() => this.setState({ showExpand: false })}\r\n                className={classes.stickFooter}\r\n            >\r\n                <Divider />\r\n                <ButtonBase onClick={() => this.props.history.push(\"/quota\")}>\r\n                    <div className={classes.storageContainer}>\r\n                        <StorageIcon className={classes.iconFix} />\r\n                        <div className={classes.detail}>\r\n                            存储空间{\"   \"}\r\n                            {this.state.showExpand && (\r\n                                <Link href={\"/buy\"} color={\"secondary\"}>\r\n                                    扩容\r\n                                </Link>\r\n                            )}\r\n                            <LinearProgress\r\n                                className={classes.bar}\r\n                                color=\"secondary\"\r\n                                variant=\"determinate\"\r\n                                value={this.state.percent}\r\n                            />\r\n                            <div className={classes.info}>\r\n                                <Tooltip\r\n                                    title={\r\n                                        \"已使用 \" +\r\n                                        (this.state.used === null\r\n                                            ? \" -- \"\r\n                                            : this.state.used) +\r\n                                        \", 共 \" +\r\n                                        (this.state.total === null\r\n                                            ? \" -- \"\r\n                                            : this.state.total)\r\n                                    }\r\n                                    placement=\"top\"\r\n                                >\r\n                                    <Typography\r\n                                        variant=\"caption\"\r\n                                        noWrap\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {this.state.used === null\r\n                                            ? \" -- \"\r\n                                            : this.state.used}\r\n                                        {\" / \"}\r\n                                        {this.state.total === null\r\n                                            ? \" -- \"\r\n                                            : this.state.total}\r\n                                    </Typography>\r\n                                </Tooltip>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ButtonBase>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nStorageBarCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst StorageBar = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(StorageBarCompoment)));\r\n\r\nexport default StorageBar;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { setUserPopover } from \"../../actions\";\r\nimport { withStyles, Typography } from \"@material-ui/core\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport DarkModeSwitcher from \"./DarkModeSwitcher\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        isLogin: state.viewUpdate.isLogin,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setUserPopover: (anchor) => {\r\n            dispatch(setUserPopover(anchor));\r\n        },\r\n    };\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    userNav: {\r\n        height: \"170px\",\r\n        backgroundColor: theme.palette.primary.main,\r\n        padding: \"20px 20px 2em\",\r\n        backgroundImage:\r\n            \"url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'%3E%3Cpolygon fill='\" +\r\n            theme.palette.primary.light.replace(\"#\", \"%23\") +\r\n            \"' points='957 450 539 900 1396 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.primary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='957 450 872.9 900 1396 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.main.replace(\"#\", \"%23\") +\r\n            \"' points='-60 900 398 662 816 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='337 900 398 662 816 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.light.replace(\"#\", \"%23\") +\r\n            \"' points='1203 546 1552 900 876 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.main.replace(\"#\", \"%23\") +\r\n            \"' points='1203 546 1552 900 1162 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.primary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='641 695 886 900 367 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.primary.main.replace(\"#\", \"%23\") +\r\n            \"' points='587 900 641 695 886 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.light.replace(\"#\", \"%23\") +\r\n            \"' points='1710 900 1401 632 1096 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='1710 900 1401 632 1365 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.main.replace(\"#\", \"%23\") +\r\n            \"' points='1210 900 971 687 725 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='943 900 1210 900 971 687'/%3E%3C/svg%3E\\\")\",\r\n        backgroundSize: \"cover\",\r\n    },\r\n    avatar: {\r\n        display: \"block\",\r\n        width: \"70px\",\r\n        height: \"70px\",\r\n        border: \" 2px solid #fff\",\r\n        borderRadius: \"50%\",\r\n        overflow: \"hidden\",\r\n        boxShadow:\r\n            \"0 2px 5px 0 rgba(0,0,0,0.16), 0 2px 10px 0 rgba(0,0,0,0.12)\",\r\n    },\r\n    avatarImg: {\r\n        width: \"66px\",\r\n        height: \"66px\",\r\n    },\r\n    nickName: {\r\n        color: \"#fff\",\r\n        marginLeft: \"10px\",\r\n        marginTop: \"15px\",\r\n        fontSize: \"17px\",\r\n    },\r\n    flexAvatar: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"end\",\r\n    },\r\n    groupName: {\r\n        marginLeft: \"10px\",\r\n        color: \"#ffffff\",\r\n        opacity: \"0.54\",\r\n    },\r\n    storageCircle: {\r\n        width: \"200px\",\r\n    },\r\n});\r\n\r\nclass UserInfoCompoment extends Component {\r\n    showUserInfo = (e) => {\r\n        this.props.setUserPopover(e.currentTarget);\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const isLogin = Auth.Check(this.props.isLogin);\r\n        const user = Auth.GetUser(this.props.isLogin);\r\n\r\n        return (\r\n            <div className={classes.userNav}>\r\n                <div className={classes.flexAvatar}>\r\n                    {/* eslint-disable-next-line */}\r\n                    <a onClick={this.showUserInfo} className={classes.avatar}>\r\n                        {isLogin && (\r\n                            <Avatar\r\n                                src={\"/api/v3/user/avatar/\" + user.id + \"/l\"}\r\n                                className={classes.avatarImg}\r\n                            />\r\n                        )}\r\n                        {!isLogin && (\r\n                            <Avatar\r\n                                src={\"/api/v3/user/avatar/0/l\"}\r\n                                className={classes.avatarImg}\r\n                            />\r\n                        )}\r\n                    </a>\r\n                    <DarkModeSwitcher position=\"left\" />\r\n                </div>\r\n                <div className={classes.storageCircle}>\r\n                    <Typography\r\n                        className={classes.nickName}\r\n                        component=\"h2\"\r\n                        noWrap\r\n                    >\r\n                        {isLogin ? user.nickname : \"未登录\"}\r\n                    </Typography>\r\n                    <Typography\r\n                        className={classes.groupName}\r\n                        component=\"h2\"\r\n                        color=\"textSecondary\"\r\n                        noWrap\r\n                    >\r\n                        {isLogin ? user.group.name : \"游客\"}\r\n                    </Typography>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nUserInfoCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst UserInfo = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(UserInfoCompoment));\r\n\r\nexport default UserInfo;\r\n","import React, { useCallback, useState, Suspense } from \"react\";\r\nimport {\r\n    Divider,\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    makeStyles,\r\n    withStyles,\r\n} from \"@material-ui/core\";\r\nimport { Clear, KeyboardArrowRight } from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\nimport FolderShared from \"@material-ui/icons/FolderShared\";\r\nimport UploadIcon from \"@material-ui/icons/CloudUpload\";\r\nimport VideoIcon from \"@material-ui/icons/VideoLibraryOutlined\";\r\nimport ImageIcon from \"@material-ui/icons/CollectionsOutlined\";\r\nimport MusicIcon from \"@material-ui/icons/LibraryMusicOutlined\";\r\nimport DocIcon from \"@material-ui/icons/FileCopyOutlined\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport MuiExpansionPanel from \"@material-ui/core/ExpansionPanel\";\r\nimport MuiExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\r\nimport MuiExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\r\nimport { navigateTo, searchMyFile, toggleSnackbar } from \"../../actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport {\r\n    Circle,\r\n    CircleOutline,\r\n    Heart,\r\n    HeartOutline,\r\n    Hexagon,\r\n    HexagonOutline,\r\n    Hexagram,\r\n    HexagramOutline,\r\n    Rhombus,\r\n    RhombusOutline,\r\n    Square,\r\n    SquareOutline,\r\n    Triangle,\r\n    TriangleOutline,\r\n    FolderHeartOutline,\r\n    TagPlus,\r\n} from \"mdi-material-ui\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport API from \"../../middleware/Api\";\r\n\r\nconst ExpansionPanel = withStyles({\r\n    root: {\r\n        maxWidth: \"100%\",\r\n        boxShadow: \"none\",\r\n        \"&:not(:last-child)\": {\r\n            borderBottom: 0,\r\n        },\r\n        \"&:before\": {\r\n            display: \"none\",\r\n        },\r\n        \"&$expanded\": { margin: 0 },\r\n    },\r\n    expanded: {},\r\n})(MuiExpansionPanel);\r\n\r\nconst ExpansionPanelSummary = withStyles({\r\n    root: {\r\n        minHeight: 0,\r\n        padding: 0,\r\n\r\n        \"&$expanded\": {\r\n            minHeight: 0,\r\n        },\r\n    },\r\n    content: {\r\n        maxWidth: \"100%\",\r\n        margin: 0,\r\n        display: \"block\",\r\n        \"&$expanded\": {\r\n            margin: \"0\",\r\n        },\r\n    },\r\n    expanded: {},\r\n})(MuiExpansionPanelSummary);\r\n\r\nconst ExpansionPanelDetails = withStyles((theme) => ({\r\n    root: {\r\n        display: \"block\",\r\n        padding: theme.spacing(0),\r\n    },\r\n}))(MuiExpansionPanelDetails);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    expand: {\r\n        display: \"none\",\r\n        transition: \".15s all ease-in-out\",\r\n    },\r\n    expanded: {\r\n        display: \"block\",\r\n        transform: \"rotate(90deg)\",\r\n    },\r\n    iconFix: {\r\n        marginLeft: \"16px\",\r\n    },\r\n    hiddenButton: {\r\n        display: \"none\",\r\n    },\r\n    subMenu: {\r\n        marginLeft: theme.spacing(2),\r\n    },\r\n    overFlow: {\r\n        whiteSpace: \"nowrap\",\r\n        overflow: \"hidden\",\r\n        textOverflow: \"ellipsis\",\r\n    },\r\n}));\r\n\r\nconst icons = {\r\n    Circle: Circle,\r\n    CircleOutline: CircleOutline,\r\n    Heart: Heart,\r\n    HeartOutline: HeartOutline,\r\n    Hexagon: Hexagon,\r\n    HexagonOutline: HexagonOutline,\r\n    Hexagram: Hexagram,\r\n    HexagramOutline: HexagramOutline,\r\n    Rhombus: Rhombus,\r\n    RhombusOutline: RhombusOutline,\r\n    Square: Square,\r\n    SquareOutline: SquareOutline,\r\n    Triangle: Triangle,\r\n    TriangleOutline: TriangleOutline,\r\n    FolderHeartOutline: FolderHeartOutline,\r\n};\r\n\r\nconst AddTag = React.lazy(() => import(\"../Modals/AddTag\"));\r\n\r\nexport default function FileTag() {\r\n    const classes = useStyles();\r\n\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n\r\n    const isHomePage = pathHelper.isHomePage(location.pathname);\r\n\r\n    const [tagOpen, setTagOpen] = useState(true);\r\n    const [addTagModal, setAddTagModal] = useState(false);\r\n    const [tagHover, setTagHover] = useState(null);\r\n    const [tags, setTags] = useState(\r\n        Auth.GetUser().tags ? Auth.GetUser().tags : []\r\n    );\r\n\r\n    const dispatch = useDispatch();\r\n    const SearchMyFile = useCallback((k) => dispatch(searchMyFile(k)), [\r\n        dispatch,\r\n    ]);\r\n    const NavigateTo = useCallback((k) => dispatch(navigateTo(k)), [dispatch]);\r\n\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const getIcon = (icon, color) => {\r\n        if (icons[icon]) {\r\n            const IconComponent = icons[icon];\r\n            return (\r\n                <IconComponent\r\n                    className={[classes.iconFix]}\r\n                    style={\r\n                        color\r\n                            ? {\r\n                                  color: color,\r\n                              }\r\n                            : {}\r\n                    }\r\n                />\r\n            );\r\n        }\r\n        return <Circle className={[classes.iconFix]} />;\r\n    };\r\n\r\n    const submitSuccess = (tag) => {\r\n        const newTags = [...tags, tag];\r\n        setTags(newTags);\r\n        const user = Auth.GetUser();\r\n        user.tags = newTags;\r\n        Auth.SetUser(user);\r\n    };\r\n\r\n    const submitDelete = (id) => {\r\n        API.delete(\"/tag/\" + id)\r\n            .then(() => {\r\n                const newTags = tags.filter((v) => {\r\n                    return v.id !== id;\r\n                });\r\n                setTags(newTags);\r\n                const user = Auth.GetUser();\r\n                user.tags = newTags;\r\n                Auth.SetUser(user);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Suspense fallback={\"\"}>\r\n                <AddTag\r\n                    onSuccess={submitSuccess}\r\n                    open={addTagModal}\r\n                    onClose={() => setAddTagModal(false)}\r\n                />\r\n            </Suspense>\r\n            <ExpansionPanel\r\n                square\r\n                expanded={tagOpen && isHomePage}\r\n                onChange={() => isHomePage && setTagOpen(!tagOpen)}\r\n            >\r\n                <ExpansionPanelSummary\r\n                    aria-controls=\"panel1d-content\"\r\n                    id=\"panel1d-header\"\r\n                >\r\n                    <ListItem\r\n                        button\r\n                        key=\"我的文件\"\r\n                        onClick={() =>\r\n                            !isHomePage && history.push(\"/home?path=%2F\")\r\n                        }\r\n                    >\r\n                        <ListItemIcon>\r\n                            <KeyboardArrowRight\r\n                                className={classNames(\r\n                                    {\r\n                                        [classes.expanded]:\r\n                                            tagOpen && isHomePage,\r\n                                        [classes.iconFix]: true,\r\n                                    },\r\n                                    classes.expand\r\n                                )}\r\n                            />\r\n                            {!(tagOpen && isHomePage) && (\r\n                                <FolderShared className={classes.iconFix} />\r\n                            )}\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"我的文件\" />\r\n                    </ListItem>\r\n                    <Divider />\r\n                </ExpansionPanelSummary>\r\n\r\n                <ExpansionPanelDetails>\r\n                    <List onMouseLeave={() => setTagHover(null)}>\r\n                        <ListItem\r\n                            button\r\n                            id=\"pickfiles\"\r\n                            className={classes.hiddenButton}\r\n                        >\r\n                            <ListItemIcon>\r\n                                <UploadIcon />\r\n                            </ListItemIcon>\r\n                            <ListItemText />\r\n                        </ListItem>\r\n                        <ListItem\r\n                            button\r\n                            id=\"pickfolder\"\r\n                            className={classes.hiddenButton}\r\n                        >\r\n                            <ListItemIcon>\r\n                                <UploadIcon />\r\n                            </ListItemIcon>\r\n                            <ListItemText />\r\n                        </ListItem>\r\n                        {[\r\n                            {\r\n                                key: \"视频\",\r\n                                id: \"video\",\r\n                                icon: (\r\n                                    <VideoIcon\r\n                                        className={[\r\n                                            classes.iconFix,\r\n                                            classes.iconVideo,\r\n                                        ]}\r\n                                    />\r\n                                ),\r\n                            },\r\n                            {\r\n                                key: \"图片\",\r\n                                id: \"image\",\r\n                                icon: (\r\n                                    <ImageIcon\r\n                                        className={[\r\n                                            classes.iconFix,\r\n                                            classes.iconImg,\r\n                                        ]}\r\n                                    />\r\n                                ),\r\n                            },\r\n                            {\r\n                                key: \"音频\",\r\n                                id: \"audio\",\r\n                                icon: (\r\n                                    <MusicIcon\r\n                                        className={[\r\n                                            classes.iconFix,\r\n                                            classes.iconAudio,\r\n                                        ]}\r\n                                    />\r\n                                ),\r\n                            },\r\n                            {\r\n                                key: \"文档\",\r\n                                id: \"doc\",\r\n                                icon: (\r\n                                    <DocIcon\r\n                                        className={[\r\n                                            classes.iconFix,\r\n                                            classes.iconDoc,\r\n                                        ]}\r\n                                    />\r\n                                ),\r\n                            },\r\n                        ].map((v) => (\r\n                            <ListItem\r\n                                button\r\n                                key={v.key}\r\n                                onClick={() => SearchMyFile(v.id + \"/internal\")}\r\n                            >\r\n                                <ListItemIcon className={classes.subMenu}>\r\n                                    {v.icon}\r\n                                </ListItemIcon>\r\n                                <ListItemText primary={v.key} />\r\n                            </ListItem>\r\n                        ))}\r\n                        {tags.map((v) => (\r\n                            <ListItem\r\n                                button\r\n                                key={v.id}\r\n                                onMouseEnter={() => setTagHover(v.id)}\r\n                                onClick={() => {\r\n                                    if (v.type === 0) {\r\n                                        SearchMyFile(\"tag/\" + v.id);\r\n                                    } else {\r\n                                        NavigateTo(v.expression);\r\n                                    }\r\n                                }}\r\n                            >\r\n                                <ListItemIcon className={classes.subMenu}>\r\n                                    {getIcon(\r\n                                        v.type === 0\r\n                                            ? v.icon\r\n                                            : \"FolderHeartOutline\",\r\n                                        v.type === 0 ? v.color : null\r\n                                    )}\r\n                                </ListItemIcon>\r\n                                <ListItemText\r\n                                    className={classes.overFlow}\r\n                                    primary={v.name}\r\n                                />\r\n\r\n                                {tagHover === v.id && (\r\n                                    <ListItemSecondaryAction\r\n                                        onClick={() => submitDelete(v.id)}\r\n                                    >\r\n                                        <IconButton\r\n                                            size={\"small\"}\r\n                                            edge=\"end\"\r\n                                            aria-label=\"delete\"\r\n                                        >\r\n                                            <Clear />\r\n                                        </IconButton>\r\n                                    </ListItemSecondaryAction>\r\n                                )}\r\n                            </ListItem>\r\n                        ))}\r\n\r\n                        <ListItem button onClick={() => setAddTagModal(true)}>\r\n                            <ListItemIcon className={classes.subMenu}>\r\n                                <TagPlus className={classes.iconFix} />\r\n                            </ListItemIcon>\r\n                            <ListItemText primary={\"添加标签...\"} />\r\n                        </ListItem>\r\n                    </List>{\" \"}\r\n                    <Divider />\r\n                </ExpansionPanelDetails>\r\n            </ExpansionPanel>\r\n        </>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { mediaType } from \"../../config\";\r\nimport ImageIcon from \"@material-ui/icons/PhotoSizeSelectActual\";\r\nimport VideoIcon from \"@material-ui/icons/Videocam\";\r\nimport AudioIcon from \"@material-ui/icons/Audiotrack\";\r\nimport PdfIcon from \"@material-ui/icons/PictureAsPdf\";\r\nimport {\r\n    Android,\r\n    FileExcelBox,\r\n    FilePowerpointBox,\r\n    FileWordBox,\r\n    LanguageC,\r\n    LanguageCpp,\r\n    LanguageGo,\r\n    LanguageJavascript,\r\n    LanguagePhp,\r\n    LanguagePython,\r\n    MagnetOn,\r\n    ScriptText,\r\n    WindowRestore,\r\n    ZipBox,\r\n} from \"mdi-material-ui\";\r\nimport FileShowIcon from \"@material-ui/icons/InsertDriveFile\";\r\nimport { lighten } from \"@material-ui/core/styles\";\r\nimport useTheme from \"@material-ui/core/styles/useTheme\";\r\nimport { Avatar } from \"@material-ui/core\";\r\n\r\nconst icons = {\r\n    audio: {\r\n        color: \"#651fff\",\r\n        icon: AudioIcon,\r\n    },\r\n    video: {\r\n        color: \"#d50000\",\r\n        icon: VideoIcon,\r\n    },\r\n    image: {\r\n        color: \"#d32f2f\",\r\n        icon: ImageIcon,\r\n    },\r\n    pdf: {\r\n        color: \"#f44336\",\r\n        icon: PdfIcon,\r\n    },\r\n    word: {\r\n        color: \"#538ce5\",\r\n        icon: FileWordBox,\r\n    },\r\n    ppt: {\r\n        color: \"rgb(239, 99, 63)\",\r\n        icon: FilePowerpointBox,\r\n    },\r\n    excel: {\r\n        color: \"#4caf50\",\r\n        icon: FileExcelBox,\r\n    },\r\n    text: {\r\n        color: \"#607d8b\",\r\n        icon: ScriptText,\r\n    },\r\n    torrent: {\r\n        color: \"#5c6bc0\",\r\n        icon: MagnetOn,\r\n    },\r\n    zip: {\r\n        color: \"#f9a825\",\r\n        icon: ZipBox,\r\n    },\r\n    excute: {\r\n        color: \"#1a237e\",\r\n        icon: WindowRestore,\r\n    },\r\n    android: {\r\n        color: \"#8bc34a\",\r\n        icon: Android,\r\n    },\r\n    file: {\r\n        color: \"#607d8b\",\r\n        icon: FileShowIcon,\r\n    },\r\n    php: {\r\n        color: \"#777bb3\",\r\n        icon: LanguagePhp,\r\n    },\r\n    go: {\r\n        color: \"#16b3da\",\r\n        icon: LanguageGo,\r\n    },\r\n    python: {\r\n        color: \"#3776ab\",\r\n        icon: LanguagePython,\r\n    },\r\n    c: {\r\n        color: \"#a8b9cc\",\r\n        icon: LanguageC,\r\n    },\r\n    cpp: {\r\n        color: \"#004482\",\r\n        icon: LanguageCpp,\r\n    },\r\n    js: {\r\n        color: \"#f4d003\",\r\n        icon: LanguageJavascript,\r\n    },\r\n};\r\n\r\nconst getColor = (theme, color) =>\r\n    theme.palette.type === \"light\" ? color : lighten(color, 0.2);\r\n\r\nlet color;\r\n\r\nconst TypeIcon = (props) => {\r\n    const theme = useTheme();\r\n\r\n    const fileSuffix = props.fileName.split(\".\").pop().toLowerCase();\r\n    let fileType = \"file\";\r\n    Object.keys(mediaType).forEach((k) => {\r\n        if (mediaType[k].indexOf(fileSuffix) !== -1) {\r\n            fileType = k;\r\n        }\r\n    });\r\n    const IconComponent = icons[fileType].icon;\r\n    color = getColor(theme, icons[fileType].color);\r\n    if (props.getColorValue) {\r\n        props.getColorValue(color);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {props.isUpload && (\r\n                <Avatar\r\n                    className={props.className}\r\n                    style={{\r\n                        backgroundColor: color,\r\n                    }}\r\n                >\r\n                    <IconComponent\r\n                        className={props.iconClassName}\r\n                        style={{\r\n                            color: theme.palette.background.paper,\r\n                        }}\r\n                    />\r\n                </Avatar>\r\n            )}\r\n            {!props.isUpload && (\r\n                <IconComponent\r\n                    className={props.className}\r\n                    style={{\r\n                        color: color,\r\n                    }}\r\n                />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default TypeIcon;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { baseURL } from \"../../middleware/Api\";\r\nimport { showImgPreivew } from \"../../actions/index\";\r\nimport { imgPreviewSuffix } from \"../../config\";\r\nimport { withStyles } from \"@material-ui/core\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport { withRouter } from \"react-router\";\r\nimport { PhotoSlider } from \"react-photo-view\";\r\nimport \"react-photo-view/dist/index.css\";\r\nimport * as explorer from \"../../redux/explorer/reducer\";\r\n\r\nconst styles = () => ({});\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        first: state.explorer.imgPreview.first,\r\n        other: state.explorer.imgPreview.other,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        showImgPreivew: (first) => {\r\n            dispatch(showImgPreivew(first));\r\n        },\r\n    };\r\n};\r\n\r\nclass ImagPreviewComponent extends Component {\r\n    state = {\r\n        items: [],\r\n        photoIndex: 0,\r\n        isOpen: false,\r\n    };\r\n\r\n    UNSAFE_componentWillReceiveProps = (nextProps) => {\r\n        const items = [];\r\n        let firstOne = 0;\r\n        if (nextProps.first.id !== \"\") {\r\n            if (\r\n                pathHelper.isSharePage(this.props.location.pathname) &&\r\n                !nextProps.first.path\r\n            ) {\r\n                const newImg = {\r\n                    intro: nextProps.first.name,\r\n                    src: baseURL + \"/share/preview/\" + nextProps.first.key,\r\n                };\r\n                firstOne = 0;\r\n                items.push(newImg);\r\n                this.setState({\r\n                    photoIndex: firstOne,\r\n                    items: items,\r\n                    isOpen: true,\r\n                });\r\n                return;\r\n            }\r\n            // eslint-disable-next-line\r\n            nextProps.other.map((value) => {\r\n                const fileType = value.name.split(\".\").pop().toLowerCase();\r\n                if (imgPreviewSuffix.indexOf(fileType) !== -1) {\r\n                    let src = \"\";\r\n                    if (pathHelper.isSharePage(this.props.location.pathname)) {\r\n                        src = baseURL + \"/share/preview/\" + value.key;\r\n                        src =\r\n                            src +\r\n                            \"?path=\" +\r\n                            encodeURIComponent(\r\n                                value.path === \"/\"\r\n                                    ? value.path + value.name\r\n                                    : value.path + \"/\" + value.name\r\n                            );\r\n                    } else {\r\n                        src = baseURL + \"/file/preview/\" + value.id;\r\n                    }\r\n                    const newImg = {\r\n                        intro: value.name,\r\n                        src: src,\r\n                    };\r\n                    if (\r\n                        value.path === nextProps.first.path &&\r\n                        value.name === nextProps.first.name\r\n                    ) {\r\n                        firstOne = items.length;\r\n                    }\r\n                    items.push(newImg);\r\n                }\r\n            });\r\n            this.setState({\r\n                photoIndex: firstOne,\r\n                items: items,\r\n                isOpen: true,\r\n            });\r\n        }\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.props.showImgPreivew(explorer.initState.imgPreview.first);\r\n        this.setState({\r\n            isOpen: false,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const { photoIndex, isOpen, items } = this.state;\r\n\r\n        return (\r\n            <div>\r\n                {isOpen && (\r\n                    <PhotoSlider\r\n                        images={items}\r\n                        visible={isOpen}\r\n                        onClose={() => this.handleClose()}\r\n                        index={photoIndex}\r\n                        onIndexChange={(n) =>\r\n                            this.setState({\r\n                                photoIndex: n,\r\n                            })\r\n                        }\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nImagPreviewComponent.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst ImgPreivew = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(ImagPreviewComponent)));\r\n\r\nexport default ImgPreivew;\r\n","export const isDefined = (val) => val != null;\r\nexport const isFunction = (val) => typeof val === \"function\";\r\n// eslint-disable-next-line @typescript-eslint/no-empty-function\r\nexport const noop = () => {};\r\n\r\nexport const newScript = (src) => (cb) => {\r\n    const scriptElem = document.createElement(\"script\");\r\n    if (typeof src === \"object\") {\r\n        // copy every property to the element\r\n        for (const key in src) {\r\n            if (Object.prototype.hasOwnProperty.call(src, key)) {\r\n                scriptElem[key] = src[key];\r\n            }\r\n        }\r\n        src = src.src;\r\n    } else {\r\n        scriptElem.src = src;\r\n    }\r\n    scriptElem.addEventListener(\"load\", () => cb(null, src));\r\n    scriptElem.addEventListener(\"error\", () => cb(true, src));\r\n    document.body.appendChild(scriptElem);\r\n    return scriptElem;\r\n};\r\n\r\nconst keyIterator = (cols) => {\r\n    const keys = Object.keys(cols);\r\n    let i = -1;\r\n    return {\r\n        next() {\r\n            i++; // inc\r\n            if (i >= keys.length) return null;\r\n            else return keys[i];\r\n        },\r\n    };\r\n};\r\n\r\n// tasks should be a collection of thunk\r\nexport const parallel = (...tasks) => (each) => (cb) => {\r\n    let hasError = false;\r\n    let successed = 0;\r\n    const ret = [];\r\n    tasks = tasks.filter(isFunction);\r\n\r\n    if (tasks.length <= 0) cb(null);\r\n    else {\r\n        tasks.forEach((task, i) => {\r\n            const thunk = task;\r\n            thunk((err, ...args) => {\r\n                if (err) hasError = true;\r\n                else {\r\n                    // collect result\r\n                    if (args.length <= 1) args = args[0];\r\n\r\n                    ret[i] = args;\r\n                    successed++;\r\n                }\r\n\r\n                if (isFunction(each)) each.call(null, err, args, i);\r\n\r\n                if (hasError) cb(true);\r\n                else if (tasks.length === successed) {\r\n                    cb(null, ret);\r\n                }\r\n            });\r\n        });\r\n    }\r\n};\r\n\r\n// tasks should be a collection of thunk\r\nexport const series = (...tasks) => (each) => (cb) => {\r\n    tasks = tasks.filter((val) => val != null);\r\n    const nextKey = keyIterator(tasks);\r\n    const nextThunk = () => {\r\n        const key = nextKey.next();\r\n        let thunk = tasks[key];\r\n        // eslint-disable-next-line prefer-spread\r\n        if (Array.isArray(thunk))\r\n            // eslint-disable-next-line prefer-spread\r\n            thunk = parallel.apply(null, thunk).call(null, each);\r\n        return [+key, thunk]; // convert `key` to number\r\n    };\r\n    let key, thunk;\r\n    let next = nextThunk();\r\n    key = next[0];\r\n    thunk = next[1];\r\n    if (thunk == null) return cb(null);\r\n\r\n    const ret = [];\r\n    const iterator = () => {\r\n        thunk((err, ...args) => {\r\n            if (args.length <= 1) args = args[0];\r\n            if (isFunction(each)) each.call(null, err, args, key);\r\n\r\n            if (err) cb(err);\r\n            else {\r\n                // collect result\r\n                ret.push(args);\r\n\r\n                next = nextThunk();\r\n                key = next[0];\r\n                thunk = next[1];\r\n                if (thunk == null) return cb(null, ret);\r\n                // finished\r\n                else iterator();\r\n            }\r\n        });\r\n    };\r\n    iterator();\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport hoistStatics from \"hoist-non-react-statics\";\r\nimport { newScript, series, noop } from \"./utils\";\r\n\r\nconst loadedScript = [];\r\nconst pendingScripts = {};\r\nlet failedScript = [];\r\n\r\nconst addCache = (entry) => {\r\n    if (loadedScript.indexOf(entry) < 0) {\r\n        loadedScript.push(entry);\r\n    }\r\n};\r\n\r\nconst removeFailedScript = () => {\r\n    if (failedScript.length > 0) {\r\n        failedScript.forEach((script) => {\r\n            const node = document.querySelector(`script[src='${script}']`);\r\n            if (node != null) {\r\n                node.parentNode.removeChild(node);\r\n            }\r\n        });\r\n\r\n        failedScript = [];\r\n    }\r\n};\r\n\r\nexport function startLoadingScripts(scripts, onComplete = noop) {\r\n    // sequence load\r\n    const loadNewScript = (script) => {\r\n        const src = typeof script === \"object\" ? script.src : script;\r\n        if (loadedScript.indexOf(src) < 0) {\r\n            return (taskComplete) => {\r\n                const callbacks = pendingScripts[src] || [];\r\n                callbacks.push(taskComplete);\r\n                pendingScripts[src] = callbacks;\r\n                if (callbacks.length === 1) {\r\n                    return newScript(script)((err) => {\r\n                        pendingScripts[src].forEach((cb) => cb(err, src));\r\n                        delete pendingScripts[src];\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    };\r\n    const tasks = scripts.map((src) => {\r\n        if (Array.isArray(src)) {\r\n            return src.map(loadNewScript);\r\n        } else return loadNewScript(src);\r\n    });\r\n\r\n    series(...tasks)((err, src) => {\r\n        if (err) {\r\n            failedScript.push(src);\r\n        } else {\r\n            if (Array.isArray(src)) {\r\n                src.forEach(addCache);\r\n            } else addCache(src);\r\n        }\r\n    })((err) => {\r\n        removeFailedScript();\r\n        onComplete(err);\r\n    });\r\n}\r\n\r\nconst uploaderLoader = () => (WrappedComponent) => {\r\n    class ScriptLoader extends Component {\r\n        static propTypes = {\r\n            onScriptLoaded: PropTypes.func,\r\n        };\r\n\r\n        static defaultProps = {\r\n            onScriptLoaded: noop,\r\n        };\r\n\r\n        constructor(props, context) {\r\n            super(props, context);\r\n\r\n            this.state = {\r\n                isScriptLoaded: false,\r\n                isScriptLoadSucceed: false,\r\n            };\r\n\r\n            this._isMounted = false;\r\n        }\r\n\r\n        componentDidMount() {\r\n            this._isMounted = true;\r\n            const scripts = [\r\n                [\"/static/js/uploader/moxie.js\"],\r\n                [\"/static/js/uploader/plupload.dev.js\"],\r\n                [\"/static/js/uploader/i18n/zh_CN.js\"],\r\n                [\"/static/js/uploader/ui.js\"],\r\n                [\"/static/js/uploader/uploader_\" + window.policyType + \".js\"],\r\n            ];\r\n            startLoadingScripts(scripts, (err) => {\r\n                if (this._isMounted) {\r\n                    this.setState(\r\n                        {\r\n                            isScriptLoaded: true,\r\n                            isScriptLoadSucceed: !err,\r\n                        },\r\n                        () => {\r\n                            if (!err) {\r\n                                this.props.onScriptLoaded();\r\n                            }\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            this._isMounted = false;\r\n        }\r\n\r\n        getWrappedInstance() {\r\n            // eslint-disable-next-line react/no-string-refs\r\n            return this.refs.wrappedInstance;\r\n        }\r\n\r\n        render() {\r\n            const props = {\r\n                ...this.props,\r\n                ...this.state,\r\n                ref: \"wrappedInstance\",\r\n            };\r\n\r\n            return <WrappedComponent {...props} />;\r\n        }\r\n    }\r\n\r\n    return hoistStatics(ScriptLoader, WrappedComponent);\r\n};\r\n\r\nexport default uploaderLoader;\r\n","import React, { Component } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport AddIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport { isWidthDown } from \"@material-ui/core/withWidth\";\r\nimport { darken, lighten } from \"@material-ui/core/styles/colorManipulator\";\r\nimport {\r\n    withStyles,\r\n    Dialog,\r\n    ListItemText,\r\n    ListItem,\r\n    List,\r\n    Divider,\r\n    AppBar,\r\n    Toolbar,\r\n    IconButton,\r\n    Typography,\r\n    Slide,\r\n    ListItemSecondaryAction,\r\n    withWidth,\r\n    DialogContent,\r\n    Tooltip,\r\n} from \"@material-ui/core\";\r\nimport TypeIcon from \"../FileManager/TypeIcon\";\r\nimport { withTheme } from \"@material-ui/core/styles\";\r\n\r\nconst styles = (theme) => ({\r\n    appBar: {\r\n        position: \"relative\",\r\n    },\r\n    flex: {\r\n        flex: 1,\r\n    },\r\n    progressBar: {\r\n        marginTop: 5,\r\n    },\r\n    minHight: {\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            minWidth: 500,\r\n        },\r\n        padding: 0,\r\n    },\r\n    dialogContent: {\r\n        padding: 0,\r\n    },\r\n    successStatus: {\r\n        color: \"#4caf50\",\r\n    },\r\n    errorStatus: {\r\n        color: \"#ff5722\",\r\n        wordBreak: \"break-all\",\r\n    },\r\n    listAction: {\r\n        marginLeft: 20,\r\n        marginRight: 20,\r\n    },\r\n    delete: {\r\n        zIndex: 9,\r\n    },\r\n    progressContainer: {\r\n        position: \"relative\",\r\n    },\r\n    progressContent: {\r\n        position: \"relative\",\r\n        zIndex: 9,\r\n    },\r\n    progress: {\r\n        transition: \"width .4s linear\",\r\n        zIndex: 1,\r\n        height: \"100%\",\r\n        position: \"absolute\",\r\n        left: 0,\r\n        top: 0,\r\n    },\r\n    fileName: {\r\n        wordBreak: \"break-all\",\r\n    },\r\n});\r\nclass FileList extends Component {\r\n    state = {\r\n        open: false,\r\n        files: [],\r\n    };\r\n\r\n    //入队\r\n    enQueue(files) {\r\n        this.setState({\r\n            files: [...this.state.files, ...files],\r\n        });\r\n    }\r\n\r\n    deQueue(file) {\r\n        const filesNow = [...this.state.files];\r\n        const fileID = filesNow.findIndex((f) => {\r\n            return f.id === file.id;\r\n        });\r\n        if (fileID !== -1) {\r\n            filesNow.splice(fileID, 1);\r\n            this.setState({\r\n                files: filesNow,\r\n                open: filesNow.length !== 0,\r\n            });\r\n        }\r\n    }\r\n\r\n    updateStatus(file) {\r\n        const filesNow = [...this.state.files];\r\n        const fileID = filesNow.findIndex((f) => {\r\n            return f.id === file.id;\r\n        });\r\n        if (!file.errMsg || file.ignoreMsg) {\r\n            if (filesNow[fileID] && !filesNow[fileID].errMsg) {\r\n                filesNow[fileID] = file;\r\n                this.setState({\r\n                    files: filesNow,\r\n                });\r\n            }\r\n        } else {\r\n            file.ignoreMsg = true;\r\n        }\r\n    }\r\n\r\n    setComplete(file) {\r\n        const filesNow = [...this.state.files];\r\n        const fileID = filesNow.findIndex((f) => {\r\n            return f.id === file.id;\r\n        });\r\n        if (fileID !== -1) {\r\n            if (filesNow[fileID].status !== 4) {\r\n                filesNow[fileID].status = 5;\r\n                this.setState({\r\n                    files: filesNow,\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    setError(file, errMsg) {\r\n        const filesNow = [...this.state.files];\r\n        const fileID = filesNow.findIndex((f) => {\r\n            return f.id === file.id;\r\n        });\r\n        if (fileID !== -1) {\r\n            filesNow[fileID].status = 4;\r\n            filesNow[fileID].errMsg = errMsg;\r\n        } else {\r\n            file.status = 4;\r\n            file.errMsg = errMsg;\r\n            filesNow.push(file);\r\n        }\r\n        this.setState({\r\n            files: filesNow,\r\n        });\r\n    }\r\n\r\n    Transition(props) {\r\n        return <Slide direction=\"up\" {...props} />;\r\n    }\r\n    openFileList = () => {\r\n        if (!this.state.open) {\r\n            this.setState({ open: true });\r\n        }\r\n    };\r\n\r\n    cancelUpload = (file) => {\r\n        this.props.cancelUpload(file);\r\n        this.deQueue(file);\r\n    };\r\n\r\n    reQueue = (file) => {\r\n        this.props.reQueue(file);\r\n        this.deQueue(file);\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({ open: false });\r\n    };\r\n\r\n    addNewFile = () => {\r\n        document.getElementsByClassName(\"uploadFileForm\")[0].click();\r\n    };\r\n\r\n    getProgressBackground = () => {\r\n        return this.props.theme.palette.type === \"light\"\r\n            ? lighten(this.props.theme.palette.primary.main, 0.8)\r\n            : darken(this.props.theme.palette.background.paper, 0.2);\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const { width } = this.props;\r\n\r\n        this.props.inRef({\r\n            openFileList: this.openFileList.bind(this),\r\n            enQueue: this.enQueue.bind(this),\r\n            updateStatus: this.updateStatus.bind(this),\r\n            setComplete: this.setComplete.bind(this),\r\n            setError: this.setError.bind(this),\r\n        });\r\n\r\n        return (\r\n            <Dialog\r\n                fullScreen={isWidthDown(\"sm\", width)}\r\n                open={this.state.open}\r\n                onClose={this.handleClose}\r\n                TransitionComponent={this.Transition}\r\n            >\r\n                <AppBar className={classes.appBar}>\r\n                    <Toolbar>\r\n                        <IconButton\r\n                            color=\"inherit\"\r\n                            onClick={this.handleClose}\r\n                            aria-label=\"Close\"\r\n                        >\r\n                            <CloseIcon />\r\n                        </IconButton>\r\n                        <Typography\r\n                            variant=\"h6\"\r\n                            color=\"inherit\"\r\n                            className={classes.flex}\r\n                        >\r\n                            上传队列\r\n                        </Typography>\r\n                        <IconButton color=\"inherit\" onClick={this.addNewFile}>\r\n                            <AddIcon />\r\n                        </IconButton>\r\n                    </Toolbar>\r\n                </AppBar>\r\n                <DialogContent className={classes.dialogContent}>\r\n                    <List className={classes.minHight}>\r\n                        {this.state.files.map((item, i) => (\r\n                            <div key={i} className={classes.progressContainer}>\r\n                                {item.status === 2 && (\r\n                                    <div\r\n                                        style={{\r\n                                            backgroundColor: this.getProgressBackground(),\r\n                                            width: item.percent + \"%\",\r\n                                        }}\r\n                                        className={classes.progress}\r\n                                    />\r\n                                )}\r\n                                <ListItem\r\n                                    className={classes.progressContent}\r\n                                    button\r\n                                >\r\n                                    <TypeIcon fileName={item.name} isUpload />\r\n                                    {item.status === 1 && (\r\n                                        <ListItemText\r\n                                            className={classes.listAction}\r\n                                            primary={\r\n                                                <span\r\n                                                    className={classes.fileName}\r\n                                                >\r\n                                                    {item.name}\r\n                                                </span>\r\n                                            }\r\n                                            secondary={<div>排队中...</div>}\r\n                                        />\r\n                                    )}\r\n                                    {item.status === 2 && (\r\n                                        <ListItemText\r\n                                            className={classes.listAction}\r\n                                            primary={\r\n                                                <span\r\n                                                    className={classes.fileName}\r\n                                                >\r\n                                                    {item.name}\r\n                                                </span>\r\n                                            }\r\n                                            secondary={\r\n                                                <div>\r\n                                                    {item.percent <= 99 && (\r\n                                                        <>\r\n                                                            {window.plupload\r\n                                                                .formatSize(\r\n                                                                    item.speed\r\n                                                                )\r\n                                                                .toUpperCase()}\r\n                                                            /s 已上传{\" \"}\r\n                                                            {window.plupload\r\n                                                                .formatSize(\r\n                                                                    item.loaded\r\n                                                                )\r\n                                                                .toUpperCase()}{\" \"}\r\n                                                            , 共{\" \"}\r\n                                                            {window.plupload\r\n                                                                .formatSize(\r\n                                                                    item.size\r\n                                                                )\r\n                                                                .toUpperCase()}{\" \"}\r\n                                                            - {item.percent}%{\" \"}\r\n                                                        </>\r\n                                                    )}\r\n                                                    {item.percent > 99 && (\r\n                                                        <div>处理中...</div>\r\n                                                    )}\r\n                                                </div>\r\n                                            }\r\n                                        />\r\n                                    )}\r\n                                    {item.status === 3 && (\r\n                                        <ListItemText\r\n                                            className={classes.listAction}\r\n                                            primary={\r\n                                                <span\r\n                                                    className={classes.fileName}\r\n                                                >\r\n                                                    {item.name}\r\n                                                </span>\r\n                                            }\r\n                                            secondary={item.status}\r\n                                        />\r\n                                    )}\r\n                                    {item.status === 4 && (\r\n                                        <ListItemText\r\n                                            className={classes.listAction}\r\n                                            primary={\r\n                                                <span\r\n                                                    className={classes.fileName}\r\n                                                >\r\n                                                    {item.name}\r\n                                                </span>\r\n                                            }\r\n                                            secondary={\r\n                                                <div\r\n                                                    className={\r\n                                                        classes.errorStatus\r\n                                                    }\r\n                                                >\r\n                                                    {item.errMsg}\r\n                                                    <br />\r\n                                                </div>\r\n                                            }\r\n                                        />\r\n                                    )}\r\n                                    {item.status === 5 && (\r\n                                        <ListItemText\r\n                                            className={classes.listAction}\r\n                                            primary={\r\n                                                <span\r\n                                                    className={classes.fileName}\r\n                                                >\r\n                                                    {item.name}\r\n                                                </span>\r\n                                            }\r\n                                            secondary={\r\n                                                <div\r\n                                                    className={\r\n                                                        classes.successStatus\r\n                                                    }\r\n                                                >\r\n                                                    已完成\r\n                                                    <br />\r\n                                                </div>\r\n                                            }\r\n                                        />\r\n                                    )}\r\n                                    <ListItemSecondaryAction\r\n                                        className={classes.delete}\r\n                                    >\r\n                                        {item.status !== 4 && (\r\n                                            <IconButton\r\n                                                aria-label=\"Delete\"\r\n                                                onClick={() =>\r\n                                                    this.cancelUpload(item)\r\n                                                }\r\n                                            >\r\n                                                <DeleteIcon />\r\n                                            </IconButton>\r\n                                        )}\r\n                                        {item.status === 4 && (\r\n                                            <Tooltip title={\"重试\"}>\r\n                                                <IconButton\r\n                                                    aria-label=\"Delete\"\r\n                                                    onClick={() =>\r\n                                                        this.reQueue(item)\r\n                                                    }\r\n                                                >\r\n                                                    <RefreshIcon />\r\n                                                </IconButton>\r\n                                            </Tooltip>\r\n                                        )}\r\n                                    </ListItemSecondaryAction>\r\n                                </ListItem>\r\n                                <Divider />\r\n                            </div>\r\n                        ))}\r\n                    </List>\r\n                </DialogContent>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\nFileList.propTypes = {};\r\n\r\nexport default withStyles(styles)(withWidth()(withTheme(FileList)));\r\n","import React, { useCallback, useState, useEffect } from \"react\";\r\nimport { makeStyles, Badge } from \"@material-ui/core\";\r\nimport SpeedDial from \"@material-ui/lab/SpeedDial\";\r\nimport SpeedDialIcon from \"@material-ui/lab/SpeedDialIcon\";\r\nimport SpeedDialAction from \"@material-ui/lab/SpeedDialAction\";\r\nimport CreateNewFolderIcon from \"@material-ui/icons/CreateNewFolder\";\r\nimport PublishIcon from \"@material-ui/icons/Publish\";\r\nimport {\r\n    openCreateFileDialog,\r\n    openCreateFolderDialog,\r\n    toggleSnackbar,\r\n} from \"../../actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport AutoHidden from \"./AutoHidden\";\r\nimport statusHelper from \"../../utils/page\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport { FolderUpload, FilePlus } from \"mdi-material-ui\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    fab: {\r\n        margin: 0,\r\n        top: \"auto\",\r\n        right: 20,\r\n        bottom: 20,\r\n        left: \"auto\",\r\n        zIndex: 5,\r\n        position: \"fixed\",\r\n    },\r\n    badge: {\r\n        position: \"absolute\",\r\n        bottom: 26,\r\n        top: \"auto\",\r\n        zIndex: 9999,\r\n        right: 7,\r\n    },\r\n    \"@global\": {\r\n        \".MuiSpeedDialAction-staticTooltipLabel\": {\r\n            width: 100,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function UploadButton(props) {\r\n    const [open, setOpen] = useState(false);\r\n    const [queued, setQueued] = useState(5);\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const OpenNewFolderDialog = useCallback(\r\n        () => dispatch(openCreateFolderDialog()),\r\n        [dispatch]\r\n    );\r\n    const OpenNewFileDialog = useCallback(\r\n        () => dispatch(openCreateFileDialog()),\r\n        [dispatch]\r\n    );\r\n\r\n    useEffect(() => {\r\n        setQueued(props.Queued);\r\n    }, [props.Queued]);\r\n\r\n    const openUpload = (id) => {\r\n        const uploadButton = document.getElementsByClassName(id)[0];\r\n        if (document.body.contains(uploadButton)) {\r\n            uploadButton.click();\r\n        } else {\r\n            ToggleSnackbar(\"top\", \"right\", \"上传组件还未加载完成\", \"warning\");\r\n        }\r\n    };\r\n    const uploadClicked = () => {\r\n        if (open) {\r\n            if (queued !== 0) {\r\n                props.openFileList();\r\n            } else {\r\n                openUpload(\"uploadFileForm\");\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    return (\r\n        <AutoHidden enable>\r\n            <Badge\r\n                badgeContent={queued}\r\n                classes={{\r\n                    badge: classes.badge, // class name, e.g. `root-x`\r\n                }}\r\n                className={classes.fab}\r\n                invisible={queued === 0}\r\n                color=\"primary\"\r\n            >\r\n                <Backdrop open={open && statusHelper.isMobile()} />\r\n                <SpeedDial\r\n                    ariaLabel=\"SpeedDial openIcon example\"\r\n                    hidden={false}\r\n                    tooltipTitle=\"上传文件\"\r\n                    icon={\r\n                        <SpeedDialIcon\r\n                            openIcon={\r\n                                !statusHelper.isMobile() && <PublishIcon />\r\n                            }\r\n                        />\r\n                    }\r\n                    onClose={handleClose}\r\n                    FabProps={{\r\n                        onClick: () =>\r\n                            !statusHelper.isMobile() && uploadClicked(),\r\n                        color: \"secondary\",\r\n                    }}\r\n                    onOpen={handleOpen}\r\n                    open={open}\r\n                >\r\n                    {statusHelper.isMobile() && (\r\n                        <SpeedDialAction\r\n                            key=\"UploadFile\"\r\n                            icon={<PublishIcon />}\r\n                            tooltipOpen\r\n                            tooltipTitle=\"上传文件\"\r\n                            onClick={() => uploadClicked()}\r\n                            title={\"上传文件\"}\r\n                        />\r\n                    )}\r\n                    {!statusHelper.isMobile() && (\r\n                        <SpeedDialAction\r\n                            key=\"UploadFolder\"\r\n                            icon={<FolderUpload />}\r\n                            tooltipOpen\r\n                            tooltipTitle=\"上传目录\"\r\n                            onClick={() => openUpload(\"uploadFolderForm\")}\r\n                            title={\"上传目录\"}\r\n                        />\r\n                    )}\r\n                    <SpeedDialAction\r\n                        key=\"NewFolder\"\r\n                        icon={<CreateNewFolderIcon />}\r\n                        tooltipOpen\r\n                        tooltipTitle=\"新建目录\"\r\n                        onClick={() => OpenNewFolderDialog()}\r\n                        title={\"新建目录\"}\r\n                    />\r\n                    <SpeedDialAction\r\n                        key=\"NewFile\"\r\n                        icon={<FilePlus />}\r\n                        tooltipOpen\r\n                        tooltipTitle=\"新建文件\"\r\n                        onClick={() => OpenNewFileDialog()}\r\n                        title={\"新建文件\"}\r\n                    />\r\n                </SpeedDial>\r\n            </Badge>\r\n        </AutoHidden>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport uploaderLoader from \"../../loader\";\r\nimport { connect } from \"react-redux\";\r\nimport { refreshFileList, refreshStorage, toggleSnackbar } from \"../../actions\";\r\nimport FileList from \"./FileList.js\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport UploadButton from \"../Dial/Create.js\";\r\nimport { basename, pathJoin } from \"../../utils\";\r\n\r\nlet loaded = false;\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        path: state.navigator.path,\r\n        keywords: state.explorer.keywords,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        refreshFileList: () => {\r\n            dispatch(refreshFileList());\r\n        },\r\n        refreshStorage: () => {\r\n            dispatch(refreshStorage());\r\n        },\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n    };\r\n};\r\n\r\nclass UploaderComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            queued: 0,\r\n        };\r\n    }\r\n\r\n    setRef(val) {\r\n        window.fileList = val;\r\n    }\r\n\r\n    cancelUpload(file) {\r\n        this.uploader.removeFile(file);\r\n    }\r\n\r\n    reQueue = (file) => {\r\n        this.uploader.addFile(file.getSource());\r\n        this.props.toggleSnackbar(\r\n            \"top\",\r\n            \"right\",\r\n            \"文件已经重新加入上传队列\",\r\n            \"info\"\r\n        );\r\n    };\r\n\r\n    getChunkSize(policyType) {\r\n        if (policyType === \"qiniu\") {\r\n            return 4 * 1024 * 1024;\r\n        }\r\n        if (policyType === \"onedrive\") {\r\n            return 100 * 1024 * 1024;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    fileAdd = (up, files) => {\r\n        const path = window.currntPath ? window.currntPath : this.props.path;\r\n        if (\r\n            this.props.keywords === \"\" &&\r\n            window.location.pathname.toLowerCase().startsWith(\"/home\")\r\n        ) {\r\n            window.fileList[\"openFileList\"]();\r\n            const enqueFiles = files\r\n                // 不上传Mac下的布局文件 .DS_Store\r\n                .filter((file) => {\r\n                    const isDsStore = file.name.toLowerCase() === \".ds_store\";\r\n                    if (isDsStore) {\r\n                        up.removeFile(file);\r\n                    }\r\n                    return !isDsStore;\r\n                })\r\n                .map((file) => {\r\n                    const source = file.getSource();\r\n                    if (source.relativePath && source.relativePath !== \"\") {\r\n                        file.path = basename(\r\n                            pathJoin([path, source.relativePath])\r\n                        );\r\n                        window.pathCache[file.id] = basename(\r\n                            pathJoin([path, source.relativePath])\r\n                        );\r\n                    } else {\r\n                        window.pathCache[file.id] = path;\r\n                        file.path = path;\r\n                    }\r\n                    return file;\r\n                });\r\n            window.fileList[\"enQueue\"](enqueFiles);\r\n        } else {\r\n            window.plupload.each(files, (files) => {\r\n                up.removeFile(files);\r\n            });\r\n        }\r\n    };\r\n\r\n    UNSAFE_componentWillReceiveProps({ isScriptLoaded, isScriptLoadSucceed }) {\r\n        if (isScriptLoaded && !this.props.isScriptLoaded) {\r\n            // load finished\r\n            if (isScriptLoadSucceed) {\r\n                if (loaded) {\r\n                    return;\r\n                }\r\n                loaded = true;\r\n                const user = Auth.GetUser();\r\n                this.uploader = window.Qiniu.uploader({\r\n                    runtimes: \"html5\",\r\n                    browse_button: [\"pickfiles\", \"pickfolder\"],\r\n                    container: \"container\",\r\n                    drop_element: \"container\",\r\n                    max_file_size:\r\n                        user.policy.maxSize === \"0.00mb\"\r\n                            ? 0\r\n                            : user.policy.maxSize,\r\n                    dragdrop: true,\r\n                    chunk_size: this.getChunkSize(user.policy.saveType),\r\n                    filters: {\r\n                        mime_types:\r\n                            user.policy.allowedType === null ||\r\n                            user.policy.allowedType.length === 0\r\n                                ? []\r\n                                : [\r\n                                      {\r\n                                          title: \"files\",\r\n                                          extensions: user.policy.allowedType.join(\r\n                                              \",\"\r\n                                          ),\r\n                                      },\r\n                                  ],\r\n                    },\r\n                    // iOS不能多选？\r\n                    multi_selection: true,\r\n                    uptoken_url: \"/api/v3/file/upload/credential\",\r\n                    uptoken: user.policy.saveType === \"local\" ? \"token\" : null,\r\n                    domain: \"s\",\r\n                    max_retries: 0,\r\n                    get_new_uptoken: true,\r\n                    auto_start: true,\r\n                    log_level: 5,\r\n                    init: {\r\n                        FilesAdded: this.fileAdd,\r\n\r\n                        // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n                        BeforeUpload: function () {},\r\n                        QueueChanged: (up) => {\r\n                            this.setState({ queued: up.total.queued });\r\n                        },\r\n                        UploadProgress: (up, file) => {\r\n                            window.fileList[\"updateStatus\"](file);\r\n                        },\r\n                        UploadComplete: (up, file) => {\r\n                            if (file.length === 0) {\r\n                                return;\r\n                            }\r\n                            console.log(\r\n                                \"UploadComplete\",\r\n                                file[0].status,\r\n                                file[0]\r\n                            );\r\n                            for (let i = 0; i < file.length; i++) {\r\n                                if (file[i].status === 5) {\r\n                                    window.fileList[\"setComplete\"](file[i]);\r\n                                }\r\n                            }\r\n                            // 无异步操作的策略，直接刷新\r\n                            if (\r\n                                user.policy.saveType !== \"onedrive\" &&\r\n                                user.policy.saveType !== \"cos\"\r\n                            ) {\r\n                                this.props.refreshFileList();\r\n                                this.props.refreshStorage();\r\n                            }\r\n                        },\r\n                        Fresh: () => {\r\n                            this.props.refreshFileList();\r\n                            this.props.refreshStorage();\r\n                        },\r\n                        // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n                        FileUploaded: function () {},\r\n                        Error: (up, err, errTip) => {\r\n                            window.fileList[\"openFileList\"]();\r\n                            window.fileList[\"setError\"](err.file, errTip);\r\n                        },\r\n                        // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n                        FilesRemoved: () => {},\r\n                    },\r\n                });\r\n                // this.fileList[\"openFileList\"]();\r\n            } else this.onError();\r\n        }\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onError() {}\r\n\r\n    openFileList = () => {\r\n        window.fileList[\"openFileList\"]();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <FileList\r\n                    inRef={this.setRef.bind(this)}\r\n                    cancelUpload={this.cancelUpload.bind(this)}\r\n                    reQueue={this.reQueue.bind(this)}\r\n                />\r\n                {this.props.keywords === \"\" && (\r\n                    <UploadButton\r\n                        Queued={this.state.queued}\r\n                        openFileList={this.openFileList}\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst Uploader = connect(mapStateToProps, mapDispatchToProps, null, {\r\n    forwardRef: true,\r\n})(uploaderLoader()(UploaderComponent));\r\n\r\nexport default Uploader;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\nfunction registerValidSW(swUrl, config) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then((registration) => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing;\r\n                if (installingWorker == null) {\r\n                    return;\r\n                }\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === \"installed\") {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the updated precached content has been fetched,\r\n                            // but the previous service worker will still serve the older\r\n                            // content until all client tabs are closed.\r\n                            console.log(\r\n                                \"New content is available and will be used when all \" +\r\n                                    \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n                            );\r\n\r\n                            // Execute callback\r\n                            if (config && config.onUpdate) {\r\n                                config.onUpdate(registration);\r\n                            }\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log(\"Content is cached for offline use.\");\r\n\r\n                            // Execute callback\r\n                            if (config && config.onSuccess) {\r\n                                config.onSuccess(registration);\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error during service worker registration:\", error);\r\n        });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl)\r\n        .then((response) => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            const contentType = response.headers.get(\"content-type\");\r\n            if (\r\n                response.status === 404 ||\r\n                (contentType != null &&\r\n                    contentType.indexOf(\"javascript\") === -1)\r\n            ) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then((registration) => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log(\r\n                \"No internet connection found. App is running in offline mode.\"\r\n            );\r\n        });\r\n}\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === \"localhost\" ||\r\n        // [::1] is the IPv6 localhost address.\r\n        window.location.hostname === \"[::1]\" ||\r\n        // 127.0.0.1/8 is considered localhost for IPv4.\r\n        window.location.hostname.match(\r\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n        )\r\n);\r\n\r\nexport function register(config) {\r\n    if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        window.addEventListener(\"load\", () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Let's check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl, config);\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\r\n                        \"This web app is being served cache-first by a service \" +\r\n                            \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n                    );\r\n                });\r\n            } else {\r\n                // Is not localhost. Just register service worker\r\n                registerValidSW(swUrl, config);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function unregister() {\r\n    if (\"serviceWorker\" in navigator) {\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n            registration.unregister();\r\n        });\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport Auth from \"./Auth\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nfunction AuthRoute({ children, ...rest }) {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={({ location }) =>\r\n                Auth.Check(rest.isLogin) ? (\r\n                    children\r\n                ) : (\r\n                    <Redirect\r\n                        to={{\r\n                            pathname: \"/login\",\r\n                            state: { from: location },\r\n                        }}\r\n                    />\r\n                )\r\n            }\r\n        />\r\n    );\r\n}\r\n\r\nexport default AuthRoute;\r\n","import React from \"react\";\r\nimport { Facebook } from \"react-content-loader\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    loader: {\r\n        width: \"80%\",\r\n        [theme.breakpoints.up(\"md\")]: {\r\n            width: \" 50%\",\r\n        },\r\n\r\n        marginTop: 30,\r\n    },\r\n}));\r\n\r\nconst MyLoader = (props) => {\r\n    return (\r\n        <Facebook\r\n            backgroundColor={props.dark ? \"#333\" : \"#f5f6f7\"}\r\n            foregroundColor={props.dark ? \"#636363\" : \"#eee\"}\r\n            className={props.className}\r\n        />\r\n    );\r\n};\r\n\r\nfunction PageLoading() {\r\n    const theme = useTheme();\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                textAlign: \"center\",\r\n            }}\r\n        >\r\n            <MyLoader\r\n                dark={theme.palette.type === \"dark\"}\r\n                className={classes.loader}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PageLoading;\r\n","import React from \"react\";\r\nimport SentimentVeryDissatisfiedIcon from \"@material-ui/icons/SentimentVeryDissatisfied\";\r\nimport { lighten, makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n        fontSize: \"160px\",\r\n    },\r\n    emptyContainer: {\r\n        bottom: \"0\",\r\n        height: \"300px\",\r\n        margin: \"50px auto\",\r\n        width: \"300px\",\r\n        color: lighten(theme.palette.text.disabled, 0.4),\r\n        textAlign: \"center\",\r\n        paddingTop: \"20px\",\r\n    },\r\n    emptyInfoBig: {\r\n        fontSize: \"25px\",\r\n        color: lighten(theme.palette.text.disabled, 0.4),\r\n    },\r\n    ads:{\r\n        width: '100%',\r\n        height: 90,\r\n        maxHeight: 90,\r\n        textAlign: \"center\",\r\n        marginTop: \"1.5rem\"\r\n    }\r\n}));\r\n\r\nexport default function Notice(props) {\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.emptyContainer}>\r\n            <SentimentVeryDissatisfiedIcon className={classes.icon} />\r\n            <div className={classes.emptyInfoBig}>{props.msg}</div>\r\n            <div className={classes.ads}>\r\n                <a href={\"https://ask.bilnn.com/\"} target=\"_blank\" rel=\"noopener noreferrer\"><img src={\"https://img30.360buyimg.com/ddfilesass/jfs/t1/200482/12/2151/21063/6110957aEdce92772/60486672694033de.jpg\"} /></a>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import {\r\n    setSiteConfig,\r\n    toggleSnackbar,\r\n    enableLoadUploader,\r\n    changeViewMethod,\r\n} from \"../actions/index\";\r\nimport { fixUrlHash } from \"../utils/index\";\r\nimport API from \"./Api\";\r\nimport Auth from \"./Auth\";\r\nimport pathHelper from \"../utils/page\";\r\n\r\nconst initUserConfig = (siteConfig) => {\r\n    if (siteConfig.user !== undefined && !siteConfig.user.anonymous) {\r\n        const themes = JSON.parse(siteConfig.themes);\r\n        const user = siteConfig.user;\r\n        delete siteConfig.user;\r\n\r\n        //更换用户自定配色\r\n        if (\r\n            user[\"preferred_theme\"] !== \"\" &&\r\n            themes[user[\"preferred_theme\"]] !== undefined\r\n        ) {\r\n            siteConfig.theme = themes[user[\"preferred_theme\"]];\r\n        }\r\n\r\n        // 更新登录态\r\n        Auth.authenticate(user);\r\n    }\r\n    if (siteConfig.user !== undefined && siteConfig.user.anonymous) {\r\n        Auth.SetUser(siteConfig.user);\r\n    }\r\n    return siteConfig;\r\n};\r\n\r\nexport const InitSiteConfig = (rawStore) => {\r\n    // 从缓存获取默认配置\r\n    const configCache = JSON.parse(localStorage.getItem(\"siteConfigCache\"));\r\n    if (configCache != null) {\r\n        rawStore.siteConfig = configCache;\r\n    }\r\n    // 检查是否有path参数\r\n    //const url = new URL(window.location.href);\r\n\r\n    const reg = new RegExp(\"(^|&)\" + \"path\" + \"=([^&]*)(&|$)\",\"i\"); \r\n    const r = window.location.search.substr(1).match(reg); \r\n    const c = r!=null ? decodeURIComponent(r[2]) : null; \r\n\r\n    rawStore.navigator.path = c === null ? \"/\" : c;\r\n    // 初始化用户个性配置\r\n    rawStore.siteConfig = initUserConfig(rawStore.siteConfig);\r\n\r\n    // 更改站点标题\r\n    document.title = rawStore.siteConfig.title;\r\n    return rawStore;\r\n};\r\n\r\nexport function enableUploaderLoad() {\r\n    // 开启上传组件加载\r\n    const user = Auth.GetUser();\r\n    window.policyType = user !== null ? user.policy.saveType : \"local\";\r\n    window.uploadConfig = user !== null ? user.policy : {};\r\n    window.pathCache = [];\r\n}\r\n\r\nexport async function UpdateSiteConfig(store) {\r\n    API.get(\"/site/config\")\r\n        .then(function (response) {\r\n            const themes = JSON.parse(response.data.themes);\r\n            response.data.theme = themes[response.data.defaultTheme];\r\n            response.data = initUserConfig(response.data);\r\n            store.dispatch(setSiteConfig(response.data));\r\n            localStorage.setItem(\r\n                \"siteConfigCache\",\r\n                JSON.stringify(response.data)\r\n            );\r\n\r\n            // 偏爱的列表样式\r\n            const preferListMethod = Auth.GetPreference(\"view_method\");\r\n            if (preferListMethod) {\r\n                store.dispatch(changeViewMethod(preferListMethod));\r\n            } else {\r\n                if (pathHelper.isSharePage(window.location.pathname)) {\r\n                    store.dispatch(\r\n                        changeViewMethod(response.data.share_view_method)\r\n                    );\r\n                } else {\r\n                    store.dispatch(\r\n                        changeViewMethod(response.data.home_view_method)\r\n                    );\r\n                }\r\n            }\r\n        })\r\n        .catch(function (error) {\r\n            store.dispatch(\r\n                toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"无法加载站点配置：\" + error.message,\r\n                    \"error\"\r\n                )\r\n            );\r\n        })\r\n        .then(function () {\r\n            enableUploaderLoad(store);\r\n            store.dispatch(enableLoadUploader());\r\n        });\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useLocation } from \"react-router\";\r\nimport { makeStyles, Link } from \"@material-ui/core\";\r\nimport pageHelper from \"../../utils/page\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    icp: {\r\n        padding: \"8px 24px\",\r\n        position: \"absolute\",\r\n        bottom: 0,\r\n    },\r\n}));\r\n\r\nexport const ICPFooter = () => {\r\n    const siteICPId = useSelector((state) => state.siteConfig.siteICPId);\r\n    const classes = useStyles();\r\n    const location = useLocation();\r\n    const [show, setShow] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // 只在分享和登录界面显示\r\n        const isSharePage = pageHelper.isSharePage(location.pathname);\r\n        const isLoginPage = pageHelper.isLoginPage(location.pathname);\r\n        setShow(siteICPId && (isSharePage || isLoginPage));\r\n    }, [siteICPId, location]);\r\n\r\n    if (!show) {\r\n        return <></>;\r\n    }\r\n    return (\r\n        <div className={classes.icp}>\r\n            {`备案号: `}\r\n            <Link\r\n                href=\"https://beian.miit.gov.cn/\"\r\n                rel=\"noopener noreferrer\"\r\n                target=\"_blank\"\r\n            >\r\n                {siteICPId}\r\n            </Link>\r\n        </div>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport ContentLoader from \"react-content-loader\";\r\n\r\nconst MyLoader = () => (\r\n    <ContentLoader\r\n        height={80}\r\n        width={200}\r\n        speed={2}\r\n        primaryColor=\"#f3f3f3\"\r\n        secondaryColor=\"#e4e4e4\"\r\n    >\r\n        <rect x=\"4\" y=\"4\" rx=\"7\" ry=\"7\" width=\"392\" height=\"116\" />\r\n    </ContentLoader>\r\n);\r\n\r\nfunction captchaPlacholder() {\r\n    return <MyLoader />;\r\n}\r\n\r\nexport default captchaPlacholder;\r\n","import React, {\r\n    forwardRef,\r\n    useCallback,\r\n    useEffect,\r\n    useRef,\r\n    useState,\r\n} from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../actions\";\r\nimport API from \"../middleware/Api\";\r\nimport { FormControl, Input, InputLabel } from \"@material-ui/core\";\r\nimport Placeholder from \"../component/Placeholder/Captcha\";\r\nimport { defaultValidate, useStyle } from \"./useCaptcha\";\r\n\r\nconst NormalCaptcha = forwardRef(function NormalCaptcha(\r\n    { captchaRef, setLoading },\r\n    ref\r\n) {\r\n    const classes = useStyle();\r\n\r\n    const [captcha, setCaptcha] = useState(\"\");\r\n    const [captchaData, setCaptchaData] = useState(null);\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const refreshCaptcha = () => {\r\n        API.get(\"/site/captcha\")\r\n            .then((response) => {\r\n                setCaptchaData(response.data);\r\n                setLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"无法加载验证码：\" + error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        ref.current = refreshCaptcha;\r\n        refreshCaptcha();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        captchaRef.current.captchaCode = captcha;\r\n    }, [captcha]);\r\n\r\n    return (\r\n        <div className={classes.captchaContainer}>\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n                <InputLabel htmlFor=\"captcha\">验证码</InputLabel>\r\n                <Input\r\n                    name=\"captcha\"\r\n                    onChange={(e) => setCaptcha(e.target.value)}\r\n                    type=\"text\"\r\n                    id=\"captcha\"\r\n                    value={captcha}\r\n                    autoComplete\r\n                />\r\n            </FormControl>{\" \"}\r\n            <div>\r\n                {captchaData === null && (\r\n                    <div className={classes.captchaPlaceholder}>\r\n                        <Placeholder />\r\n                    </div>\r\n                )}\r\n                {captchaData !== null && (\r\n                    <img\r\n                        src={captchaData}\r\n                        alt=\"captcha\"\r\n                        onClick={refreshCaptcha}\r\n                    />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default function useNormalCaptcha(captchaRefreshRef, setLoading) {\r\n    const isValidate = useRef({\r\n        isValidate: true,\r\n    });\r\n\r\n    const captchaParamsRef = useRef({\r\n        captchaCode: \"\",\r\n    });\r\n\r\n    const CaptchaRender = useCallback(\r\n        function Normal() {\r\n            return (\r\n                <NormalCaptcha\r\n                    captchaRef={captchaParamsRef}\r\n                    ref={captchaRefreshRef}\r\n                    setLoading={setLoading}\r\n                />\r\n            );\r\n        },\r\n        [captchaParamsRef, captchaRefreshRef, setLoading]\r\n    );\r\n\r\n    return {\r\n        isValidate,\r\n        validate: defaultValidate,\r\n        captchaParamsRef,\r\n        CaptchaRender,\r\n    };\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default class ReCAPTCHA extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.handleExpired = this.handleExpired.bind(this);\r\n        this.handleErrored = this.handleErrored.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleRecaptchaRef = this.handleRecaptchaRef.bind(this);\r\n    }\r\n\r\n    getValue() {\r\n        if (this.props.grecaptcha && this._widgetId !== undefined) {\r\n            return this.props.grecaptcha.getResponse(this._widgetId);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getWidgetId() {\r\n        if (this.props.grecaptcha && this._widgetId !== undefined) {\r\n            return this._widgetId;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    execute() {\r\n        const { grecaptcha } = this.props;\r\n\r\n        if (grecaptcha && this._widgetId !== undefined) {\r\n            return grecaptcha.execute(this._widgetId);\r\n        } else {\r\n            this._executeRequested = true;\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        if (this.props.grecaptcha && this._widgetId !== undefined) {\r\n            this.props.grecaptcha.reset(this._widgetId);\r\n        }\r\n    }\r\n\r\n    handleExpired() {\r\n        if (this.props.onExpired) {\r\n            this.props.onExpired();\r\n        } else {\r\n            this.handleChange(null);\r\n        }\r\n    }\r\n\r\n    handleErrored() {\r\n        if (this.props.onErrored) this.props.onErrored();\r\n    }\r\n\r\n    handleChange(token) {\r\n        if (this.props.onChange) this.props.onChange(token);\r\n    }\r\n\r\n    explicitRender() {\r\n        if (\r\n            this.props.grecaptcha &&\r\n            this.props.grecaptcha.render &&\r\n            this._widgetId === undefined\r\n        ) {\r\n            const wrapper = document.createElement(\"div\");\r\n            this._widgetId = this.props.grecaptcha.render(wrapper, {\r\n                sitekey: this.props.sitekey,\r\n                callback: this.handleChange,\r\n                theme: this.props.theme,\r\n                type: this.props.type,\r\n                tabindex: this.props.tabindex,\r\n                \"expired-callback\": this.handleExpired,\r\n                \"error-callback\": this.handleErrored,\r\n                size: this.props.size,\r\n                stoken: this.props.stoken,\r\n                hl: this.props.hl,\r\n                badge: this.props.badge,\r\n            });\r\n            this.captcha.appendChild(wrapper);\r\n        }\r\n        if (\r\n            this._executeRequested &&\r\n            this.props.grecaptcha &&\r\n            this._widgetId !== undefined\r\n        ) {\r\n            this._executeRequested = false;\r\n            this.execute();\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.explicitRender();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.explicitRender();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this._widgetId !== undefined) {\r\n            this.delayOfCaptchaIframeRemoving();\r\n            this.reset();\r\n        }\r\n    }\r\n\r\n    delayOfCaptchaIframeRemoving() {\r\n        const temporaryNode = document.createElement(\"div\");\r\n        document.body.appendChild(temporaryNode);\r\n        temporaryNode.style.display = \"none\";\r\n\r\n        // move of the recaptcha to a temporary node\r\n        while (this.captcha.firstChild) {\r\n            temporaryNode.appendChild(this.captcha.firstChild);\r\n        }\r\n\r\n        // delete the temporary node after reset will be done\r\n        setTimeout(() => {\r\n            document.body.removeChild(temporaryNode);\r\n        }, 5000);\r\n    }\r\n\r\n    handleRecaptchaRef(elem) {\r\n        this.captcha = elem;\r\n    }\r\n\r\n    render() {\r\n        // consume properties owned by the reCATPCHA, pass the rest to the div so the user can style it.\r\n        /* eslint-disable no-unused-vars */\r\n        /* eslint-disable @typescript-eslint/no-unused-vars */\r\n        const {\r\n            sitekey,\r\n            onChange,\r\n            theme,\r\n            type,\r\n            tabindex,\r\n            onExpired,\r\n            onErrored,\r\n            size,\r\n            stoken,\r\n            grecaptcha,\r\n            badge,\r\n            hl,\r\n            ...childProps\r\n        } = this.props;\r\n        /* eslint-enable no-unused-vars */\r\n        return <div {...childProps} ref={this.handleRecaptchaRef} />;\r\n    }\r\n}\r\n\r\nReCAPTCHA.displayName = \"ReCAPTCHA\";\r\nReCAPTCHA.propTypes = {\r\n    sitekey: PropTypes.string.isRequired,\r\n    onChange: PropTypes.func,\r\n    grecaptcha: PropTypes.object,\r\n    theme: PropTypes.oneOf([\"dark\", \"light\"]),\r\n    type: PropTypes.oneOf([\"image\", \"audio\"]),\r\n    tabindex: PropTypes.number,\r\n    onExpired: PropTypes.func,\r\n    onErrored: PropTypes.func,\r\n    size: PropTypes.oneOf([\"compact\", \"normal\", \"invisible\"]),\r\n    stoken: PropTypes.string,\r\n    hl: PropTypes.string,\r\n    badge: PropTypes.oneOf([\"bottomright\", \"bottomleft\", \"inline\"]),\r\n};\r\nReCAPTCHA.defaultProps = {\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    onChange: () => {},\r\n    theme: \"light\",\r\n    type: \"image\",\r\n    tabindex: 0,\r\n    size: \"normal\",\r\n    badge: \"bottomright\",\r\n};\r\n","import ReCAPTCHA from \"./ReCaptchaWrapper\";\r\nimport makeAsyncScriptLoader from \"react-async-script\";\r\n\r\nconst callbackName = \"onloadcallback\";\r\nconst globalName = \"grecaptcha\";\r\n\r\nfunction getURL() {\r\n    const hostname = \"recaptcha.net\";\r\n    return `https://${hostname}/recaptcha/api.js?onload=${callbackName}&render=explicit`;\r\n}\r\n\r\nexport default makeAsyncScriptLoader(getURL, {\r\n    callbackName,\r\n    globalName,\r\n})(ReCAPTCHA);\r\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { FormControl } from \"@material-ui/core\";\r\nimport ReCaptcha from \"../component/Login/ReCaptcha\";\r\nimport { defaultValidate, useStyle } from \"./useCaptcha\";\r\n\r\nconst Recaptcha = ({ captchaRef, setLoading }) => {\r\n    const classes = useStyle();\r\n\r\n    const [captcha, setCaptcha] = useState(\"\");\r\n\r\n    const reCaptchaKey = useSelector(\r\n        (state) => state.siteConfig.captcha_ReCaptchaKey\r\n    );\r\n\r\n    useEffect(() => {\r\n        captchaRef.current.captchaCode = captcha;\r\n    }, [captcha]);\r\n\r\n    useEffect(() => setLoading(false), []);\r\n\r\n    return (\r\n        <div className={classes.captchaContainer}>\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n                <div>\r\n                    <ReCaptcha\r\n                        style={{\r\n                            display: \"inline-block\",\r\n                        }}\r\n                        sitekey={reCaptchaKey}\r\n                        onChange={(value) => setCaptcha(value)}\r\n                        id=\"captcha\"\r\n                        name=\"captcha\"\r\n                    />\r\n                </div>\r\n            </FormControl>{\" \"}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default function useRecaptcha(setLoading) {\r\n    const isValidate = useRef({\r\n        isValidate: true,\r\n    });\r\n\r\n    const captchaParamsRef = useRef({\r\n        captchaCode: \"\",\r\n    });\r\n\r\n    const CaptchaRender = useCallback(\r\n        function RecaptchaRender() {\r\n            return (\r\n                <Recaptcha\r\n                    captchaRef={captchaParamsRef}\r\n                    setLoading={setLoading}\r\n                />\r\n            );\r\n        },\r\n        [captchaParamsRef, setLoading]\r\n    );\r\n\r\n    return {\r\n        isValidate,\r\n        validate: defaultValidate,\r\n        captchaParamsRef,\r\n        CaptchaRender,\r\n    };\r\n}\r\n","import React, { forwardRef, useCallback, useRef } from \"react\";\r\nimport Script from \"react-load-script\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst TCaptcha = forwardRef(function TCaptcha(\r\n    { captchaRef, setLoading, isValidateRef, submitRef },\r\n    ref\r\n) {\r\n    const appid = useSelector(\r\n        (state) => state.siteConfig.tcaptcha_captcha_app_id\r\n    );\r\n    const onLoad = () => {\r\n        try {\r\n            ref.current = new window.TencentCaptcha(appid, function (res) {\r\n                if (res.ret === 0) {\r\n                    captchaRef.current.ticket = res.ticket;\r\n                    captchaRef.current.randstr = res.randstr;\r\n\r\n                    isValidateRef.current.isValidate = true;\r\n                    submitRef.current.submit();\r\n                    console.log(submitRef);\r\n                } else {\r\n                    submitRef.current.setLoading(false);\r\n                }\r\n            });\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n        setLoading(false);\r\n    };\r\n    return (\r\n        <Script\r\n            url={\"https://ssl.captcha.qq.com/TCaptcha.js\"}\r\n            onLoad={onLoad}\r\n        />\r\n    );\r\n});\r\n\r\nexport default function useTCaptcha(setLoading) {\r\n    const isValidate = useRef({\r\n        isValidate: false,\r\n    });\r\n    const captchaParamsRef = useRef({\r\n        ticket: \"\",\r\n        randstr: \"\",\r\n    });\r\n    const submitRef = useRef({\r\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n        submit: () => {},\r\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n        setLoading: () => {},\r\n    });\r\n\r\n    const captchaRef = useRef();\r\n\r\n    const CaptchaRender = useCallback(\r\n        function TCaptchaRender() {\r\n            return (\r\n                <TCaptcha\r\n                    captchaRef={captchaParamsRef}\r\n                    setLoading={setLoading}\r\n                    isValidateRef={isValidate}\r\n                    submitRef={submitRef}\r\n                    ref={captchaRef}\r\n                />\r\n            );\r\n        },\r\n        [captchaParamsRef, setLoading, isValidate, submitRef, captchaRef]\r\n    );\r\n\r\n    return {\r\n        isValidate: isValidate,\r\n        validate: (submit, setLoading) => {\r\n            submitRef.current.submit = submit;\r\n            submitRef.current.setLoading = setLoading;\r\n            captchaRef.current.show();\r\n        },\r\n        captchaParamsRef,\r\n        CaptchaRender,\r\n    };\r\n}\r\n","import { useSelector } from \"react-redux\";\r\nimport { useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport useNormalCaptcha from \"./normal\";\r\nimport useRecaptcha from \"./recaptcha\";\r\nimport useTCaptcha from \"./tcaptcha\";\r\n\r\nexport const useStyle = makeStyles((theme) => ({\r\n    captchaContainer: {\r\n        display: \"flex\",\r\n        marginTop: \"10px\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"block\",\r\n        },\r\n    },\r\n}));\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars,@typescript-eslint/no-empty-function\r\nexport const defaultValidate = (submit, setLoading) => {};\r\n\r\nexport const useCaptcha = () => {\r\n    const captchaType = useSelector((state) => state.siteConfig.captcha_type);\r\n\r\n    const [captchaLoading, setCaptchaLoading] = useState(true);\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    const captchaRefreshRef = useRef(() => {});\r\n\r\n    const normal = useNormalCaptcha(captchaRefreshRef, setCaptchaLoading);\r\n    const recaptcha = useRecaptcha(setCaptchaLoading);\r\n    const tcaptcha = useTCaptcha(setCaptchaLoading);\r\n\r\n    switch (captchaType) {\r\n        case \"normal\":\r\n            return { ...normal, captchaRefreshRef, captchaLoading };\r\n        case \"recaptcha\":\r\n            return { ...recaptcha, captchaRefreshRef, captchaLoading };\r\n        case \"tcaptcha\":\r\n            return { ...tcaptcha, captchaRefreshRef, captchaLoading };\r\n        default:\r\n            return { ...normal, captchaRefreshRef, captchaLoading };\r\n    }\r\n};\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n    Avatar,\r\n    Button,\r\n    Divider,\r\n    FormControl,\r\n    Input,\r\n    InputLabel,\r\n    Link,\r\n    makeStyles,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport {\r\n    applyThemes,\r\n    setSessionStatus,\r\n    toggleSnackbar,\r\n} from \"../../actions/index\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport API from \"../../middleware/Api\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport { bufferDecode, bufferEncode } from \"../../utils/index\";\r\nimport { enableUploaderLoad } from \"../../middleware/Init\";\r\nimport { Fingerprint, VpnKey } from \"@material-ui/icons\";\r\nimport VpnIcon from \"@material-ui/icons/VpnKeyOutlined\";\r\nimport { useLocation } from \"react-router\";\r\nimport { ICPFooter } from \"../Common/ICPFooter\";\r\nimport { useCaptcha } from \"../../hooks/useCaptcha\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"110px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            width: 400,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: 110,\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        padding: `${theme.spacing(2)}px ${theme.spacing(3)}px ${theme.spacing(\r\n            3\r\n        )}px`,\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: \"100%\", // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    link: {\r\n        marginTop: \"20px\",\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    captchaContainer: {\r\n        display: \"flex\",\r\n        marginTop: \"10px\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"block\",\r\n        },\r\n    },\r\n    captchaPlaceholder: {\r\n        width: 200,\r\n    },\r\n    buttonContainer: {\r\n        display: \"flex\",\r\n    },\r\n    authnLink: {\r\n        textAlign: \"center\",\r\n        marginTop: 16,\r\n    },\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction LoginForm() {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [pwd, setPwd] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [useAuthn, setUseAuthn] = useState(false);\r\n    const [twoFA, setTwoFA] = useState(false);\r\n    const [faCode, setFACode] = useState(\"\");\r\n\r\n    const loginCaptcha = useSelector((state) => state.siteConfig.loginCaptcha);\r\n    const title = useSelector((state) => state.siteConfig.title);\r\n    const QQLogin = useSelector((state) => state.siteConfig.QQLogin);\r\n    const authn = useSelector((state) => state.siteConfig.authn);\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const ApplyThemes = useCallback((theme) => dispatch(applyThemes(theme)), [\r\n        dispatch,\r\n    ]);\r\n    const SetSessionStatus = useCallback(\r\n        (status) => dispatch(setSessionStatus(status)),\r\n        [dispatch]\r\n    );\r\n\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const {\r\n        captchaLoading,\r\n        isValidate,\r\n        validate,\r\n        CaptchaRender,\r\n        captchaRefreshRef,\r\n        captchaParamsRef,\r\n    } = useCaptcha();\r\n    const query = useQuery();\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setEmail(query.get(\"username\"));\r\n    }, [location]);\r\n\r\n    const getCookie =(name)=> {\r\n        const strcookie = document.cookie;//获取cookie字符串\r\n            const arrcookie = strcookie.split(\"; \");//分割\r\n            //遍历匹配\r\n            for ( let i = 0; i < arrcookie.length; i++) {\r\n                const arr = arrcookie[i].split(\"=\");\r\n                if (arr[0] == name){\r\n                    return unescape(arr[1]);\r\n                }\r\n            }\r\n        return null;\r\n    }\r\n\r\n    const GetQueryString =(name)=> {\r\n        const reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\",\"i\"); \r\n        const r = window.location.search.substr(1).match(reg); \r\n        if (r!=null) return (r[2]); return \"\"; \r\n    }\r\n\r\n    const afterLogin = (data) => {\r\n        Auth.authenticate(data);\r\n\r\n        // 设置用户主题色\r\n        if (data[\"preferred_theme\"] !== \"\") {\r\n            ApplyThemes(data[\"preferred_theme\"]);\r\n        }\r\n        enableUploaderLoad();\r\n\r\n        // 设置登录状态\r\n        SetSessionStatus(true);\r\n        const backurl = GetQueryString(\"backurl\");\r\n        if (backurl==\"\"){\r\n            history.push(\"/home\");\r\n        }else{\r\n            const backurl_path = backurl.split(\".\");\r\n            if (backurl_path[1]!=\"bilnn\"){\r\n                history.push(\"/home\");\r\n            }else{\r\n                window.location.href = decodeURIComponent(backurl)+\"?token=\"+getCookie(\"token\");\r\n            } \r\n        }\r\n        ToggleSnackbar(\"top\", \"right\", \"登录成功\", \"success\");\r\n\r\n        localStorage.removeItem(\"siteConfigCache\");\r\n    };\r\n\r\n    const authnLogin = (e) => {\r\n        e.preventDefault();\r\n        if (!navigator.credentials) {\r\n            ToggleSnackbar(\"top\", \"right\", \"当前浏览器或环境不支持\", \"warning\");\r\n\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        API.get(\"/user/authn/\" + email)\r\n            .then((response) => {\r\n                const credentialRequestOptions = response.data;\r\n                console.log(credentialRequestOptions);\r\n                credentialRequestOptions.publicKey.challenge = bufferDecode(\r\n                    credentialRequestOptions.publicKey.challenge\r\n                );\r\n                credentialRequestOptions.publicKey.allowCredentials.forEach(\r\n                    function (listItem) {\r\n                        listItem.id = bufferDecode(listItem.id);\r\n                    }\r\n                );\r\n\r\n                return navigator.credentials.get({\r\n                    publicKey: credentialRequestOptions.publicKey,\r\n                });\r\n            })\r\n            .then((assertion) => {\r\n                const authData = assertion.response.authenticatorData;\r\n                const clientDataJSON = assertion.response.clientDataJSON;\r\n                const rawId = assertion.rawId;\r\n                const sig = assertion.response.signature;\r\n                const userHandle = assertion.response.userHandle;\r\n\r\n                return API.post(\r\n                    \"/user/authn/finish/\" + email,\r\n                    JSON.stringify({\r\n                        id: assertion.id,\r\n                        rawId: bufferEncode(rawId),\r\n                        type: assertion.type,\r\n                        response: {\r\n                            authenticatorData: bufferEncode(authData),\r\n                            clientDataJSON: bufferEncode(clientDataJSON),\r\n                            signature: bufferEncode(sig),\r\n                            userHandle: bufferEncode(userHandle),\r\n                        },\r\n                    })\r\n                );\r\n            })\r\n            .then((response) => {\r\n                afterLogin(response.data);\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"warning\");\r\n            })\r\n            .then(() => {\r\n                setLoading(false);\r\n            });\r\n    };\r\n\r\n    const login = (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        if (!isValidate.current.isValidate && loginCaptcha) {\r\n            validate(() => login(e), setLoading);\r\n            return;\r\n        }\r\n        API.post(\"/user/session\", {\r\n            userName: email,\r\n            Password: pwd,\r\n            ...captchaParamsRef.current,\r\n        })\r\n            .then((response) => {\r\n                setLoading(false);\r\n                if (response.rawData.code === 203) {\r\n                    setTwoFA(true);\r\n                } else {\r\n                    afterLogin(response.data);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false);\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"warning\");\r\n                captchaRefreshRef.current();\r\n            });\r\n    };\r\n\r\n    const initQQLogin = () => {\r\n        setLoading(true);\r\n        const backurl = GetQueryString(\"backurl\");\r\n        API.post(\"/user/qq?backurl=\"+backurl)\r\n            .then((response) => {\r\n                window.location.href = response.data;\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false);\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"warning\");\r\n            });\r\n    };\r\n\r\n    const twoFALogin = (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        API.post(\"/user/2fa\", {\r\n            code: faCode,\r\n        })\r\n            .then((response) => {\r\n                setLoading(false);\r\n                afterLogin(response.data);\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false);\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"warning\");\r\n            });\r\n    };\r\n\r\n    let _QQLogin = QQLogin;\r\n    if(getCookie(\"thisapp\")==\"ok\"){\r\n        _QQLogin = false;\r\n    }\r\n\r\n    return (\r\n        <div className={classes.layout}>\r\n            {!twoFA && (\r\n                <>\r\n                    <Paper className={classes.paper}>\r\n                        <Avatar className={classes.avatar}>\r\n                            <LockOutlinedIcon />\r\n                        </Avatar>\r\n                        <Typography component=\"h1\" variant=\"h5\">\r\n                            登录 {title}\r\n                        </Typography>\r\n                        {!useAuthn && (\r\n                            <form className={classes.form} onSubmit={login}>\r\n                                <FormControl margin=\"normal\" required fullWidth>\r\n                                    <InputLabel htmlFor=\"email\">\r\n                                        电子邮箱\r\n                                    </InputLabel>\r\n                                    <Input\r\n                                        id=\"email\"\r\n                                        type=\"email\"\r\n                                        name=\"email\"\r\n                                        onChange={(e) =>\r\n                                            setEmail(e.target.value)\r\n                                        }\r\n                                        autoComplete\r\n                                        value={email}\r\n                                        autoFocus\r\n                                    />\r\n                                </FormControl>\r\n                                <FormControl margin=\"normal\" required fullWidth>\r\n                                    <InputLabel htmlFor=\"password\">\r\n                                        密码\r\n                                    </InputLabel>\r\n                                    <Input\r\n                                        name=\"password\"\r\n                                        onChange={(e) => setPwd(e.target.value)}\r\n                                        type=\"password\"\r\n                                        id=\"password\"\r\n                                        value={pwd}\r\n                                        autoComplete\r\n                                    />\r\n                                </FormControl>\r\n                                {loginCaptcha && <CaptchaRender />}\r\n                                {_QQLogin && (\r\n                                    <div className={classes.buttonContainer}>\r\n                                        <Button\r\n                                            type=\"submit\"\r\n                                            variant=\"contained\"\r\n                                            color=\"primary\"\r\n                                            disabled={loading}\r\n                                            className={classes.submit}\r\n                                        >\r\n                                            登录\r\n                                        </Button>\r\n                                        <Button\r\n                                            variant=\"contained\"\r\n                                            color=\"secondary\"\r\n                                            style={{ marginLeft: \"10px\" }}\r\n                                            disabled={loading}\r\n                                            className={classes.submit}\r\n                                            onClick={initQQLogin}\r\n                                        >\r\n                                            使用QQ登录\r\n                                        </Button>\r\n                                    </div>\r\n                                )}\r\n                                {!_QQLogin && (\r\n                                    <Button\r\n                                        type=\"submit\"\r\n                                        fullWidth\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        disabled={loading}\r\n                                        className={classes.submit}\r\n                                    >\r\n                                        登录\r\n                                    </Button>\r\n                                )}\r\n                            </form>\r\n                        )}\r\n                        {useAuthn && (\r\n                            <form className={classes.form}>\r\n                                <FormControl margin=\"normal\" required fullWidth>\r\n                                    <InputLabel htmlFor=\"email\">\r\n                                        电子邮箱\r\n                                    </InputLabel>\r\n                                    <Input\r\n                                        id=\"email\"\r\n                                        type=\"email\"\r\n                                        name=\"email\"\r\n                                        onChange={(e) =>\r\n                                            setEmail(e.target.value)\r\n                                        }\r\n                                        autoComplete\r\n                                        value={email}\r\n                                        autoFocus\r\n                                    />\r\n                                </FormControl>\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    fullWidth\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    disabled={\r\n                                        loading ||\r\n                                        (loginCaptcha ? captchaLoading : false)\r\n                                    }\r\n                                    onClick={authnLogin}\r\n                                    className={classes.submit}\r\n                                >\r\n                                    下一步\r\n                                </Button>\r\n                            </form>\r\n                        )}\r\n                        <Divider />\r\n                        <div className={classes.link}>\r\n                            <div>\r\n                                <Link href={\"/forget\"}>忘记密码</Link>\r\n                            </div>\r\n                            <div>\r\n                                <Link href={\"/signup\"}>注册账号</Link>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ICPFooter />\r\n                    </Paper>\r\n\r\n                    {authn && (\r\n                        <div className={classes.authnLink}>\r\n                            <Button\r\n                                color=\"primary\"\r\n                                onClick={() => setUseAuthn(!useAuthn)}\r\n                            >\r\n                                {!useAuthn && (\r\n                                    <>\r\n                                        <Fingerprint\r\n                                            style={{\r\n                                                marginRight: 8,\r\n                                            }}\r\n                                        />\r\n                                        使用外部验证器登录\r\n                                    </>\r\n                                )}\r\n                                {useAuthn && (\r\n                                    <>\r\n                                        <VpnKey\r\n                                            style={{\r\n                                                marginRight: 8,\r\n                                            }}\r\n                                        />\r\n                                        使用密码登录\r\n                                    </>\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n            {twoFA && (\r\n                <Paper className={classes.paper}>\r\n                    <Avatar className={classes.avatar}>\r\n                        <VpnIcon />\r\n                    </Avatar>\r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        二步验证\r\n                    </Typography>\r\n                    <form className={classes.form} onSubmit={twoFALogin}>\r\n                        <FormControl margin=\"normal\" required fullWidth>\r\n                            <InputLabel htmlFor=\"code\">\r\n                                请输入六位二步验证代码\r\n                            </InputLabel>\r\n                            <Input\r\n                                id=\"code\"\r\n                                type=\"number\"\r\n                                name=\"code\"\r\n                                onChange={(event) =>\r\n                                    setFACode(event.target.value)\r\n                                }\r\n                                autoComplete\r\n                                value={faCode}\r\n                                autoFocus\r\n                            />\r\n                        </FormControl>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            fullWidth\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            disabled={loading}\r\n                            className={classes.submit}\r\n                        >\r\n                            继续登录\r\n                        </Button>{\" \"}\r\n                    </form>{\" \"}\r\n                    <Divider />\r\n                </Paper>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoginForm;\r\n","import * as actions from \"./action\";\r\nimport * as reducers from \"./reducer\";\r\n\r\nexport default {\r\n    actions,\r\n    reducers,\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport classNames from \"classnames\";\r\nimport MoreIcon from \"@material-ui/icons/MoreHoriz\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    expandMore: {\r\n        color: \"#8d8d8d\",\r\n    },\r\n    active: {\r\n        boxShadow: \"0 0 0 2px \" + theme.palette.primary.light,\r\n    },\r\n    button: {\r\n        textTransform: \"none\",\r\n    },\r\n}));\r\n\r\nexport default function PathButton(props) {\r\n    const inputRef = React.useRef(null);\r\n\r\n    const [{ canDrop, isOver }, drop] = useDrop({\r\n        accept: \"object\",\r\n        drop: () => {\r\n            if (props.more) {\r\n                inputRef.current.click();\r\n            } else {\r\n                return {\r\n                    folder: {\r\n                        id: -1,\r\n                        path: props.path,\r\n                        name: props.folder === \"/\" ? \"\" : props.folder,\r\n                    },\r\n                };\r\n            }\r\n        },\r\n        collect: (monitor) => ({\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop(),\r\n        }),\r\n    });\r\n\r\n    const isActive = canDrop && isOver;\r\n\r\n    useEffect(() => {\r\n        if (props.more && isActive) {\r\n            inputRef.current.click();\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [isActive]);\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <span onClick={props.onClick} ref={inputRef}>\r\n            <Button\r\n                ref={drop}\r\n                className={classNames(\r\n                    {\r\n                        [classes.active]: isActive,\r\n                    },\r\n                    classes.button\r\n                )}\r\n                component=\"span\"\r\n                title={props.title}\r\n            >\r\n                {props.more && <MoreIcon />}\r\n                {!props.more && (\r\n                    <>\r\n                        {props.folder}\r\n                        {props.last && (\r\n                            <ExpandMore className={classes.expandMore} />\r\n                        )}\r\n                    </>\r\n                )}\r\n            </Button>\r\n        </span>\r\n    );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\nimport { MenuItem, ListItemIcon, ListItemText } from \"@material-ui/core\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport classNames from \"classnames\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    active: {\r\n        border: \"2px solid \" + theme.palette.primary.light,\r\n    },\r\n}));\r\n\r\nexport default function DropDownItem(props) {\r\n    const [{ canDrop, isOver }, drop] = useDrop({\r\n        accept: \"object\",\r\n        drop: () => {\r\n            console.log({\r\n                folder: {\r\n                    id: -1,\r\n                    path: props.path,\r\n                    name: props.folder === \"/\" ? \"\" : props.folder,\r\n                },\r\n            });\r\n        },\r\n        collect: (monitor) => ({\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop(),\r\n        }),\r\n    });\r\n\r\n    const isActive = canDrop && isOver;\r\n\r\n    useEffect(() => {\r\n        props.setActiveStatus(props.id, isActive);\r\n        // eslint-disable-next-line\r\n    }, [isActive]);\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <MenuItem\r\n            ref={drop}\r\n            className={classNames({\r\n                [classes.active]: isActive,\r\n            })}\r\n            onClick={(e) => props.navigateTo(e, props.id)}\r\n        >\r\n            <ListItemIcon>\r\n                <FolderIcon />\r\n            </ListItemIcon>\r\n            <ListItemText primary={props.folder} />\r\n        </MenuItem>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport DropDownItem from \"./DropDownItem\";\r\n\r\nexport default function DropDown(props) {\r\n    let timer;\r\n    let first = props.folders.length;\r\n    const status = [];\r\n    for (let index = 0; index < props.folders.length; index++) {\r\n        status[index] = false;\r\n    }\r\n\r\n    const setActiveStatus = (id, value) => {\r\n        status[id] = value;\r\n        if (value) {\r\n            clearTimeout(timer);\r\n        } else {\r\n            let shouldClose = true;\r\n            status.forEach((element) => {\r\n                if (element) {\r\n                    shouldClose = false;\r\n                }\r\n            });\r\n            if (shouldClose) {\r\n                if (first <= 0) {\r\n                    timer = setTimeout(() => {\r\n                        props.onClose();\r\n                    }, 100);\r\n                } else {\r\n                    first--;\r\n                }\r\n            }\r\n        }\r\n        console.log(status);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {props.folders.map((folder, id) => (\r\n                // eslint-disable-next-line react/jsx-key\r\n                <DropDownItem\r\n                    path={\"/\" + props.folders.slice(0, id).join(\"/\")}\r\n                    navigateTo={props.navigateTo}\r\n                    id={id}\r\n                    setActiveStatus={setActiveStatus}\r\n                    folder={folder}\r\n                />\r\n            ))}\r\n        </>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport RightIcon from \"@material-ui/icons/KeyboardArrowRight\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport NewFolderIcon from \"@material-ui/icons/CreateNewFolder\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport {\r\n    navigateTo,\r\n    navigateUp,\r\n    setNavigatorError,\r\n    setNavigatorLoadingStatus,\r\n    refreshFileList,\r\n    setSelectedTarget,\r\n    openCreateFolderDialog,\r\n    openShareDialog,\r\n    drawerToggleAction,\r\n    openCompressDialog,\r\n} from \"../../../actions/index\";\r\nimport explorer from \"../../../redux/explorer\";\r\nimport API from \"../../../middleware/Api\";\r\nimport { setCookie, setGetParameter, fixUrlHash } from \"../../../utils/index\";\r\nimport {\r\n    withStyles,\r\n    Divider,\r\n    Menu,\r\n    MenuItem,\r\n    ListItemIcon,\r\n} from \"@material-ui/core\";\r\nimport PathButton from \"./PathButton\";\r\nimport DropDown from \"./DropDown\";\r\nimport pathHelper from \"../../../utils/page\";\r\nimport classNames from \"classnames\";\r\nimport Auth from \"../../../middleware/Auth\";\r\nimport { Archive } from \"@material-ui/icons\";\r\nimport { FilePlus } from \"mdi-material-ui\";\r\nimport { openCreateFileDialog } from \"../../../actions\";\r\nimport SubActions from \"./SubActions\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        path: state.navigator.path,\r\n        refresh: state.navigator.refresh,\r\n        drawerDesktopOpen: state.viewUpdate.open,\r\n        viewMethod: state.viewUpdate.explorerViewMethod,\r\n        keywords: state.explorer.keywords,\r\n        sortMethod: state.viewUpdate.sortMethod,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        navigateToPath: (path) => {\r\n            dispatch(navigateTo(path));\r\n        },\r\n        navigateUp: () => {\r\n            dispatch(navigateUp());\r\n        },\r\n        setNavigatorError: (status, msg) => {\r\n            dispatch(setNavigatorError(status, msg));\r\n        },\r\n        updateFileList: (list) => {\r\n            dispatch(explorer.actions.updateFileList(list));\r\n        },\r\n        setNavigatorLoadingStatus: (status) => {\r\n            dispatch(setNavigatorLoadingStatus(status));\r\n        },\r\n        refreshFileList: () => {\r\n            dispatch(refreshFileList());\r\n        },\r\n        setSelectedTarget: (target) => {\r\n            dispatch(setSelectedTarget(target));\r\n        },\r\n        openCreateFolderDialog: () => {\r\n            dispatch(openCreateFolderDialog());\r\n        },\r\n        openCreateFileDialog: () => {\r\n            dispatch(openCreateFileDialog());\r\n        },\r\n        openShareDialog: () => {\r\n            dispatch(openShareDialog());\r\n        },\r\n        handleDesktopToggle: (open) => {\r\n            dispatch(drawerToggleAction(open));\r\n        },\r\n        openCompressDialog: () => {\r\n            dispatch(openCompressDialog());\r\n        },\r\n    };\r\n};\r\n\r\nconst delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\nconst styles = (theme) => ({\r\n    container: {\r\n       /* [theme.breakpoints.down(\"xs\")]: {\r\n            display: \"none\",\r\n        },*/\r\n        height: \"49px\",\r\n        overflow: \"hidden\",\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n    navigatorContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    nav: {\r\n        height: \"48px\",\r\n        padding: \"5px 15px\",\r\n        display: \"flex\",\r\n    },\r\n    optionContainer: {\r\n        paddingTop: \"6px\",\r\n        marginRight: \"10px\",\r\n    },\r\n    rightIcon: {\r\n        marginTop: \"6px\",\r\n        verticalAlign: \"top\",\r\n        color: \"#868686\",\r\n    },\r\n    expandMore: {\r\n        color: \"#8d8d8d\",\r\n    },\r\n    roundBorder: {\r\n        borderRadius: \"4px 4px 0 0\",\r\n    },\r\n});\r\n\r\nclass NavigatorComponent extends Component {\r\n    keywords = \"\";\r\n    currentID = 0;\r\n\r\n    state = {\r\n        hidden: false,\r\n        hiddenFolders: [],\r\n        folders: [],\r\n        anchorEl: null,\r\n        hiddenMode: false,\r\n        anchorHidden: null,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.element = React.createRef();\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        //const url = new URL(fixUrlHash(window.location.href));\r\n        const reg = new RegExp(\"(^|&)\" + \"path\" + \"=([^&]*)(&|$)\",\"i\"); \r\n        const r = window.location.search.substr(1).match(reg); \r\n        const c = r!=null ? decodeURIComponent(r[2]) : null; \r\n        this.renderPath(c === null ? \"/\" : c);\r\n\r\n        if (!this.props.isShare) {\r\n            // 如果是在个人文件管理页，首次加载时打开侧边栏\r\n            this.props.handleDesktopToggle(true);\r\n        }\r\n\r\n        // 后退操作时重新导航\r\n        window.onpopstate = () => {\r\n            //const url = new URL(fixUrlHash(window.location.href));\r\n            const reg = new RegExp(\"(^|&)\" + \"path\" + \"=([^&]*)(&|$)\",\"i\"); \r\n            const r = window.location.search.substr(1).match(reg); \r\n            const c = r!=null ? decodeURIComponent(r[2]) : null; \r\n            if (c !== null) {\r\n                this.props.navigateToPath(c);\r\n            }\r\n        };\r\n    };\r\n\r\n    renderPath = (path = null) => {\r\n        this.props.setNavigatorError(false, null);\r\n        this.setState({\r\n            folders:\r\n                path !== null\r\n                    ? path.substr(1).split(\"/\")\r\n                    : this.props.path.substr(1).split(\"/\"),\r\n        });\r\n        let newPath = path !== null ? path : this.props.path;\r\n        const apiURL = this.props.share\r\n            ? \"/share/list/\" + this.props.share.key\r\n            : this.keywords === \"\"\r\n            ? \"/directory\"\r\n            : \"/file/search/\";\r\n        newPath = this.keywords === \"\" ? newPath : this.keywords;\r\n\r\n        API.get(apiURL + encodeURIComponent(newPath))\r\n            .then((response) => {\r\n                this.currentID = response.data.parent;\r\n                this.props.updateFileList(response.data.objects);\r\n                this.props.setNavigatorLoadingStatus(false);\r\n                const pathTemp = (path !== null\r\n                    ? path.substr(1).split(\"/\")\r\n                    : this.props.path.substr(1).split(\"/\")\r\n                ).join(\",\");\r\n                setCookie(\"path_tmp\", encodeURIComponent(pathTemp), 1);\r\n                if (this.keywords === \"\") {\r\n                    setGetParameter(\"path\", encodeURIComponent(newPath));\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                this.props.setNavigatorError(true, error);\r\n            });\r\n\r\n        this.checkOverFlow(true);\r\n    };\r\n\r\n    redresh = (path) => {\r\n        this.props.setNavigatorLoadingStatus(true);\r\n        this.props.setNavigatorError(false, \"error\");\r\n        this.renderPath(path);\r\n    };\r\n\r\n    UNSAFE_componentWillReceiveProps = (nextProps) => {\r\n        if (this.props.keywords !== nextProps.keywords) {\r\n            this.keywords = nextProps.keywords;\r\n        }\r\n        if (this.props.path !== nextProps.path) {\r\n            this.renderPath(nextProps.path);\r\n        }\r\n        if (this.props.refresh !== nextProps.refresh) {\r\n            this.redresh(nextProps.path);\r\n        }\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        this.props.updateFileList([]);\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevStates) => {\r\n        if (this.state.folders !== prevStates.folders) {\r\n            this.checkOverFlow(true);\r\n        }\r\n        if (this.props.drawerDesktopOpen !== prevProps.drawerDesktopOpen) {\r\n            delay(500).then(() => this.checkOverFlow());\r\n        }\r\n    };\r\n\r\n    checkOverFlow = (force) => {\r\n        if (this.overflowInitLock && !force) {\r\n            return;\r\n        }\r\n        if (this.element.current !== null) {\r\n            const hasOverflowingChildren =\r\n                this.element.current.offsetHeight <\r\n                    this.element.current.scrollHeight ||\r\n                this.element.current.offsetWidth <\r\n                    this.element.current.scrollWidth;\r\n            if (hasOverflowingChildren) {\r\n                this.overflowInitLock = true;\r\n                this.setState({ hiddenMode: true });\r\n            }\r\n            if (!hasOverflowingChildren && this.state.hiddenMode) {\r\n                this.setState({ hiddenMode: false });\r\n            }\r\n        }\r\n    };\r\n\r\n    navigateTo = (event, id) => {\r\n        if (id === this.state.folders.length - 1) {\r\n            //最后一个路径\r\n            this.setState({ anchorEl: event.currentTarget });\r\n        } else if (\r\n            id === -1 &&\r\n            this.state.folders.length === 1 &&\r\n            this.state.folders[0] === \"\"\r\n        ) {\r\n            this.props.refreshFileList();\r\n            this.handleClose();\r\n        } else if (id === -1) {\r\n            this.props.navigateToPath(\"/\");\r\n            this.handleClose();\r\n        } else {\r\n            this.props.navigateToPath(\r\n                \"/\" + this.state.folders.slice(0, id + 1).join(\"/\")\r\n            );\r\n            this.handleClose();\r\n        }\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({ anchorEl: null, anchorHidden: null, anchorSort: null });\r\n    };\r\n\r\n    showHiddenPath = (e) => {\r\n        this.setState({ anchorHidden: e.currentTarget });\r\n    };\r\n\r\n    performAction = (e) => {\r\n        this.handleClose();\r\n        if (e === \"refresh\") {\r\n            this.redresh();\r\n            return;\r\n        }\r\n        const presentPath = this.props.path.split(\"/\");\r\n        const newTarget = [\r\n            {\r\n                id: this.currentID,\r\n                type: \"dir\",\r\n                name: presentPath.pop(),\r\n                path: presentPath.length === 1 ? \"/\" : presentPath.join(\"/\"),\r\n            },\r\n        ];\r\n        //this.props.navitateUp();\r\n        switch (e) {\r\n            case \"share\":\r\n                this.props.setSelectedTarget(newTarget);\r\n                this.props.openShareDialog();\r\n                break;\r\n            case \"newfolder\":\r\n                this.props.openCreateFolderDialog();\r\n                break;\r\n            case \"compress\":\r\n                this.props.setSelectedTarget(newTarget);\r\n                this.props.openCompressDialog();\r\n                break;\r\n            case \"newFile\":\r\n                this.props.openCreateFileDialog();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const isHomePage = pathHelper.isHomePage(this.props.location.pathname);\r\n        const user = Auth.GetUser();\r\n\r\n        const presentFolderMenu = (\r\n            <Menu\r\n                id=\"presentFolderMenu\"\r\n                anchorEl={this.state.anchorEl}\r\n                open={Boolean(this.state.anchorEl)}\r\n                onClose={this.handleClose}\r\n                disableAutoFocusItem={true}\r\n            >\r\n                <MenuItem onClick={() => this.performAction(\"refresh\")}>\r\n                    <ListItemIcon>\r\n                        <RefreshIcon />\r\n                    </ListItemIcon>\r\n                    刷新\r\n                </MenuItem>\r\n                {this.props.keywords === \"\" && isHomePage && (\r\n                    <div>\r\n                        <Divider />\r\n                        <MenuItem onClick={() => this.performAction(\"share\")}>\r\n                            <ListItemIcon>\r\n                                <ShareIcon />\r\n                            </ListItemIcon>\r\n                            分享\r\n                        </MenuItem>\r\n                        {user.group.compress && (\r\n                            <MenuItem\r\n                                onClick={() => this.performAction(\"compress\")}\r\n                            >\r\n                                <ListItemIcon>\r\n                                    <Archive />\r\n                                </ListItemIcon>\r\n                                压缩\r\n                            </MenuItem>\r\n                        )}\r\n                        <Divider />\r\n                        <MenuItem\r\n                            onClick={() => this.performAction(\"newfolder\")}\r\n                        >\r\n                            <ListItemIcon>\r\n                                <NewFolderIcon />\r\n                            </ListItemIcon>\r\n                            创建文件夹\r\n                        </MenuItem>\r\n\r\n                        <MenuItem onClick={() => this.performAction(\"newFile\")}>\r\n                            <ListItemIcon>\r\n                                <FilePlus />\r\n                            </ListItemIcon>\r\n                            创建文件\r\n                        </MenuItem>\r\n                    </div>\r\n                )}\r\n            </Menu>\r\n        );\r\n\r\n        return (\r\n            <div\r\n                className={classNames(\r\n                    {\r\n                        [classes.roundBorder]: this.props.isShare,\r\n                    },\r\n                    classes.container\r\n                )}\r\n            >\r\n                <div className={classes.navigatorContainer}>\r\n                    <div className={classes.nav} ref={this.element}>\r\n                        <span>\r\n                            <PathButton\r\n                                folder=\"/\"\r\n                                path=\"/\"\r\n                                onClick={(e) => this.navigateTo(e, -1)}\r\n                            />\r\n                            <RightIcon className={classes.rightIcon} />\r\n                        </span>\r\n                        {this.state.hiddenMode && (\r\n                            <span>\r\n                                <PathButton\r\n                                    more\r\n                                    title=\"显示路径\"\r\n                                    onClick={this.showHiddenPath}\r\n                                />\r\n                                <Menu\r\n                                    id=\"hiddenPathMenu\"\r\n                                    anchorEl={this.state.anchorHidden}\r\n                                    open={Boolean(this.state.anchorHidden)}\r\n                                    onClose={this.handleClose}\r\n                                    disableAutoFocusItem={true}\r\n                                >\r\n                                    <DropDown\r\n                                        onClose={this.handleClose}\r\n                                        folders={this.state.folders.slice(\r\n                                            0,\r\n                                            -1\r\n                                        )}\r\n                                        navigateTo={this.navigateTo}\r\n                                    />\r\n                                </Menu>\r\n                                <RightIcon className={classes.rightIcon} />\r\n                                {/* <Button component=\"span\" onClick={(e)=>this.navigateTo(e,this.state.folders.length-1)}>\r\n                                    {this.state.folders.slice(-1)}  \r\n                                    <ExpandMore className={classes.expandMore}/>\r\n                                </Button> */}\r\n                                <PathButton\r\n                                    folder={this.state.folders.slice(-1)}\r\n                                    path={\r\n                                        \"/\" +\r\n                                        this.state.folders\r\n                                            .slice(0, -1)\r\n                                            .join(\"/\")\r\n                                    }\r\n                                    last={true}\r\n                                    onClick={(e) =>\r\n                                        this.navigateTo(\r\n                                            e,\r\n                                            this.state.folders.length - 1\r\n                                        )\r\n                                    }\r\n                                />\r\n                                {presentFolderMenu}\r\n                            </span>\r\n                        )}\r\n                        {!this.state.hiddenMode &&\r\n                            this.state.folders.map((folder, id, folders) => (\r\n                                <span key={id}>\r\n                                    {folder !== \"\" && (\r\n                                        <span>\r\n                                            <PathButton\r\n                                                folder={folder}\r\n                                                path={\r\n                                                    \"/\" +\r\n                                                    folders\r\n                                                        .slice(0, id)\r\n                                                        .join(\"/\")\r\n                                                }\r\n                                                last={id === folders.length - 1}\r\n                                                onClick={(e) =>\r\n                                                    this.navigateTo(e, id)\r\n                                                }\r\n                                            />\r\n                                            {id === folders.length - 1 &&\r\n                                                presentFolderMenu}\r\n                                            {id !== folders.length - 1 && (\r\n                                                <RightIcon\r\n                                                    className={\r\n                                                        classes.rightIcon\r\n                                                    }\r\n                                                />\r\n                                            )}\r\n                                        </span>\r\n                                    )}\r\n                                </span>\r\n                            ))}\r\n                    </div>\r\n                    <div className={classes.optionContainer}>\r\n                        <SubActions isSmall share={this.props.share} />\r\n                    </div>\r\n                </div>\r\n                <Divider />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nNavigatorComponent.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    path: PropTypes.string.isRequired,\r\n};\r\n\r\nconst Navigator = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(NavigatorComponent)));\r\n\r\nexport default Navigator;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n    withStyles,\r\n    ButtonBase,\r\n    Typography,\r\n    Tooltip,\r\n    fade,\r\n} from \"@material-ui/core\";\r\nimport TypeIcon from \"./TypeIcon\";\r\nimport { lighten } from \"@material-ui/core/styles\";\r\nimport CheckCircleRoundedIcon from \"@material-ui/icons/CheckCircleRounded\";\r\nimport statusHelper from \"../../utils/page\";\r\nimport Grow from \"@material-ui/core/Grow\";\r\nimport { Folder } from \"@material-ui/icons\";\r\n\r\nconst styles = (theme) => ({\r\n    container: {\r\n        padding: \"7px\",\r\n    },\r\n\r\n    selected: {\r\n        \"&:hover\": {\r\n            border: \"1px solid #d0d0d0\",\r\n        },\r\n        backgroundColor: fade(\r\n            theme.palette.primary.main,\r\n            theme.palette.type === \"dark\" ? 0.3 : 0.18\r\n        ),\r\n    },\r\n    notSelected: {\r\n        \"&:hover\": {\r\n            backgroundColor: theme.palette.background.default,\r\n            border: \"1px solid #d0d0d0\",\r\n        },\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n\r\n    button: {\r\n        height: \"50px\",\r\n        border: \"1px solid \" + theme.palette.divider,\r\n        width: \"100%\",\r\n        borderRadius: \"6px\",\r\n        boxSizing: \"border-box\",\r\n        transition:\r\n            \"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms\",\r\n        display: \"flex\",\r\n        justifyContent: \"left\",\r\n        alignItems: \"initial\",\r\n    },\r\n    icon: {\r\n        margin: \"10px 10px 10px 16px\",\r\n        height: \"30px\",\r\n        minWidth: \"30px\",\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderRadius: \"90%\",\r\n        paddingTop: \"3px\",\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    folderNameSelected: {\r\n        color:\r\n            theme.palette.type === \"dark\" ? \"#fff\" : theme.palette.primary.dark,\r\n        fontWeight: \"500\",\r\n    },\r\n    folderNameNotSelected: {\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    folderName: {\r\n        marginTop: \"15px\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        overflow: \"hidden\",\r\n        marginRight: \"20px\",\r\n    },\r\n    checkIcon: {\r\n        color: theme.palette.primary.main,\r\n    },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        selected: state.explorer.selected,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = () => {\r\n    return {};\r\n};\r\n\r\nclass SmallIconCompoment extends Component {\r\n    state = {};\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const isSelected =\r\n            this.props.selected.findIndex((value) => {\r\n                return value === this.props.file;\r\n            }) !== -1;\r\n        const isMobile = statusHelper.isMobile();\r\n\r\n        return (\r\n            <ButtonBase\r\n                focusRipple\r\n                className={classNames(\r\n                    {\r\n                        [classes.selected]: isSelected,\r\n                        [classes.notSelected]: !isSelected,\r\n                    },\r\n                    classes.button\r\n                )}\r\n            >\r\n                <div\r\n                    onClick={this.props.onIconClick}\r\n                    className={classNames(classes.icon, {\r\n                        [classes.iconSelected]: isSelected,\r\n                        [classes.iconNotSelected]: !isSelected,\r\n                    })}\r\n                >\r\n                    {(!isSelected || !isMobile) && (\r\n                        <>\r\n                            {this.props.isFolder && <Folder />}\r\n                            {!this.props.isFolder && (\r\n                                <TypeIcon fileName={this.props.file.name} />\r\n                            )}\r\n                        </>\r\n                    )}\r\n                    {isSelected && isMobile && (\r\n                        <Grow in={isSelected && isMobile}>\r\n                            <CheckCircleRoundedIcon\r\n                                className={classes.checkIcon}\r\n                            />\r\n                        </Grow>\r\n                    )}\r\n                </div>\r\n                <Tooltip\r\n                    title={this.props.file.name}\r\n                    aria-label={this.props.file.name}\r\n                >\r\n                    <Typography\r\n                        className={classNames(classes.folderName, {\r\n                            [classes.folderNameSelected]: isSelected,\r\n                            [classes.folderNameNotSelected]: !isSelected,\r\n                        })}\r\n                        variant=\"body2\"\r\n                    >\r\n                        {this.props.file.name}\r\n                    </Typography>\r\n                </Tooltip>\r\n            </ButtonBase>\r\n        );\r\n    }\r\n}\r\n\r\nSmallIconCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    file: PropTypes.object.isRequired,\r\n};\r\n\r\nconst SmallIcon = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(SmallIconCompoment));\r\n\r\nexport default SmallIcon;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\nimport { LazyLoadImage } from \"react-lazy-load-image-component\";\r\nimport ContentLoader from \"react-content-loader\";\r\nimport { baseURL } from \"../../middleware/Api\";\r\nimport {\r\n    withStyles,\r\n    ButtonBase,\r\n    Typography,\r\n    Divider,\r\n    Tooltip,\r\n    fade,\r\n} from \"@material-ui/core\";\r\nimport TypeIcon from \"./TypeIcon\";\r\nimport { lighten } from \"@material-ui/core/styles\";\r\nimport { withRouter } from \"react-router\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport CheckCircleRoundedIcon from \"@material-ui/icons/CheckCircleRounded\";\r\nimport statusHelper from \"../../utils/page\";\r\nimport Grow from \"@material-ui/core/Grow\";\r\n\r\nconst styles = (theme) => ({\r\n    container: {\r\n        padding: \"7px\",\r\n    },\r\n\r\n    selected: {\r\n        \"&:hover\": {\r\n            border: \"1px solid #d0d0d0\",\r\n        },\r\n        backgroundColor: fade(\r\n            theme.palette.primary.main,\r\n            theme.palette.type === \"dark\" ? 0.3 : 0.18\r\n        ),\r\n    },\r\n\r\n    notSelected: {\r\n        \"&:hover\": {\r\n            backgroundColor: theme.palette.background.default,\r\n            border: \"1px solid #d0d0d0\",\r\n        },\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n\r\n    button: {\r\n        border: \"1px solid \" + theme.palette.divider,\r\n        width: \"100%\",\r\n        borderRadius: \"6px\",\r\n        boxSizing: \"border-box\",\r\n        transition:\r\n            \"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms\",\r\n        alignItems: \"initial\",\r\n        display: \"initial\",\r\n    },\r\n    folderNameSelected: {\r\n        color:\r\n            theme.palette.type === \"dark\" ? \"#fff\" : theme.palette.primary.dark,\r\n        fontWeight: \"500\",\r\n    },\r\n    folderNameNotSelected: {\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    folderName: {\r\n        marginTop: \"15px\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        overflow: \"hidden\",\r\n        marginRight: \"20px\",\r\n    },\r\n    preview: {\r\n        overflow: \"hidden\",\r\n        height: \"150px\",\r\n        width: \"100%\",\r\n        borderRadius: \"6px 6px 0 0\",\r\n        backgroundColor: theme.palette.background.default,\r\n    },\r\n    previewIcon: {\r\n        overflow: \"hidden\",\r\n        height: \"149px\",\r\n        width: \"100%\",\r\n        borderRadius: \"5px 5px 0 0\",\r\n        backgroundColor: theme.palette.background.paper,\r\n        paddingTop: \"50px\",\r\n    },\r\n    iconBig: {\r\n        fontSize: 50,\r\n    },\r\n    picPreview: {\r\n        objectFit: \"cover\",\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n    },\r\n    fileInfo: {\r\n        height: \"50px\",\r\n        display: \"flex\",\r\n    },\r\n    icon: {\r\n        margin: \"10px 10px 10px 16px\",\r\n        height: \"30px\",\r\n        minWidth: \"30px\",\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderRadius: \"90%\",\r\n        paddingTop: \"3px\",\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    hide: {\r\n        display: \"none\",\r\n    },\r\n    loadingAnimation: {\r\n        borderRadius: \"6px 6px 0 0\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n    },\r\n    shareFix: {\r\n        marginLeft: \"20px\",\r\n    },\r\n    checkIcon: {\r\n        color: theme.palette.primary.main,\r\n    },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        path: state.navigator.path,\r\n        selected: state.explorer.selected,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = () => {\r\n    return {};\r\n};\r\n\r\nclass FileIconCompoment extends Component {\r\n    static defaultProps = {\r\n        share: false,\r\n    };\r\n\r\n    state = {\r\n        loading: false,\r\n        showPicIcon: false,\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const isSelected =\r\n            this.props.selected.findIndex((value) => {\r\n                return value === this.props.file;\r\n            }) !== -1;\r\n        const isSharePage = pathHelper.isSharePage(\r\n            this.props.location.pathname\r\n        );\r\n        const isMobile = statusHelper.isMobile();\r\n\r\n        return (\r\n            <div className={classes.container}>\r\n                <ButtonBase\r\n                    focusRipple\r\n                    className={classNames(\r\n                        {\r\n                            [classes.selected]: isSelected,\r\n                            [classes.notSelected]: !isSelected,\r\n                        },\r\n                        classes.button\r\n                    )}\r\n                >\r\n                    {this.props.file.pic !== \"\" &&\r\n                        !this.state.showPicIcon &&\r\n                        this.props.file.pic !== \" \" &&\r\n                        this.props.file.pic !== \"null,null\" && (\r\n                            <div className={classes.preview}>\r\n                                <LazyLoadImage\r\n                                    className={classNames({\r\n                                        [classes.hide]: this.state.loading,\r\n                                        [classes.picPreview]: !this.state\r\n                                            .loading,\r\n                                    })}\r\n                                    src={\r\n                                        baseURL +\r\n                                        (isSharePage\r\n                                            ? \"/share/thumb/\" +\r\n                                              window.shareInfo.key +\r\n                                              \"/\" +\r\n                                              this.props.file.id +\r\n                                              \"?path=\" +\r\n                                              encodeURIComponent(\r\n                                                  this.props.file.path\r\n                                              )\r\n                                            : \"/file/thumb/\" +\r\n                                              this.props.file.id)\r\n                                    }\r\n                                    afterLoad={() =>\r\n                                        this.setState({ loading: false })\r\n                                    }\r\n                                    beforeLoad={() =>\r\n                                        this.setState({ loading: true })\r\n                                    }\r\n                                    onError={() =>\r\n                                        this.setState({ showPicIcon: true })\r\n                                    }\r\n                                />\r\n                                <ContentLoader\r\n                                    height={150}\r\n                                    width={170}\r\n                                    className={classNames(\r\n                                        {\r\n                                            [classes.hide]: !this.state.loading,\r\n                                        },\r\n                                        classes.loadingAnimation\r\n                                    )}\r\n                                >\r\n                                    <rect\r\n                                        x=\"0\"\r\n                                        y=\"0\"\r\n                                        width=\"100%\"\r\n                                        height=\"150\"\r\n                                    />\r\n                                </ContentLoader>\r\n                            </div>\r\n                        )}\r\n                    {(this.props.file.pic === \"\" ||\r\n                        this.state.showPicIcon ||\r\n                        this.props.file.pic === \" \" ||\r\n                        this.props.file.pic === \"null,null\") && (\r\n                        <div className={classes.previewIcon}>\r\n                            <TypeIcon\r\n                                className={classes.iconBig}\r\n                                fileName={this.props.file.name}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    {(this.props.file.pic === \"\" ||\r\n                        this.state.showPicIcon ||\r\n                        this.props.file.pic === \" \" ||\r\n                        this.props.file.pic === \"null,null\") && <Divider />}\r\n                    <div className={classes.fileInfo}>\r\n                        {!this.props.share && (\r\n                            <div\r\n                                onClick={this.props.onIconClick}\r\n                                className={classNames(classes.icon, {\r\n                                    [classes.iconSelected]: isSelected,\r\n                                    [classes.iconNotSelected]: !isSelected,\r\n                                })}\r\n                            >\r\n                                {(!isSelected || !isMobile) && (\r\n                                    <TypeIcon fileName={this.props.file.name} />\r\n                                )}\r\n                                {isSelected && isMobile && (\r\n                                    <Grow in={isSelected && isMobile}>\r\n                                        <CheckCircleRoundedIcon\r\n                                            className={classes.checkIcon}\r\n                                        />\r\n                                    </Grow>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                        <Tooltip\r\n                            title={this.props.file.name}\r\n                            aria-label={this.props.file.name}\r\n                        >\r\n                            <Typography\r\n                                variant=\"body2\"\r\n                                className={classNames(classes.folderName, {\r\n                                    [classes.folderNameSelected]: isSelected,\r\n                                    [classes.folderNameNotSelected]: !isSelected,\r\n                                    [classes.shareFix]: this.props.share,\r\n                                })}\r\n                            >\r\n                                {this.props.file.name}\r\n                            </Typography>\r\n                        </Tooltip>\r\n                    </div>\r\n                </ButtonBase>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nFileIconCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    file: PropTypes.object.isRequired,\r\n};\r\n\r\nconst FileIcon = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(FileIconCompoment)));\r\n\r\nexport default FileIcon;\r\n","import React from \"react\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n    ButtonBase,\r\n    Typography,\r\n    Tooltip,\r\n    makeStyles,\r\n    fade,\r\n} from \"@material-ui/core\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { lighten } from \"@material-ui/core/styles\";\r\nimport statusHelper from \"../../utils/page\";\r\nimport TypeIcon from \"./TypeIcon\";\r\nimport CheckCircleRoundedIcon from \"@material-ui/icons/CheckCircleRounded\";\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        padding: \"7px\",\r\n    },\r\n\r\n    selected: {\r\n        \"&:hover\": {\r\n            border: \"1px solid #d0d0d0\",\r\n        },\r\n        backgroundColor: fade(\r\n            theme.palette.primary.main,\r\n            theme.palette.type === \"dark\" ? 0.3 : 0.18\r\n        ),\r\n    },\r\n\r\n    notSelected: {\r\n        \"&:hover\": {\r\n            backgroundColor: theme.palette.background.default,\r\n            border: \"1px solid #d0d0d0\",\r\n        },\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n\r\n    button: {\r\n        height: \"50px\",\r\n        border: \"1px solid \" + theme.palette.divider,\r\n        width: \"100%\",\r\n        borderRadius: \"6px\",\r\n        boxSizing: \"border-box\",\r\n        transition:\r\n            \"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms\",\r\n        display: \"flex\",\r\n        justifyContent: \"left\",\r\n        alignItems: \"initial\",\r\n    },\r\n    icon: {\r\n        margin: \"10px 10px 10px 16px\",\r\n        height: \"30px\",\r\n        minWidth: \"30px\",\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderRadius: \"90%\",\r\n        paddingTop: \"3px\",\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    folderNameSelected: {\r\n        color:\r\n            theme.palette.type === \"dark\" ? \"#fff\" : theme.palette.primary.dark,\r\n        fontWeight: \"500\",\r\n    },\r\n    folderNameNotSelected: {\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    folderName: {\r\n        marginTop: \"15px\",\r\n        textOverflow: \"ellipsis\",\r\n        whiteSpace: \"nowrap\",\r\n        overflow: \"hidden\",\r\n        marginRight: \"20px\",\r\n    },\r\n    active: {\r\n        boxShadow: \"0 0 0 2px \" + theme.palette.primary.light,\r\n    },\r\n    checkIcon: {\r\n        color: theme.palette.primary.main,\r\n    },\r\n}));\r\n\r\nexport default function Folder({ folder, isActive, onIconClick }) {\r\n    const selected = useSelector((state) => state.explorer.selected);\r\n    const classes = useStyles();\r\n    const isMobile = statusHelper.isMobile();\r\n    const isSelected =\r\n        selected.findIndex((value) => {\r\n            return value === folder;\r\n        }) !== -1;\r\n\r\n    return (\r\n        <ButtonBase\r\n            focusRipple\r\n            className={classNames(\r\n                {\r\n                    [classes.selected]: isSelected,\r\n                    [classes.notSelected]: !isSelected,\r\n                    [classes.active]: isActive,\r\n                },\r\n                classes.button\r\n            )}\r\n        >\r\n            <div\r\n                onClick={onIconClick}\r\n                className={classNames(classes.icon, {\r\n                    [classes.iconSelected]: isSelected,\r\n                    [classes.iconNotSelected]: !isSelected,\r\n                })}\r\n            >\r\n                {(!isSelected || !isMobile) && <FolderIcon />}\r\n                {isSelected && isMobile && (\r\n                    <CheckCircleRoundedIcon className={classes.checkIcon} />\r\n                )}\r\n            </div>\r\n            <Tooltip title={folder.name} aria-label={folder.name}>\r\n                <Typography\r\n                    variant=\"body2\"\r\n                    className={classNames(classes.folderName, {\r\n                        [classes.folderNameSelected]: isSelected,\r\n                        [classes.folderNameNotSelected]: !isSelected,\r\n                    })}\r\n                >\r\n                    {folder.name}\r\n                </Typography>\r\n            </Tooltip>\r\n        </ButtonBase>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport SmallIcon from \"../SmallIcon\";\r\nimport FileIcon from \"../FileIcon\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport Folder from \"../Folder\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    dragging: {\r\n        width: \"200px\",\r\n    },\r\n    cardDragged: {\r\n        position: \"absolute\",\r\n        \"transform-origin\": \"bottom left\",\r\n    },\r\n}));\r\n\r\nconst diliverIcon = (object, viewMethod, classes) => {\r\n    if (object.type === \"dir\") {\r\n        return (\r\n            <div className={classes.dragging}>\r\n                <SmallIcon file={object} isFolder />\r\n            </div>\r\n        );\r\n    }\r\n    if (object.type === \"file\" && viewMethod === \"icon\") {\r\n        return (\r\n            <div className={classes.dragging}>\r\n                <FileIcon file={object} />\r\n            </div>\r\n        );\r\n    }\r\n    if (\r\n        (object.type === \"file\" && viewMethod === \"smallIcon\") ||\r\n        viewMethod === \"list\"\r\n    ) {\r\n        return (\r\n            <div className={classes.dragging}>\r\n                <SmallIcon file={object} />\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nconst Preview = (props) => {\r\n    const selected = useSelector((state) => state.explorer.selected);\r\n    const viewMethod = useSelector(\r\n        (state) => state.viewUpdate.explorerViewMethod\r\n    );\r\n    const classes = useStyles();\r\n    return (\r\n        <>\r\n            {selected.length === 0 &&\r\n                diliverIcon(props.object, viewMethod, classes)}\r\n            {selected.length > 0 && (\r\n                <>\r\n                    {selected.slice(0, 3).map((card, i) => (\r\n                        <div\r\n                            key={card.id}\r\n                            className={classes.cardDragged}\r\n                            style={{\r\n                                zIndex: selected.length - i,\r\n                                transform: `rotateZ(${-i * 2.5}deg)`,\r\n                            }}\r\n                        >\r\n                            {diliverIcon(card, viewMethod, classes)}\r\n                        </div>\r\n                    ))}\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\nexport default Preview;\r\n","import React from \"react\";\r\nimport { useDragLayer } from \"react-dnd\";\r\nimport Preview from \"./Preview\";\r\nimport { useSelector } from \"react-redux\";\r\nconst layerStyles = {\r\n    position: \"fixed\",\r\n    pointerEvents: \"none\",\r\n    zIndex: 100,\r\n    left: 0,\r\n    top: 0,\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n};\r\n\r\nfunction getItemStyles(\r\n    initialOffset,\r\n    currentOffset,\r\n    pointerOffset,\r\n    viewMethod\r\n) {\r\n    if (!initialOffset || !currentOffset) {\r\n        return {\r\n            display: \"none\",\r\n        };\r\n    }\r\n    let { x, y } = currentOffset;\r\n    if (viewMethod === \"list\") {\r\n        x += pointerOffset.x - initialOffset.x;\r\n        y += pointerOffset.y - initialOffset.y;\r\n    }\r\n\r\n    const transform = `translate(${x}px, ${y}px)`;\r\n    return {\r\n        opacity: 0.5,\r\n        transform,\r\n        WebkitTransform: transform,\r\n    };\r\n}\r\nconst CustomDragLayer = (props) => {\r\n    const {\r\n        itemType,\r\n        isDragging,\r\n        item,\r\n        initialOffset,\r\n        currentOffset,\r\n        pointerOffset,\r\n    } = useDragLayer((monitor) => ({\r\n        item: monitor.getItem(),\r\n        itemType: monitor.getItemType(),\r\n        initialOffset: monitor.getInitialSourceClientOffset(),\r\n        currentOffset: monitor.getSourceClientOffset(),\r\n        pointerOffset: monitor.getInitialClientOffset(),\r\n        isDragging: monitor.isDragging(),\r\n    }));\r\n    const viewMethod = useSelector(\r\n        (state) => state.viewUpdate.explorerViewMethod\r\n    );\r\n    function renderItem() {\r\n        switch (itemType) {\r\n            case \"object\":\r\n                return <Preview object={item.object} />;\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n    if (!isDragging) {\r\n        return null;\r\n    }\r\n    return (\r\n        <div style={layerStyles}>\r\n            <div\r\n                style={getItemStyles(\r\n                    initialOffset,\r\n                    currentOffset,\r\n                    pointerOffset,\r\n                    viewMethod\r\n                )}\r\n            >\r\n                {renderItem()}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default CustomDragLayer;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\nimport classNames from \"classnames\";\r\nimport { sizeToString } from \"../../utils/index\";\r\nimport {\r\n    withStyles,\r\n    TableCell,\r\n    TableRow,\r\n    Typography,\r\n    fade,\r\n} from \"@material-ui/core\";\r\nimport TypeIcon from \"./TypeIcon\";\r\nimport { lighten } from \"@material-ui/core/styles\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport { withRouter } from \"react-router\";\r\nimport KeyboardReturnIcon from \"@material-ui/icons/KeyboardReturn\";\r\nimport CheckCircleRoundedIcon from \"@material-ui/icons/CheckCircleRounded\";\r\nimport statusHelper from \"../../utils/page\";\r\nimport Grow from \"@material-ui/core/Grow\";\r\nimport dayjs from \"dayjs\";\r\nimport { formatLocalTime } from \"../../utils/datetime\";\r\n\r\nconst styles = (theme) => ({\r\n    selected: {\r\n        \"&:hover\": {},\r\n        backgroundColor: fade(theme.palette.primary.main, 0.18),\r\n    },\r\n\r\n    selectedShared: {\r\n        \"&:hover\": {},\r\n        backgroundColor: fade(theme.palette.primary.main, 0.18),\r\n    },\r\n\r\n    notSelected: {\r\n        \"&:hover\": {\r\n            backgroundColor: theme.palette.background.default,\r\n        },\r\n    },\r\n    icon: {\r\n        verticalAlign: \"middle\",\r\n        marginRight: \"20px\",\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    tableIcon: {\r\n        marginRight: \"20px\",\r\n        verticalAlign: \"middle\",\r\n    },\r\n    folderNameSelected: {\r\n        color:\r\n            theme.palette.type === \"dark\" ? \"#fff\" : theme.palette.primary.dark,\r\n        fontWeight: \"500\",\r\n        userSelect: \"none\",\r\n    },\r\n    folderNameNotSelected: {\r\n        color: theme.palette.text.secondary,\r\n        userSelect: \"none\",\r\n    },\r\n    folderName: {\r\n        marginRight: \"20px\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n    },\r\n    hideAuto: {\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"none\",\r\n        },\r\n    },\r\n    tableRow: {\r\n        padding: \"10px 16px\",\r\n    },\r\n    checkIcon: {\r\n        color: theme.palette.primary.main,\r\n    },\r\n    active: {\r\n        backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n    },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        selected: state.explorer.selected,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = () => {\r\n    return {};\r\n};\r\n\r\nclass TableRowCompoment extends Component {\r\n    state = {};\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const isShare = pathHelper.isSharePage(this.props.location.pathname);\r\n\r\n        let icon;\r\n        if (this.props.file.type === \"dir\") {\r\n            icon = <FolderIcon className={classes.icon} />;\r\n        } else if (this.props.file.type === \"up\") {\r\n            icon = <KeyboardReturnIcon className={classes.icon} />;\r\n        } else {\r\n            icon = (\r\n                <TypeIcon\r\n                    className={classes.tableIcon}\r\n                    fileName={this.props.file.name}\r\n                />\r\n            );\r\n        }\r\n        const isSelected =\r\n            this.props.selected.findIndex((value) => {\r\n                return value === this.props.file;\r\n            }) !== -1;\r\n        const isMobile = statusHelper.isMobile();\r\n\r\n        return (\r\n            <TableRow\r\n                ref={this.props.pref}\r\n                onContextMenu={this.props.contextMenu}\r\n                onClick={this.props.handleClick}\r\n                onDoubleClick={this.props.handleDoubleClick.bind(this)}\r\n                className={classNames({\r\n                    [classes.selected]: isSelected && !isShare,\r\n                    [classes.selectedShared]: isSelected && isShare,\r\n                    [classes.notSelected]: !isSelected,\r\n                    [classes.active]: this.props.isActive,\r\n                })}\r\n            >\r\n                <TableCell\r\n                    ref={this.props.dref}\r\n                    component=\"th\"\r\n                    scope=\"row\"\r\n                    className={classes.tableRow}\r\n                >\r\n                    <Typography\r\n                        variant=\"body2\"\r\n                        className={classNames(classes.folderName, {\r\n                            [classes.folderNameSelected]: isSelected,\r\n                            [classes.folderNameNotSelected]: !isSelected,\r\n                        })}\r\n                    >\r\n                        <div\r\n                            onClick={\r\n                                this.props.file.type !== \"up\"\r\n                                    ? this.props.onIconClick\r\n                                    : null\r\n                            }\r\n                        >\r\n                            {(!isSelected || !isMobile) && icon}\r\n                            {isSelected && isMobile && (\r\n                                <Grow in={isSelected && isMobile}>\r\n                                    <CheckCircleRoundedIcon\r\n                                        className={classNames(\r\n                                            classes.checkIcon,\r\n                                            classes.icon\r\n                                        )}\r\n                                    />\r\n                                </Grow>\r\n                            )}\r\n                        </div>\r\n                        {this.props.file.name}\r\n                    </Typography>\r\n                </TableCell>\r\n                <TableCell\r\n                    className={classNames(classes.hideAuto, classes.tableRow)}\r\n                >\r\n                    <Typography\r\n                        variant=\"body2\"\r\n                        className={classNames(classes.folderName, {\r\n                            [classes.folderNameSelected]: isSelected,\r\n                            [classes.folderNameNotSelected]: !isSelected,\r\n                        })}\r\n                    >\r\n                        {\" \"}\r\n                        {this.props.file.type !== \"dir\" &&\r\n                            this.props.file.type !== \"up\" &&\r\n                            sizeToString(this.props.file.size)}\r\n                    </Typography>\r\n                </TableCell>\r\n                <TableCell\r\n                    className={classNames(classes.hideAuto, classes.tableRow)}\r\n                >\r\n                    <Typography\r\n                        variant=\"body2\"\r\n                        className={classNames(classes.folderName, {\r\n                            [classes.folderNameSelected]: isSelected,\r\n                            [classes.folderNameNotSelected]: !isSelected,\r\n                        })}\r\n                    >\r\n                        {\" \"}\r\n                        {formatLocalTime(\r\n                            this.props.file.date,\r\n                            \"YYYY-MM-DD H:mm:ss\"\r\n                        )}\r\n                    </Typography>\r\n                </TableCell>\r\n            </TableRow>\r\n        );\r\n    }\r\n}\r\n\r\nTableRowCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    file: PropTypes.object.isRequired,\r\n};\r\n\r\nconst TableItem = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(TableRowCompoment)));\r\n\r\nexport default TableItem;\r\n","import React from \"react\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport Folder from \"../Folder\";\r\nimport classNames from \"classnames\";\r\nimport TableItem from \"../TableRow\";\r\nexport default function FolderDropWarpper({\r\n    isListView,\r\n    folder,\r\n    onIconClick,\r\n    contextMenu,\r\n    handleClick,\r\n    handleDoubleClick,\r\n    className,\r\n    pref,\r\n}) {\r\n    const [{ canDrop, isOver }, drop] = useDrop({\r\n        accept: \"object\",\r\n        drop: () => ({ folder }),\r\n        collect: (monitor) => ({\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop(),\r\n        }),\r\n    });\r\n    const isActive = canDrop && isOver;\r\n    if (!isListView) {\r\n        return (\r\n            <div ref={drop}>\r\n                <Folder\r\n                    folder={folder}\r\n                    onIconClick={onIconClick}\r\n                    isActive={isActive}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <TableItem\r\n            pref={pref}\r\n            dref={drop}\r\n            className={className}\r\n            onIconClick={onIconClick}\r\n            contextMenu={contextMenu}\r\n            handleClick={handleClick}\r\n            handleDoubleClick={handleDoubleClick}\r\n            file={folder}\r\n            isActive={isActive}\r\n        />\r\n    );\r\n}\r\n","import React, { useCallback, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n    changeContextMenu,\r\n    setSelectedTarget,\r\n    selectFile as selectFileAction,\r\n    navigateTo,\r\n    showImgPreivew,\r\n    openMusicDialog,\r\n    toggleSnackbar,\r\n    dragAndDrop,\r\n    openLoadingDialog,\r\n} from \"../../actions/index\";\r\nimport statusHelper from \"../../utils/page\";\r\nimport FileIcon from \"./FileIcon\";\r\nimport SmallIcon from \"./SmallIcon\";\r\nimport TableItem from \"./TableRow\";\r\nimport classNames from \"classnames\";\r\nimport { isPreviewable } from \"../../config\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { getEmptyImage } from \"react-dnd-html5-backend\";\r\nimport DropWarpper from \"./DnD/DropWarpper\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport { pathBack } from \"../../utils\";\r\nimport { openPreview } from \"../../actions\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    container: {\r\n        padding: \"7px\",\r\n    },\r\n    fixFlex: {\r\n        minWidth: 0,\r\n    },\r\n    dragging: {\r\n        opacity: 0.4,\r\n    },\r\n}));\r\n\r\nexport default function ObjectIcon(props) {\r\n    const path = useSelector((state) => state.navigator.path);\r\n    const selected = useSelector((state) => state.explorer.selected);\r\n    const viewMethod = useSelector(\r\n        (state) => state.viewUpdate.explorerViewMethod\r\n    );\r\n    const navigatorPath = useSelector((state) => state.navigator.path);\r\n    const location = useLocation();\r\n\r\n    const dispatch = useDispatch();\r\n    const ContextMenu = useCallback(\r\n        (type, open) => dispatch(changeContextMenu(type, open)),\r\n        [dispatch]\r\n    );\r\n    const SetSelectedTarget = useCallback(\r\n        (targets) => dispatch(setSelectedTarget(targets)),\r\n        [dispatch]\r\n    );\r\n\r\n    const NavitateTo = useCallback((targets) => dispatch(navigateTo(targets)), [\r\n        dispatch,\r\n    ]);\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const DragAndDrop = useCallback(\r\n        (source, target) => dispatch(dragAndDrop(source, target)),\r\n        [dispatch]\r\n    );\r\n    const OpenLoadingDialog = useCallback(\r\n        (text) => dispatch(openLoadingDialog(text)),\r\n        [dispatch]\r\n    );\r\n    const OpenPreview = useCallback(() => dispatch(openPreview()), [dispatch]);\r\n\r\n    const classes = useStyles();\r\n\r\n    const contextMenu = (e) => {\r\n        if (props.file.type === \"up\") {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        if (\r\n            selected.findIndex((value) => {\r\n                return value === props.file;\r\n            }) === -1\r\n        ) {\r\n            SetSelectedTarget([props.file]);\r\n        }\r\n        ContextMenu(\"file\", true);\r\n    };\r\n\r\n    const selectFile = (e) => {\r\n        dispatch(selectFileAction(props.file, e, props.index));\r\n    };\r\n    const enterFolder = () => {\r\n        NavitateTo(\r\n            path === \"/\" ? path + props.file.name : path + \"/\" + props.file.name\r\n        );\r\n    };\r\n    const handleClick = (e) => {\r\n        if (props.file.type === \"up\") {\r\n            NavitateTo(pathBack(navigatorPath));\r\n        }\r\n        if (\r\n            statusHelper.isMobile() ||\r\n            statusHelper.isSharePage(location.pathname)\r\n        ) {\r\n            selectFile(e);\r\n            if (props.file.type === \"dir\" && !e.ctrlKey) {\r\n                enterFolder();\r\n                return;\r\n            }\r\n        } else {\r\n            selectFile(e);\r\n        }\r\n    };\r\n\r\n    const handleDoubleClick = () => {\r\n        if (props.file.type === \"up\") {\r\n            return;\r\n        }\r\n        if (props.file.type === \"dir\") {\r\n            enterFolder();\r\n            return;\r\n        }\r\n        const isShare = statusHelper.isSharePage(location.pathname);\r\n        if (isShare) {\r\n            const user = Auth.GetUser();\r\n            if (!Auth.Check() && user && !user.group.shareDownload) {\r\n                ToggleSnackbar(\"top\", \"right\", \"请先登录\", \"warning\");\r\n                return;\r\n            }\r\n        }\r\n        if (window.shareInfo && !window.shareInfo.preview) {\r\n            OpenLoadingDialog(\"获取下载地址...\");\r\n            return;\r\n        }\r\n\r\n        OpenPreview();\r\n    };\r\n\r\n    const handleIconClick = (e) => {\r\n        if (statusHelper.isMobile()) {\r\n            e.stopPropagation();\r\n            e.ctrlKey = true;\r\n            selectFile(e);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const [{ isDragging }, drag, preview] = useDrag({\r\n        item: {\r\n            object: props.file,\r\n            type: \"object\",\r\n            selected: [...selected],\r\n            viewMethod: viewMethod,\r\n        },\r\n        end: (item, monitor) => {\r\n            const dropResult = monitor.getDropResult();\r\n            if (item && dropResult) {\r\n                if (dropResult.folder) {\r\n                    if (\r\n                        item.object.id !== dropResult.folder.id ||\r\n                        item.object.type !== dropResult.folder.type\r\n                    ) {\r\n                        DragAndDrop(item.object, dropResult.folder);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        canDrag: () => {\r\n            return (\r\n                !statusHelper.isMobile() &&\r\n                statusHelper.isHomePage(location.pathname)\r\n            );\r\n        },\r\n        collect: (monitor) => ({\r\n            isDragging: monitor.isDragging(),\r\n        }),\r\n    });\r\n\r\n    useEffect(() => {\r\n        preview(getEmptyImage(), { captureDraggingState: true });\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    if (viewMethod === \"list\") {\r\n        return (\r\n            <>\r\n                {props.file.type === \"dir\" && (\r\n                    <DropWarpper\r\n                        isListView={true}\r\n                        pref={drag}\r\n                        className={classNames(classes.container, {\r\n                            [classes.dragging]: isDragging,\r\n                        })}\r\n                        onIconClick={handleIconClick}\r\n                        contextMenu={contextMenu}\r\n                        handleClick={handleClick}\r\n                        handleDoubleClick={handleDoubleClick.bind(this)}\r\n                        folder={props.file}\r\n                    />\r\n                )}\r\n                {props.file.type !== \"dir\" && (\r\n                    <TableItem\r\n                        pref={drag}\r\n                        className={classNames(classes.container, {\r\n                            [classes.dragging]: isDragging,\r\n                        })}\r\n                        onIconClick={handleIconClick}\r\n                        contextMenu={contextMenu}\r\n                        handleClick={handleClick}\r\n                        handleDoubleClick={handleDoubleClick.bind(this)}\r\n                        file={props.file}\r\n                    />\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div\r\n            ref={drag}\r\n            className={classNames({\r\n                [classes.container]: viewMethod !== \"list\",\r\n                [classes.dragging]: isDragging,\r\n            })}\r\n        >\r\n            <div\r\n                className={classes.fixFlex}\r\n                onContextMenu={contextMenu}\r\n                onClick={handleClick}\r\n                onDoubleClick={handleDoubleClick.bind(this)}\r\n            >\r\n                {props.file.type === \"dir\" && viewMethod !== \"list\" && (\r\n                    <DropWarpper\r\n                        isListView={false}\r\n                        onIconClick={handleIconClick}\r\n                        folder={props.file}\r\n                    />\r\n                )}\r\n                {props.file.type === \"file\" && viewMethod === \"icon\" && (\r\n                    <FileIcon\r\n                        onIconClick={handleIconClick}\r\n                        ref={drag}\r\n                        file={props.file}\r\n                    />\r\n                )}\r\n                {props.file.type === \"file\" && viewMethod === \"smallIcon\" && (\r\n                    <SmallIcon\r\n                        onIconClick={handleIconClick}\r\n                        file={props.file}\r\n                    />\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    changeContextMenu,\r\n    setNavigatorLoadingStatus,\r\n    navigateTo,\r\n    openCreateFolderDialog,\r\n    openRenameDialog,\r\n    openMoveDialog,\r\n    openRemoveDialog,\r\n    openShareDialog,\r\n    showImgPreivew,\r\n    openMusicDialog,\r\n    toggleSnackbar,\r\n    openRemoteDownloadDialog,\r\n    openTorrentDownloadDialog,\r\n    openGetSourceDialog,\r\n    openCopyDialog,\r\n    openLoadingDialog,\r\n    setSelectedTarget,\r\n    openDecompressDialog,\r\n    refreshFileList,\r\n    openCompressDialog,\r\n    openCreateFileDialog,\r\n    openRelocateDialog,\r\n} from \"../../actions/index\";\r\nimport { isCompressFile, isPreviewable, isTorrent } from \"../../config\";\r\nimport { allowSharePreview } from \"../../utils/index\";\r\nimport UploadIcon from \"@material-ui/icons/CloudUpload\";\r\nimport DownloadIcon from \"@material-ui/icons/CloudDownload\";\r\nimport NewFolderIcon from \"@material-ui/icons/CreateNewFolder\";\r\nimport OpenFolderIcon from \"@material-ui/icons/FolderOpen\";\r\nimport FileCopyIcon from \"@material-ui/icons/FileCopy\";\r\nimport ShareIcon from \"@material-ui/icons/Share\";\r\nimport RenameIcon from \"@material-ui/icons/BorderColor\";\r\nimport MoveIcon from \"@material-ui/icons/Input\";\r\nimport LinkIcon from \"@material-ui/icons/InsertLink\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport OpenIcon from \"@material-ui/icons/OpenInNew\";\r\nimport { FilePlus, MagnetOn, Transfer } from \"mdi-material-ui\";\r\nimport {\r\n    withStyles,\r\n    Typography,\r\n    MenuItem,\r\n    Divider,\r\n    ListItemIcon,\r\n} from \"@material-ui/core\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport { Archive, InfoOutlined, Unarchive } from \"@material-ui/icons\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport { FolderUpload } from \"mdi-material-ui\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport { openPreview } from \"../../actions\";\r\nimport {\r\n    setSideBar,\r\n    toggleObjectInfoSidebar,\r\n} from \"../../redux/explorer/action\";\r\n\r\nconst styles = () => ({\r\n    propover: {},\r\n    divider: {\r\n        marginTop: 4,\r\n        marginBottom: 4,\r\n    },\r\n});\r\n\r\nconst StyledListItemIcon = withStyles({\r\n    root: {\r\n        minWidth: 38,\r\n    },\r\n})(ListItemIcon);\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        menuType: state.viewUpdate.contextType,\r\n        menuOpen: state.viewUpdate.contextOpen,\r\n        isMultiple: state.explorer.selectProps.isMultiple,\r\n        withFolder: state.explorer.selectProps.withFolder,\r\n        withFile: state.explorer.selectProps.withFile,\r\n        path: state.navigator.path,\r\n        selected: state.explorer.selected,\r\n        keywords: state.explorer.keywords,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        changeContextMenu: (type, open) => {\r\n            dispatch(changeContextMenu(type, open));\r\n        },\r\n        setNavigatorLoadingStatus: (status) => {\r\n            dispatch(setNavigatorLoadingStatus(status));\r\n        },\r\n        setSelectedTarget: (targets) => {\r\n            dispatch(setSelectedTarget(targets));\r\n        },\r\n        navigateTo: (path) => {\r\n            dispatch(navigateTo(path));\r\n        },\r\n        openCreateFolderDialog: () => {\r\n            dispatch(openCreateFolderDialog());\r\n        },\r\n        openCreateFileDialog: () => {\r\n            dispatch(openCreateFileDialog());\r\n        },\r\n        openRenameDialog: () => {\r\n            dispatch(openRenameDialog());\r\n        },\r\n        openMoveDialog: () => {\r\n            dispatch(openMoveDialog());\r\n        },\r\n        openRemoveDialog: () => {\r\n            dispatch(openRemoveDialog());\r\n        },\r\n        openShareDialog: () => {\r\n            dispatch(openShareDialog());\r\n        },\r\n        showImgPreivew: (first) => {\r\n            dispatch(showImgPreivew(first));\r\n        },\r\n        openMusicDialog: () => {\r\n            dispatch(openMusicDialog());\r\n        },\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n        openRemoteDownloadDialog: () => {\r\n            dispatch(openRemoteDownloadDialog());\r\n        },\r\n        openTorrentDownloadDialog: () => {\r\n            dispatch(openTorrentDownloadDialog());\r\n        },\r\n        openGetSourceDialog: () => {\r\n            dispatch(openGetSourceDialog());\r\n        },\r\n        openCopyDialog: () => {\r\n            dispatch(openCopyDialog());\r\n        },\r\n        openLoadingDialog: (text) => {\r\n            dispatch(openLoadingDialog(text));\r\n        },\r\n        openDecompressDialog: () => {\r\n            dispatch(openDecompressDialog());\r\n        },\r\n        openCompressDialog: () => {\r\n            dispatch(openCompressDialog());\r\n        },\r\n        refreshFileList: () => {\r\n            dispatch(refreshFileList());\r\n        },\r\n        openRelocateDialog: () => {\r\n            dispatch(openRelocateDialog());\r\n        },\r\n        openPreview: () => {\r\n            dispatch(openPreview());\r\n        },\r\n        toggleObjectInfoSidebar: (open) => {\r\n            dispatch(toggleObjectInfoSidebar(open));\r\n        },\r\n    };\r\n};\r\n\r\nclass ContextMenuCompoment extends Component {\r\n    X = 0;\r\n    Y = 0;\r\n\r\n    state = {};\r\n\r\n    componentDidMount = () => {\r\n        window.document.addEventListener(\"mousemove\", this.setPoint);\r\n    };\r\n\r\n    setPoint = (e) => {\r\n        this.Y = e.clientY;\r\n        this.X = e.clientX;\r\n    };\r\n\r\n    openArchiveDownload = () => {\r\n        this.props.changeContextMenu(\"file\", false);\r\n        this.props.openLoadingDialog(\"打包中...\");\r\n    };\r\n\r\n    openDownload = () => {\r\n        if (!allowSharePreview()) {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"未登录用户无法预览\",\r\n                \"warning\"\r\n            );\r\n            this.props.changeContextMenu(\"file\", false);\r\n            return;\r\n        }\r\n        this.props.changeContextMenu(\"file\", false);\r\n        this.props.openLoadingDialog(\"获取下载地址...\");\r\n    };\r\n\r\n    enterFolder = () => {\r\n        this.props.navigateTo(\r\n            this.props.path === \"/\"\r\n                ? this.props.path + this.props.selected[0].name\r\n                : this.props.path + \"/\" + this.props.selected[0].name\r\n        );\r\n    };\r\n\r\n    clickUpload = (id) => {\r\n        this.props.changeContextMenu(\"empty\", false);\r\n        const uploadButton = document.getElementsByClassName(id)[0];\r\n        if (document.body.contains(uploadButton)) {\r\n            uploadButton.click();\r\n        } else {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"上传组件还未加载完成\",\r\n                \"warning\"\r\n            );\r\n        }\r\n    };\r\n\r\n    // 暂时只对空白处右键菜单使用这个函数，疑似有bug会导致的一个菜单被默认选中。\r\n    // 相关issue： https://github.com/mui-org/material-ui/issues/23747\r\n    renderMenuItems = (items) => {\r\n        const res = [];\r\n        let key = 0;\r\n\r\n        [\"top\", \"center\", \"bottom\"].forEach((position) => {\r\n            let visibleCount = 0;\r\n            items[position].forEach((item) => {\r\n                if (item.condition) {\r\n                    res.push(\r\n                        <MenuItem dense key={key} onClick={item.onClick}>\r\n                            <ListItemIcon>{item.icon}</ListItemIcon>\r\n                            <Typography variant=\"inherit\">\r\n                                {item.text}\r\n                            </Typography>\r\n                        </MenuItem>\r\n                    );\r\n                    key++;\r\n                    visibleCount++;\r\n                }\r\n            });\r\n            if (visibleCount > 0 && position != \"bottom\") {\r\n                res.push(\r\n                    <Divider key={key} className={this.props.classes.divider} />\r\n                );\r\n                key++;\r\n            }\r\n        });\r\n\r\n        return res;\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const user = Auth.GetUser();\r\n        const isHomePage = pathHelper.isHomePage(this.props.location.pathname);\r\n        const emptyMenuList = {\r\n            top: [\r\n                {\r\n                    condition: true,\r\n                    onClick: () => {\r\n                        this.props.refreshFileList();\r\n                        this.props.changeContextMenu(\r\n                            this.props.menuType,\r\n                            false\r\n                        );\r\n                    },\r\n                    icon: <RefreshIcon />,\r\n                    text: \"刷新\",\r\n                },\r\n            ],\r\n            center: [\r\n                {\r\n                    condition: true,\r\n                    onClick: () => this.clickUpload(\"uploadFileForm\"),\r\n                    icon: <UploadIcon />,\r\n                    text: \"上传文件\",\r\n                },\r\n                {\r\n                    condition: true,\r\n                    onClick: () => this.clickUpload(\"uploadFolderForm\"),\r\n                    icon: <FolderUpload />,\r\n                    text: \"上传目录\",\r\n                },\r\n                {\r\n                    condition: user.group.allowRemoteDownload,\r\n                    onClick: () => this.props.openRemoteDownloadDialog(),\r\n                    icon: <DownloadIcon />,\r\n                    text: \"离线下载\",\r\n                },\r\n            ],\r\n            bottom: [\r\n                {\r\n                    condition: true,\r\n                    onClick: () => this.props.openCreateFolderDialog(),\r\n                    icon: <NewFolderIcon />,\r\n                    text: \"创建文件夹\",\r\n                },\r\n                {\r\n                    condition: true,\r\n                    onClick: () => this.props.openCreateFileDialog(),\r\n                    icon: <FilePlus />,\r\n                    text: \"创建文件\",\r\n                },\r\n            ],\r\n        };\r\n\r\n        return (\r\n            <div>\r\n                <Menu\r\n                    keepMounted\r\n                    open={this.props.menuOpen}\r\n                    onClose={() =>\r\n                        this.props.changeContextMenu(this.props.menuType, false)\r\n                    }\r\n                    anchorReference=\"anchorPosition\"\r\n                    anchorPosition={{ top: this.Y, left: this.X }}\r\n                    anchorOrigin={{\r\n                        vertical: \"top\",\r\n                        horizontal: \"left\",\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: \"top\",\r\n                        horizontal: \"left\",\r\n                    }}\r\n                >\r\n                    {this.props.menuType === \"empty\" && (\r\n                        <div>\r\n                            <MenuItem\r\n                                dense\r\n                                onClick={() => {\r\n                                    this.props.refreshFileList();\r\n                                    this.props.changeContextMenu(\r\n                                        this.props.menuType,\r\n                                        false\r\n                                    );\r\n                                }}\r\n                            >\r\n                                <StyledListItemIcon>\r\n                                    <RefreshIcon />\r\n                                </StyledListItemIcon>\r\n                                <Typography variant=\"inherit\">刷新</Typography>\r\n                            </MenuItem>\r\n                            <Divider className={classes.divider} />\r\n                            <MenuItem\r\n                                dense\r\n                                onClick={() =>\r\n                                    this.clickUpload(\"uploadFileForm\")\r\n                                }\r\n                            >\r\n                                <StyledListItemIcon>\r\n                                    <UploadIcon />\r\n                                </StyledListItemIcon>\r\n                                <Typography variant=\"inherit\">\r\n                                    上传文件\r\n                                </Typography>\r\n                            </MenuItem>\r\n                            <MenuItem\r\n                                dense\r\n                                onClick={() =>\r\n                                    this.clickUpload(\"uploadFolderForm\")\r\n                                }\r\n                            >\r\n                                <StyledListItemIcon>\r\n                                    <FolderUpload />\r\n                                </StyledListItemIcon>\r\n                                <Typography variant=\"inherit\">\r\n                                    上传目录\r\n                                </Typography>\r\n                            </MenuItem>\r\n                            {user.group.allowRemoteDownload && (\r\n                                <MenuItem\r\n                                    dense\r\n                                    onClick={() =>\r\n                                        this.props.openRemoteDownloadDialog()\r\n                                    }\r\n                                >\r\n                                    <StyledListItemIcon>\r\n                                        <DownloadIcon />\r\n                                    </StyledListItemIcon>\r\n                                    <Typography variant=\"inherit\">\r\n                                        离线下载\r\n                                    </Typography>\r\n                                </MenuItem>\r\n                            )}\r\n\r\n                            <Divider className={classes.divider} />\r\n                            <MenuItem\r\n                                dense\r\n                                onClick={() =>\r\n                                    this.props.openCreateFolderDialog()\r\n                                }\r\n                            >\r\n                                <StyledListItemIcon>\r\n                                    <NewFolderIcon />\r\n                                </StyledListItemIcon>\r\n                                <Typography variant=\"inherit\">\r\n                                    创建文件夹\r\n                                </Typography>\r\n                            </MenuItem>\r\n                            <MenuItem\r\n                                dense\r\n                                onClick={() =>\r\n                                    this.props.openCreateFileDialog()\r\n                                }\r\n                            >\r\n                                <StyledListItemIcon>\r\n                                    <FilePlus />\r\n                                </StyledListItemIcon>\r\n                                <Typography variant=\"inherit\">\r\n                                    创建文件\r\n                                </Typography>\r\n                            </MenuItem>\r\n                        </div>\r\n                    )}\r\n                    {this.props.menuType !== \"empty\" && (\r\n                        <div>\r\n                            {!this.props.isMultiple && this.props.withFolder && (\r\n                                <div>\r\n                                    <MenuItem dense onClick={this.enterFolder}>\r\n                                        <StyledListItemIcon>\r\n                                            <OpenFolderIcon />\r\n                                        </StyledListItemIcon>\r\n                                        <Typography variant=\"inherit\">\r\n                                            进入\r\n                                        </Typography>\r\n                                    </MenuItem>\r\n                                    {isHomePage && (\r\n                                        <Divider className={classes.divider} />\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                            {!this.props.isMultiple &&\r\n                                this.props.withFile &&\r\n                                (!this.props.share ||\r\n                                    this.props.share.preview) &&\r\n                                isPreviewable(this.props.selected[0].name) && (\r\n                                    <div>\r\n                                        <MenuItem\r\n                                            dense\r\n                                            onClick={() =>\r\n                                                this.props.openPreview()\r\n                                            }\r\n                                        >\r\n                                            <StyledListItemIcon>\r\n                                                <OpenIcon />\r\n                                            </StyledListItemIcon>\r\n                                            <Typography variant=\"inherit\">\r\n                                                打开\r\n                                            </Typography>\r\n                                        </MenuItem>\r\n                                    </div>\r\n                                )}\r\n\r\n                            {!this.props.isMultiple && this.props.withFile && (\r\n                                <div>\r\n                                    <MenuItem\r\n                                        dense\r\n                                        onClick={() => this.openDownload()}\r\n                                    >\r\n                                        <StyledListItemIcon>\r\n                                            <DownloadIcon />\r\n                                        </StyledListItemIcon>\r\n                                        <Typography variant=\"inherit\">\r\n                                            下载\r\n                                        </Typography>\r\n                                    </MenuItem>\r\n                                    {isHomePage && (\r\n                                        <Divider className={classes.divider} />\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {(this.props.isMultiple || this.props.withFolder) &&\r\n                                (user.group.allowArchiveDownload ||\r\n                                    !isHomePage) && (\r\n                                    <MenuItem\r\n                                        dense\r\n                                        onClick={() =>\r\n                                            this.openArchiveDownload()\r\n                                        }\r\n                                    >\r\n                                        <StyledListItemIcon>\r\n                                            <DownloadIcon />\r\n                                        </StyledListItemIcon>\r\n                                        <Typography variant=\"inherit\">\r\n                                            打包下载\r\n                                        </Typography>\r\n                                    </MenuItem>\r\n                                )}\r\n\r\n                            {!this.props.isMultiple &&\r\n                                this.props.withFile &&\r\n                                isHomePage && (\r\n                                    <MenuItem\r\n                                        dense\r\n                                        onClick={() =>\r\n                                            this.props.openGetSourceDialog()\r\n                                        }\r\n                                    >\r\n                                        <StyledListItemIcon>\r\n                                            <LinkIcon />\r\n                                        </StyledListItemIcon>\r\n                                        <Typography variant=\"inherit\">\r\n                                            获取外链\r\n                                        </Typography>\r\n                                    </MenuItem>\r\n                                )}\r\n\r\n                            {!this.props.isMultiple &&\r\n                                isHomePage &&\r\n                                user.group.allowRemoteDownload &&\r\n                                this.props.withFile &&\r\n                                isTorrent(this.props.selected[0].name) && (\r\n                                    <MenuItem\r\n                                        dense\r\n                                        onClick={() =>\r\n                                            this.props.openTorrentDownloadDialog()\r\n                                        }\r\n                                    >\r\n                                        <StyledListItemIcon>\r\n                                            <MagnetOn />\r\n                                        </StyledListItemIcon>\r\n                                        <Typography variant=\"inherit\">\r\n                                            创建离线下载任务\r\n                                        </Typography>\r\n                                    </MenuItem>\r\n                                )}\r\n                            {!this.props.isMultiple &&\r\n                                isHomePage &&\r\n                                user.group.compress &&\r\n                                this.props.withFile &&\r\n                                isCompressFile(this.props.selected[0].name) && (\r\n                                    <MenuItem\r\n                                        dense\r\n                                        onClick={() =>\r\n                                            this.props.openDecompressDialog()\r\n                                        }\r\n                                    >\r\n                                        <StyledListItemIcon>\r\n                                            <Unarchive />\r\n                                        </StyledListItemIcon>\r\n                                        <Typography variant=\"inherit\">\r\n                                            解压缩\r\n                                        </Typography>\r\n                                    </MenuItem>\r\n                                )}\r\n\r\n                            {isHomePage && user.group.compress && (\r\n                                <MenuItem\r\n                                    dense\r\n                                    onClick={() =>\r\n                                        this.props.openCompressDialog()\r\n                                    }\r\n                                >\r\n                                    <StyledListItemIcon>\r\n                                        <Archive />\r\n                                    </StyledListItemIcon>\r\n                                    <Typography variant=\"inherit\">\r\n                                        创建压缩文件\r\n                                    </Typography>\r\n                                </MenuItem>\r\n                            )}\r\n\r\n                            {isHomePage && user.group.relocate && (\r\n                                <MenuItem\r\n                                    dense\r\n                                    onClick={() =>\r\n                                        this.props.openRelocateDialog()\r\n                                    }\r\n                                >\r\n                                    <StyledListItemIcon>\r\n                                        <Transfer />\r\n                                    </StyledListItemIcon>\r\n                                    <Typography variant=\"inherit\">\r\n                                        转移存储策略\r\n                                    </Typography>\r\n                                </MenuItem>\r\n                            )}\r\n\r\n                            {!this.props.isMultiple && isHomePage && (\r\n                                <MenuItem\r\n                                    dense\r\n                                    onClick={() => this.props.openShareDialog()}\r\n                                >\r\n                                    <StyledListItemIcon>\r\n                                        <ShareIcon />\r\n                                    </StyledListItemIcon>\r\n                                    <Typography variant=\"inherit\">\r\n                                        创建分享链接\r\n                                    </Typography>\r\n                                </MenuItem>\r\n                            )}\r\n\r\n                            {!this.props.isMultiple && isHomePage && (\r\n                                <MenuItem\r\n                                    dense\r\n                                    onClick={() =>\r\n                                        this.props.toggleObjectInfoSidebar(true)\r\n                                    }\r\n                                >\r\n                                    <StyledListItemIcon>\r\n                                        <InfoOutlined />\r\n                                    </StyledListItemIcon>\r\n                                    <Typography variant=\"inherit\">\r\n                                        详细信息\r\n                                    </Typography>\r\n                                </MenuItem>\r\n                            )}\r\n\r\n                            {!this.props.isMultiple && isHomePage && (\r\n                                <Divider className={classes.divider} />\r\n                            )}\r\n\r\n                            {!this.props.isMultiple && isHomePage && (\r\n                                <div>\r\n                                    <MenuItem\r\n                                        dense\r\n                                        onClick={() =>\r\n                                            this.props.openRenameDialog()\r\n                                        }\r\n                                    >\r\n                                        <StyledListItemIcon>\r\n                                            <RenameIcon />\r\n                                        </StyledListItemIcon>\r\n                                        <Typography variant=\"inherit\">\r\n                                            重命名\r\n                                        </Typography>\r\n                                    </MenuItem>\r\n                                    {this.props.keywords === \"\" && (\r\n                                        <MenuItem\r\n                                            dense\r\n                                            onClick={() =>\r\n                                                this.props.openCopyDialog()\r\n                                            }\r\n                                        >\r\n                                            <StyledListItemIcon>\r\n                                                <FileCopyIcon />\r\n                                            </StyledListItemIcon>\r\n                                            <Typography variant=\"inherit\">\r\n                                                复制\r\n                                            </Typography>\r\n                                        </MenuItem>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                            {isHomePage && (\r\n                                <div>\r\n                                    {this.props.keywords === \"\" && (\r\n                                        <MenuItem\r\n                                            dense\r\n                                            onClick={() =>\r\n                                                this.props.openMoveDialog()\r\n                                            }\r\n                                        >\r\n                                            <StyledListItemIcon>\r\n                                                <MoveIcon />\r\n                                            </StyledListItemIcon>\r\n                                            <Typography variant=\"inherit\">\r\n                                                移动\r\n                                            </Typography>\r\n                                        </MenuItem>\r\n                                    )}\r\n\r\n                                    <Divider className={classes.divider} />\r\n                                    <MenuItem\r\n                                        dense\r\n                                        className={classes.propover}\r\n                                        onClick={() =>\r\n                                            this.props.openRemoveDialog()\r\n                                        }\r\n                                    >\r\n                                        <StyledListItemIcon>\r\n                                            <DeleteIcon />\r\n                                        </StyledListItemIcon>\r\n                                        <Typography variant=\"inherit\">\r\n                                            删除\r\n                                        </Typography>\r\n                                    </MenuItem>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </Menu>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nContextMenuCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    menuType: PropTypes.string.isRequired,\r\n};\r\n\r\nconst ContextMenu = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(ContextMenuCompoment)));\r\n\r\nexport default ContextMenu;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    navigateTo,\r\n    changeContextMenu,\r\n    navigateUp,\r\n    setSelectedTarget,\r\n    openRemoveDialog,\r\n} from \"../../actions/index\";\r\nimport explorer from \"../../redux/explorer\";\r\nimport ObjectIcon from \"./ObjectIcon\";\r\nimport ContextMenu from \"./ContextMenu\";\r\nimport EmptyIcon from \"@material-ui/icons/Unarchive\";\r\nimport SadIcon from \"@material-ui/icons/SentimentVeryDissatisfied\";\r\nimport classNames from \"classnames\";\r\nimport ImgPreivew from \"./ImgPreview\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport { isMac } from \"../../utils\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableRow,\r\n    withStyles,\r\n    Typography,\r\n    Grid,\r\n    CircularProgress,\r\n    Paper,\r\n} from \"@material-ui/core\";\r\nimport { GlobalHotKeys, configure } from \"react-hotkeys\";\r\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\r\n\r\nconst styles = (theme) => ({\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        textAlign: \"center\",\r\n        color: theme.palette.text.secondary,\r\n        margin: \"10px\",\r\n    },\r\n    root: {\r\n        flexGrow: 1,\r\n        padding: \"10px\",\r\n        overflowY: \"auto\",\r\n        height: \"calc(100vh - 113px)\",\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            overflowY: \"auto\",\r\n            height: \"calc(100vh - 113px)\",\r\n        },\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            height: \"100%\",\r\n        },\r\n    },\r\n    rootTable: {\r\n        padding: \"0px\",\r\n        backgroundColor: theme.palette.background.paper.white,\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            overflowY: \"auto\",\r\n            height: \"calc(100vh - 113px)\",\r\n        },\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            height: \"100%\",\r\n        },\r\n    },\r\n    typeHeader: {\r\n        margin: \"10px 25px\",\r\n        color: \"#6b6b6b\",\r\n        fontWeight: \"500\",\r\n    },\r\n    loading: {\r\n        justifyContent: \"center\",\r\n        display: \"flex\",\r\n        marginTop: \"40px\",\r\n    },\r\n    errorBox: {\r\n        padding: theme.spacing(4),\r\n    },\r\n    errorMsg: {\r\n        marginTop: \"10px\",\r\n    },\r\n    emptyContainer: {\r\n        bottom: \"0\",\r\n        height: \"300px\",\r\n        margin: \"50px auto\",\r\n        width: \"300px\",\r\n        color: theme.palette.text.disabled,\r\n        textAlign: \"center\",\r\n        paddingTop: \"20px\",\r\n    },\r\n    emptyIcon: {\r\n        fontSize: \"160px\",\r\n    },\r\n    emptyInfoBig: {\r\n        fontSize: \"25px\",\r\n        color: theme.palette.text.disabled,\r\n    },\r\n    emptyInfoSmall: {\r\n        color: theme.palette.text.hint,\r\n    },\r\n    hideAuto: {\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"none\",\r\n        },\r\n    },\r\n    flexFix: {\r\n        minWidth: 0,\r\n    },\r\n    upButton: {\r\n        marginLeft: \"20px\",\r\n        marginTop: \"10px\",\r\n        marginBottom: \"10px\",\r\n    },\r\n    clickAway: {\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n    },\r\n    rootShare: {\r\n        height: \"100%\",\r\n        minHeight: 500,\r\n    },\r\n    visuallyHidden: {\r\n        border: 0,\r\n        clip: \"rect(0 0 0 0)\",\r\n        height: 1,\r\n        margin: -1,\r\n        overflow: \"hidden\",\r\n        padding: 0,\r\n        position: \"absolute\",\r\n        top: 20,\r\n        width: 1,\r\n    },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        path: state.navigator.path,\r\n        drawerDesktopOpen: state.viewUpdate.open,\r\n        viewMethod: state.viewUpdate.explorerViewMethod,\r\n        sortMethod: state.viewUpdate.sortMethod,\r\n        fileList: state.explorer.fileList,\r\n        dirList: state.explorer.dirList,\r\n        loading: state.viewUpdate.navigatorLoading,\r\n        navigatorError: state.viewUpdate.navigatorError,\r\n        navigatorErrorMsg: state.viewUpdate.navigatorErrorMsg,\r\n        keywords: state.explorer.keywords,\r\n        selected: state.explorer.selected,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        navigateToPath: (path) => {\r\n            dispatch(navigateTo(path));\r\n        },\r\n\r\n        changeContextMenu: (type, open) => {\r\n            dispatch(changeContextMenu(type, open));\r\n        },\r\n        navigateUp: () => {\r\n            dispatch(navigateUp());\r\n        },\r\n        setSelectedTarget: (targets) => {\r\n            dispatch(setSelectedTarget(targets));\r\n        },\r\n        openRemoveDialog: () => {\r\n            dispatch(openRemoveDialog());\r\n        },\r\n        changeSort: (method) => {\r\n            dispatch(explorer.actions.changeSortMethod(method));\r\n        },\r\n    };\r\n};\r\n\r\nclass ExplorerCompoment extends Component {\r\n    constructor() {\r\n        super();\r\n        this.keyMap = {\r\n            DELETE_FILE: \"del\",\r\n            SELECT_ALL: `${isMac() ? \"command\" : \"ctrl\"}+a`,\r\n        };\r\n\r\n        this.handlers = {\r\n            DELETE_FILE: () => {\r\n                if (this.props.selected.length > 0 && !this.props.share) {\r\n                    this.props.openRemoveDialog();\r\n                }\r\n            },\r\n            SELECT_ALL: (e) => {\r\n                e.preventDefault();\r\n                if (\r\n                    this.props.selected.length >=\r\n                    this.props.dirList.length + this.props.fileList.length\r\n                ) {\r\n                    this.props.setSelectedTarget([]);\r\n                } else {\r\n                    this.props.setSelectedTarget([\r\n                        ...this.props.dirList,\r\n                        ...this.props.fileList,\r\n                    ]);\r\n                }\r\n            },\r\n        };\r\n\r\n        configure({\r\n            ignoreTags: [\"input\", \"select\", \"textarea\"],\r\n        });\r\n    }\r\n\r\n    contextMenu = (e) => {\r\n        e.preventDefault();\r\n        if (\r\n            this.props.keywords === \"\" &&\r\n            !pathHelper.isSharePage(this.props.location.pathname)\r\n        ) {\r\n            if (!this.props.loading) {\r\n                this.props.changeContextMenu(\"empty\", true);\r\n            }\r\n        }\r\n    };\r\n\r\n    componentDidUpdate() {\r\n        this.away = 0;\r\n    }\r\n\r\n    ClickAway = (e) => {\r\n        const element = e.target;\r\n        if (element.dataset.clickaway) {\r\n            this.props.setSelectedTarget([]);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const isHomePage = pathHelper.isHomePage(this.props.location.pathname);\r\n\r\n        const showView =\r\n            !this.props.loading &&\r\n            (this.props.dirList.length !== 0 ||\r\n                this.props.fileList.length !== 0);\r\n        const listView = (\r\n            <Table className={classes.table}>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>\r\n                            <TableSortLabel\r\n                                active={\r\n                                    this.props.sortMethod === \"namePos\" ||\r\n                                    this.props.sortMethod === \"nameRev\"\r\n                                }\r\n                                direction={\r\n                                    this.props.sortMethod === \"namePos\"\r\n                                        ? \"asc\"\r\n                                        : \"des\"\r\n                                }\r\n                                onClick={() => {\r\n                                    this.props.changeSort(\r\n                                        this.props.sortMethod === \"namePos\"\r\n                                            ? \"nameRev\"\r\n                                            : \"namePos\"\r\n                                    );\r\n                                }}\r\n                            >\r\n                                名称\r\n                                {this.props.sortMethod === \"namePos\" ||\r\n                                this.props.sortMethod === \"nameRev\" ? (\r\n                                    <span className={classes.visuallyHidden}>\r\n                                        {this.props.sortMethod === \"nameRev\"\r\n                                            ? \"sorted descending\"\r\n                                            : \"sorted ascending\"}\r\n                                    </span>\r\n                                ) : null}\r\n                            </TableSortLabel>\r\n                        </TableCell>\r\n                        <TableCell className={classes.hideAuto}>\r\n                            <TableSortLabel\r\n                                active={\r\n                                    this.props.sortMethod === \"sizePos\" ||\r\n                                    this.props.sortMethod === \"sizeRes\"\r\n                                }\r\n                                direction={\r\n                                    this.props.sortMethod === \"sizePos\"\r\n                                        ? \"asc\"\r\n                                        : \"des\"\r\n                                }\r\n                                onClick={() => {\r\n                                    this.props.changeSort(\r\n                                        this.props.sortMethod === \"sizePos\"\r\n                                            ? \"sizeRes\"\r\n                                            : \"sizePos\"\r\n                                    );\r\n                                }}\r\n                            >\r\n                                大小\r\n                                {this.props.sortMethod === \"sizePos\" ||\r\n                                this.props.sortMethod === \"sizeRes\" ? (\r\n                                    <span className={classes.visuallyHidden}>\r\n                                        {this.props.sortMethod === \"sizeRes\"\r\n                                            ? \"sorted descending\"\r\n                                            : \"sorted ascending\"}\r\n                                    </span>\r\n                                ) : null}\r\n                            </TableSortLabel>\r\n                        </TableCell>\r\n                        <TableCell className={classes.hideAuto}>\r\n                            <TableSortLabel\r\n                                active={\r\n                                    this.props.sortMethod === \"timePos\" ||\r\n                                    this.props.sortMethod === \"timeRev\"\r\n                                }\r\n                                direction={\r\n                                    this.props.sortMethod === \"timePos\"\r\n                                        ? \"asc\"\r\n                                        : \"des\"\r\n                                }\r\n                                onClick={() => {\r\n                                    this.props.changeSort(\r\n                                        this.props.sortMethod === \"timePos\"\r\n                                            ? \"timeRev\"\r\n                                            : \"timePos\"\r\n                                    );\r\n                                }}\r\n                            >\r\n                                日期\r\n                                {this.props.sortMethod === \"timePos\" ||\r\n                                this.props.sortMethod === \"timeRev\" ? (\r\n                                    <span className={classes.visuallyHidden}>\r\n                                        {this.props.sortMethod === \"sizeRes\"\r\n                                            ? \"sorted descending\"\r\n                                            : \"sorted ascending\"}\r\n                                    </span>\r\n                                ) : null}\r\n                            </TableSortLabel>\r\n                        </TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {pathHelper.isMobile() && this.props.path !== \"/\" && (\r\n                        <ObjectIcon\r\n                            file={{\r\n                                type: \"up\",\r\n                                name: \"上级目录\",\r\n                            }}\r\n                        />\r\n                    )}\r\n                    {this.props.dirList.map((value, index) => (\r\n                        <ObjectIcon key={value.id} file={value} index={index} />\r\n                    ))}\r\n                    {this.props.fileList.map((value, index) => (\r\n                        <ObjectIcon key={value.id} file={value} index={index} />\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n        );\r\n\r\n        const normalView = (\r\n            <div className={classes.flexFix}>\r\n                {this.props.dirList.length !== 0 && (\r\n                    <>\r\n                        <Typography\r\n                            data-clickAway={\"true\"}\r\n                            variant=\"body2\"\r\n                            className={classes.typeHeader}\r\n                        >\r\n                            文件夹\r\n                        </Typography>\r\n                        <Grid\r\n                            data-clickAway={\"true\"}\r\n                            container\r\n                            spacing={0}\r\n                            alignItems=\"flex-start\"\r\n                        >\r\n                            {this.props.dirList.map((value, index) => (\r\n                                <Grid\r\n                                    key={value.id}\r\n                                    item\r\n                                    xs={6}\r\n                                    md={3}\r\n                                    sm={4}\r\n                                    lg={2}\r\n                                >\r\n                                    <ObjectIcon\r\n                                        key={value.id}\r\n                                        file={value}\r\n                                        index={index}\r\n                                    />\r\n                                </Grid>\r\n                            ))}\r\n                        </Grid>\r\n                    </>\r\n                )}\r\n                {this.props.fileList.length !== 0 && (\r\n                    <>\r\n                        <Typography\r\n                            data-clickAway={\"true\"}\r\n                            variant=\"body2\"\r\n                            className={classes.typeHeader}\r\n                        >\r\n                            文件\r\n                        </Typography>\r\n                        <Grid\r\n                            data-clickAway={\"true\"}\r\n                            container\r\n                            spacing={0}\r\n                            alignItems=\"flex-start\"\r\n                        >\r\n                            {this.props.fileList.map((value, index) => (\r\n                                <Grid\r\n                                    key={value.id}\r\n                                    item\r\n                                    xs={6}\r\n                                    md={3}\r\n                                    sm={4}\r\n                                    lg={2}\r\n                                >\r\n                                    <ObjectIcon\r\n                                        key={value.id}\r\n                                        index={index}\r\n                                        file={value}\r\n                                    />\r\n                                </Grid>\r\n                            ))}\r\n                        </Grid>\r\n                    </>\r\n                )}\r\n            </div>\r\n        );\r\n        const view = this.props.viewMethod === \"list\" ? listView : normalView;\r\n        return (\r\n            <div\r\n                onContextMenu={this.contextMenu}\r\n                onClick={this.ClickAway}\r\n                className={classNames(\r\n                    {\r\n                        [classes.root]: this.props.viewMethod !== \"list\",\r\n                        [classes.rootTable]: this.props.viewMethod === \"list\",\r\n                        [classes.rootShare]: this.props.share,\r\n                    },\r\n                    classes.button\r\n                )}\r\n            >\r\n                <GlobalHotKeys handlers={this.handlers} keyMap={this.keyMap} />\r\n                <ContextMenu share={this.props.share} />\r\n                <ImgPreivew />\r\n                {this.props.navigatorError && (\r\n                    <Paper elevation={1} className={classes.errorBox}>\r\n                        <Typography variant=\"h5\" component=\"h3\">\r\n                            :( 请求时出现错误\r\n                        </Typography>\r\n                        <Typography\r\n                            color={\"textSecondary\"}\r\n                            className={classes.errorMsg}\r\n                        >\r\n                            {this.props.navigatorErrorMsg.message}\r\n                        </Typography>\r\n                    </Paper>\r\n                )}\r\n\r\n                {this.props.loading && !this.props.navigatorError && (\r\n                    <div className={classes.loading}>\r\n                        <CircularProgress />\r\n                    </div>\r\n                )}\r\n\r\n                {this.props.keywords === \"\" &&\r\n                    isHomePage &&\r\n                    this.props.dirList.length === 0 &&\r\n                    this.props.fileList.length === 0 &&\r\n                    !this.props.loading &&\r\n                    !this.props.navigatorError && (\r\n                        <div className={classes.emptyContainer}>\r\n                            <EmptyIcon className={classes.emptyIcon} />\r\n                            <div className={classes.emptyInfoBig}>\r\n                                拖拽文件至此\r\n                            </div>\r\n                            <div className={classes.emptyInfoSmall}>\r\n                                或点击右下方“上传文件”按钮添加文件\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                {((this.props.keywords !== \"\" &&\r\n                    this.props.dirList.length === 0 &&\r\n                    this.props.fileList.length === 0 &&\r\n                    !this.props.loading &&\r\n                    !this.props.navigatorError) ||\r\n                    (this.props.dirList.length === 0 &&\r\n                        this.props.fileList.length === 0 &&\r\n                        !this.props.loading &&\r\n                        !this.props.navigatorError &&\r\n                        !isHomePage)) && (\r\n                    <div className={classes.emptyContainer}>\r\n                        <SadIcon className={classes.emptyIcon} />\r\n                        <div className={classes.emptyInfoBig}>\r\n                            什么都没有找到\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                {showView && view}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nExplorerCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    path: PropTypes.string.isRequired,\r\n};\r\n\r\nconst Explorer = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(ExplorerCompoment)));\r\n\r\nexport default Explorer;\r\n","import React from \"react\";\r\nimport { BulletList } from \"react-content-loader\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    loader: {\r\n        width: \"100%\",\r\n        // padding: 40,\r\n        // [theme.breakpoints.down(\"md\")]: {\r\n        //     width: \"100%\",\r\n        //     padding: 10\r\n        // }\r\n    },\r\n}));\r\n\r\nconst MyLoader = (props) => (\r\n    <BulletList\r\n        backgroundColor={props.dark ? \"#333\" : \"#f5f6f7\"}\r\n        foregroundColor={props.dark ? \"#636363\" : \"#eee\"}\r\n        className={props.className}\r\n    />\r\n);\r\n\r\nfunction ListLoading() {\r\n    const theme = useTheme();\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div>\r\n            <MyLoader\r\n                dark={theme.palette.type === \"dark\"}\r\n                className={classes.loader}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ListLoading;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport { Clear, Folder } from \"@material-ui/icons\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { setSideBar } from \"../../../redux/explorer/action\";\r\nimport TypeIcon from \"../TypeIcon\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport API from \"../../../middleware/Api\";\r\nimport { navigateTo, toggleSnackbar } from \"../../../actions\";\r\nimport { filename, sizeToString } from \"../../../utils\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport TimeAgo from \"timeago-react\";\r\nimport ListLoading from \"../../Placeholder/ListLoading\";\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport { formatLocalTime } from \"../../../utils/datetime\";\r\n\r\nconst drawerWidth = 350;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        boxShadow:\r\n            \"0px 8px 10px -5px rgb(0 0 0 / 20%), 0px 16px 24px 2px rgb(0 0 0 / 14%), 0px 6px 30px 5px rgb(0 0 0 / 12%)\",\r\n    },\r\n    drawerContainer: {\r\n        overflow: \"auto\",\r\n    },\r\n    header: {\r\n        display: \"flex\",\r\n        padding: theme.spacing(3),\r\n        placeContent: \"space-between\",\r\n    },\r\n    fileIcon: { width: 33, height: 33 },\r\n    fileIconSVG: { fontSize: 20 },\r\n    folderIcon: {\r\n        color: theme.palette.text.secondary,\r\n        width: 33,\r\n        height: 33,\r\n    },\r\n    fileName: {\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n        wordBreak: \"break-all\",\r\n        flexGrow: 2,\r\n    },\r\n    closeIcon: {\r\n        placeSelf: \"flex-start\",\r\n        marginTop: 2,\r\n    },\r\n    propsContainer: {\r\n        padding: theme.spacing(3),\r\n    },\r\n    propsLabel: {\r\n        color: theme.palette.text.secondary,\r\n        padding: theme.spacing(1),\r\n    },\r\n    propsTime: {\r\n        color: theme.palette.text.disabled,\r\n        padding: theme.spacing(1),\r\n    },\r\n    propsValue: {\r\n        padding: theme.spacing(1),\r\n        wordBreak: \"break-all\",\r\n    },\r\n    appBar: {\r\n        position: \"relative\",\r\n    },\r\n    title: {\r\n        marginLeft: theme.spacing(2),\r\n        flex: 1,\r\n    },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function SideDrawer() {\r\n    const dispatch = useDispatch();\r\n    const sideBarOpen = useSelector((state) => state.explorer.sideBarOpen);\r\n    const selected = useSelector((state) => state.explorer.selected);\r\n    const SetSideBar = useCallback((open) => dispatch(setSideBar(open)), [\r\n        dispatch,\r\n    ]);\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const NavigateTo = useCallback((k) => dispatch(navigateTo(k)), [dispatch]);\r\n    const keywords = useSelector((state) => state.explorer.keywords);\r\n    const [target, setTarget] = useState(null);\r\n    const [details, setDetails] = useState(null);\r\n    const loadProps = (object) => {\r\n        API.get(\r\n            \"/object/property/\" +\r\n                object.id +\r\n                \"?trace_root=\" +\r\n                (keywords !== \"\" ? \"true\" : \"false\") +\r\n                \"&is_folder=\" +\r\n                (object.type === \"dir\").toString()\r\n        )\r\n            .then((response) => {\r\n                setDetails(response.data);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        setDetails(null);\r\n        if (sideBarOpen) {\r\n            if (selected.length !== 1) {\r\n                SetSideBar(false);\r\n            } else {\r\n                setTarget(selected[0]);\r\n                loadProps(selected[0]);\r\n            }\r\n        }\r\n    }, [selected, sideBarOpen]);\r\n\r\n    const classes = useStyles();\r\n    const propsItem = [\r\n        {\r\n            label: \"大小\",\r\n            value: (d, t) =>\r\n                sizeToString(d.size) +\r\n                \"  (\" +\r\n                d.size.toLocaleString() +\r\n                \" 字节)\",\r\n            show: (d) => true,\r\n        },\r\n        {\r\n            label: \"存储策略\",\r\n            value: (d, t) => d.policy,\r\n            show: (d) => d.type === \"file\",\r\n        },\r\n        {\r\n            label: \"包含目录\",\r\n            value: (d, t) => d.child_folder_num.toLocaleString() + \" \" + \"个\",\r\n            show: (d) => d.type === \"dir\",\r\n        },\r\n        {\r\n            label: \"包含文件\",\r\n            value: (d, t) => d.child_file_num.toLocaleString() + \" \" + \"个\",\r\n            show: (d) => d.type === \"dir\",\r\n        },\r\n        {\r\n            label: \"所在目录\",\r\n            // eslint-disable-next-line react/display-name\r\n            value: (d, t) => {\r\n                const path = d.path === \"\" ? t.path : d.path;\r\n                const name = filename(path);\r\n                return (\r\n                    <Tooltip title={path}>\r\n                        <Link\r\n                            href={\"javascript:void\"}\r\n                            onClick={() => NavigateTo(path)}\r\n                        >\r\n                            {name === \"\" ? \"根目录\" : name}\r\n                        </Link>\r\n                    </Tooltip>\r\n                );\r\n            },\r\n            show: (d) => true,\r\n        },\r\n        {\r\n            label: \"修改于\",\r\n            value: (d, t) =>\r\n                formatLocalTime(d.updated_at, \"YYYY/MM/DD  H:mm:ss\"),\r\n            show: (d) => true,\r\n        },\r\n        {\r\n            label: \"创建于\",\r\n            value: (d) => formatLocalTime(d.created_at, \"YYYY/MM/DD  H:mm:ss\"),\r\n            show: (d) => true,\r\n        },\r\n    ];\r\n    const content = (\r\n        <Grid container className={classes.propsContainer}>\r\n            {!details && <ListLoading />}\r\n            {details && (\r\n                <>\r\n                    {propsItem.map((item) => {\r\n                        if (item.show(target)) {\r\n                            return (\r\n                                <>\r\n                                    <Grid\r\n                                        item\r\n                                        xs={5}\r\n                                        className={classes.propsLabel}\r\n                                    >\r\n                                        {item.label}\r\n                                    </Grid>\r\n                                    <Grid\r\n                                        item\r\n                                        xs={7}\r\n                                        className={classes.propsValue}\r\n                                    >\r\n                                        {item.value(details, target)}\r\n                                    </Grid>\r\n                                </>\r\n                            );\r\n                        }\r\n                    })}\r\n                    {target.type === \"dir\" && (\r\n                        <Grid item xs={12} className={classes.propsTime}>\r\n                            统计于{\" \"}\r\n                            <TimeAgo\r\n                                datetime={details.query_date}\r\n                                locale=\"zh_CN\"\r\n                            />\r\n                        </Grid>\r\n                    )}\r\n                </>\r\n            )}\r\n        </Grid>\r\n    );\r\n    return (\r\n        <>\r\n            <Hidden smUp>\r\n                <Dialog\r\n                    fullScreen\r\n                    open={sideBarOpen}\r\n                    TransitionComponent={Transition}\r\n                >\r\n                    {target && (\r\n                        <>\r\n                            <AppBar className={classes.appBar}>\r\n                                <Toolbar>\r\n                                    <IconButton\r\n                                        edge=\"start\"\r\n                                        color=\"inherit\"\r\n                                        onClick={() => SetSideBar(false)}\r\n                                        aria-label=\"close\"\r\n                                    >\r\n                                        <Clear />\r\n                                    </IconButton>\r\n                                    <Typography\r\n                                        variant=\"h6\"\r\n                                        className={classes.title}\r\n                                    >\r\n                                        {target.name}\r\n                                    </Typography>\r\n                                </Toolbar>\r\n                            </AppBar>\r\n                            {content}\r\n                        </>\r\n                    )}\r\n                </Dialog>\r\n            </Hidden>\r\n            <Hidden xsDown>\r\n                <Drawer\r\n                    className={classes.drawer}\r\n                    variant=\"persistent\"\r\n                    classes={{\r\n                        paper: classes.drawerPaper,\r\n                    }}\r\n                    open={sideBarOpen}\r\n                    anchor=\"right\"\r\n                >\r\n                    <Toolbar />\r\n                    <div className={classes.drawerContainer}>\r\n                        {target && (\r\n                            <>\r\n                                <div className={classes.header}>\r\n                                    {target.type === \"dir\" && (\r\n                                        <Folder\r\n                                            className={classes.folderIcon}\r\n                                        />\r\n                                    )}\r\n                                    {target.type !== \"dir\" && (\r\n                                        <TypeIcon\r\n                                            isUpload\r\n                                            className={classes.fileIcon}\r\n                                            iconClassName={classes.fileIconSVG}\r\n                                            fileName={target.name}\r\n                                        />\r\n                                    )}\r\n                                    <div className={classes.fileName}>\r\n                                        <Typography variant=\"h6\" gutterBottom>\r\n                                            {target.name}\r\n                                        </Typography>\r\n                                    </div>\r\n                                    <IconButton\r\n                                        onClick={() => SetSideBar(false)}\r\n                                        className={classes.closeIcon}\r\n                                        aria-label=\"close\"\r\n                                        size={\"small\"}\r\n                                    >\r\n                                        <Clear />\r\n                                    </IconButton>\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                        <Divider />\r\n                        {content}\r\n                    </div>\r\n                </Drawer>\r\n            </Hidden>\r\n        </>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport Navigator from \"./Navigator/Navigator\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport HTML5Backend from \"react-dnd-html5-backend\";\r\nimport DragLayer from \"./DnD/DragLayer\";\r\nimport Explorer from \"./Explorer\";\r\nimport Modals from \"./Modals\";\r\nimport { withStyles } from \"@material-ui/core\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    closeAllModals,\r\n    navigateTo,\r\n    setSelectedTarget,\r\n    toggleSnackbar,\r\n} from \"../../actions\";\r\nimport { changeSubTitle } from \"../../redux/viewUpdate/action\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport SideDrawer from \"./Sidebar/SideDrawer\";\r\nimport { ImageLoader } from \"@abslant/cd-image-loader\";\r\n\r\nconst styles = () => ({});\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        changeSubTitle: (text) => {\r\n            dispatch(changeSubTitle(text));\r\n        },\r\n        setSelectedTarget: (targets) => {\r\n            dispatch(setSelectedTarget(targets));\r\n        },\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n        closeAllModals: () => {\r\n            dispatch(closeAllModals());\r\n        },\r\n        navigateTo: (path) => {\r\n            dispatch(navigateTo(path));\r\n        },\r\n    };\r\n};\r\n\r\nclass FileManager extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.setSelectedTarget([]);\r\n        this.props.closeAllModals();\r\n        this.props.navigateTo(\"/\");\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (pathHelper.isHomePage(this.props.location.pathname)) {\r\n            this.props.changeSubTitle(null);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <DndProvider backend={HTML5Backend}>\r\n                    <Modals share={this.props.share} />\r\n                    <Navigator\r\n                        isShare={this.props.isShare}\r\n                        share={this.props.share}\r\n                    />\r\n                    <Explorer share={this.props.share} />\r\n                    <DragLayer />\r\n                    <ImageLoader />\r\n                </DndProvider>\r\n                <SideDrawer />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nFileManager.propTypes = {};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(FileManager)));\r\n","import React, { useCallback, useEffect } from \"react\";\r\nimport AdSense from 'react-adsense';\r\nimport DPlayer from \"react-dplayer\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useLocation, useParams, useRouteMatch } from \"react-router\";\r\nimport { getBaseURL } from \"../../middleware/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { changeSubTitle } from \"../../redux/viewUpdate/action\";\r\nimport pathHelper from \"../../utils/page\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"30px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: 50,\r\n    },\r\n    player: {\r\n        borderRadius: \"4px\",\r\n        maxHeight: 600,\r\n    },\r\n    ads:{\r\n        width: '100%',\r\n        height: 90,\r\n        maxHeight: 90,\r\n        textAlign: \"center\",\r\n        marginTop: \"1.5rem\"\r\n    }\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function VideoViewer() {\r\n    const math = useRouteMatch();\r\n    const location = useLocation();\r\n    const query = useQuery();\r\n    const { id } = useParams();\r\n    const dispatch = useDispatch();\r\n    const SetSubTitle = useCallback(\r\n        (title) => dispatch(changeSubTitle(title)),\r\n        [dispatch]\r\n    );\r\n    useEffect(() => {\r\n        if (!pathHelper.isSharePage(location.pathname)) {\r\n            const path = query.get(\"p\").split(\"/\");\r\n            SetSubTitle(path[path.length - 1]);\r\n        } else {\r\n            SetSubTitle(query.get(\"name\"));\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [math.params[0], location]);\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.layout}>\r\n            <Paper className={classes.root} elevation={1}>\r\n                <DPlayer\r\n                    className={classes.player}\r\n                    options={{\r\n                        video: {\r\n                            url:\r\n                                getBaseURL() +\r\n                                (pathHelper.isSharePage(location.pathname)\r\n                                    ? \"/share/preview/\" +\r\n                                      id +\r\n                                      (query.get(\"share_path\") !== \"\"\r\n                                          ? \"?path=\" +\r\n                                            encodeURIComponent(\r\n                                                query.get(\"share_path\")\r\n                                            )\r\n                                          : \"\")\r\n                                    : \"/file/preview/\" + query.get(\"id\")),\r\n                        },\r\n                    }}\r\n                />\r\n            </Paper>\r\n            <div className={classes.ads}>\r\n                <AdSense.Google\r\n                    style={{ display:'inline-block',minWidth:320,maxWidth:970,width:'100%',height:90 }}\r\n                    client='ca-pub-7329474538416487'\r\n                    slot='8294203043'\r\n                    format=''\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport OpenIcon from \"@material-ui/icons/OpenInNew\";\r\nimport Pagination from \"@material-ui/lab/Pagination\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\n\r\nimport {\r\n    Tooltip,\r\n    Card,\r\n    Avatar,\r\n    CardHeader,\r\n    Typography,\r\n    Grid,\r\n    IconButton,\r\n} from \"@material-ui/core\";\r\nimport API from \"../../middleware/Api\";\r\nimport TypeIcon from \"../FileManager/TypeIcon\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useLocation } from \"react-router\";\r\nimport TimeAgo from \"timeago-react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    cardContainer: {\r\n        padding: theme.spacing(1),\r\n    },\r\n    card: {\r\n        maxWidth: 400,\r\n        margin: \"0 auto\",\r\n    },\r\n    actions: {\r\n        display: \"flex\",\r\n    },\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"50px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n    },\r\n    shareTitle: {\r\n        maxWidth: \"200px\",\r\n    },\r\n    avatarFile: {\r\n        backgroundColor: theme.palette.primary.light,\r\n    },\r\n    avatarFolder: {\r\n        backgroundColor: theme.palette.secondary.light,\r\n    },\r\n    gird: {\r\n        marginTop: \"30px\",\r\n    },\r\n    loadMore: {\r\n        textAlign: \"right\",\r\n        marginTop: \"20px\",\r\n        marginBottom: \"40px\",\r\n    },\r\n    badge: {\r\n        marginLeft: theme.spacing(1),\r\n        height: 17,\r\n    },\r\n    orderSelect: {\r\n        textAlign: \"right\",\r\n        marginTop: 5,\r\n    },\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function SearchResult() {\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n\r\n    const query = useQuery();\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n\r\n    const [page, setPage] = useState(1);\r\n    const [total, setTotal] = useState(0);\r\n    const [shareList, setShareList] = useState([]);\r\n    const [orderBy, setOrderBy] = useState(\"created_at DESC\");\r\n\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const search = (keywords, page, orderBy) => {\r\n        const order = orderBy.split(\" \");\r\n        API.get(\r\n            \"/share/search?page=\" +\r\n                page +\r\n                \"&order_by=\" +\r\n                order[0] +\r\n                \"&order=\" +\r\n                order[1] +\r\n                \"&keywords=\" +\r\n                encodeURIComponent(keywords)\r\n        )\r\n            .then((response) => {\r\n                if (response.data.items.length === 0) {\r\n                    ToggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        \"找不到符合条件的分享\",\r\n                        \"info\"\r\n                    );\r\n                }\r\n                setTotal(response.data.total);\r\n                setShareList(response.data.items);\r\n            })\r\n            .catch(() => {\r\n                ToggleSnackbar(\"top\", \"right\", \"加载失败\", \"error\");\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        const keywords = query.get(\"keywords\");\r\n        if (keywords) {\r\n            search(keywords, page, orderBy);\r\n        } else {\r\n            ToggleSnackbar(\"top\", \"right\", \"请输入搜索关键词\", \"warning\");\r\n        }\r\n    }, [location]);\r\n\r\n    const handlePageChange = (event, value) => {\r\n        setPage(value);\r\n        const keywords = query.get(\"keywords\");\r\n        search(keywords, value, orderBy);\r\n    };\r\n\r\n    const handleOrderChange = (event) => {\r\n        setOrderBy(event.target.value);\r\n        const keywords = query.get(\"keywords\");\r\n        search(keywords, page, event.target.value);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.layout}>\r\n            <Grid container>\r\n                <Grid sm={6} xs={6}>\r\n                    <Typography color=\"textSecondary\" variant=\"h4\">\r\n                        搜索结果\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid sm={6} xs={6} className={classes.orderSelect}>\r\n                    <FormControl>\r\n                        <Select\r\n                            color={\"secondary\"}\r\n                            onChange={handleOrderChange}\r\n                            value={orderBy}\r\n                        >\r\n                            <MenuItem value={\"created_at DESC\"}>\r\n                                创建日期由晚到早\r\n                            </MenuItem>\r\n                            <MenuItem value={\"created_at ASC\"}>\r\n                                创建日期由早到晚\r\n                            </MenuItem>\r\n                            <MenuItem value={\"downloads DESC\"}>\r\n                                下载次数由大到小\r\n                            </MenuItem>\r\n                            <MenuItem value={\"downloads ASC\"}>\r\n                                下载次数由小到大\r\n                            </MenuItem>\r\n                            <MenuItem value={\"views DESC\"}>\r\n                                浏览次数由大到小\r\n                            </MenuItem>\r\n                            <MenuItem value={\"views ASC\"}>\r\n                                浏览次数由小到大\r\n                            </MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid container spacing={24} className={classes.gird}>\r\n                {shareList.map((value) => (\r\n                    <Grid\r\n                        item\r\n                        xs={12}\r\n                        sm={4}\r\n                        key={value.id}\r\n                        className={classes.cardContainer}\r\n                    >\r\n                        <Card className={classes.card}>\r\n                            <CardHeader\r\n                                avatar={\r\n                                    <div>\r\n                                        {!value.is_dir && (\r\n                                            <TypeIcon\r\n                                                fileName={\r\n                                                    value.source\r\n                                                        ? value.source.name\r\n                                                        : \"\"\r\n                                                }\r\n                                                isUpload\r\n                                            />\r\n                                        )}{\" \"}\r\n                                        {value.is_dir && (\r\n                                            <Avatar\r\n                                                className={classes.avatarFolder}\r\n                                            >\r\n                                                <FolderIcon />\r\n                                            </Avatar>\r\n                                        )}\r\n                                    </div>\r\n                                }\r\n                                action={\r\n                                    <Tooltip placement=\"top\" title=\"打开\">\r\n                                        <IconButton\r\n                                            onClick={() =>\r\n                                                history.push(\"/s/\" + value.key)\r\n                                            }\r\n                                        >\r\n                                            <OpenIcon />\r\n                                        </IconButton>\r\n                                    </Tooltip>\r\n                                }\r\n                                title={\r\n                                    <Tooltip\r\n                                        placement=\"top\"\r\n                                        title={\r\n                                            value.source\r\n                                                ? value.source.name\r\n                                                : \"[原始对象不存在]\"\r\n                                        }\r\n                                    >\r\n                                        <Typography\r\n                                            noWrap\r\n                                            className={classes.shareTitle}\r\n                                        >\r\n                                            {value.source\r\n                                                ? value.source.name\r\n                                                : \"[原始对象不存在]\"}{\" \"}\r\n                                        </Typography>\r\n                                    </Tooltip>\r\n                                }\r\n                                subheader={\r\n                                    <span>\r\n                                        分享于{\" \"}\r\n                                        <TimeAgo\r\n                                            datetime={value.create_date}\r\n                                            locale=\"zh_CN\"\r\n                                        />\r\n                                    </span>\r\n                                }\r\n                            />\r\n                        </Card>\r\n                    </Grid>\r\n                ))}\r\n            </Grid>\r\n            <div className={classes.loadMore}>\r\n                <Pagination\r\n                    count={Math.ceil(total / 18)}\r\n                    onChange={handlePageChange}\r\n                    color=\"secondary\"\r\n                />\r\n            </div>{\" \"}\r\n        </div>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport OpenIcon from \"@material-ui/icons/OpenInNew\";\r\nimport Pagination from \"@material-ui/lab/Pagination\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport UnlockIcon from \"@material-ui/icons/LockOpen\";\r\nimport EyeIcon from \"@material-ui/icons/RemoveRedEye\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\n\r\nimport {\r\n    withStyles,\r\n    Tooltip,\r\n    Card,\r\n    Avatar,\r\n    CardHeader,\r\n    CardActions,\r\n    Typography,\r\n    Grid,\r\n    IconButton,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Button,\r\n    TextField,\r\n} from \"@material-ui/core\";\r\nimport API from \"../../middleware/Api\";\r\nimport TypeIcon from \"../FileManager/TypeIcon\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { VisibilityOff, VpnKey } from \"@material-ui/icons\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport ToggleIcon from \"material-ui-toggle-icon\";\r\nimport { formatLocalTime } from \"../../utils/datetime\";\r\n\r\nconst styles = (theme) => ({\r\n    cardContainer: {\r\n        padding: theme.spacing(1),\r\n    },\r\n    card: {\r\n        maxWidth: 400,\r\n        margin: \"0 auto\",\r\n    },\r\n    actions: {\r\n        display: \"flex\",\r\n    },\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"50px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n    },\r\n    shareTitle: {\r\n        maxWidth: \"200px\",\r\n    },\r\n    avatarFile: {\r\n        backgroundColor: theme.palette.primary.light,\r\n    },\r\n    avatarFolder: {\r\n        backgroundColor: theme.palette.secondary.light,\r\n    },\r\n    gird: {\r\n        marginTop: \"30px\",\r\n    },\r\n    loadMore: {\r\n        textAlign: \"right\",\r\n        marginTop: \"20px\",\r\n        marginBottom: \"40px\",\r\n    },\r\n    badge: {\r\n        marginLeft: theme.spacing(1),\r\n        height: 17,\r\n    },\r\n    orderSelect: {\r\n        textAlign: \"right\",\r\n        marginTop: 5,\r\n    },\r\n});\r\nconst mapStateToProps = () => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n    };\r\n};\r\n\r\nclass MyShareCompoment extends Component {\r\n    state = {\r\n        page: 1,\r\n        total: 0,\r\n        shareList: [],\r\n        showPwd: null,\r\n        orderBy: \"created_at DESC\",\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        this.loadList(1, this.state.orderBy);\r\n    };\r\n\r\n    showPwd = (pwd) => {\r\n        this.setState({ showPwd: pwd });\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({ showPwd: null });\r\n    };\r\n\r\n    removeShare = (id) => {\r\n        API.delete(\"/share/\" + id)\r\n            .then(() => {\r\n                let oldList = this.state.shareList;\r\n                oldList = oldList.filter((value) => {\r\n                    return value.key !== id;\r\n                });\r\n                this.setState({\r\n                    shareList: oldList,\r\n                    total: this.state.total - 1,\r\n                });\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"分享已取消\",\r\n                    \"success\"\r\n                );\r\n                if (oldList.length === 0) {\r\n                    this.loadList(1, this.state.orderBy);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    changePermission = (id) => {\r\n        const newPwd = Math.random().toString(36).substr(2).slice(2, 8);\r\n        const oldList = this.state.shareList;\r\n        const shareIndex = oldList.findIndex((value) => {\r\n            return value.key === id;\r\n        });\r\n        API.patch(\"/share/\" + id, {\r\n            prop: \"password\",\r\n            value: oldList[shareIndex].password === \"\" ? newPwd : \"\",\r\n        })\r\n            .then((response) => {\r\n                oldList[shareIndex].password = response.data;\r\n                this.setState({\r\n                    shareList: oldList,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    changePreviewOption = (id) => {\r\n        const oldList = this.state.shareList;\r\n        const shareIndex = oldList.findIndex((value) => {\r\n            return value.key === id;\r\n        });\r\n        API.patch(\"/share/\" + id, {\r\n            prop: \"preview_enabled\",\r\n            value: oldList[shareIndex].preview ? \"false\" : \"true\",\r\n        })\r\n            .then((response) => {\r\n                oldList[shareIndex].preview = response.data;\r\n                this.setState({\r\n                    shareList: oldList,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    loadList = (page, orderBy) => {\r\n        const order = orderBy.split(\" \");\r\n        API.get(\r\n            \"/share?page=\" +\r\n                page +\r\n                \"&order_by=\" +\r\n                order[0] +\r\n                \"&order=\" +\r\n                order[1]\r\n        )\r\n            .then((response) => {\r\n                if (response.data.items.length === 0) {\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        \"没有更多了\",\r\n                        \"info\"\r\n                    );\r\n                }\r\n                this.setState({\r\n                    total: response.data.total,\r\n                    shareList: response.data.items,\r\n                });\r\n            })\r\n            .catch(() => {\r\n                this.props.toggleSnackbar(\"top\", \"right\", \"加载失败\", \"error\");\r\n            });\r\n    };\r\n\r\n    handlePageChange = (event, value) => {\r\n        this.setState({\r\n            page: value,\r\n        });\r\n        this.loadList(value, this.state.orderBy);\r\n    };\r\n\r\n    handleOrderChange = (event) => {\r\n        this.setState({\r\n            orderBy: event.target.value,\r\n        });\r\n        this.loadList(this.state.page, event.target.value);\r\n    };\r\n\r\n    isExpired = (share) => {\r\n        return share.expire < -1 || share.remain_downloads === 0;\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className={classes.layout}>\r\n                <Grid container>\r\n                    <Grid sm={6} xs={6}>\r\n                        <Typography color=\"textSecondary\" variant=\"h4\">\r\n                            我的分享\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid sm={6} xs={6} className={classes.orderSelect}>\r\n                        <FormControl>\r\n                            <Select\r\n                                color={\"secondary\"}\r\n                                onChange={this.handleOrderChange}\r\n                                value={this.state.orderBy}\r\n                            >\r\n                                <MenuItem value={\"created_at DESC\"}>\r\n                                    创建日期由晚到早\r\n                                </MenuItem>\r\n                                <MenuItem value={\"created_at ASC\"}>\r\n                                    创建日期由早到晚\r\n                                </MenuItem>\r\n                                <MenuItem value={\"downloads DESC\"}>\r\n                                    下载次数由大到小\r\n                                </MenuItem>\r\n                                <MenuItem value={\"downloads ASC\"}>\r\n                                    下载次数由小到大\r\n                                </MenuItem>\r\n                                <MenuItem value={\"views DESC\"}>\r\n                                    浏览次数由大到小\r\n                                </MenuItem>\r\n                                <MenuItem value={\"views ASC\"}>\r\n                                    浏览次数由小到大\r\n                                </MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container spacing={24} className={classes.gird}>\r\n                    {this.state.shareList.map((value) => (\r\n                        <Grid\r\n                            item\r\n                            xs={12}\r\n                            sm={4}\r\n                            key={value.id}\r\n                            className={classes.cardContainer}\r\n                        >\r\n                            <Card className={classes.card}>\r\n                                <CardHeader\r\n                                    avatar={\r\n                                        <div>\r\n                                            {!value.is_dir && (\r\n                                                <TypeIcon\r\n                                                    fileName={\r\n                                                        value.source\r\n                                                            ? value.source.name\r\n                                                            : \"\"\r\n                                                    }\r\n                                                    isUpload\r\n                                                />\r\n                                            )}{\" \"}\r\n                                            {value.is_dir && (\r\n                                                <Avatar\r\n                                                    className={\r\n                                                        classes.avatarFolder\r\n                                                    }\r\n                                                >\r\n                                                    <FolderIcon />\r\n                                                </Avatar>\r\n                                            )}\r\n                                        </div>\r\n                                    }\r\n                                    title={\r\n                                        <Tooltip\r\n                                            placement=\"top\"\r\n                                            title={\r\n                                                value.source\r\n                                                    ? value.source.name\r\n                                                    : \"[原始对象不存在]\"\r\n                                            }\r\n                                        >\r\n                                            <Typography\r\n                                                noWrap\r\n                                                className={classes.shareTitle}\r\n                                            >\r\n                                                {value.source\r\n                                                    ? value.source.name\r\n                                                    : \"[原始对象不存在]\"}{\" \"}\r\n                                            </Typography>\r\n                                        </Tooltip>\r\n                                    }\r\n                                    subheader={\r\n                                        <span>\r\n                                            {formatLocalTime(\r\n                                                value.create_date,\r\n                                                \"YYYY-MM-DD H:mm:ss\"\r\n                                            )}\r\n                                            {this.isExpired(value) && (\r\n                                                <Chip\r\n                                                    size=\"small\"\r\n                                                    className={classes.badge}\r\n                                                    label=\"已失效\"\r\n                                                />\r\n                                            )}\r\n                                        </span>\r\n                                    }\r\n                                />\r\n                                <Divider />\r\n                                <CardActions\r\n                                    disableActionSpacing\r\n                                    style={{\r\n                                        display: \"block\",\r\n                                        textAlign: \"right\",\r\n                                    }}\r\n                                >\r\n                                    <Tooltip placement=\"top\" title=\"打开\">\r\n                                        <IconButton\r\n                                            onClick={() =>\r\n                                                this.props.history.push(\r\n                                                    \"/s/\" +\r\n                                                        value.key +\r\n                                                        (value.password === \"\"\r\n                                                            ? \"\"\r\n                                                            : \"?password=\" +\r\n                                                              value.password)\r\n                                                )\r\n                                            }\r\n                                        >\r\n                                            <OpenIcon fontSize={\"small\"} />\r\n                                        </IconButton>\r\n                                    </Tooltip>{\" \"}\r\n                                    {value.password !== \"\" && (\r\n                                        <>\r\n                                            <Tooltip\r\n                                                placement=\"top\"\r\n                                                title=\"变更为公开分享\"\r\n                                                onClick={() =>\r\n                                                    this.changePermission(\r\n                                                        value.key\r\n                                                    )\r\n                                                }\r\n                                            >\r\n                                                <IconButton>\r\n                                                    <LockIcon\r\n                                                        fontSize={\"small\"}\r\n                                                    />\r\n                                                </IconButton>\r\n                                            </Tooltip>\r\n                                            <Tooltip\r\n                                                placement=\"top\"\r\n                                                title=\"查看密码\"\r\n                                                onClick={() =>\r\n                                                    this.showPwd(value.password)\r\n                                                }\r\n                                            >\r\n                                                <IconButton>\r\n                                                    <VpnKey\r\n                                                        fontSize={\"small\"}\r\n                                                    />\r\n                                                </IconButton>\r\n                                            </Tooltip>\r\n                                        </>\r\n                                    )}\r\n                                    {value.password === \"\" && (\r\n                                        <Tooltip\r\n                                            placement=\"top\"\r\n                                            title=\"变更为私密分享\"\r\n                                            onClick={() =>\r\n                                                this.changePermission(value.key)\r\n                                            }\r\n                                        >\r\n                                            <IconButton>\r\n                                                <UnlockIcon\r\n                                                    fontSize={\"small\"}\r\n                                                />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    )}\r\n                                    <Tooltip\r\n                                        placement=\"top\"\r\n                                        title={\r\n                                            value.preview\r\n                                                ? \"禁止预览\"\r\n                                                : \"允许预览\"\r\n                                        }\r\n                                        onClick={() =>\r\n                                            this.changePreviewOption(value.key)\r\n                                        }\r\n                                    >\r\n                                        <IconButton>\r\n                                            <ToggleIcon\r\n                                                on={value.preview}\r\n                                                onIcon={\r\n                                                    <EyeIcon\r\n                                                        fontSize={\"small\"}\r\n                                                    />\r\n                                                }\r\n                                                offIcon={\r\n                                                    <VisibilityOff\r\n                                                        fontSize={\"small\"}\r\n                                                    />\r\n                                                }\r\n                                            />\r\n                                        </IconButton>\r\n                                    </Tooltip>\r\n                                    <Tooltip\r\n                                        placement=\"top\"\r\n                                        title=\"取消分享\"\r\n                                        onClick={() =>\r\n                                            this.removeShare(value.key)\r\n                                        }\r\n                                    >\r\n                                        <IconButton>\r\n                                            <DeleteIcon fontSize={\"small\"} />\r\n                                        </IconButton>\r\n                                    </Tooltip>\r\n                                </CardActions>\r\n                            </Card>\r\n                        </Grid>\r\n                    ))}\r\n                </Grid>\r\n                <div className={classes.loadMore}>\r\n                    <Pagination\r\n                        count={Math.ceil(this.state.total / 18)}\r\n                        onChange={this.handlePageChange}\r\n                        color=\"secondary\"\r\n                    />\r\n                </div>{\" \"}\r\n                <Dialog\r\n                    open={this.state.showPwd !== null}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle> 分享密码 </DialogTitle>{\" \"}\r\n                    <DialogContent>\r\n                        <TextField\r\n                            id=\"standard-name\"\r\n                            value={this.state.showPwd}\r\n                            margin=\"normal\"\r\n                            autoFocus\r\n                        />\r\n                    </DialogContent>{\" \"}\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"default\">\r\n                            关闭{\" \"}\r\n                        </Button>{\" \"}\r\n                    </DialogActions>{\" \"}\r\n                </Dialog>{\" \"}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst MyShare = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(MyShareCompoment)));\r\n\r\nexport default MyShare;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    contentFix: {\r\n        padding: \"10px 24px 0px 24px\",\r\n    },\r\n    wrapper: {\r\n        margin: theme.spacing(1),\r\n        position: \"relative\",\r\n    },\r\n    buttonProgress: {\r\n        color: theme.palette.secondary.light,\r\n        position: \"absolute\",\r\n        top: \"50%\",\r\n        left: \"50%\",\r\n        marginTop: -12,\r\n        marginLeft: -12,\r\n    },\r\n    content: {\r\n        padding: 0,\r\n    },\r\n}));\r\n\r\nexport default function SelectFileDialog(props) {\r\n    const [files, setFiles] = useState(props.files);\r\n\r\n    useEffect(() => {\r\n        setFiles(props.files);\r\n    }, [props.files]);\r\n\r\n    const handleChange = (index) => (event) => {\r\n        const filesCopy = [...files];\r\n        // eslint-disable-next-line\r\n        filesCopy.map((v, k) => {\r\n            if (v.index === index) {\r\n                filesCopy[k] = {\r\n                    ...filesCopy[k],\r\n                    selected: event.target.checked ? \"true\" : \"false\",\r\n                };\r\n            }\r\n        });\r\n        setFiles(filesCopy);\r\n    };\r\n\r\n    const submit = () => {\r\n        const index = [];\r\n        // eslint-disable-next-line\r\n        files.map((v) => {\r\n            if (v.selected === \"true\") {\r\n                index.push(parseInt(v.index));\r\n            }\r\n        });\r\n        props.onSubmit(index);\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">选择要下载的文件</DialogTitle>\r\n            <DialogContent dividers={\"paper\"} className={classes.content}>\r\n                {files.map((v, k) => {\r\n                    return (\r\n                        <MenuItem key={k}>\r\n                            <FormGroup row>\r\n                                <FormControlLabel\r\n                                    control={\r\n                                        <Checkbox\r\n                                            onChange={handleChange(v.index)}\r\n                                            checked={v.selected === \"true\"}\r\n                                            value=\"checkedA\"\r\n                                        />\r\n                                    }\r\n                                    label={v.path}\r\n                                />\r\n                            </FormGroup>\r\n                        </MenuItem>\r\n                    );\r\n                })}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={props.onClose}>取消</Button>\r\n                <div className={classes.wrapper}>\r\n                    <Button\r\n                        color=\"primary\"\r\n                        onClick={submit}\r\n                        disabled={props.modalsLoading}\r\n                    >\r\n                        确定\r\n                        {props.modalsLoading && (\r\n                            <CircularProgress\r\n                                size={24}\r\n                                className={classes.buttonProgress}\r\n                            />\r\n                        )}\r\n                    </Button>\r\n                </div>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useCallback, useEffect } from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    darken,\r\n    IconButton,\r\n    lighten,\r\n    LinearProgress,\r\n    makeStyles,\r\n    Typography,\r\n    useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport { hex2bin, sizeToString } from \"../../utils\";\r\nimport PermMediaIcon from \"@material-ui/icons/PermMedia\";\r\nimport TypeIcon from \"../FileManager/TypeIcon\";\r\nimport MuiExpansionPanel from \"@material-ui/core/ExpansionPanel\";\r\nimport MuiExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\r\nimport MuiExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { ExpandMore, HighlightOff } from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport API from \"../../middleware/Api\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TimeAgo from \"timeago-react\";\r\nimport SelectFileDialog from \"../Modals/SelectFile\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst ExpansionPanel = withStyles({\r\n    root: {\r\n        maxWidth: \"100%\",\r\n        boxShadow: \"none\",\r\n        \"&:not(:last-child)\": {\r\n            borderBottom: 0,\r\n        },\r\n        \"&:before\": {\r\n            display: \"none\",\r\n        },\r\n        \"&$expanded\": {},\r\n    },\r\n    expanded: {},\r\n})(MuiExpansionPanel);\r\n\r\nconst ExpansionPanelSummary = withStyles({\r\n    root: {\r\n        minHeight: 0,\r\n        padding: 0,\r\n\r\n        \"&$expanded\": {\r\n            minHeight: 56,\r\n        },\r\n    },\r\n    content: {\r\n        maxWidth: \"100%\",\r\n        margin: 0,\r\n        display: \"flex\",\r\n        \"&$expanded\": {\r\n            margin: \"0\",\r\n        },\r\n    },\r\n    expanded: {},\r\n})(MuiExpansionPanelSummary);\r\n\r\nconst ExpansionPanelDetails = withStyles((theme) => ({\r\n    root: {\r\n        display: \"block\",\r\n        padding: theme.spacing(0),\r\n    },\r\n}))(MuiExpansionPanelDetails);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    card: {\r\n        marginTop: \"20px\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    iconContainer: {\r\n        width: \"90px\",\r\n        height: \"96px\",\r\n        padding: \" 35px 29px 29px 29px\",\r\n        paddingLeft: \"35px\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"none\",\r\n        },\r\n    },\r\n    content: {\r\n        width: \"100%\",\r\n        minWidth: 0,\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            borderInlineStart: \"1px \" + theme.palette.divider + \" solid\",\r\n        },\r\n    },\r\n    contentSide: {\r\n        minWidth: 0,\r\n        paddingTop: \"24px\",\r\n        paddingRight: \"28px\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"none\",\r\n        },\r\n    },\r\n    iconBig: {\r\n        fontSize: \"30px\",\r\n    },\r\n    iconMultiple: {\r\n        fontSize: \"30px\",\r\n        color: \"#607D8B\",\r\n    },\r\n    progress: {\r\n        marginTop: 8,\r\n        marginBottom: 4,\r\n    },\r\n    expand: {\r\n        transition: \".15s transform ease-in-out\",\r\n    },\r\n    expanded: {\r\n        transform: \"rotate(180deg)\",\r\n    },\r\n    subFileName: {\r\n        display: \"flex\",\r\n    },\r\n    subFileIcon: {\r\n        marginRight: \"20px\",\r\n    },\r\n    scroll: {\r\n        overflowY: \"auto\",\r\n    },\r\n    action: {\r\n        padding: theme.spacing(2),\r\n        textAlign: \"right\",\r\n    },\r\n    actionButton: {\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    info: {\r\n        padding: theme.spacing(2),\r\n    },\r\n    infoTitle: {\r\n        fontWeight: 700,\r\n    },\r\n    infoValue: {\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    bitmap: {\r\n        width: \"100%\",\r\n        height: \"50px\",\r\n        backgroundColor: theme.palette.background.default,\r\n    },\r\n}));\r\n\r\nexport default function DownloadingCard(props) {\r\n    const canvasRef = React.createRef();\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const history = useHistory();\r\n\r\n    const [expanded, setExpanded] = React.useState(\"\");\r\n    const [task, setTask] = React.useState(props.task);\r\n    const [loading, setLoading] = React.useState(false);\r\n    const [selectDialogOpen, setSelectDialogOpen] = React.useState(false);\r\n    const [selectFileOption, setSelectFileOption] = React.useState([]);\r\n\r\n    const handleChange = (panel) => (event, newExpanded) => {\r\n        setExpanded(newExpanded ? panel : false);\r\n    };\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    useEffect(() => {\r\n        setTask(props.task);\r\n    }, [props.task]);\r\n\r\n    useEffect(() => {\r\n        if (task.info.bitfield === \"\") {\r\n            return;\r\n        }\r\n        let result = \"\";\r\n        task.info.bitfield.match(/.{1,2}/g).forEach((str) => {\r\n            result += hex2bin(str);\r\n        });\r\n        const canvas = canvasRef.current;\r\n        const context = canvas.getContext(\"2d\");\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n        context.strokeStyle = theme.palette.primary.main;\r\n        for (let i = 0; i < canvas.width; i++) {\r\n            let bit =\r\n                result[\r\n                    Math.round(((i + 1) / canvas.width) * task.info.numPieces)\r\n                ];\r\n            bit = bit ? bit : result.slice(-1);\r\n            if (bit === \"1\") {\r\n                context.beginPath();\r\n                context.moveTo(i, 0);\r\n                context.lineTo(i, canvas.height);\r\n                context.stroke();\r\n            }\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [task.info.bitfield, task.info.numPieces, theme]);\r\n\r\n    const getPercent = (completed, total) => {\r\n        if (total === 0) {\r\n            return 0;\r\n        }\r\n        return (completed / total) * 100;\r\n    };\r\n\r\n    const activeFiles = useCallback(() => {\r\n        return task.info.files.filter((v) => v.selected === \"true\");\r\n    }, [task.info.files]);\r\n\r\n    const deleteFile = (index) => {\r\n        setLoading(true);\r\n        const current = activeFiles();\r\n        const newIndex = [];\r\n        const newFiles = [];\r\n        // eslint-disable-next-line\r\n        current.map((v) => {\r\n            if (v.index !== index && v.selected) {\r\n                newIndex.push(parseInt(v.index));\r\n                newFiles.push({\r\n                    ...v,\r\n                    selected: \"true\",\r\n                });\r\n            } else {\r\n                newFiles.push({\r\n                    ...v,\r\n                    selected: \"false\",\r\n                });\r\n            }\r\n        });\r\n        API.put(\"/aria2/select/\" + task.info.gid, {\r\n            indexes: newIndex,\r\n        })\r\n            .then(() => {\r\n                setTask({\r\n                    ...task,\r\n                    info: {\r\n                        ...task.info,\r\n                        files: newFiles,\r\n                    },\r\n                });\r\n                ToggleSnackbar(\"top\", \"right\", \"文件已删除\", \"success\");\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            })\r\n            .then(() => {\r\n                setLoading(false);\r\n            });\r\n    };\r\n\r\n    const getDownloadName = useCallback(() => {\r\n        if (task.info.bittorrent.info.name !== \"\") {\r\n            return task.info.bittorrent.info.name;\r\n        }\r\n        return task.name === \".\" ? \"[未知]\" : task.name;\r\n    }, [task]);\r\n\r\n    const getIcon = useCallback(() => {\r\n        if (task.info.bittorrent.mode === \"multi\") {\r\n            return (\r\n                <Badge badgeContent={activeFiles().length} color=\"secondary\">\r\n                    <PermMediaIcon className={classes.iconMultiple} />\r\n                </Badge>\r\n            );\r\n        } else {\r\n            return (\r\n                <TypeIcon\r\n                    className={classes.iconBig}\r\n                    fileName={getDownloadName(task)}\r\n                />\r\n            );\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [task, classes]);\r\n\r\n    const cancel = () => {\r\n        setLoading(true);\r\n        API.delete(\"/aria2/task/\" + task.info.gid)\r\n            .then(() => {\r\n                ToggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"任务已取消，状态会在稍后更新\",\r\n                    \"success\"\r\n                );\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            })\r\n            .then(() => {\r\n                setLoading(false);\r\n            });\r\n    };\r\n\r\n    const changeSelectedFile = (fileIndex) => {\r\n        setLoading(true);\r\n        API.put(\"/aria2/select/\" + task.info.gid, {\r\n            indexes: fileIndex,\r\n        })\r\n            .then(() => {\r\n                ToggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"操作成功，状态会在稍后更新\",\r\n                    \"success\"\r\n                );\r\n                setSelectDialogOpen(false);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            })\r\n            .then(() => {\r\n                setLoading(false);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Card className={classes.card}>\r\n            <SelectFileDialog\r\n                open={selectDialogOpen}\r\n                onClose={() => setSelectDialogOpen(false)}\r\n                modalsLoading={loading}\r\n                files={selectFileOption}\r\n                onSubmit={changeSelectedFile}\r\n            />\r\n            <ExpansionPanel\r\n                square\r\n                expanded={expanded === task.info.gid}\r\n                onChange={handleChange(task.info.gid)}\r\n            >\r\n                <ExpansionPanelSummary\r\n                    aria-controls=\"panel1d-content\"\r\n                    id=\"panel1d-header\"\r\n                >\r\n                    <div className={classes.iconContainer}>{getIcon()}</div>\r\n                    <CardContent className={classes.content}>\r\n                        <Typography color=\"primary\" noWrap>\r\n                            <Tooltip title={getDownloadName()}>\r\n                                <span>{getDownloadName()}</span>\r\n                            </Tooltip>\r\n                        </Typography>\r\n                        <LinearProgress\r\n                            color=\"secondary\"\r\n                            variant=\"determinate\"\r\n                            className={classes.progress}\r\n                            value={getPercent(task.downloaded, task.total)}\r\n                        />\r\n                        <Typography\r\n                            variant=\"body2\"\r\n                            color=\"textSecondary\"\r\n                            noWrap\r\n                        >\r\n                            {task.total > 0 && (\r\n                                <span>\r\n                                    {getPercent(\r\n                                        task.downloaded,\r\n                                        task.total\r\n                                    ).toFixed(2)}\r\n                                    % -{\" \"}\r\n                                    {task.downloaded === 0\r\n                                        ? \"0Bytes\"\r\n                                        : sizeToString(task.downloaded)}\r\n                                    /\r\n                                    {task.total === 0\r\n                                        ? \"0Bytes\"\r\n                                        : sizeToString(task.total)}{\" \"}\r\n                                    -{\" \"}\r\n                                    {task.speed === \"0\"\r\n                                        ? \"0B/s\"\r\n                                        : sizeToString(task.speed) + \"/s\"}\r\n                                </span>\r\n                            )}\r\n                            {task.total === 0 && <span> - </span>}\r\n                        </Typography>\r\n                    </CardContent>\r\n                    <CardContent className={classes.contentSide}>\r\n                        <IconButton>\r\n                            <ExpandMore\r\n                                className={classNames(\r\n                                    {\r\n                                        [classes.expanded]:\r\n                                            expanded === task.info.gid,\r\n                                    },\r\n                                    classes.expand\r\n                                )}\r\n                            />\r\n                        </IconButton>\r\n                    </CardContent>\r\n                </ExpansionPanelSummary>\r\n                <ExpansionPanelDetails>\r\n                    <Divider />\r\n                    {task.info.bittorrent.mode === \"multi\" && (\r\n                        <div className={classes.scroll}>\r\n                            <Table size=\"small\">\r\n                                <TableBody>\r\n                                    {activeFiles().map((value) => {\r\n                                        return (\r\n                                            <TableRow\r\n                                                key={value.index}\r\n                                                style={{\r\n                                                    background:\r\n                                                        \"linear-gradient(to right, \" +\r\n                                                        (theme.palette.type ===\r\n                                                        \"dark\"\r\n                                                            ? darken(\r\n                                                                  theme.palette\r\n                                                                      .primary\r\n                                                                      .main,\r\n                                                                  0.4\r\n                                                              )\r\n                                                            : lighten(\r\n                                                                  theme.palette\r\n                                                                      .primary\r\n                                                                      .main,\r\n                                                                  0.85\r\n                                                              )) +\r\n                                                        \" 0%,\" +\r\n                                                        (theme.palette.type ===\r\n                                                        \"dark\"\r\n                                                            ? darken(\r\n                                                                  theme.palette\r\n                                                                      .primary\r\n                                                                      .main,\r\n                                                                  0.4\r\n                                                              )\r\n                                                            : lighten(\r\n                                                                  theme.palette\r\n                                                                      .primary\r\n                                                                      .main,\r\n                                                                  0.85\r\n                                                              )) +\r\n                                                        \" \" +\r\n                                                        getPercent(\r\n                                                            value.completedLength,\r\n                                                            value.length\r\n                                                        ).toFixed(0) +\r\n                                                        \"%,\" +\r\n                                                        theme.palette.background\r\n                                                            .paper +\r\n                                                        \" \" +\r\n                                                        getPercent(\r\n                                                            value.completedLength,\r\n                                                            value.length\r\n                                                        ).toFixed(0) +\r\n                                                        \"%,\" +\r\n                                                        theme.palette.background\r\n                                                            .paper +\r\n                                                        \" 100%)\",\r\n                                                }}\r\n                                            >\r\n                                                <TableCell\r\n                                                    component=\"th\"\r\n                                                    scope=\"row\"\r\n                                                >\r\n                                                    <Typography\r\n                                                        className={\r\n                                                            classes.subFileName\r\n                                                        }\r\n                                                    >\r\n                                                        <TypeIcon\r\n                                                            className={\r\n                                                                classes.subFileIcon\r\n                                                            }\r\n                                                            fileName={\r\n                                                                value.path\r\n                                                            }\r\n                                                        />\r\n                                                        {value.path}\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    component=\"th\"\r\n                                                    scope=\"row\"\r\n                                                >\r\n                                                    <Typography noWrap>\r\n                                                        {\" \"}\r\n                                                        {sizeToString(\r\n                                                            value.length\r\n                                                        )}\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    component=\"th\"\r\n                                                    scope=\"row\"\r\n                                                >\r\n                                                    <Typography noWrap>\r\n                                                        {getPercent(\r\n                                                            value.completedLength,\r\n                                                            value.length\r\n                                                        ).toFixed(2)}\r\n                                                        %\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                                <TableCell>\r\n                                                    <Tooltip title=\"删除此文件\">\r\n                                                        <IconButton\r\n                                                            onClick={() =>\r\n                                                                deleteFile(\r\n                                                                    value.index\r\n                                                                )\r\n                                                            }\r\n                                                            disabled={loading}\r\n                                                            size={\"small\"}\r\n                                                        >\r\n                                                            <HighlightOff />\r\n                                                        </IconButton>\r\n                                                    </Tooltip>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        );\r\n                                    })}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className={classes.action}>\r\n                        <Button\r\n                            className={classes.actionButton}\r\n                            variant=\"outlined\"\r\n                            color=\"secondary\"\r\n                            onClick={() =>\r\n                                history.push(\r\n                                    \"/#/home?path=\" +\r\n                                        encodeURIComponent(task.dst)\r\n                                )\r\n                            }\r\n                        >\r\n                            打开存放目录\r\n                        </Button>\r\n                        {task.info.bittorrent.mode === \"multi\" && (\r\n                            <Button\r\n                                className={classes.actionButton}\r\n                                variant=\"outlined\"\r\n                                color=\"secondary\"\r\n                                disabled={loading}\r\n                                onClick={() => {\r\n                                    setSelectDialogOpen(true);\r\n                                    setSelectFileOption([\r\n                                        ...props.task.info.files,\r\n                                    ]);\r\n                                }}\r\n                            >\r\n                                选择要下载的文件\r\n                            </Button>\r\n                        )}\r\n                        <Button\r\n                            className={classes.actionButton}\r\n                            onClick={cancel}\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            disabled={loading}\r\n                        >\r\n                            取消任务\r\n                        </Button>\r\n                    </div>\r\n                    <Divider />\r\n                    <div className={classes.info}>\r\n                        {task.info.bitfield !== \"\" && (\r\n                            <canvas\r\n                                width={\"700\"}\r\n                                height={\"100\"}\r\n                                ref={canvasRef}\r\n                                className={classes.bitmap}\r\n                            />\r\n                        )}\r\n\r\n                        <Grid container>\r\n                            <Grid container xs={12} sm={4}>\r\n                                <Grid item xs={4} className={classes.infoTitle}>\r\n                                    更新于：\r\n                                </Grid>\r\n                                <Grid item xs={8} className={classes.infoValue}>\r\n                                    <TimeAgo\r\n                                        datetime={task.update}\r\n                                        locale=\"zh_CN\"\r\n                                    />\r\n                                </Grid>\r\n                            </Grid>\r\n                            <Grid container xs={12} sm={4}>\r\n                                <Grid item xs={4} className={classes.infoTitle}>\r\n                                    上传大小：\r\n                                </Grid>\r\n                                <Grid item xs={8} className={classes.infoValue}>\r\n                                    {sizeToString(task.info.uploadLength)}\r\n                                </Grid>\r\n                            </Grid>\r\n                            <Grid container xs={12} sm={4}>\r\n                                <Grid item xs={4} className={classes.infoTitle}>\r\n                                    上传速度：\r\n                                </Grid>\r\n                                <Grid item xs={8} className={classes.infoValue}>\r\n                                    {sizeToString(task.info.uploadSpeed)} / s\r\n                                </Grid>\r\n                            </Grid>\r\n                            {task.info.bittorrent.mode !== \"\" && (\r\n                                <>\r\n                                    <Grid container xs={12} sm={8}>\r\n                                        <Grid\r\n                                            item\r\n                                            sm={2}\r\n                                            xs={4}\r\n                                            className={classes.infoTitle}\r\n                                        >\r\n                                            InfoHash：\r\n                                        </Grid>\r\n                                        <Grid\r\n                                            item\r\n                                            sm={10}\r\n                                            xs={8}\r\n                                            style={{\r\n                                                wordBreak: \"break-all\",\r\n                                            }}\r\n                                            className={classes.infoValue}\r\n                                        >\r\n                                            {task.info.infoHash}\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                    <Grid container xs={12} sm={4}>\r\n                                        <Grid\r\n                                            item\r\n                                            xs={4}\r\n                                            className={classes.infoTitle}\r\n                                        >\r\n                                            做种者：\r\n                                        </Grid>\r\n                                        <Grid\r\n                                            item\r\n                                            xs={8}\r\n                                            className={classes.infoValue}\r\n                                        >\r\n                                            {task.info.numSeeders}\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                    <Grid container xs={12} sm={4}>\r\n                                        <Grid\r\n                                            item\r\n                                            xs={4}\r\n                                            className={classes.infoTitle}\r\n                                        >\r\n                                            做种中：\r\n                                        </Grid>\r\n                                        <Grid\r\n                                            item\r\n                                            xs={8}\r\n                                            className={classes.infoValue}\r\n                                        >\r\n                                            {task.info.seeder === \"true\"\r\n                                                ? \"是\"\r\n                                                : \"否\"}\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                </>\r\n                            )}\r\n                            <Grid container xs={12} sm={4}>\r\n                                <Grid item xs={4} className={classes.infoTitle}>\r\n                                    分片大小：\r\n                                </Grid>\r\n                                <Grid item xs={8} className={classes.infoValue}>\r\n                                    {sizeToString(task.info.pieceLength)}\r\n                                </Grid>\r\n                            </Grid>\r\n                            <Grid container xs={12} sm={4}>\r\n                                <Grid item xs={4} className={classes.infoTitle}>\r\n                                    分片数量：\r\n                                </Grid>\r\n                                <Grid item xs={8} className={classes.infoValue}>\r\n                                    {task.info.numPieces}\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </div>\r\n                </ExpansionPanelDetails>\r\n            </ExpansionPanel>\r\n        </Card>\r\n    );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    IconButton,\r\n    makeStyles,\r\n    Typography,\r\n    useTheme,\r\n} from \"@material-ui/core\";\r\nimport { sizeToString } from \"../../utils\";\r\nimport PermMediaIcon from \"@material-ui/icons/PermMedia\";\r\nimport TypeIcon from \"../FileManager/TypeIcon\";\r\nimport MuiExpansionPanel from \"@material-ui/core/ExpansionPanel\";\r\nimport MuiExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\r\nimport MuiExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { ExpandMore } from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport API from \"../../middleware/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport { useHistory } from \"react-router\";\r\nimport { formatLocalTime } from \"../../utils/datetime\";\r\n\r\nconst ExpansionPanel = withStyles({\r\n    root: {\r\n        maxWidth: \"100%\",\r\n        boxShadow: \"none\",\r\n        \"&:not(:last-child)\": {\r\n            borderBottom: 0,\r\n        },\r\n        \"&:before\": {\r\n            display: \"none\",\r\n        },\r\n        \"&$expanded\": {},\r\n    },\r\n    expanded: {},\r\n})(MuiExpansionPanel);\r\n\r\nconst ExpansionPanelSummary = withStyles({\r\n    root: {\r\n        minHeight: 0,\r\n        padding: 0,\r\n\r\n        \"&$expanded\": {\r\n            minHeight: 56,\r\n        },\r\n    },\r\n    content: {\r\n        maxWidth: \"100%\",\r\n        margin: 0,\r\n        display: \"flex\",\r\n        \"&$expanded\": {\r\n            margin: \"0\",\r\n        },\r\n    },\r\n    expanded: {},\r\n})(MuiExpansionPanelSummary);\r\n\r\nconst ExpansionPanelDetails = withStyles((theme) => ({\r\n    root: {\r\n        display: \"block\",\r\n        padding: theme.spacing(0),\r\n    },\r\n}))(MuiExpansionPanelDetails);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    card: {\r\n        marginTop: \"20px\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    iconContainer: {\r\n        width: \"90px\",\r\n        height: \"96px\",\r\n        padding: \" 35px 29px 29px 29px\",\r\n        paddingLeft: \"35px\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"none\",\r\n        },\r\n    },\r\n    content: {\r\n        width: \"100%\",\r\n        minWidth: 0,\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            borderInlineStart: \"1px \" + theme.palette.divider + \" solid\",\r\n        },\r\n        textAlign: \"left\",\r\n    },\r\n    contentSide: {\r\n        minWidth: 0,\r\n        paddingTop: \"24px\",\r\n        paddingRight: \"28px\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"none\",\r\n        },\r\n    },\r\n    iconBig: {\r\n        fontSize: \"30px\",\r\n    },\r\n    iconMultiple: {\r\n        fontSize: \"30px\",\r\n        color: \"#607D8B\",\r\n    },\r\n    progress: {\r\n        marginTop: 8,\r\n        marginBottom: 4,\r\n    },\r\n    expand: {\r\n        transition: \".15s transform ease-in-out\",\r\n    },\r\n    expanded: {\r\n        transform: \"rotate(180deg)\",\r\n    },\r\n    subFileName: {\r\n        display: \"flex\",\r\n    },\r\n    subFileIcon: {\r\n        marginRight: \"20px\",\r\n    },\r\n    scroll: {\r\n        overflowY: \"auto\",\r\n    },\r\n    action: {\r\n        padding: theme.spacing(2),\r\n        textAlign: \"right\",\r\n    },\r\n    actionButton: {\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    info: {\r\n        padding: theme.spacing(2),\r\n    },\r\n    infoTitle: {\r\n        fontWeight: 700,\r\n    },\r\n    infoValue: {\r\n        color: theme.palette.text.secondary,\r\n    },\r\n}));\r\n\r\nexport default function FinishedCard(props) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const history = useHistory();\r\n\r\n    const [expanded, setExpanded] = React.useState(false);\r\n    const [loading, setLoading] = React.useState(false);\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const handleChange = () => (event, newExpanded) => {\r\n        setExpanded(!!newExpanded);\r\n    };\r\n\r\n    const cancel = () => {\r\n        setLoading(true);\r\n        API.delete(\"/aria2/task/\" + props.task.gid)\r\n            .then(() => {\r\n                ToggleSnackbar(\"top\", \"right\", \"删除成功\", \"success\");\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            })\r\n            .then(() => {\r\n                window.location.reload();\r\n            });\r\n    };\r\n\r\n    const getPercent = (completed, total) => {\r\n        if (total == 0) {\r\n            return 0;\r\n        }\r\n        return (completed / total) * 100;\r\n    };\r\n\r\n    const getDownloadName = useCallback(() => {\r\n        return props.task.name === \".\" ? \"[未知]\" : props.task.name;\r\n    }, [props.task.name]);\r\n\r\n    const activeFiles = useCallback(() => {\r\n        return props.task.files.filter((v) => v.selected === \"true\");\r\n    }, [props.task.files]);\r\n\r\n    const getIcon = useCallback(() => {\r\n        if (props.task.files.length > 1) {\r\n            return (\r\n                <Badge badgeContent={activeFiles().length} color=\"secondary\">\r\n                    <PermMediaIcon className={classes.iconMultiple} />\r\n                </Badge>\r\n            );\r\n        } else {\r\n            return (\r\n                <TypeIcon\r\n                    className={classes.iconBig}\r\n                    fileName={getDownloadName(props.task)}\r\n                />\r\n            );\r\n        }\r\n    }, [props.task, classes]);\r\n\r\n    const getTaskError = (error) => {\r\n        try {\r\n            const res = JSON.parse(error);\r\n            return res.msg + \"：\" + res.error;\r\n        } catch (e) {\r\n            return \"文件转存失败\";\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className={classes.card}>\r\n            <ExpansionPanel\r\n                square\r\n                expanded={expanded}\r\n                onChange={handleChange(\"\")}\r\n            >\r\n                <ExpansionPanelSummary\r\n                    aria-controls=\"panel1d-content\"\r\n                    id=\"panel1d-header\"\r\n                >\r\n                    <div className={classes.iconContainer}>{getIcon()}</div>\r\n                    <CardContent className={classes.content}>\r\n                        <Typography color=\"primary\" noWrap>\r\n                            <Tooltip title={getDownloadName()}>\r\n                                <span>{getDownloadName()}</span>\r\n                            </Tooltip>\r\n                        </Typography>\r\n                        {props.task.status === 3 && (\r\n                            <Tooltip title={props.task.error}>\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    color=\"error\"\r\n                                    noWrap\r\n                                >\r\n                                    下载出错：{props.task.error}\r\n                                </Typography>\r\n                            </Tooltip>\r\n                        )}\r\n                        {props.task.status === 5 && (\r\n                            <Typography\r\n                                variant=\"body2\"\r\n                                color=\"textSecondary\"\r\n                                noWrap\r\n                            >\r\n                                已取消\r\n                                {props.task.error !== \"\" && (\r\n                                    <span>：{props.task.error}</span>\r\n                                )}\r\n                            </Typography>\r\n                        )}\r\n                        {props.task.status === 4 &&\r\n                            props.task.task_status === 4 && (\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    style={{\r\n                                        color: theme.palette.success.main,\r\n                                    }}\r\n                                    noWrap\r\n                                >\r\n                                    已完成\r\n                                </Typography>\r\n                            )}\r\n                        {props.task.status === 4 &&\r\n                            props.task.task_status === 0 && (\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    style={{\r\n                                        color: theme.palette.success.light,\r\n                                    }}\r\n                                    noWrap\r\n                                >\r\n                                    已完成，转存排队中\r\n                                </Typography>\r\n                            )}\r\n                        {props.task.status === 4 &&\r\n                            props.task.task_status === 1 && (\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    style={{\r\n                                        color: theme.palette.success.light,\r\n                                    }}\r\n                                    noWrap\r\n                                >\r\n                                    已完成，转存处理中\r\n                                </Typography>\r\n                            )}\r\n                        {props.task.status === 4 &&\r\n                            props.task.task_status === 2 && (\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    color={\"error\"}\r\n                                    noWrap\r\n                                >\r\n                                    {getTaskError(props.task.task_error)}\r\n                                </Typography>\r\n                            )}\r\n                    </CardContent>\r\n                    <CardContent className={classes.contentSide}>\r\n                        <IconButton>\r\n                            <ExpandMore\r\n                                className={classNames(\r\n                                    {\r\n                                        [classes.expanded]: expanded,\r\n                                    },\r\n                                    classes.expand\r\n                                )}\r\n                            />\r\n                        </IconButton>\r\n                    </CardContent>\r\n                </ExpansionPanelSummary>\r\n                <ExpansionPanelDetails>\r\n                    <Divider />\r\n                    {props.task.files.length > 1 && (\r\n                        <div className={classes.scroll}>\r\n                            <Table>\r\n                                <TableBody>\r\n                                    {activeFiles().map((value) => {\r\n                                        return (\r\n                                            <TableRow key={value.index}>\r\n                                                <TableCell\r\n                                                    component=\"th\"\r\n                                                    scope=\"row\"\r\n                                                >\r\n                                                    <Typography\r\n                                                        className={\r\n                                                            classes.subFileName\r\n                                                        }\r\n                                                    >\r\n                                                        <TypeIcon\r\n                                                            className={\r\n                                                                classes.subFileIcon\r\n                                                            }\r\n                                                            fileName={\r\n                                                                value.path\r\n                                                            }\r\n                                                        />\r\n                                                        {value.path}\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    component=\"th\"\r\n                                                    scope=\"row\"\r\n                                                >\r\n                                                    <Typography noWrap>\r\n                                                        {\" \"}\r\n                                                        {sizeToString(\r\n                                                            value.length\r\n                                                        )}\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    component=\"th\"\r\n                                                    scope=\"row\"\r\n                                                >\r\n                                                    <Typography noWrap>\r\n                                                        {getPercent(\r\n                                                            value.completedLength,\r\n                                                            value.length\r\n                                                        ).toFixed(2)}\r\n                                                        %\r\n                                                    </Typography>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        );\r\n                                    })}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className={classes.action}>\r\n                        <Button\r\n                            className={classes.actionButton}\r\n                            variant=\"outlined\"\r\n                            color=\"secondary\"\r\n                            onClick={() =>\r\n                                history.push(\r\n                                    \"/home?path=\" +\r\n                                        encodeURIComponent(props.task.dst)\r\n                                )\r\n                            }\r\n                        >\r\n                            打开存放目录\r\n                        </Button>\r\n                        <Button\r\n                            className={classes.actionButton}\r\n                            onClick={cancel}\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            disabled={loading}\r\n                        >\r\n                            删除记录\r\n                        </Button>\r\n                    </div>\r\n                    <Divider />\r\n                    <div className={classes.info}>\r\n                        <Grid container>\r\n                            <Grid container xs={12} sm={6}>\r\n                                <Grid item xs={4} className={classes.infoTitle}>\r\n                                    创建日期：\r\n                                </Grid>\r\n                                <Grid item xs={8} className={classes.infoValue}>\r\n                                    {formatLocalTime(\r\n                                        props.task.create,\r\n                                        \"YYYY-MM-DD H:mm:ss\"\r\n                                    )}\r\n                                </Grid>\r\n                            </Grid>\r\n                            <Grid container xs={12} sm={6}>\r\n                                <Grid item xs={4} className={classes.infoTitle}>\r\n                                    最后更新：\r\n                                </Grid>\r\n                                <Grid item xs={8} className={classes.infoValue}>\r\n                                    {formatLocalTime(\r\n                                        props.task.update,\r\n                                        \"YYYY-MM-DD H:mm:ss\"\r\n                                    )}\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </div>\r\n                </ExpansionPanelDetails>\r\n            </ExpansionPanel>\r\n        </Card>\r\n    );\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport { openRemoteDownloadDialog } from \"../../actions\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport AutoHidden from \"./AutoHidden\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport Modals from \"../FileManager/Modals\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    fab: {\r\n        margin: 0,\r\n        top: \"auto\",\r\n        right: 20,\r\n        bottom: 20,\r\n        left: \"auto\",\r\n        zIndex: 5,\r\n        position: \"fixed\",\r\n    },\r\n}));\r\n\r\nexport default function RemoteDownloadButton() {\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n\r\n    const OpenRemoteDownloadDialog = useCallback(\r\n        () => dispatch(openRemoteDownloadDialog()),\r\n        [dispatch]\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <Modals />\r\n            <AutoHidden enable>\r\n                <Fab\r\n                    className={classes.fab}\r\n                    color=\"secondary\"\r\n                    onClick={() => OpenRemoteDownloadDialog()}\r\n                >\r\n                    <Add />\r\n                </Fab>\r\n            </AutoHidden>\r\n        </>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport API from \"../../middleware/Api\";\r\nimport { withStyles, Typography, Button, IconButton } from \"@material-ui/core\";\r\nimport DownloadingCard from \"./DownloadingCard\";\r\nimport FinishedCard from \"./FinishedCard\";\r\nimport RemoteDownloadButton from \"../Dial/Aria2\";\r\nimport Auth from \"../../middleware/Auth\";\r\n\r\nconst styles = (theme) => ({\r\n    actions: {\r\n        display: \"flex\",\r\n    },\r\n    title: {\r\n        marginTop: \"20px\",\r\n    },\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"30px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 700,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n    },\r\n    shareTitle: {\r\n        maxWidth: \"200px\",\r\n    },\r\n    avatarFile: {\r\n        backgroundColor: theme.palette.primary.light,\r\n    },\r\n    avatarFolder: {\r\n        backgroundColor: theme.palette.secondary.light,\r\n    },\r\n    gird: {\r\n        marginTop: \"30px\",\r\n    },\r\n    hide: {\r\n        display: \"none\",\r\n    },\r\n    loadingAnimation: {\r\n        borderRadius: \"6px 6px 0 0\",\r\n    },\r\n    shareFix: {\r\n        marginLeft: \"20px\",\r\n    },\r\n    loadMore: {\r\n        textAlign: \"center\",\r\n        marginTop: \"20px\",\r\n        marginBottom: \"20px\",\r\n    },\r\n    margin: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n});\r\nconst mapStateToProps = () => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n    };\r\n};\r\n\r\nclass DownloadComponent extends Component {\r\n    page = 0;\r\n    interval = 0;\r\n\r\n    state = {\r\n        downloading: [],\r\n        loading: false,\r\n        finishedList: [],\r\n        continue: true,\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        this.loadDownloading();\r\n        this.loadMore();\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        clearTimeout(this.interval);\r\n    }\r\n\r\n    loadDownloading = () => {\r\n        this.setState({\r\n            loading: true,\r\n        });\r\n        API.get(\"/aria2/downloading\")\r\n            .then((response) => {\r\n                this.setState({\r\n                    downloading: response.data,\r\n                    loading: false,\r\n                });\r\n                // 设定自动更新\r\n                clearTimeout(this.interval);\r\n                if (response.data.length > 0) {\r\n                    this.interval = setTimeout(\r\n                        this.loadDownloading,\r\n                        1000 * response.data[0].interval\r\n                    );\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    loadMore = () => {\r\n        this.setState({\r\n            loading: true,\r\n        });\r\n        API.get(\"/aria2/finished?page=\" + ++this.page)\r\n            .then((response) => {\r\n                this.setState({\r\n                    finishedList: [\r\n                        ...this.state.finishedList,\r\n                        ...response.data,\r\n                    ],\r\n                    loading: false,\r\n                    continue: response.data.length >= 10,\r\n                });\r\n            })\r\n            .catch(() => {\r\n                this.props.toggleSnackbar(\"top\", \"right\", \"加载失败\", \"error\");\r\n                this.setState({\r\n                    loading: false,\r\n                });\r\n            });\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const user = Auth.GetUser();\r\n\r\n        return (\r\n            <div className={classes.layout}>\r\n                {user.group.allowRemoteDownload && <RemoteDownloadButton />}\r\n                <Typography\r\n                    color=\"textSecondary\"\r\n                    variant=\"h4\"\r\n                    className={classes.title}\r\n                >\r\n                    进行中\r\n                    <IconButton\r\n                        disabled={this.state.loading}\r\n                        onClick={this.loadDownloading}\r\n                    >\r\n                        <RefreshIcon />\r\n                    </IconButton>\r\n                </Typography>\r\n                {this.state.downloading.map((value, k) => (\r\n                    <DownloadingCard key={k} task={value} />\r\n                ))}\r\n                <Typography\r\n                    color=\"textSecondary\"\r\n                    variant=\"h4\"\r\n                    className={classes.title}\r\n                >\r\n                    已完成\r\n                </Typography>\r\n                <div className={classes.loadMore}>\r\n                    {this.state.finishedList.map((value, k) => {\r\n                        if (value.files) {\r\n                            return <FinishedCard key={k} task={value} />;\r\n                        }\r\n                        return null;\r\n                    })}\r\n                    <Button\r\n                        size=\"large\"\r\n                        className={classes.margin}\r\n                        disabled={!this.state.continue}\r\n                        onClick={this.loadMore}\r\n                    >\r\n                        加载更多\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst Download = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(DownloadComponent));\r\n\r\nexport default Download;\r\n","import React, { Component } from \"react\";\r\nimport AdSense from 'react-adsense';\r\nimport { connect } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\n\r\nimport {\r\n    withStyles,\r\n    Button,\r\n    Card,\r\n    Divider,\r\n    CardHeader,\r\n    CardContent,\r\n    CardActions,\r\n    TextField,\r\n    Avatar,\r\n} from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nconst styles = (theme) => ({\r\n    card: {\r\n        maxWidth: 400,\r\n        margin: \"0 auto\",\r\n    },\r\n    actions: {\r\n        display: \"flex\",\r\n    },\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"110px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n    },\r\n    continue: {\r\n        marginLeft: \"auto\",\r\n        marginRight: \"10px\",\r\n        marginRottom: \"10px\",\r\n    },\r\n    ads:{\r\n        width: '100%',\r\n        height: 90,\r\n        maxHeight: 90,\r\n        textAlign: \"center\",\r\n        marginTop: \"1.5rem\"\r\n    }\r\n});\r\nconst mapStateToProps = () => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n    };\r\n};\r\n\r\nclass LockedFileCompoment extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const query = new URLSearchParams(this.props.location.search);\r\n        this.state = {\r\n            pwd: query.get(\"password\"),\r\n        };\r\n    }\r\n\r\n    handleChange = (name) => (event) => {\r\n        this.setState({ [name]: event.target.value });\r\n    };\r\n\r\n    submit = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.pwd === \"\") {\r\n            return;\r\n        }\r\n        this.props.setPassowrd(this.state.pwd);\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className={classes.layout}>\r\n                <Card className={classes.card}>\r\n                    <CardHeader\r\n                        avatar={\r\n                            <Avatar\r\n                                aria-label=\"Recipe\"\r\n                                src={\r\n                                    \"/api/v3/user/avatar/\" +\r\n                                    this.props.share.creator.key +\r\n                                    \"/l\"\r\n                                }\r\n                            />\r\n                        }\r\n                        title={this.props.share.creator.nick + \" 的加密分享\"}\r\n                        subheader={this.props.share.create_date}\r\n                    />\r\n                    <Divider />\r\n                    <CardContent>\r\n                        <form onSubmit={this.submit}>\r\n                            <TextField\r\n                                id=\"pwd\"\r\n                                label=\"输入分享密码\"\r\n                                value={this.state.pwd}\r\n                                onChange={this.handleChange(\"pwd\")}\r\n                                margin=\"normal\"\r\n                                type=\"password\"\r\n                                autoFocus\r\n                                fullWidth\r\n                                color=\"secondary\"\r\n                            />\r\n                        </form>\r\n                    </CardContent>\r\n                    <CardActions\r\n                        className={classes.actions}\r\n                        disableActionSpacing\r\n                    >\r\n                        <Button\r\n                            onClick={this.submit}\r\n                            color=\"secondary\"\r\n                            className={classes.continue}\r\n                            variant=\"contained\"\r\n                            disabled={\r\n                                this.state.pwd === \"\" || this.props.loading\r\n                            }\r\n                        >\r\n                            继续\r\n                        </Button>\r\n                    </CardActions>\r\n                </Card>\r\n                <div className={classes.ads}>\r\n                    <AdSense.Google\r\n                        style={{ display:'inline-block',minWidth:320,maxWidth:970,width:'100%',height:90 }}\r\n                        client='ca-pub-7329474538416487'\r\n                        slot='8294203043'\r\n                        format=''\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst LockedFile = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(LockedFileCompoment)));\r\n\r\nexport default LockedFile;\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Avatar, Typography } from \"@material-ui/core\";\r\nimport { useHistory } from \"react-router\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { formatLocalTime } from \"../../utils/datetime\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    boxHeader: {\r\n        textAlign: \"center\",\r\n        padding: 24,\r\n    },\r\n    avatar: {\r\n        backgroundColor: theme.palette.secondary.main,\r\n        margin: \"0 auto\",\r\n        width: 50,\r\n        height: 50,\r\n        cursor: \"pointer\",\r\n    },\r\n    shareDes: {\r\n        marginTop: 12,\r\n    },\r\n    shareInfo: {\r\n        color: theme.palette.text.disabled,\r\n        fontSize: 14,\r\n    },\r\n}));\r\n\r\nexport default function Creator(props) {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    const getSecondDes = () => {\r\n        if (props.share.expire > 0) {\r\n            if (props.share.expire >= 24 * 3600) {\r\n                return (\r\n                    Math.round(props.share.expire / (24 * 3600)) + \" 天后到期\"\r\n                );\r\n            }\r\n            return Math.round(props.share.expire / 3600) + \" 小时后到期\";\r\n        }\r\n        return formatLocalTime(props.share.create_date, \"YYYY-MM-DD H:mm:ss\");\r\n    };\r\n\r\n    const userProfile = () => {\r\n        history.push(\"/profile/\" + props.share.creator.key);\r\n        props.onClose && props.onClose();\r\n    };\r\n\r\n    return (\r\n        <div className={classes.boxHeader}>\r\n            <Avatar\r\n                className={classes.avatar}\r\n                alt={props.share.creator.nick}\r\n                src={\"/api/v3/user/avatar/\" + props.share.creator.key + \"/l\"}\r\n                onClick={() => userProfile()}\r\n            />\r\n            <Typography variant=\"h6\" className={classes.shareDes}>\r\n                {props.isFolder && (\r\n                    <>\r\n                        此分享由{\" \"}\r\n                        <Link\r\n                            onClick={() => userProfile()}\r\n                            href={\"javascript:void(0)\"}\r\n                            color=\"inherit\"\r\n                        >\r\n                            {props.share.creator.nick}\r\n                        </Link>{\" \"}\r\n                        创建\r\n                    </>\r\n                )}\r\n                {!props.isFolder && (\r\n                    <>\r\n                        {\" \"}\r\n                        <Link\r\n                            onClick={() => userProfile()}\r\n                            href={\"javascript:void(0)\"}\r\n                            color=\"inherit\"\r\n                        >\r\n                            {props.share.creator.nick}\r\n                        </Link>{\" \"}\r\n                        向您分享了 1 个文件\r\n                    </>\r\n                )}\r\n            </Typography>\r\n            <Typography className={classes.shareInfo}>\r\n                {props.share.views} 次浏览 • {props.share.downloads} 次下载 •{\" \"}\r\n                {getSecondDes()}\r\n            </Typography>\r\n        </div>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport AdSense from 'react-adsense';\r\nimport { connect } from \"react-redux\";\r\nimport { sizeToString, vhCheck } from \"../../utils\";\r\nimport {\r\n    openMusicDialog,\r\n    openResaveDialog,\r\n    setSelectedTarget,\r\n    showImgPreivew,\r\n    toggleSnackbar,\r\n} from \"../../actions\";\r\nimport { isPreviewable } from \"../../config\";\r\nimport { withStyles, Button, Typography } from \"@material-ui/core\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport TypeIcon from \"../FileManager/TypeIcon\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport PurchaseShareDialog from \"../Modals/PurchaseShare\";\r\nimport API from \"../../middleware/Api\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Creator from \"./Creator\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport Report from \"../Modals/Report\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\n\r\nvhCheck();\r\nconst styles = (theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"90px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginTop: \"90px\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            marginTop: 0,\r\n            marginLeft: 0,\r\n            marginRight: 0,\r\n        },\r\n        justifyContent: \"center\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\"\r\n    },\r\n    player: {\r\n        borderRadius: \"4px\",\r\n    },\r\n    fileCotainer: {\r\n        width: \"200px\",\r\n        margin: \"0 auto\",\r\n    },\r\n    buttonCotainer: {\r\n        width: \"400px\",\r\n        margin: \"0 auto\",\r\n        textAlign: \"center\",\r\n        marginTop: \"20px\",\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n    },\r\n    icon: {\r\n        borderRadius: \"10%\",\r\n        marginTop: 2,\r\n    },\r\n\r\n    box: {\r\n        width: \"100%\",\r\n        maxWidth: 440,\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderRadius: 12,\r\n        boxShadow: \"0 8px 16px rgba(29,39,55,.25)\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            /*height: \"calc(var(--vh, 100vh) - 56px)\",*/\r\n            borderRadius: 0,\r\n            maxWidth: 1000,\r\n        },\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n    },\r\n    boxContent: {\r\n        padding: 24,\r\n        display: \"flex\",\r\n        flex: \"1\",\r\n    },\r\n    fileName: {\r\n        marginLeft: 20,\r\n    },\r\n    fileSize: {\r\n        color: theme.palette.text.disabled,\r\n        fontSize: 14,\r\n    },\r\n    boxFooter: {\r\n        display: \"flex\",\r\n        padding: \"20px 16px\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    downloadButton: {\r\n        marginLeft: 8,\r\n    },\r\n    ads:{\r\n        width: '100%',\r\n        height: 90,\r\n        maxHeight: 90,\r\n        textAlign: \"center\",\r\n        marginTop: \"1.5rem\"\r\n    }\r\n});\r\nconst mapStateToProps = () => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n        openMusicDialog: () => {\r\n            dispatch(openMusicDialog());\r\n        },\r\n        setSelectedTarget: (targets) => {\r\n            dispatch(setSelectedTarget(targets));\r\n        },\r\n        showImgPreivew: (first) => {\r\n            dispatch(showImgPreivew(first));\r\n        },\r\n        openResave: (key) => {\r\n            dispatch(openResaveDialog(key));\r\n        },\r\n    };\r\n};\r\n\r\nconst Modals = React.lazy(() => import(\"../FileManager/Modals\"));\r\nconst ImgPreview = React.lazy(() => import(\"../FileManager/ImgPreview\"));\r\n\r\nclass SharedFileCompoment extends Component {\r\n    state = {\r\n        anchorEl: null,\r\n        open: false,\r\n        purchaseCallback: null,\r\n        loading: false,\r\n        openReport: false,\r\n    };\r\n\r\n    downloaded = false;\r\n\r\n    // TODO merge into react thunk\r\n    preview = () => {\r\n        if (pathHelper.isSharePage(this.props.location.pathname)) {\r\n            if (!Auth.Check()) {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"请先登录\",\r\n                    \"warning\"\r\n                );\r\n                return;\r\n            }\r\n            const user = Auth.GetUser();\r\n            if (!Auth.Check() && user && !user.group.shareDownload) {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"请先登录\",\r\n                    \"warning\"\r\n                );\r\n                return;\r\n            }\r\n        }\r\n\r\n        switch (isPreviewable(this.props.share.source.name)) {\r\n            case \"img\":\r\n                this.props.showImgPreivew({\r\n                    key: this.props.share.key,\r\n                    name: this.props.share.source.name,\r\n                });\r\n                return;\r\n            case \"msDoc\":\r\n                this.props.history.push(\r\n                    this.props.share.key +\r\n                        \"/doc?name=\" +\r\n                        encodeURIComponent(this.props.share.source.name)\r\n                );\r\n                return;\r\n            case \"audio\":\r\n                this.props.setSelectedTarget([\r\n                    {\r\n                        key: this.props.share.key,\r\n                        type: \"share\",\r\n                    },\r\n                ]);\r\n                this.props.openMusicDialog();\r\n                return;\r\n            case \"video\":\r\n                this.props.history.push(\r\n                    this.props.share.key +\r\n                        \"/video?name=\" +\r\n                        encodeURIComponent(this.props.share.source.name)\r\n                );\r\n                return;\r\n            case \"edit\":\r\n                this.props.history.push(\r\n                    this.props.share.key +\r\n                        \"/text?name=\" +\r\n                        encodeURIComponent(this.props.share.source.name)\r\n                );\r\n                return;\r\n            case \"pdf\":\r\n                this.props.history.push(\r\n                    this.props.share.key +\r\n                        \"/pdf?name=\" +\r\n                        encodeURIComponent(this.props.share.source.name)\r\n                );\r\n                return;\r\n            case \"code\":\r\n                this.props.history.push(\r\n                    this.props.share.key +\r\n                        \"/code?name=\" +\r\n                        encodeURIComponent(this.props.share.source.name)\r\n                );\r\n                return;\r\n            default:\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"此文件无法预览\",\r\n                    \"warning\"\r\n                );\r\n                return;\r\n        }\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        this.props.setSelectedTarget([]);\r\n    }\r\n\r\n    scoreHandle = (callback) => (event) => {\r\n        if (this.props.share.score > 0) {\r\n            if (!Auth.Check()) {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"登录后才能继续操作\",\r\n                    \"warning\"\r\n                );\r\n                return;\r\n            }\r\n            if (!Auth.GetUser().group.shareFree && !this.downloaded) {\r\n                this.setState({\r\n                    purchaseCallback: () => {\r\n                        this.setState({\r\n                            purchaseCallback: null,\r\n                        });\r\n                        callback(event);\r\n                    },\r\n                });\r\n                return;\r\n            }\r\n        }\r\n        callback(event);\r\n    };\r\n\r\n    download = () => {\r\n        this.setState({ loading: true });\r\n        API.put(\"/share/download/\" + this.props.share.key)\r\n            .then((response) => {\r\n                this.downloaded = true;\r\n                window.location.assign(response.data);\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"warning\"\r\n                );\r\n                this.props.history.push(\"/buy?tab=2\");\r\n            })\r\n            .then(() => {\r\n                this.setState({ loading: false });\r\n            });\r\n    };\r\n\r\n    rewards = () => {\r\n        if (!Auth.Check()) {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"登录后才能继续操作\",\r\n                \"warning\"\r\n            );\r\n            return;\r\n        }\r\n        window.opensendgift(this.props.share.key);\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const user = Auth.GetUser();\r\n        const isLogin = Auth.Check();\r\n\r\n        return (\r\n            <div className={classes.layout}>\r\n                <Modals />\r\n                <ImgPreview />\r\n                <PurchaseShareDialog\r\n                    callback={this.state.purchaseCallback}\r\n                    score={this.props.share.score}\r\n                    onClose={() => this.setState({ purchaseCallback: null })}\r\n                />\r\n                <Report\r\n                    open={this.state.openReport}\r\n                    share={this.props.share}\r\n                    onClose={() => this.setState({ openReport: false })}\r\n                />\r\n                <div className={classes.box}>\r\n                    <Creator share={this.props.share} />\r\n                    <Divider />\r\n                    <div className={classes.boxContent}>\r\n                        <TypeIcon\r\n                            className={classes.icon}\r\n                            isUpload\r\n                            fileName={this.props.share.source.name}\r\n                        />\r\n                        <div className={classes.fileName}>\r\n                            <Typography style={{ wordBreak: \"break-all\" }}>\r\n                                {this.props.share.source.name}\r\n                            </Typography>\r\n                            <Typography className={classes.fileSize}>\r\n                                {sizeToString(this.props.share.source.size)}(不能下载，下载设置中取消“下载加速”)\r\n                            </Typography>\r\n                        </div>\r\n                    </div>\r\n                    <Divider />\r\n                    <div className={classes.boxFooter}>\r\n                        <div className={classes.actionLeft}>\r\n                            <Button\r\n                                onClick={() =>\r\n                                    this.props.openResave(this.props.share.key)\r\n                                }\r\n                                color=\"secondary\"\r\n                            >\r\n                                保存文件\r\n                            </Button>\r\n                            <Button\r\n                                onClick={() =>\r\n                                    this.setState({ openReport: true })\r\n                                }\r\n                                color=\"secondary\"\r\n                            >\r\n                                举报\r\n                            </Button>\r\n                        </div>\r\n                        <div className={classes.actions}>\r\n                            <IconButton color=\"secondary\" style={{ padding:'unset',paddingRight:'12px'}} title=\"打赏\" aria-label=\"to reward\" onClick={() => this.rewards()}>\r\n                              <MonetizationOnIcon />\r\n                            </IconButton>\r\n                            {this.props.share.preview && (\r\n                                <Button\r\n                                    variant=\"outlined\"\r\n                                    color=\"secondary\"\r\n                                    onClick={this.scoreHandle(this.preview)}\r\n                                    disabled={this.state.loading}\r\n                                >\r\n                                    预览\r\n                                </Button>\r\n                            )}\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                color=\"secondary\"\r\n                                className={classes.downloadButton}\r\n                                onClick={this.scoreHandle(this.download)}\r\n                                disabled={this.state.loading}\r\n                            >\r\n                                下载\r\n                                {this.props.share.score > 0 &&\r\n                                    (!isLogin || !user.group.shareFree) &&\r\n                                    \" (\" + this.props.share.score + \"积分)\"}\r\n                                {this.props.share.score > 0 &&\r\n                                    isLogin &&\r\n                                    user.group.shareFree &&\r\n                                    \" (免积分)\"}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={classes.ads}>\r\n                    <AdSense.Google\r\n                        style={{ display:'inline-block',minWidth:320,maxWidth:970,width:'100%',height:90 }}\r\n                        client='ca-pub-7329474538416487'\r\n                        slot='8294203043'\r\n                        format=''\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst SharedFile = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(SharedFileCompoment)));\r\n\r\nexport default SharedFile;\r\n","import React, { Component } from \"react\";\r\nimport AdSense from 'react-adsense';\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    openMusicDialog,\r\n    openResaveDialog,\r\n    setSelectedTarget,\r\n    setShareUserPopover,\r\n    showImgPreivew,\r\n    toggleSnackbar,\r\n} from \"../../actions\";\r\nimport { withStyles, Typography } from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport FileManager from \"../FileManager/FileManager\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport Creator from \"./Creator\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\nimport pathHelper from \"../../utils/page\";\r\nconst styles = (theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: 30,\r\n        marginBottom: 30,\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            marginTop: theme.spacing(2),\r\n            marginLeft: theme.spacing(1),\r\n            marginRight: theme.spacing(1),\r\n        },\r\n    },\r\n    managerContainer: {\r\n        overflowY: \"auto\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            height: \"28rem\"\r\n        },\r\n\r\n    },\r\n    ads:{\r\n        width: '100%',\r\n        height: 90,\r\n        maxHeight: 90,\r\n        textAlign: \"center\",\r\n        marginTop: \"1.5rem\"\r\n    }\r\n});\r\n\r\nconst ReadMe = React.lazy(() => import(\"./ReadMe\"));\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        anchorEl: state.viewUpdate.shareUserPopoverAnchorEl,\r\n        fileList: state.explorer.fileList,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n        openMusicDialog: () => {\r\n            dispatch(openMusicDialog());\r\n        },\r\n        setSelectedTarget: (targets) => {\r\n            dispatch(setSelectedTarget(targets));\r\n        },\r\n        showImgPreivew: (first) => {\r\n            dispatch(showImgPreivew(first));\r\n        },\r\n        openResave: (key) => {\r\n            dispatch(openResaveDialog(key));\r\n        },\r\n        setShareUserPopover: (e) => {\r\n            dispatch(setShareUserPopover(e));\r\n        },\r\n    };\r\n};\r\n\r\nclass SharedFolderComponent extends Component {\r\n    state = {};\r\n\r\n    UNSAFE_componentWillMount() {\r\n        window.shareInfo = this.props.share;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.shareInfo = null;\r\n        this.props.setSelectedTarget([]);\r\n    }\r\n\r\n    handleClickAway = () => {\r\n        if (!pathHelper.isMobile()) {\r\n            this.props.setSelectedTarget([]);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        let readmeShowed = false;\r\n        const id = this.props.anchorEl !== null ? \"simple-popover\" : undefined;\r\n\r\n        return (\r\n            <div className={classes.layout}>\r\n                <ClickAwayListener onClickAway={this.handleClickAway}>\r\n                    <Paper className={classes.managerContainer}>\r\n                        <FileManager isShare share={this.props.share} />\r\n                    </Paper>\r\n                </ClickAwayListener>\r\n                {/* eslint-disable-next-line */}\r\n                {this.props.fileList.map((value) => {\r\n                    if (\r\n                        (value.name.toLowerCase() === \"readme.md\" ||\r\n                            value.name.toLowerCase() === \"readme.txt\") &&\r\n                        !readmeShowed\r\n                    ) {\r\n                        readmeShowed = true;\r\n                        return <ReadMe share={this.props.share} file={value} />;\r\n                    }\r\n                })}\r\n                <Popover\r\n                    id={id}\r\n                    open={this.props.anchorEl !== null}\r\n                    anchorEl={this.props.anchorEl}\r\n                    onClose={() => this.props.setShareUserPopover(null)}\r\n                    anchorOrigin={{\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"center\",\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: \"top\",\r\n                        horizontal: \"center\",\r\n                    }}\r\n                >\r\n                    <Typography>\r\n                        <Creator\r\n                            isFolder\r\n                            onClose={() => this.props.setShareUserPopover(null)}\r\n                            share={this.props.share}\r\n                        />\r\n                    </Typography>\r\n                </Popover>\r\n                <div className={classes.ads}>\r\n                    <AdSense.Google\r\n                        style={{ display:'inline-block',minWidth:320,maxWidth:970,width:'100%',height:90 }}\r\n                        client='ca-pub-7329474538416487'\r\n                        slot='8294203043'\r\n                        format=''\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst SharedFolder = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(SharedFolderComponent)));\r\n\r\nexport default SharedFolder;\r\n","import React, { Suspense, useCallback, useEffect, useState } from \"react\";\r\nimport PageLoading from \"../Placeholder/PageLoading\";\r\nimport { useParams } from \"react-router\";\r\nimport API from \"../../middleware/Api\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport { changeSubTitle } from \"../../redux/viewUpdate/action\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Notice from \"./NotFound\";\r\nimport LockedFile from \"./LockedFile\";\r\nimport SharedFile from \"./SharedFile\";\r\nimport SharedFolder from \"./SharedFolder\";\r\n\r\nexport default function SharePreload() {\r\n    const dispatch = useDispatch();\r\n    const { id } = useParams();\r\n\r\n    const [share, setShare] = useState(undefined);\r\n    const [loading, setLoading] = useState(false);\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    const SetSubTitle = useCallback(\r\n        (title) => dispatch(changeSubTitle(title)),\r\n        [dispatch]\r\n    );\r\n\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (share) {\r\n            if (share.locked) {\r\n                SetSubTitle(share.creator.nick + \"的加密分享\");\r\n                if (password !== \"\") {\r\n                    ToggleSnackbar(\"top\", \"right\", \"密码不正确\", \"warning\");\r\n                }\r\n            } else {\r\n                SetSubTitle(share.source.name);\r\n            }\r\n        } else {\r\n            SetSubTitle();\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [share, SetSubTitle, ToggleSnackbar]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            SetSubTitle();\r\n        };\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        let withPassword = \"\";\r\n        if (password !== \"\") {\r\n            withPassword = \"?password=\" + password;\r\n        }\r\n        API.get(\"/share/info/\" + id + withPassword)\r\n            .then((response) => {\r\n                setShare(response.data);\r\n                setLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false);\r\n                if (error.code === 404) {\r\n                    setShare(null);\r\n                } else {\r\n                    ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n                }\r\n            });\r\n    }, [id, password, ToggleSnackbar]);\r\n\r\n    return (\r\n        <Suspense fallback={<PageLoading />}>\r\n            {share === undefined && <PageLoading />}\r\n            {share === null && <Notice msg={\"分享不存在或已过期\"} />}\r\n            {share && share.locked && (\r\n                <LockedFile\r\n                    loading={loading}\r\n                    setPassowrd={setPassword}\r\n                    share={share}\r\n                />\r\n            )}\r\n            {share && !share.locked && !share.is_dir && (\r\n                <SharedFile share={share} />\r\n            )}\r\n            {share && !share.locked && share.is_dir && (\r\n                <SharedFolder share={share} />\r\n            )}\r\n        </Suspense>\r\n    );\r\n}\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useLocation, useParams, useRouteMatch } from \"react-router\";\r\nimport API from \"../../middleware/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport { changeSubTitle } from \"../../redux/viewUpdate/action\";\r\nimport pathHelper from \"../../utils/page\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"-48px\",\r\n    },\r\n\r\n    container: {\r\n        border: \"none\",\r\n        width: \"100%\",\r\n        height: \"calc(100vh - 18px)\",\r\n        marginBottom: -3,\r\n    },\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function DocViewer() {\r\n    const [url, setURL] = useState(\"\");\r\n    const math = useRouteMatch();\r\n    const location = useLocation();\r\n    const query = useQuery();\r\n    const { id } = useParams();\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const SetSubTitle = useCallback(\r\n        (title) => dispatch(changeSubTitle(title)),\r\n        [dispatch]\r\n    );\r\n\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (!pathHelper.isSharePage(location.pathname)) {\r\n            const path = query.get(\"p\").split(\"/\");\r\n            SetSubTitle(path[path.length - 1]);\r\n        } else {\r\n            SetSubTitle(query.get(\"name\"));\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [math.params[0], location]);\r\n\r\n    useEffect(() => {\r\n        let requestURL = \"/file/doc/\" + query.get(\"id\");\r\n        if (pathHelper.isSharePage(location.pathname)) {\r\n            requestURL = \"/share/doc/\" + id;\r\n            if (query.get(\"share_path\") !== \"\") {\r\n                requestURL +=\r\n                    \"?path=\" + encodeURIComponent(query.get(\"share_path\"));\r\n            }\r\n        }\r\n        API.get(requestURL)\r\n            .then((response) => {\r\n                setURL(response.data);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n        // eslint-disable-next-line\r\n    }, [math.params[0], location]);\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.layout}>\r\n            {url !== \"\" && (\r\n                <iframe title={\"ms\"} className={classes.container} src={url} />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport API from \"../../middleware/Api\";\r\n\r\nimport {\r\n    withStyles,\r\n    Typography,\r\n    Paper,\r\n    Button,\r\n    Grid,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableRow,\r\n} from \"@material-ui/core\";\r\nimport { sizeToString } from \"../../utils\";\r\nimport { withRouter } from \"react-router\";\r\nimport { formatLocalTime } from \"../../utils/datetime\";\r\n\r\nconst styles = (theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"50px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: \"50px\",\r\n    },\r\n\r\n    gird: {\r\n        marginTop: \"30px\",\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    data: {\r\n        fontSize: \"25px\",\r\n        color: theme.palette.primary.main,\r\n    },\r\n    proBar: {\r\n        height: \"10px\",\r\n    },\r\n    r1: {\r\n        backgroundColor: \"#f0ad4e\",\r\n        transition: \"width .6s ease\",\r\n        height: \"100%\",\r\n        fontSize: \"12px\",\r\n        lineHeight: \"20px\",\r\n        float: \"left\",\r\n    },\r\n    r2: {\r\n        backgroundColor: \"#4caf50\",\r\n        transition: \"width .6s ease\",\r\n        height: \"100%\",\r\n        fontSize: \"12px\",\r\n        lineHeight: \"20px\",\r\n        float: \"left\",\r\n    },\r\n    r3: {\r\n        backgroundColor: \"#5bc0de\",\r\n        transition: \"width .6s ease\",\r\n        height: \"100%\",\r\n        fontSize: \"12px\",\r\n        lineHeight: \"20px\",\r\n        float: \"left\",\r\n    },\r\n    note_block: {\r\n        width: \"10px\",\r\n        height: \"10px\",\r\n        display: \"inline-block\",\r\n        position: \"relative\",\r\n        marginLeft: \"10px\",\r\n        marginRight: \"3px\",\r\n    },\r\n    r1_block: {\r\n        backgroundColor: \"#f0ad4e\",\r\n    },\r\n    r2_block: {\r\n        backgroundColor: \"#4caf50\",\r\n    },\r\n    r3_block: {\r\n        backgroundColor: \"#5bc0de\",\r\n    },\r\n    title: {\r\n        marginTop: \"30px\",\r\n        marginBottom: \"30px\",\r\n    },\r\n    button: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    table: {\r\n        overflowX: \"auto\",\r\n    },\r\n});\r\nconst mapStateToProps = () => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n    };\r\n};\r\n\r\nclass QuotaCompoment extends Component {\r\n    state = {\r\n        data: {\r\n            basic: 0,\r\n            used: 0,\r\n            total: 0,\r\n            pack: 0,\r\n            r1: 0,\r\n            r2: 0,\r\n            r3: 0,\r\n        },\r\n        packs: [],\r\n    };\r\n\r\n    firstLoad = true;\r\n\r\n    componentDidMount() {\r\n        if (this.firstLoad) {\r\n            this.firstLoad = !this.firstLoad;\r\n            API.get(\"/vas/pack\")\r\n                .then((response) => {\r\n                    let usedR,\r\n                        baseR,\r\n                        packR = 0;\r\n                    if (response.data.used > response.data.base) {\r\n                        usedR = response.data.used / response.data.total;\r\n                        baseR = 0;\r\n                        packR = 1 - usedR;\r\n                    } else {\r\n                        usedR = response.data.used / response.data.total;\r\n                        baseR =\r\n                            (response.data.base - response.data.used) /\r\n                            response.data.total;\r\n                        packR = 1 - usedR - baseR;\r\n                    }\r\n\r\n                    this.setState({\r\n                        data: {\r\n                            used: response.data.used,\r\n                            pack: response.data.pack,\r\n                            total: response.data.total,\r\n                            basic: response.data.base,\r\n                            r1: usedR > 1 ? 100 : usedR * 100,\r\n                            r2: usedR > 1 ? 0 : baseR * 100,\r\n                            r3: usedR > 1 ? 0 : packR * 100,\r\n                        },\r\n                        packs: response.data.packs,\r\n                    });\r\n                })\r\n                .catch((error) => {\r\n                    this.setState({\r\n                        loading: false,\r\n                    });\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        error.message,\r\n                        \"error\"\r\n                    );\r\n                });\r\n        }\r\n    }\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className={classes.layout}>\r\n                <Typography color=\"textSecondary\" variant=\"h4\">\r\n                    容量配额\r\n                </Typography>\r\n                <Grid container className={classes.gird} spacing={2}>\r\n                    <Grid item xs={12} sm={3}>\r\n                        <Paper className={classes.paper}>\r\n                            <Typography className={classes.data}>\r\n                                {sizeToString(this.state.data.basic)}\r\n                            </Typography>\r\n                            <Typography>用户组基础容量</Typography>\r\n                        </Paper>\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={3}>\r\n                        <Paper className={classes.paper}>\r\n                            <Typography className={classes.data}>\r\n                                {sizeToString(this.state.data.pack)}\r\n                            </Typography>\r\n                            <Typography>有效容量包附加附加容量</Typography>\r\n                        </Paper>\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={3}>\r\n                        <Paper className={classes.paper}>\r\n                            <Typography className={classes.data}>\r\n                                {sizeToString(this.state.data.used)}\r\n                            </Typography>\r\n                            <Typography>已使用容量</Typography>\r\n                        </Paper>\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={3}>\r\n                        <Paper className={classes.paper}>\r\n                            <Typography className={classes.data}>\r\n                                {sizeToString(this.state.data.total)}\r\n                            </Typography>\r\n                            <Typography>总容量</Typography>\r\n                        </Paper>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Paper className={classes.paper}>\r\n                            <div className={classes.proBar}>\r\n                                <div\r\n                                    className={classes.r1}\r\n                                    style={{ width: this.state.data.r1 + \"%\" }}\r\n                                />\r\n                                <div\r\n                                    className={classes.r2}\r\n                                    style={{ width: this.state.data.r2 + \"%\" }}\r\n                                />\r\n                                <div\r\n                                    className={classes.r3}\r\n                                    style={{ width: this.state.data.r3 + \"%\" }}\r\n                                />\r\n                            </div>\r\n                            <div style={{ textAlign: \"right\" }}>\r\n                                <span\r\n                                    className={classNames(\r\n                                        classes.r1_block,\r\n                                        classes.note_block\r\n                                    )}\r\n                                />\r\n                                已用容量\r\n                                <span\r\n                                    className={classNames(\r\n                                        classes.r2_block,\r\n                                        classes.note_block\r\n                                    )}\r\n                                />\r\n                                用户组基础容量\r\n                                <span\r\n                                    className={classNames(\r\n                                        classes.r3_block,\r\n                                        classes.note_block\r\n                                    )}\r\n                                />\r\n                                有效容量包附加附加容量\r\n                            </div>\r\n                        </Paper>\r\n                    </Grid>\r\n                </Grid>\r\n                <Typography\r\n                    color=\"textSecondary\"\r\n                    variant=\"h4\"\r\n                    className={classes.title}\r\n                >\r\n                    可用容量包\r\n                </Typography>\r\n                <Paper className={classes.paper}>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        className={classes.button}\r\n                        onClick={() => this.props.history.push(\"/buy\")}\r\n                    >\r\n                        购买容量包\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        className={classes.button}\r\n                        onClick={() => this.props.history.push(\"/buy?tab=3\")}\r\n                    >\r\n                        使用激活码兑换\r\n                    </Button>\r\n                    <div className={classes.table}>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell align=\"left\">\r\n                                        容量包名称\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">大小</TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        激活日期\r\n                                    </TableCell>\r\n                                    <TableCell align=\"center\">有效期</TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        过期日期\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {this.state.packs.map((row, id) => (\r\n                                    <TableRow key={id}>\r\n                                        <TableCell component=\"th\" scope=\"row\">\r\n                                            {row.name}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"center\">\r\n                                            {sizeToString(row.size)}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"center\">\r\n                                            {formatLocalTime(\r\n                                                row.activate_date,\r\n                                                \"YYYY-MM-DD H:mm:ss\"\r\n                                            )}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"center\">\r\n                                            {Math.round(row.expiration / 86400)}\r\n                                            天\r\n                                        </TableCell>\r\n                                        <TableCell align=\"center\">\r\n                                            {formatLocalTime(\r\n                                                row.expiration_date,\r\n                                                \"YYYY-MM-DD H:mm:ss\"\r\n                                            )}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>\r\n                </Paper>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst Quota = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(QuotaCompoment)));\r\n\r\nexport default Quota;\r\n","import React, { Component } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { withStyles, ButtonBase, Typography } from \"@material-ui/core\";\r\nconst styles = (theme) => ({\r\n    container: {\r\n        boxShadow: \"0 0 0 1px #e6e9eb\",\r\n        borderRadius: \"4px\",\r\n        transition: \"box-shadow .5s\",\r\n        width: \"100%\",\r\n        display: \"block\",\r\n    },\r\n    active: {\r\n        boxShadow: \"0 0 0 3px \" + theme.palette.primary.main,\r\n    },\r\n    boxHead: {\r\n        textAlign: \"center\",\r\n        padding: \"10px 10px 10px\",\r\n        borderBottom: \"1px solid #e6e9eb\",\r\n        color: theme.palette.text.main,\r\n        width: \"100%\",\r\n    },\r\n    price: {\r\n        fontSize: \"33px\",\r\n        fontWeight: \"500\",\r\n        lineHeight: \"40px\",\r\n        color: theme.palette.primary.main,\r\n    },\r\n    priceWithScore: {\r\n        fontSize: \"23px\",\r\n        fontWeight: \"500\",\r\n        lineHeight: \"40px\",\r\n        color: theme.palette.primary.main,\r\n    },\r\n    packName: {\r\n        marginTop: \"5px\",\r\n        marginBottom: \"5px\",\r\n    },\r\n    boxBottom: {\r\n        color: theme.palette.text.main,\r\n        textAlign: \"center\",\r\n        padding: \"5px\",\r\n    },\r\n});\r\n\r\nclass PackSelect extends Component {\r\n    render() {\r\n        const { classes, pack } = this.props;\r\n        return (\r\n            <ButtonBase\r\n                className={classNames(classes.container, {\r\n                    [classes.active]: this.props.active,\r\n                })}\r\n                onClick={this.props.onSelect}\r\n            >\r\n                <div className={classes.boxHead}>\r\n                    <Typography\r\n                        variant=\"subtitle1\"\r\n                        className={classes.packName}\r\n                    >\r\n                        {pack.name}\r\n                    </Typography>\r\n                    {pack.score === 0 && (\r\n                        <Typography className={classes.price}>\r\n                            ￥{(pack.price / 100).toFixed(2)}\r\n                        </Typography>\r\n                    )}\r\n                    {pack.score !== 0 && (\r\n                        <Typography className={classes.priceWithScore}>\r\n                            ￥{(pack.price / 100).toFixed(2)} / {pack.score}{\" \"}\r\n                            积分\r\n                        </Typography>\r\n                    )}\r\n                </div>\r\n                <div className={classes.boxBottom}>\r\n                    <Typography>\r\n                        有效期：{Math.ceil(pack.time / 86400)}天\r\n                    </Typography>\r\n                </div>\r\n            </ButtonBase>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(PackSelect);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport SdStorage from \"@material-ui/icons/SdStorage\";\r\nimport ShopIcon from \"@material-ui/icons/ShoppingCart\";\r\nimport PackSelect from \"./PackSelect\";\r\nimport SupervisedUserCircle from \"@material-ui/icons/SupervisedUserCircle\";\r\nimport StarIcon from \"@material-ui/icons/StarBorder\";\r\nimport LocalPlay from \"@material-ui/icons/LocalPlay\";\r\nimport API from \"../../middleware/Api\";\r\nimport QRCode from \"qrcode-react\";\r\n\r\nimport {\r\n    withStyles,\r\n    AppBar,\r\n    Tabs,\r\n    Tab,\r\n    Typography,\r\n    Paper,\r\n    Button,\r\n    TextField,\r\n    Grid,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogContentText,\r\n    DialogTitle,\r\n    Card,\r\n    CardActions,\r\n    CardContent,\r\n    CardHeader,\r\n} from \"@material-ui/core\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport { AccountBalanceWallet } from \"@material-ui/icons\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport { withRouter } from \"react-router\";\r\n\r\nconst styles = (theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"50px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: \"50px\",\r\n    },\r\n\r\n    gird: {\r\n        marginTop: \"30px\",\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    title: {\r\n        marginTop: \"30px\",\r\n        marginBottom: \"30px\",\r\n    },\r\n    button: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    action: {\r\n        textAlign: \"right\",\r\n        marginTop: \"20px\",\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: 70,\r\n        textAlign: \"center!important\",\r\n    },\r\n    priceShow: {\r\n        color: theme.palette.secondary.main,\r\n        fontSize: \"30px\",\r\n    },\r\n    codeContainer: {\r\n        textAlign: \"center\",\r\n        marginTop: \"20px\",\r\n    },\r\n    cardHeader: {\r\n        backgroundColor:\r\n            theme.palette.type === \"dark\"\r\n                ? theme.palette.background.default\r\n                : theme.palette.grey[200],\r\n    },\r\n    cardPricing: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"baseline\",\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    cardActions: {\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            paddingBottom: theme.spacing(2),\r\n        },\r\n    },\r\n    redeemContainer: {\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            marginLeft: \"50px\",\r\n            marginRight: \"50px\",\r\n            width: \"auto\",\r\n        },\r\n        marginTop: \"50px\",\r\n        marginBottom: \"50px\",\r\n    },\r\n    doRedeem: {\r\n        textAlign: \"right\",\r\n    },\r\n    payMethod: {\r\n        marginTop: theme.spacing(4),\r\n        padding: theme.spacing(2),\r\n    },\r\n});\r\nconst mapStateToProps = () => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n    };\r\n};\r\n\r\nclass BuyQuotaCompoment extends Component {\r\n    IntervalId = null;\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const tab = new URLSearchParams(this.props.location.search);\r\n        const index = tab.get(\"tab\");\r\n\r\n        this.state = {\r\n            value: index ? parseInt(index) : 0,\r\n            selectedPack: -1,\r\n            selectedGroup: -1,\r\n            times: 1,\r\n            scoreNum: 1,\r\n            loading: false,\r\n            redeemCode: \"\",\r\n            dialog: null,\r\n            payment: {\r\n                type: \"\",\r\n                img: \"\",\r\n            },\r\n            scorePrice: 0,\r\n            redeemInfo: null,\r\n            packs: [],\r\n            groups: [],\r\n            alipay: false,\r\n            payjs: false,\r\n            wechat: false,\r\n            packPayMethod: null,\r\n        };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.clearInterval(this.IntervalId);\r\n    }\r\n\r\n    componentDidMount() {\r\n        API.get(\"/vas/product\")\r\n            .then((response) => {\r\n                this.setState({\r\n                    packs: response.data.packs,\r\n                    groups: response.data.groups,\r\n                    alipay: response.data.alipay,\r\n                    payjs: response.data.payjs,\r\n                    wechat: response.data.wechat,\r\n                    scorePrice: response.data.score_price,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.setState({\r\n                    loading: false,\r\n                });\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    }\r\n\r\n    confirmRedeem = () => {\r\n        this.setState({\r\n            loading: true,\r\n        });\r\n        API.post(\"/vas/redeem/\" + this.state.redeemCode)\r\n            .then(() => {\r\n                this.setState({\r\n                    loading: false,\r\n                    dialog: \"success\",\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.setState({\r\n                    loading: false,\r\n                });\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"错误：\" + error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    doRedeem = () => {\r\n        if (this.state.redeemCode === \"\") {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"请输入激活码\",\r\n                \"warning\"\r\n            );\r\n            return;\r\n        }\r\n        this.setState({\r\n            loading: true,\r\n        });\r\n        API.get(\"/vas/redeem/\" + this.state.redeemCode)\r\n            .then((response) => {\r\n                this.setState({\r\n                    loading: false,\r\n                    dialog: \"redeem\",\r\n                    redeemInfo: response.data,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.setState({\r\n                    loading: false,\r\n                });\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    buyPack = (packType) => {\r\n        if (packType === \"pack\" && this.state.selectedPack === -1) {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"请先选择一个容量包\",\r\n                \"warning\"\r\n            );\r\n            return;\r\n        }\r\n        this.setState({\r\n            loading: true,\r\n        });\r\n        API.post(\"/vas/order\", {\r\n            action: packType,\r\n            method: this.state.packPayMethod,\r\n            id:\r\n                packType === \"score\"\r\n                    ? 1\r\n                    : packType === \"pack\"\r\n                    ? this.state.packs[this.state.selectedPack].id\r\n                    : this.state.groups[this.state.selectedGroup].id,\r\n            num:\r\n                packType === \"score\"\r\n                    ? parseInt(this.state.scoreNum)\r\n                    : parseInt(this.state.times),\r\n        })\r\n            .then((response) => {\r\n                if (!response.data.payment) {\r\n                    this.setState({\r\n                        loading: false,\r\n                        dialog: \"success\",\r\n                    });\r\n                    return;\r\n                }\r\n                if (response.data.qr_code) {\r\n                    this.setState({\r\n                        loading: false,\r\n                        dialog: \"qr\",\r\n                        payment: {\r\n                            type: this.state.packPayMethod,\r\n                            img: response.data.qr_code,\r\n                        },\r\n                    });\r\n                    this.IntervalId = window.setInterval(() => {\r\n                        this.querryLoop(response.data.id);\r\n                    }, 3000);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                this.setState({\r\n                    loading: false,\r\n                });\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"错误：\" + error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    querryLoop = (id) => {\r\n        API.get(\"/vas/order/\" + id)\r\n            .then((response) => {\r\n                if (response.data === 1) {\r\n                    this.setState({\r\n                        dialog: \"success\",\r\n                    });\r\n                    window.clearInterval(this.IntervalId);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"错误：\" + error.message,\r\n                    \"error\"\r\n                );\r\n                window.clearInterval(this.IntervalId);\r\n            });\r\n    };\r\n\r\n    handleChange = (event, value) => {\r\n        this.setState({\r\n            packPayMethod:\r\n                this.state.packPayMethod === \"score\"\r\n                    ? null\r\n                    : this.state.packPayMethod,\r\n        });\r\n        this.setState({ value });\r\n    };\r\n\r\n    handleChangeIndex = (index) => {\r\n        this.setState({ value: index });\r\n    };\r\n\r\n    handleClose = () => {\r\n        window.clearInterval(this.IntervalId);\r\n        this.setState({\r\n            dialog: null,\r\n        });\r\n    };\r\n\r\n    handleTexyChange = (name) => (event) => {\r\n        this.setState({ [name]: event.target.value });\r\n    };\r\n\r\n    selectPack = (id) => {\r\n        this.setState({\r\n            selectedPack: id,\r\n            packPayMethod:\r\n                this.state.packPayMethod === \"score\"\r\n                    ? null\r\n                    : this.state.packPayMethod,\r\n        });\r\n    };\r\n\r\n    selectGroup = (id) => {\r\n        this.setState({\r\n            selectedGroup: id,\r\n            dialog: \"buyGroup\",\r\n            packPayMethod:\r\n                this.state.packPayMethod === \"score\"\r\n                    ? null\r\n                    : this.state.packPayMethod,\r\n        });\r\n    };\r\n\r\n    selectPackPayMethod = (event) => {\r\n        this.setState({\r\n            packPayMethod: event.target.value,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        const methodSelect = (\r\n            <div>\r\n                <FormLabel>选择支付方式：</FormLabel>\r\n                <RadioGroup\r\n                    name=\"spacing\"\r\n                    aria-label=\"spacing\"\r\n                    value={this.state.packPayMethod}\r\n                    onChange={this.selectPackPayMethod}\r\n                    row\r\n                >\r\n                    {!this.state.alipay &&\r\n                        !this.state.payjs &&\r\n                        this.state.value === 0 &&\r\n                        (this.state.selectedPack === -1 ||\r\n                            this.state.packs[this.state.selectedPack].score ===\r\n                                0) &&\r\n                        this.state.value === 1 &&\r\n                        (this.state.selectedGroup === -1 ||\r\n                            this.state.groups[this.state.selectedGroup]\r\n                                .score === 0) && (\r\n                            <Typography>无可用支付方式</Typography>\r\n                        )}\r\n                    {this.state.alipay && (\r\n                        <FormControlLabel\r\n                            value={\"alipay\"}\r\n                            control={<Radio />}\r\n                            label={\"支付宝扫码\"}\r\n                        />\r\n                    )}\r\n                    {this.state.payjs && (\r\n                        <FormControlLabel\r\n                            value={\"payjs\"}\r\n                            control={<Radio />}\r\n                            label={\"微信扫码\"}\r\n                        />\r\n                    )}\r\n                    {this.state.wechat && (\r\n                        <FormControlLabel\r\n                            value={\"wechat\"}\r\n                            control={<Radio />}\r\n                            label={\"微信扫码\"}\r\n                        />\r\n                    )}\r\n                    {this.state.value === 0 &&\r\n                        this.state.selectedPack !== -1 &&\r\n                        this.state.packs[this.state.selectedPack].score !==\r\n                            0 && (\r\n                            <FormControlLabel\r\n                                value={\"score\"}\r\n                                control={<Radio />}\r\n                                label={\"积分支付\"}\r\n                            />\r\n                        )}\r\n                    {this.state.value === 1 &&\r\n                        this.state.selectedGroup !== -1 &&\r\n                        this.state.groups[this.state.selectedGroup].score !==\r\n                            0 && (\r\n                            <FormControlLabel\r\n                                value={\"score\"}\r\n                                control={<Radio />}\r\n                                label={\"积分支付\"}\r\n                            />\r\n                        )}\r\n                </RadioGroup>\r\n                <div>\r\n                    {this.state.value !== 2 && (\r\n                        <FormLabel>购买时长倍数：</FormLabel>\r\n                    )}\r\n                    {this.state.value === 2 && (\r\n                        <FormLabel>充值积分数量：</FormLabel>\r\n                    )}\r\n                </div>\r\n                {this.state.value !== 2 && (\r\n                    <TextField\r\n                        className={classes.textField}\r\n                        type=\"number\"\r\n                        inputProps={{\r\n                            min: \"1\",\r\n                            max: \"99\",\r\n                            step: \"1\",\r\n                        }}\r\n                        value={this.state.times}\r\n                        onChange={this.handleTexyChange(\"times\")}\r\n                    />\r\n                )}\r\n                {this.state.value === 2 && (\r\n                    <TextField\r\n                        className={classes.textField}\r\n                        type=\"number\"\r\n                        inputProps={{\r\n                            min: \"1\",\r\n                            step: \"1\",\r\n                            max: \"9999999\",\r\n                        }}\r\n                        value={this.state.scoreNum}\r\n                        onChange={this.handleTexyChange(\"scoreNum\")}\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n\r\n        return (\r\n            <div className={classes.layout}>\r\n                <Typography\r\n                    color=\"textSecondary\"\r\n                    className={classes.title}\r\n                    variant=\"h3\"\r\n                >\r\n                    购买\r\n                </Typography>\r\n                <AppBar position=\"static\">\r\n                    <Tabs\r\n                        value={this.state.value}\r\n                        onChange={this.handleChange}\r\n                        variant=\"fullWidth\"\r\n                    >\r\n                        <Tab label=\"容量包\" icon={<SdStorage />} />\r\n                        <Tab label=\"会员\" icon={<SupervisedUserCircle />} />\r\n                        {this.state.scorePrice > 0 && (\r\n                            <Tab\r\n                                label=\"积分充值\"\r\n                                icon={<AccountBalanceWallet />}\r\n                            />\r\n                        )}\r\n                        <Tab label=\"使用激活码\" icon={<LocalPlay />} />\r\n                    </Tabs>\r\n                </AppBar>\r\n                {this.state.value === 0 && (\r\n                    <Paper className={classes.paper} square={true}>\r\n                        <Grid container spacing={3}>\r\n                            {this.state.packs.map((value, id) => (\r\n                                <Grid item xs={12} md={3} key={id}>\r\n                                    <PackSelect\r\n                                        pack={value}\r\n                                        onSelect={() => this.selectPack(id)}\r\n                                        active={this.state.selectedPack === id}\r\n                                    />\r\n                                </Grid>\r\n                            ))}\r\n                        </Grid>\r\n                        <Grid\r\n                            container\r\n                            className={classes.payMethod}\r\n                            spacing={1}\r\n                        >\r\n                            <Grid sm={6} xs={12}>\r\n                                {methodSelect}\r\n                            </Grid>\r\n                            <Grid sm={6} xs={12}>\r\n                                <div className={classes.action}>\r\n                                    <div>\r\n                                        当前费用：\r\n                                        {this.state.packPayMethod !==\r\n                                            \"score\" && (\r\n                                            <span className={classes.priceShow}>\r\n                                                ￥\r\n                                                {this.state.selectedPack ===\r\n                                                    -1 && <span>--</span>}\r\n                                                {this.state.selectedPack !==\r\n                                                    -1 &&\r\n                                                    this.state.times <= 99 &&\r\n                                                    this.state.times >= 1 && (\r\n                                                        <span>\r\n                                                            {(\r\n                                                                (this.state\r\n                                                                    .packs[\r\n                                                                    this.state\r\n                                                                        .selectedPack\r\n                                                                ].price /\r\n                                                                    100) *\r\n                                                                this.state.times\r\n                                                            ).toFixed(2)}\r\n                                                        </span>\r\n                                                    )}\r\n                                            </span>\r\n                                        )}\r\n                                        {this.state.packPayMethod ===\r\n                                            \"score\" && (\r\n                                            <span className={classes.priceShow}>\r\n                                                {this.state.selectedPack ===\r\n                                                    -1 && <span>--</span>}\r\n                                                {this.state.selectedPack !==\r\n                                                    -1 &&\r\n                                                    this.state.times <= 99 &&\r\n                                                    this.state.times >= 1 && (\r\n                                                        <span>\r\n                                                            {this.state.packs[\r\n                                                                this.state\r\n                                                                    .selectedPack\r\n                                                            ].score *\r\n                                                                this.state\r\n                                                                    .times}{\" \"}\r\n                                                            积分\r\n                                                        </span>\r\n                                                    )}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                    <div>\r\n                                        <Button\r\n                                            size=\"large\"\r\n                                            variant=\"contained\"\r\n                                            color=\"secondary\"\r\n                                            className={classes.button}\r\n                                            disabled={\r\n                                                this.state.loading ||\r\n                                                this.state.packPayMethod ===\r\n                                                    null\r\n                                            }\r\n                                            onClick={() => this.buyPack(\"pack\")}\r\n                                        >\r\n                                            <ShopIcon /> 立即购买\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Paper>\r\n                )}\r\n                {this.state.value === 1 && (\r\n                    <Paper className={classes.paper} square={true}>\r\n                        <Grid container spacing={5} alignItems=\"flex-end\">\r\n                            {this.state.groups.map((tier, id) => (\r\n                                // Enterprise card is full width at sm breakpoint\r\n                                <Grid item key={id} xs={12} sm={6} md={4}>\r\n                                    <Card>\r\n                                        <CardHeader\r\n                                            title={tier.name}\r\n                                            subheader={\r\n                                                tier.highlight ? \"推荐\" : null\r\n                                            }\r\n                                            titleTypographyProps={{\r\n                                                align: \"center\",\r\n                                            }}\r\n                                            subheaderTypographyProps={{\r\n                                                align: \"center\",\r\n                                            }}\r\n                                            action={\r\n                                                tier.highlight ? (\r\n                                                    <StarIcon />\r\n                                                ) : null\r\n                                            }\r\n                                            className={classes.cardHeader}\r\n                                        />\r\n                                        <CardContent>\r\n                                            <div\r\n                                                className={classes.cardPricing}\r\n                                            >\r\n                                                <Typography\r\n                                                    component=\"h2\"\r\n                                                    variant=\"h3\"\r\n                                                    color=\"textPrimary\"\r\n                                                >\r\n                                                    ￥{tier.price / 100}\r\n                                                </Typography>\r\n                                                <Typography\r\n                                                    variant=\"h6\"\r\n                                                    color=\"textSecondary\"\r\n                                                >\r\n                                                    /\r\n                                                    {Math.ceil(\r\n                                                        tier.time / 86400\r\n                                                    )}\r\n                                                    天\r\n                                                </Typography>\r\n                                            </div>\r\n                                            {tier.des.map((line) => (\r\n                                                <Typography\r\n                                                    variant=\"subtitle1\"\r\n                                                    align=\"center\"\r\n                                                    key={line}\r\n                                                >\r\n                                                    {line}\r\n                                                </Typography>\r\n                                            ))}\r\n                                        </CardContent>\r\n                                        <CardActions\r\n                                            className={classes.cardActions}\r\n                                        >\r\n                                            <Button\r\n                                                fullWidth\r\n                                                variant={\r\n                                                    tier.highlight\r\n                                                        ? \"contained\"\r\n                                                        : \"outlined\"\r\n                                                }\r\n                                                color=\"primary\"\r\n                                                onClick={() =>\r\n                                                    this.selectGroup(id)\r\n                                                }\r\n                                            >\r\n                                                立即购买\r\n                                            </Button>\r\n                                        </CardActions>\r\n                                    </Card>\r\n                                </Grid>\r\n                            ))}\r\n                        </Grid>\r\n                    </Paper>\r\n                )}\r\n\r\n                {this.state.value === 2 && (\r\n                    <Paper className={classes.paper} square={true}>\r\n                        <Grid\r\n                            container\r\n                            className={classes.payMethod}\r\n                            spacing={1}\r\n                        >\r\n                            <Grid sm={6} xs={12}>\r\n                                {methodSelect}\r\n                            </Grid>\r\n                            <Grid sm={6} xs={12}>\r\n                                <div className={classes.action}>\r\n                                    <div>\r\n                                        当前费用：\r\n                                        {this.state.packPayMethod !==\r\n                                            \"score\" && (\r\n                                            <span className={classes.priceShow}>\r\n                                                ￥\r\n                                                <span>\r\n                                                    {(\r\n                                                        (this.state.scorePrice /\r\n                                                            100) *\r\n                                                        this.state.scoreNum\r\n                                                    ).toFixed(2)}\r\n                                                </span>\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                    <div>\r\n                                        <Button\r\n                                            size=\"large\"\r\n                                            variant=\"contained\"\r\n                                            color=\"secondary\"\r\n                                            className={classes.button}\r\n                                            disabled={\r\n                                                this.state.loading ||\r\n                                                this.state.packPayMethod ===\r\n                                                    null\r\n                                            }\r\n                                            onClick={() =>\r\n                                                this.buyPack(\"score\")\r\n                                            }\r\n                                        >\r\n                                            <ShopIcon /> 立即购买\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Paper>\r\n                )}\r\n\r\n                {this.state.value === 3 && (\r\n                    <Paper className={classes.paper} square={true}>\r\n                        <div className={classes.redeemContainer}>\r\n                            <TextField\r\n                                id=\"standard-name\"\r\n                                label=\"输入激活码\"\r\n                                value={this.state.redeemCode}\r\n                                onChange={this.handleTexyChange(\"redeemCode\")}\r\n                                margin=\"normal\"\r\n                                inputProps={{\r\n                                    style: { textTransform: \"uppercase\" },\r\n                                }}\r\n                                fullWidth\r\n                            />\r\n                            <div className={classes.doRedeem}>\r\n                                <Button\r\n                                    size=\"large\"\r\n                                    variant=\"contained\"\r\n                                    color=\"secondary\"\r\n                                    className={classes.button}\r\n                                    disabled={this.state.loading}\r\n                                    onClick={this.doRedeem}\r\n                                >\r\n                                    下一步\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </Paper>\r\n                )}\r\n                <Dialog\r\n                    open={this.state.dialog === \"qr\"}\r\n                    onClose={this.handleClose}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">支付</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id=\"alert-dialog-description\">\r\n                            请使用\r\n                            {this.state.payment.type === \"alipay\" && (\r\n                                <span>支付宝</span>\r\n                            )}\r\n                            {this.state.payment.type === \"payjs\" && (\r\n                                <span>微信</span>\r\n                            )}\r\n                            扫描下方二维码完成付款，付款完成后本页面会自动刷新。\r\n                        </DialogContentText>\r\n                        <div className={classes.codeContainer}>\r\n                            <QRCode value={this.state.payment.img} />,\r\n                        </div>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"primary\">\r\n                            关闭\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                <Dialog\r\n                    open={this.state.dialog === \"success\"}\r\n                    onClose={this.handleClose}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">支付完成</DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id=\"alert-dialog-description\">\r\n                            您所购买的商品已到账。\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"primary\">\r\n                            关闭\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                <Dialog\r\n                    open={this.state.dialog === \"redeem\"}\r\n                    onClose={this.handleClose}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">确认兑换</DialogTitle>\r\n                    <DialogContent>\r\n                        {this.state.redeemInfo !== null && (\r\n                            <DialogContentText id=\"alert-dialog-description\">\r\n                                <Typography variant=\"subtitle1\">\r\n                                    商品名称：\r\n                                </Typography>\r\n                                <Typography>\r\n                                    {this.state.redeemInfo.name}\r\n                                </Typography>\r\n                                <Typography variant=\"subtitle1\">\r\n                                    {this.state.redeemInfo.type === 2\r\n                                        ? \"数量：\"\r\n                                        : \"时长：\"}\r\n                                </Typography>\r\n                                <Typography>\r\n                                    {this.state.redeemInfo.type === 2 && (\r\n                                        <>{this.state.redeemInfo.num}</>\r\n                                    )}\r\n                                    {this.state.redeemInfo.type !== 2 && (\r\n                                        <>\r\n                                            {Math.ceil(\r\n                                                this.state.redeemInfo.time /\r\n                                                    86400\r\n                                            ) * this.state.redeemInfo.num}\r\n                                            天\r\n                                        </>\r\n                                    )}\r\n                                </Typography>\r\n                            </DialogContentText>\r\n                        )}\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose}>取消</Button>\r\n                        <Button\r\n                            onClick={this.confirmRedeem}\r\n                            color=\"primary\"\r\n                            disabled={this.state.loading}\r\n                        >\r\n                            确认兑换\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                <Dialog\r\n                    open={this.state.dialog === \"buyGroup\"}\r\n                    onClose={this.handleClose}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                    aria-describedby=\"alert-dialog-description\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">\r\n                        购买用户组\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText id=\"alert-dialog-description\">\r\n                            已选：\r\n                            {this.state.selectedGroup !== -1 &&\r\n                                this.state.groups[this.state.selectedGroup]\r\n                                    .name}\r\n                        </DialogContentText>\r\n                        {methodSelect}\r\n                        <div>\r\n                            当前费用：\r\n                            {this.state.packPayMethod !== \"score\" && (\r\n                                <span className={classes.priceShow}>\r\n                                    ￥\r\n                                    {this.state.selectedGroup === -1 && (\r\n                                        <span>--</span>\r\n                                    )}\r\n                                    {this.state.selectedGroup !== -1 &&\r\n                                        this.state.times <= 99 &&\r\n                                        this.state.times >= 1 && (\r\n                                            <span>\r\n                                                {(\r\n                                                    (this.state.groups[\r\n                                                        this.state.selectedGroup\r\n                                                    ].price /\r\n                                                        100) *\r\n                                                    this.state.times\r\n                                                ).toFixed(2)}\r\n                                            </span>\r\n                                        )}\r\n                                </span>\r\n                            )}\r\n                            {this.state.packPayMethod === \"score\" && (\r\n                                <span className={classes.priceShow}>\r\n                                    {this.state.selectedGroup === -1 && (\r\n                                        <span>--</span>\r\n                                    )}\r\n                                    {this.state.selectedGroup !== -1 &&\r\n                                        this.state.times <= 99 &&\r\n                                        this.state.times >= 1 && (\r\n                                            <span>\r\n                                                {this.state.groups[\r\n                                                    this.state.selectedGroup\r\n                                                ].score * this.state.times}{\" \"}\r\n                                                积分\r\n                                            </span>\r\n                                        )}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button\r\n                            onClick={this.handleClose}\r\n                            disabled={this.state.loading}\r\n                        >\r\n                            取消\r\n                        </Button>\r\n                        <Button\r\n                            disabled={\r\n                                this.state.loading ||\r\n                                this.state.packPayMethod === null\r\n                            }\r\n                            onClick={() => this.buyPack(\"group\")}\r\n                            color=\"primary\"\r\n                        >\r\n                            购买\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst BuyQuota = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(BuyQuotaCompoment)));\r\n\r\nexport default BuyQuota;\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { Dialog } from \"@material-ui/core\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { FolderOpenOutlined, LabelOutlined } from \"@material-ui/icons\";\r\nimport PathSelector from \"../FileManager/PathSelector\";\r\nconst useStyles = makeStyles((theme) => ({\r\n    formGroup: {\r\n        display: \"flex\",\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    formIcon: {\r\n        marginTop: 21,\r\n        marginRight: 19,\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    input: {\r\n        width: 250,\r\n    },\r\n    dialogContent: {\r\n        paddingTop: 24,\r\n        paddingRight: 24,\r\n        paddingBottom: 8,\r\n        paddingLeft: 24,\r\n    },\r\n    button: {\r\n        marginTop: 8,\r\n    },\r\n}));\r\n\r\nexport default function CreateWebDAVAccount(props) {\r\n    const [value, setValue] = useState({\r\n        name: \"\",\r\n        path: \"/\",\r\n    });\r\n    const [pathSelectDialog, setPathSelectDialog] = React.useState(false);\r\n    const [selectedPath, setSelectedPath] = useState(\"\");\r\n    // eslint-disable-next-line\r\n    const [selectedPathName, setSelectedPathName] = useState(\"\");\r\n    const classes = useStyles();\r\n\r\n    const setMoveTarget = (folder) => {\r\n        const path =\r\n            folder.path === \"/\"\r\n                ? folder.path + folder.name\r\n                : folder.path + \"/\" + folder.name;\r\n        setSelectedPath(path);\r\n        setSelectedPathName(folder.name);\r\n    };\r\n\r\n    const handleInputChange = (name) => (e) => {\r\n        setValue({\r\n            ...value,\r\n            [name]: e.target.value,\r\n        });\r\n    };\r\n\r\n    const selectPath = () => {\r\n        setValue({\r\n            ...value,\r\n            path: selectedPath === \"//\" ? \"/\" : selectedPath,\r\n        });\r\n        setPathSelectDialog(false);\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n        >\r\n            <Dialog\r\n                open={pathSelectDialog}\r\n                onClose={() => setPathSelectDialog(false)}\r\n                aria-labelledby=\"form-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\">选择目录</DialogTitle>\r\n                <PathSelector\r\n                    presentPath=\"/\"\r\n                    selected={[]}\r\n                    onSelect={setMoveTarget}\r\n                />\r\n\r\n                <DialogActions>\r\n                    <Button onClick={() => setPathSelectDialog(false)}>\r\n                        取消\r\n                    </Button>\r\n                    <Button\r\n                        onClick={selectPath}\r\n                        color=\"primary\"\r\n                        disabled={selectedPath === \"\"}\r\n                    >\r\n                        确定\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <div className={classes.dialogContent}>\r\n                <div className={classes.formContainer}>\r\n                    <div className={classes.formGroup}>\r\n                        <div className={classes.formIcon}>\r\n                            <LabelOutlined />\r\n                        </div>\r\n\r\n                        <TextField\r\n                            className={classes.input}\r\n                            value={value.name}\r\n                            onChange={handleInputChange(\"name\")}\r\n                            label=\"备注名\"\r\n                        />\r\n                    </div>\r\n                    <div className={classes.formGroup}>\r\n                        <div className={classes.formIcon}>\r\n                            <FolderOpenOutlined />\r\n                        </div>\r\n                        <div>\r\n                            <TextField\r\n                                value={value.path}\r\n                                onChange={handleInputChange(\"path\")}\r\n                                className={classes.input}\r\n                                label=\"相对根目录\"\r\n                            />\r\n                            <br />\r\n                            <Button\r\n                                className={classes.button}\r\n                                color=\"primary\"\r\n                                onClick={() => setPathSelectDialog(true)}\r\n                            >\r\n                                选择目录\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <DialogActions>\r\n                <Button onClick={props.onClose}>取消</Button>\r\n                <Button\r\n                    disabled={value.path === \"\" || value.name === \"\"}\r\n                    color=\"primary\"\r\n                    onClick={() => props.callback(value)}\r\n                >\r\n                    确定\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { Dialog } from \"@material-ui/core\";\r\nimport API from \"../../middleware/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport { FolderOpenOutlined, Storage } from \"@material-ui/icons\";\r\nimport PathSelector from \"../FileManager/PathSelector\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nconst useStyles = makeStyles((theme) => ({\r\n    formGroup: {\r\n        display: \"flex\",\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    formIcon: {\r\n        marginTop: 21,\r\n        marginRight: 19,\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    input: {\r\n        width: 250,\r\n    },\r\n    dialogContent: {\r\n        paddingTop: 24,\r\n        paddingRight: 24,\r\n        paddingBottom: 8,\r\n        paddingLeft: 24,\r\n    },\r\n    button: {\r\n        marginTop: 8,\r\n    },\r\n}));\r\n\r\nexport default function CreateWebDAVMount(props) {\r\n    const [value, setValue] = useState({\r\n        policy: \"\",\r\n        path: \"/\",\r\n    });\r\n    const [policies, setPolicies] = useState([]);\r\n    const [pathSelectDialog, setPathSelectDialog] = React.useState(false);\r\n    const [selectedPath, setSelectedPath] = useState(\"\");\r\n    // eslint-disable-next-line\r\n    const [selectedPathName, setSelectedPathName] = useState(\"\");\r\n\r\n    const classes = useStyles();\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const setMoveTarget = (folder) => {\r\n        const path =\r\n            folder.path === \"/\"\r\n                ? folder.path + folder.name\r\n                : folder.path + \"/\" + folder.name;\r\n        setSelectedPath(path);\r\n        setSelectedPathName(folder.name);\r\n    };\r\n\r\n    const handleInputChange = (name) => (e) => {\r\n        setValue({\r\n            ...value,\r\n            [name]: e.target.value,\r\n        });\r\n    };\r\n\r\n    const selectPath = () => {\r\n        setValue({\r\n            ...value,\r\n            path: selectedPath === \"//\" ? \"/\" : selectedPath,\r\n        });\r\n        setPathSelectDialog(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        API.get(\"/user/setting/policies\")\r\n            .then((response) => {\r\n                setPolicies(response.data.options);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n        >\r\n            <Dialog\r\n                open={pathSelectDialog}\r\n                onClose={() => setPathSelectDialog(false)}\r\n                aria-labelledby=\"form-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"form-dialog-title\">选择目录</DialogTitle>\r\n                <PathSelector\r\n                    presentPath=\"/\"\r\n                    selected={[]}\r\n                    onSelect={setMoveTarget}\r\n                />\r\n\r\n                <DialogActions>\r\n                    <Button onClick={() => setPathSelectDialog(false)}>\r\n                        取消\r\n                    </Button>\r\n                    <Button\r\n                        onClick={selectPath}\r\n                        color=\"primary\"\r\n                        disabled={selectedPath === \"\"}\r\n                    >\r\n                        确定\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <div className={classes.dialogContent}>\r\n                <div className={classes.formContainer}>\r\n                    <div className={classes.formGroup}>\r\n                        <div className={classes.formIcon}>\r\n                            <Storage />\r\n                        </div>\r\n                        <FormControl className={classes.formControl}>\r\n                            <InputLabel id=\"demo-simple-select-label\">\r\n                                存储策略\r\n                            </InputLabel>\r\n                            <Select\r\n                                className={classes.input}\r\n                                labelId=\"demo-simple-select-label\"\r\n                                value={value.policy}\r\n                                onChange={handleInputChange(\"policy\")}\r\n                            >\r\n                                {policies.map((v, k) => (\r\n                                    <MenuItem key={k} value={v.id}>\r\n                                        {v.name}\r\n                                    </MenuItem>\r\n                                ))}\r\n                            </Select>\r\n                        </FormControl>\r\n                    </div>\r\n                    <div className={classes.formGroup}>\r\n                        <div className={classes.formIcon}>\r\n                            <FolderOpenOutlined />\r\n                        </div>\r\n                        <div>\r\n                            <TextField\r\n                                value={value.path}\r\n                                onChange={handleInputChange(\"path\")}\r\n                                className={classes.input}\r\n                                label=\"目录\"\r\n                            />\r\n                            <br />\r\n                            <Button\r\n                                className={classes.button}\r\n                                color=\"primary\"\r\n                                onClick={() => setPathSelectDialog(true)}\r\n                            >\r\n                                选择目录\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <DialogActions>\r\n                <Button onClick={props.onClose}>取消</Button>\r\n                <Button\r\n                    disabled={value.path === \"\" || value.policy === \"\"}\r\n                    color=\"primary\"\r\n                    onClick={() => props.callback(value)}\r\n                >\r\n                    确定\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles, Typography } from \"@material-ui/core\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport API from \"../../middleware/Api\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport CreateWebDAVAccount from \"../Modals/CreateWebDAVAccount\";\r\nimport TimeAgo from \"timeago-react\";\r\nimport CreateWebDAVMount from \"../Modals/CreateWebDAVMount\";\r\nimport Link from \"@material-ui/core/Link\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"50px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: \"50px\",\r\n    },\r\n    content: {\r\n        marginTop: theme.spacing(4),\r\n    },\r\n    cardContent: {\r\n        padding: theme.spacing(2),\r\n    },\r\n    tableContainer: {\r\n        overflowX: \"auto\",\r\n    },\r\n    create: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    copy: {\r\n        marginLeft: 10,\r\n    },\r\n}));\r\n\r\nexport default function WebDAV() {\r\n    const [tab, setTab] = useState(0);\r\n    const [create, setCreate] = useState(false);\r\n    const [mount, setMount] = useState(false);\r\n    const [accounts, setAccounts] = useState([]);\r\n    const [folders, setFolders] = useState([]);\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const copyToClipboard = (text) => {\r\n        navigator.clipboard.writeText(text);\r\n        ToggleSnackbar(\"top\", \"center\", \"已复制到剪切板\", \"success\");\r\n    };\r\n\r\n    const loadList = () => {\r\n        API.get(\"/webdav/accounts\")\r\n            .then((response) => {\r\n                setAccounts(response.data.accounts);\r\n                setFolders(response.data.folders);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n    useEffect(() => {\r\n        loadList();\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    const deleteAccount = (id) => {\r\n        const account = accounts[id];\r\n        API.delete(\"/webdav/accounts/\" + account.ID)\r\n            .then(() => {\r\n                let accountCopy = [...accounts];\r\n                accountCopy = accountCopy.filter((v, i) => {\r\n                    return i !== id;\r\n                });\r\n                setAccounts(accountCopy);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    const deleteMount = (id) => {\r\n        const folder = folders[id];\r\n        API.delete(\"/webdav/mount/\" + folder.id)\r\n            .then(() => {\r\n                let folderCopy = [...folders];\r\n                folderCopy = folderCopy.filter((v, i) => {\r\n                    return i !== id;\r\n                });\r\n                setFolders(folderCopy);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    const addAccount = (account) => {\r\n        setCreate(false);\r\n        API.post(\"/webdav/accounts\", {\r\n            path: account.path,\r\n            name: account.name,\r\n        })\r\n            .then((response) => {\r\n                setAccounts([\r\n                    {\r\n                        ID: response.data.id,\r\n                        Password: response.data.password,\r\n                        CreatedAt: response.data.created_at,\r\n                        Name: account.name,\r\n                        Root: account.path,\r\n                    },\r\n                    ...accounts,\r\n                ]);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    const addMount = (mountInfo) => {\r\n        setMount(false);\r\n        API.post(\"/webdav/mount\", {\r\n            path: mountInfo.path,\r\n            policy: mountInfo.policy,\r\n        })\r\n            .then(() => {\r\n                loadList();\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    const classes = useStyles();\r\n    const user = Auth.GetUser();\r\n\r\n    return (\r\n        <div className={classes.layout}>\r\n            <CreateWebDAVAccount\r\n                callback={addAccount}\r\n                open={create}\r\n                onClose={() => setCreate(false)}\r\n            />\r\n            <CreateWebDAVMount\r\n                callback={addMount}\r\n                open={mount}\r\n                onClose={() => setMount(false)}\r\n            />\r\n            <Typography color=\"textSecondary\" variant=\"h4\">\r\n                WebDAV\r\n            </Typography>\r\n            <Paper elevation={3} className={classes.content}>\r\n                <Tabs\r\n                    value={tab}\r\n                    indicatorColor=\"primary\"\r\n                    textColor=\"primary\"\r\n                    onChange={(event, newValue) => setTab(newValue)}\r\n                    aria-label=\"disabled tabs example\"\r\n                >\r\n                    <Tab label=\"账号管理\" />\r\n                    <Tab label=\"存储策略挂载\" />\r\n                </Tabs>\r\n                <div className={classes.cardContent}>\r\n                    {tab === 0 && (\r\n                        <div>\r\n                            <Alert severity=\"info\">\r\n                                WebDAV的地址为：\r\n                                {window.location.origin + \"/dav\"}\r\n                                ；登陆用户名统一为：{user.user_name}{\" \"}\r\n                                ；密码为所创建账号的密码。\r\n                            </Alert>\r\n                            <TableContainer className={classes.tableContainer}>\r\n                                <Table\r\n                                    className={classes.table}\r\n                                    aria-label=\"simple table\"\r\n                                >\r\n                                    <TableHead>\r\n                                        <TableRow>\r\n                                            <TableCell>备注名</TableCell>\r\n                                            <TableCell>密码</TableCell>\r\n                                            <TableCell align=\"right\">\r\n                                                根目录\r\n                                            </TableCell>\r\n                                            <TableCell align=\"right\">\r\n                                                创建日期\r\n                                            </TableCell>\r\n                                            <TableCell align=\"right\">\r\n                                                操作\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody>\r\n                                        {accounts.map((row, id) => (\r\n                                            <TableRow key={id}>\r\n                                                <TableCell\r\n                                                    component=\"th\"\r\n                                                    scope=\"row\"\r\n                                                >\r\n                                                    {row.Name}\r\n                                                </TableCell>\r\n                                                <TableCell>\r\n                                                    {row.Password}\r\n                                                    <Link\r\n                                                        className={classes.copy}\r\n                                                        onClick={() =>\r\n                                                            copyToClipboard(\r\n                                                                row.Password\r\n                                                            )\r\n                                                        }\r\n                                                        href={\"javascript:void\"}\r\n                                                    >\r\n                                                        复制\r\n                                                    </Link>\r\n                                                </TableCell>\r\n                                                <TableCell align=\"right\">\r\n                                                    {row.Root}\r\n                                                </TableCell>\r\n                                                <TableCell align=\"right\">\r\n                                                    <TimeAgo\r\n                                                        datetime={row.CreatedAt}\r\n                                                        locale=\"zh_CN\"\r\n                                                    />\r\n                                                </TableCell>\r\n                                                <TableCell align=\"right\">\r\n                                                    <IconButton\r\n                                                        size={\"small\"}\r\n                                                        onClick={() =>\r\n                                                            deleteAccount(id)\r\n                                                        }\r\n                                                    >\r\n                                                        <Delete />\r\n                                                    </IconButton>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        ))}\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </TableContainer>\r\n                            <Button\r\n                                onClick={() => setCreate(true)}\r\n                                className={classes.create}\r\n                                variant=\"contained\"\r\n                                color=\"secondary\"\r\n                            >\r\n                                创建新账号\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                    {tab === 1 && (\r\n                        <div>\r\n                            <Alert severity=\"info\">\r\n                                为目录挂载存储策略后，在 WebDAV\r\n                                中上传至此目录的新文件将会使用挂载的存储策略存储。复制、移动到此目录不会应用挂载的存储策略；挂载设置不会被子目录继承。\r\n                            </Alert>\r\n                            <TableContainer className={classes.tableContainer}>\r\n                                <Table\r\n                                    size=\"small\"\r\n                                    className={classes.table}\r\n                                    aria-label=\"simple table\"\r\n                                >\r\n                                    <TableHead>\r\n                                        <TableRow>\r\n                                            <TableCell>目录名</TableCell>\r\n                                            <TableCell align=\"right\">\r\n                                                挂载存储策略\r\n                                            </TableCell>\r\n                                            <TableCell align=\"right\">\r\n                                                操作\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody>\r\n                                        {folders.map((row, id) => (\r\n                                            <TableRow key={id}>\r\n                                                <TableCell\r\n                                                    component=\"th\"\r\n                                                    scope=\"row\"\r\n                                                >\r\n                                                    {row.name}\r\n                                                </TableCell>\r\n                                                <TableCell align=\"right\">\r\n                                                    {row.policy_name}\r\n                                                </TableCell>\r\n                                                <TableCell align=\"right\">\r\n                                                    <IconButton\r\n                                                        size={\"small\"}\r\n                                                        onClick={() =>\r\n                                                            deleteMount(id)\r\n                                                        }\r\n                                                    >\r\n                                                        <Delete />\r\n                                                    </IconButton>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        ))}\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </TableContainer>\r\n                            <Button\r\n                                onClick={() => setMount(true)}\r\n                                className={classes.create}\r\n                                variant=\"contained\"\r\n                                color=\"secondary\"\r\n                            >\r\n                                挂载新目录\r\n                            </Button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </Paper>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles, Typography } from \"@material-ui/core\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport API from \"../../middleware/Api\";\r\nimport { getTaskProgress, getTaskStatus, getTaskType } from \"../../config\";\r\nimport Pagination from \"@material-ui/lab/Pagination\";\r\nimport { formatLocalTime } from \"../../utils/datetime\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"50px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 1100,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: \"50px\",\r\n    },\r\n    content: {\r\n        marginTop: theme.spacing(4),\r\n        overflowX: \"auto\",\r\n    },\r\n    cardContent: {\r\n        padding: theme.spacing(2),\r\n    },\r\n    tableContainer: {\r\n        overflowX: \"auto\",\r\n    },\r\n    create: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    noWrap: {\r\n        wordBreak: \"keepAll\",\r\n    },\r\n    footer: {\r\n        padding: theme.spacing(2),\r\n    },\r\n}));\r\n\r\nexport default function Tasks() {\r\n    const [tasks, setTasks] = useState([]);\r\n    const [total, setTotal] = useState(0);\r\n    const [page, setPage] = useState(1);\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const loadList = (page) => {\r\n        API.get(\"/user/setting/tasks?page=\" + page)\r\n            .then((response) => {\r\n                setTasks(response.data.tasks);\r\n                setTotal(response.data.total);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadList(page);\r\n        // eslint-disable-next-line\r\n    }, [page]);\r\n\r\n    const getError = (error) => {\r\n        if (error === \"\") {\r\n            return \"-\";\r\n        }\r\n        try {\r\n            const res = JSON.parse(error);\r\n            return res.msg;\r\n        } catch (e) {\r\n            return \"未知\";\r\n        }\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.layout}>\r\n            <Typography color=\"textSecondary\" variant=\"h4\">\r\n                任务队列\r\n            </Typography>\r\n            <Paper elevation={3} className={classes.content}>\r\n                <Table className={classes.table} aria-label=\"simple table\">\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell nowrap=\"nowrap\">创建于</TableCell>\r\n                            <TableCell nowrap=\"nowrap\" align=\"right\">\r\n                                任务类型\r\n                            </TableCell>\r\n                            <TableCell nowrap=\"nowrap\" align=\"right\">\r\n                                状态\r\n                            </TableCell>\r\n                            <TableCell nowrap=\"nowrap\" align=\"right\">\r\n                                最后进度\r\n                            </TableCell>\r\n                            <TableCell nowrap=\"nowrap\">错误信息</TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {tasks.map((row, id) => (\r\n                            <TableRow key={id}>\r\n                                <TableCell\r\n                                    nowrap=\"nowrap\"\r\n                                    component=\"th\"\r\n                                    scope=\"row\"\r\n                                >\r\n                                    {formatLocalTime(\r\n                                        row.create_date,\r\n                                        \"YYYY-MM-DD H:mm:ss\"\r\n                                    )}\r\n                                </TableCell>\r\n                                <TableCell nowrap=\"nowrap\" align=\"right\">\r\n                                    {getTaskType(row.type)}\r\n                                </TableCell>\r\n                                <TableCell nowrap=\"nowrap\" align=\"right\">\r\n                                    {getTaskStatus(row.status)}\r\n                                </TableCell>\r\n                                <TableCell nowrap=\"nowrap\" align=\"right\">\r\n                                    {getTaskProgress(row.type, row.progress)}\r\n                                </TableCell>\r\n                                <TableCell className={classes.noWrap}>\r\n                                    {getError(row.error)}\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ))}\r\n                    </TableBody>\r\n                </Table>\r\n                <div className={classes.footer}>\r\n                    <Pagination\r\n                        count={Math.ceil(total / 10)}\r\n                        onChange={(e, v) => setPage(v)}\r\n                        color=\"secondary\"\r\n                    />\r\n                </div>\r\n            </Paper>\r\n        </div>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { useParams } from \"react-router\";\n\nexport default function Ifm() {\r\n    const params = useParams(\"action\");\r\n\tlet iFrameHeight = '500px';\r\n\tlet iframe = null;\r\n\r\n    const getCookie =(name)=> {\r\n        const strcookie = document.cookie;//获取cookie字符串\r\n            const arrcookie = strcookie.split(\"; \");//分割\r\n            //遍历匹配\r\n            for ( let i = 0; i < arrcookie.length; i++) {\r\n                const arr = arrcookie[i].split(\"=\");\r\n                if (arr[0] == name){\r\n                    return unescape(arr[1]);\r\n                }\r\n            }\r\n        return null;\r\n    }\r\n\t\r\n    const ifmUrl = ()=>{\r\n        return \"/app/index.php?\" + params.action + \"&token=\" + getCookie(\"token\");\r\n    }\n     return (\n        <iframe \n                style={{width:'100%', overflow:'visible'}}\n                onLoad={() => {\r\n\t\t\t\t\tiFrameHeight = (document.documentElement.clientHeight - (document.documentElement.clientHeight * 0.075)) + 'px';\r\n\t\t\t\t\tiframe.height = iFrameHeight;\r\n                }} \r\n\t\t\t\tref={(c) => { iframe = c; }}\n                src={ifmUrl()} \n                width=\"100%\" \n                height={iFrameHeight} \n                frameBorder=\"0\"\n\t\t\t\tscrolling=\"auto\"\n            />\n     );\n}","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport API from \"../../middleware/Api\";\r\n\r\nimport {\r\n    withStyles,\r\n    Paper,\r\n    Avatar,\r\n    Typography,\r\n    Tabs,\r\n    Tab,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableRow,\r\n    Grid,\r\n} from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router\";\r\nimport Pagination from \"@material-ui/lab/Pagination\";\r\n\r\nconst styles = (theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"50px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        marginBottom: \"30px\",\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            width: 700,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n    },\r\n    userNav: {\r\n        height: \"270px\",\r\n        backgroundColor: theme.palette.primary.main,\r\n        padding: \"20px 20px 2em\",\r\n        backgroundImage:\r\n            \"url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'%3E%3Cpolygon fill='\" +\r\n            theme.palette.primary.light.replace(\"#\", \"%23\") +\r\n            \"' points='957 450 539 900 1396 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.primary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='957 450 872.9 900 1396 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.main.replace(\"#\", \"%23\") +\r\n            \"' points='-60 900 398 662 816 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='337 900 398 662 816 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.light.replace(\"#\", \"%23\") +\r\n            \"' points='1203 546 1552 900 876 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.main.replace(\"#\", \"%23\") +\r\n            \"' points='1203 546 1552 900 1162 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.primary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='641 695 886 900 367 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.primary.main.replace(\"#\", \"%23\") +\r\n            \"' points='587 900 641 695 886 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.light.replace(\"#\", \"%23\") +\r\n            \"' points='1710 900 1401 632 1096 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='1710 900 1401 632 1365 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.main.replace(\"#\", \"%23\") +\r\n            \"' points='1210 900 971 687 725 900'/%3E%3Cpolygon fill='\" +\r\n            theme.palette.secondary.dark.replace(\"#\", \"%23\") +\r\n            \"' points='943 900 1210 900 971 687'/%3E%3C/svg%3E\\\")\",\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"bottom\",\r\n    },\r\n    avatarContainer: {\r\n        height: \"80px\",\r\n        width: \"80px\",\r\n        borderRaidus: \"50%\",\r\n        margin: \"auto\",\r\n        marginTop: \"50px\",\r\n        boxShadow:\r\n            \"0 2px 5px 0 rgba(0,0,0,0.16), 0 2px 10px 0 rgba(0,0,0,0.12)\",\r\n        border: \"2px solid #fff\",\r\n    },\r\n    nickName: {\r\n        width: \"200px\",\r\n        margin: \"auto\",\r\n        textAlign: \"center\",\r\n        marginTop: \"1px\",\r\n        fontSize: \"25px\",\r\n        color: \"#ffffff\",\r\n        opacity: \"0.81\",\r\n    },\r\n    th: {\r\n        minWidth: \"106px\",\r\n    },\r\n    mobileHide: {\r\n        [theme.breakpoints.down(\"md\")]: {\r\n            display: \"none\",\r\n        },\r\n    },\r\n    tableLink: {\r\n        cursor: \"pointer\",\r\n    },\r\n    navigator: {\r\n        padding: theme.spacing(2),\r\n    },\r\n    pageInfo: {\r\n        marginTop: \"14px\",\r\n        marginLeft: \"23px\",\r\n    },\r\n    infoItem: {\r\n        paddingLeft: \"46px!important\",\r\n        paddingBottom: \"20px!important\",\r\n    },\r\n    infoContainer: {\r\n        marginTop: \"30px\",\r\n    },\r\n    tableContainer: {\r\n        overflowX: \"auto\",\r\n    },\r\n});\r\nconst mapStateToProps = () => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n    };\r\n};\r\n\r\nclass ProfileCompoment extends Component {\r\n    state = {\r\n        listType: 0,\r\n        shareList: [],\r\n        page: 1,\r\n        user: null,\r\n        total: 0,\r\n    };\r\n\r\n    handleChange = (event, listType) => {\r\n        this.setState({ listType });\r\n        if (listType === 1) {\r\n            this.loadList(1, \"hot\");\r\n        } else if (listType === 0) {\r\n            this.loadList(1, \"default\");\r\n        }\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        this.loadList(1, \"default\");\r\n    };\r\n\r\n    loadList = (page, order) => {\r\n        API.get(\r\n            \"/user/profile/\" +\r\n                this.props.match.params.id +\r\n                \"?page=\" +\r\n                page +\r\n                \"&type=\" +\r\n                order\r\n        )\r\n            .then((response) => {\r\n                this.setState({\r\n                    shareList: response.data.items,\r\n                    user: response.data.user,\r\n                    total: response.data.total,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    loadNext = () => {\r\n        this.loadList(\r\n            this.state.page + 1,\r\n            this.state.listType === 0 ? \"default\" : \"hot\"\r\n        );\r\n    };\r\n\r\n    loadPrev = () => {\r\n        this.loadList(\r\n            this.state.page - 1,\r\n            this.state.listType === 0 ? \"default\" : \"hot\"\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className={classes.layout}>\r\n                {this.state.user === null && <div></div>}\r\n                {this.state.user !== null && (\r\n                    <Paper square>\r\n                        <div className={classes.userNav}>\r\n                            <div>\r\n                                <Avatar\r\n                                    className={classes.avatarContainer}\r\n                                    src={\r\n                                        \"/api/v3/user/avatar/\" +\r\n                                        this.state.user.id +\r\n                                        \"/l\"\r\n                                    }\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <Typography className={classes.nickName} noWrap>\r\n                                    {this.state.user.nick}\r\n                                </Typography>\r\n                            </div>\r\n                        </div>\r\n                        <Tabs\r\n                            value={this.state.listType}\r\n                            indicatorColor=\"primary\"\r\n                            textColor=\"primary\"\r\n                            onChange={this.handleChange}\r\n                            centered\r\n                        >\r\n                            <Tab label=\"全部分享\" />\r\n                            <Tab label=\"热门分享\" />\r\n                            <Tab label=\"个人资料\" />\r\n                        </Tabs>\r\n                        {this.state.listType === 2 && (\r\n                            <div className={classes.infoContainer}>\r\n                                <Grid container spacing={24}>\r\n                                    <Grid\r\n                                        item\r\n                                        md={4}\r\n                                        xs={12}\r\n                                        className={classes.infoItem}\r\n                                    >\r\n                                        <Typography\r\n                                            color=\"textSecondary\"\r\n                                            variant=\"h6\"\r\n                                        >\r\n                                            UID\r\n                                        </Typography>\r\n                                        <Typography>\r\n                                            {this.state.user.id}\r\n                                        </Typography>\r\n                                    </Grid>\r\n                                    <Grid\r\n                                        item\r\n                                        md={4}\r\n                                        xs={12}\r\n                                        className={classes.infoItem}\r\n                                    >\r\n                                        <Typography\r\n                                            color=\"textSecondary\"\r\n                                            variant=\"h6\"\r\n                                        >\r\n                                            昵称\r\n                                        </Typography>\r\n                                        <Typography>\r\n                                            {this.state.user.nick}\r\n                                        </Typography>\r\n                                    </Grid>\r\n                                    <Grid\r\n                                        item\r\n                                        md={4}\r\n                                        xs={12}\r\n                                        className={classes.infoItem}\r\n                                    >\r\n                                        <Typography\r\n                                            color=\"textSecondary\"\r\n                                            variant=\"h6\"\r\n                                        >\r\n                                            用户组\r\n                                        </Typography>\r\n                                        <Typography>\r\n                                            {this.state.user.group}\r\n                                        </Typography>\r\n                                    </Grid>\r\n                                    <Grid\r\n                                        item\r\n                                        md={4}\r\n                                        xs={12}\r\n                                        className={classes.infoItem}\r\n                                    >\r\n                                        <Typography\r\n                                            color=\"textSecondary\"\r\n                                            variant=\"h6\"\r\n                                        >\r\n                                            分享总数\r\n                                        </Typography>\r\n                                        <Typography>\r\n                                            {this.state.total}\r\n                                        </Typography>\r\n                                    </Grid>\r\n                                    <Grid\r\n                                        item\r\n                                        md={4}\r\n                                        xs={12}\r\n                                        className={classes.infoItem}\r\n                                    >\r\n                                        <Typography\r\n                                            color=\"textSecondary\"\r\n                                            variant=\"h6\"\r\n                                        >\r\n                                            注册日期\r\n                                        </Typography>\r\n                                        <Typography>\r\n                                            {this.state.user.date}\r\n                                        </Typography>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </div>\r\n                        )}\r\n                        {(this.state.listType === 0 ||\r\n                            this.state.listType === 1) && (\r\n                            <div>\r\n                                <div className={classes.tableContainer}>\r\n                                    <Table className={classes.table}>\r\n                                        <TableHead>\r\n                                            <TableRow>\r\n                                                <TableCell>文件名</TableCell>\r\n                                                <TableCell\r\n                                                    className={\r\n                                                        classes.mobileHide\r\n                                                    }\r\n                                                >\r\n                                                    分享日期\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    className={[\r\n                                                        classes.th,\r\n                                                        classes.mobileHide,\r\n                                                    ]}\r\n                                                >\r\n                                                    下载次数\r\n                                                </TableCell>\r\n                                                <TableCell\r\n                                                    className={[\r\n                                                        classes.th,\r\n                                                        classes.mobileHide,\r\n                                                    ]}\r\n                                                >\r\n                                                    浏览次数\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        </TableHead>\r\n                                        <TableBody>\r\n                                            {this.state.shareList.map(\r\n                                                (row, id) => (\r\n                                                    <TableRow\r\n                                                        key={id}\r\n                                                        className={\r\n                                                            classes.tableLink\r\n                                                        }\r\n                                                        onClick={() =>\r\n                                                            this.props.history.push(\r\n                                                                \"/s/\" + row.key\r\n                                                            )\r\n                                                        }\r\n                                                    >\r\n                                                        <TableCell>\r\n                                                            <Typography>\r\n                                                                {row.source\r\n                                                                    ? row.source\r\n                                                                          .name\r\n                                                                    : \"[已失效]\"}\r\n                                                            </Typography>\r\n                                                        </TableCell>\r\n                                                        <TableCell\r\n                                                            nowrap={\"nowrap\"}\r\n                                                            className={\r\n                                                                classes.mobileHide\r\n                                                            }\r\n                                                        >\r\n                                                            {row.create_date}\r\n                                                        </TableCell>\r\n                                                        <TableCell\r\n                                                            className={\r\n                                                                classes.mobileHide\r\n                                                            }\r\n                                                        >\r\n                                                            {row.downloads}\r\n                                                        </TableCell>\r\n                                                        <TableCell\r\n                                                            className={\r\n                                                                classes.mobileHide\r\n                                                            }\r\n                                                        >\r\n                                                            {row.views}\r\n                                                        </TableCell>\r\n                                                    </TableRow>\r\n                                                )\r\n                                            )}\r\n                                        </TableBody>\r\n                                    </Table>\r\n                                </div>\r\n                                {this.state.shareList.length !== 0 &&\r\n                                    this.state.listType === 0 && (\r\n                                        <div className={classes.navigator}>\r\n                                            <Pagination\r\n                                                count={Math.ceil(\r\n                                                    this.state.total / 10\r\n                                                )}\r\n                                                onChange={(e, v) =>\r\n                                                    this.loadList(\r\n                                                        v,\r\n                                                        this.state.listType ===\r\n                                                            0\r\n                                                            ? \"default\"\r\n                                                            : \"hot\"\r\n                                                    )\r\n                                                }\r\n                                                color=\"secondary\"\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                            </div>\r\n                        )}\r\n                    </Paper>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst Profile = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(ProfileCompoment)));\r\n\r\nexport default Profile;\r\n","import React, { useState, useCallback } from \"react\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Divider,\r\n    List,\r\n    ListItem,\r\n    ListItemIcon,\r\n    ListItemSecondaryAction,\r\n    ListItemText,\r\n    makeStyles,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toggleSnackbar } from \"../../actions\";\r\nimport RightIcon from \"@material-ui/icons/KeyboardArrowRight\";\r\nimport { Add, Fingerprint, HighlightOff } from \"@material-ui/icons\";\r\nimport API from \"../../middleware/Api\";\r\nimport { bufferDecode, bufferEncode } from \"../../utils\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    sectionTitle: {\r\n        paddingBottom: \"10px\",\r\n        paddingTop: \"30px\",\r\n    },\r\n    rightIcon: {\r\n        marginTop: \"4px\",\r\n        marginRight: \"10px\",\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    desenList: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n    },\r\n    iconFix: {\r\n        marginRight: \"11px\",\r\n        marginLeft: \"7px\",\r\n        minWidth: 40,\r\n    },\r\n    flexContainer: {\r\n        display: \"flex\",\r\n    },\r\n}));\r\n\r\nexport default function Authn(props) {\r\n    const [selected, setSelected] = useState(\"\");\r\n    const [confirm, setConfirm] = useState(false);\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const deleteCredential = (id) => {\r\n        API.patch(\"/user/setting/authn\", {\r\n            id: id,\r\n        })\r\n            .then(() => {\r\n                ToggleSnackbar(\"top\", \"right\", \"凭证已删除\", \"success\");\r\n                props.remove(id);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            })\r\n            .then(() => {\r\n                setConfirm(false);\r\n            });\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    const addCredential = () => {\r\n        if (!navigator.credentials) {\r\n            ToggleSnackbar(\"top\", \"right\", \"当前浏览器或环境不支持\", \"warning\");\r\n\r\n            return;\r\n        }\r\n        API.put(\"/user/authn\", {})\r\n            .then((response) => {\r\n                const credentialCreationOptions = response.data;\r\n                credentialCreationOptions.publicKey.challenge = bufferDecode(\r\n                    credentialCreationOptions.publicKey.challenge\r\n                );\r\n                credentialCreationOptions.publicKey.user.id = bufferDecode(\r\n                    credentialCreationOptions.publicKey.user.id\r\n                );\r\n                if (credentialCreationOptions.publicKey.excludeCredentials) {\r\n                    for (\r\n                        let i = 0;\r\n                        i <\r\n                        credentialCreationOptions.publicKey.excludeCredentials\r\n                            .length;\r\n                        i++\r\n                    ) {\r\n                        credentialCreationOptions.publicKey.excludeCredentials[\r\n                            i\r\n                        ].id = bufferDecode(\r\n                            credentialCreationOptions.publicKey\r\n                                .excludeCredentials[i].id\r\n                        );\r\n                    }\r\n                }\r\n\r\n                return navigator.credentials.create({\r\n                    publicKey: credentialCreationOptions.publicKey,\r\n                });\r\n            })\r\n            .then((credential) => {\r\n                const attestationObject = credential.response.attestationObject;\r\n                const clientDataJSON = credential.response.clientDataJSON;\r\n                const rawId = credential.rawId;\r\n                return API.put(\r\n                    \"/user/authn/finish\",\r\n                    JSON.stringify({\r\n                        id: credential.id,\r\n                        rawId: bufferEncode(rawId),\r\n                        type: credential.type,\r\n                        response: {\r\n                            attestationObject: bufferEncode(attestationObject),\r\n                            clientDataJSON: bufferEncode(clientDataJSON),\r\n                        },\r\n                    })\r\n                );\r\n            })\r\n            .then((response) => {\r\n                props.add(response.data);\r\n                ToggleSnackbar(\"top\", \"right\", \"验证器已添加\", \"success\");\r\n                return;\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"error\");\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Dialog open={confirm} onClose={() => setConfirm(false)}>\r\n                <DialogTitle>删除凭证</DialogTitle>\r\n                <DialogContent>确定要吊销这个凭证吗？</DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => setConfirm(false)} color=\"default\">\r\n                        取消\r\n                    </Button>\r\n                    <Button\r\n                        onClick={() => deleteCredential(selected)}\r\n                        color=\"primary\"\r\n                    >\r\n                        确定\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Typography className={classes.sectionTitle} variant=\"subtitle2\">\r\n                外部认证器\r\n            </Typography>\r\n            <Paper>\r\n                <List className={classes.desenList}>\r\n                    {props.list.map((v) => (\r\n                        <>\r\n                            <ListItem\r\n                                button\r\n                                style={{\r\n                                    paddingRight: 60,\r\n                                }}\r\n                                onClick={() => {\r\n                                    setConfirm(true);\r\n                                    setSelected(v.id);\r\n                                }}\r\n                            >\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <Fingerprint />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary={v.fingerprint} />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    onClick={() => deleteCredential(v.id)}\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <HighlightOff\r\n                                        className={classes.rightIcon}\r\n                                    />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                        </>\r\n                    ))}\r\n                    <ListItem button onClick={() => addCredential()}>\r\n                        <ListItemIcon className={classes.iconFix}>\r\n                            <Add />\r\n                        </ListItemIcon>\r\n                        <ListItemText primary=\"添加新验证器\" />\r\n\r\n                        <ListItemSecondaryAction\r\n                            className={classes.flexContainer}\r\n                        >\r\n                            <RightIcon className={classes.rightIcon} />\r\n                        </ListItemSecondaryAction>\r\n                    </ListItem>\r\n                </List>\r\n            </Paper>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { FormLabel, makeStyles } from \"@material-ui/core\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogContentText,\r\n    CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { toggleSnackbar, setModalsLoading } from \"../../actions/index\";\r\nimport PathSelector from \"../FileManager/PathSelector\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport API from \"../../middleware/Api\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport {\r\n    refreshTimeZone,\r\n    timeZone,\r\n    validateTimeZone,\r\n} from \"../../utils/datetime\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Auth from \"../../middleware/Auth\";\r\n\r\nconst useStyles = makeStyles((theme) => ({}));\r\n\r\nexport default function TimeZoneDialog(props) {\r\n    const [timeZoneValue, setTimeZoneValue] = useState(timeZone);\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n\r\n    const saveZoneInfo = () => {\r\n        if (!validateTimeZone(timeZoneValue)) {\r\n            ToggleSnackbar(\"top\", \"right\", \"无效的时区名称\", \"warning\");\r\n            return;\r\n        }\r\n        Auth.SetPreference(\"timeZone\", timeZoneValue);\r\n        refreshTimeZone();\r\n        props.onClose();\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Dialog\r\n            open={props.open}\r\n            onClose={props.onClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">更改时区</DialogTitle>\r\n\r\n            <DialogContent>\r\n                <FormControl>\r\n                    <TextField\r\n                        label={\"IANA 时区名称标识\"}\r\n                        value={timeZoneValue}\r\n                        onChange={(e) => setTimeZoneValue(e.target.value)}\r\n                    />\r\n                </FormControl>\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Button onClick={props.onClose}>取消</Button>\r\n                <div className={classes.wrapper}>\r\n                    <Button\r\n                        color=\"primary\"\r\n                        disabled={timeZoneValue === \"\"}\r\n                        onClick={() => saveZoneInfo()}\r\n                    >\r\n                        确定\r\n                        {props.modalsLoading && (\r\n                            <CircularProgress\r\n                                size={24}\r\n                                className={classes.buttonProgress}\r\n                            />\r\n                        )}\r\n                    </Button>\r\n                </div>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PhotoIcon from \"@material-ui/icons/InsertPhoto\";\r\nimport GroupIcon from \"@material-ui/icons/Group\";\r\nimport DateIcon from \"@material-ui/icons/DateRange\";\r\nimport EmailIcon from \"@material-ui/icons/Email\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport LinkIcon from \"@material-ui/icons/Phonelink\";\r\nimport AlarmOff from \"@material-ui/icons/AlarmOff\";\r\nimport InputIcon from \"@material-ui/icons/Input\";\r\nimport SecurityIcon from \"@material-ui/icons/Security\";\r\nimport NickIcon from \"@material-ui/icons/PermContactCalendar\";\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport VerifyIcon from \"@material-ui/icons/VpnKey\";\r\nimport ColorIcon from \"@material-ui/icons/Palette\";\r\nimport {\r\n    applyThemes,\r\n    changeViewMethod,\r\n    toggleDaylightMode,\r\n    toggleSnackbar,\r\n} from \"../../actions\";\r\nimport axios from \"axios\";\r\nimport FingerprintIcon from \"@material-ui/icons/Fingerprint\";\r\nimport ToggleButton from \"@material-ui/lab/ToggleButton\";\r\nimport ToggleButtonGroup from \"@material-ui/lab/ToggleButtonGroup\";\r\nimport RightIcon from \"@material-ui/icons/KeyboardArrowRight\";\r\nimport {\r\n    ListItemIcon,\r\n    withStyles,\r\n    Button,\r\n    Divider,\r\n    TextField,\r\n    Avatar,\r\n    Paper,\r\n    Typography,\r\n    List,\r\n    ListItem,\r\n    ListItemSecondaryAction,\r\n    ListItemText,\r\n    ListItemAvatar,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Switch,\r\n} from \"@material-ui/core\";\r\nimport Backup from \"@material-ui/icons/Backup\";\r\nimport SettingsInputHdmi from \"@material-ui/icons/SettingsInputHdmi\";\r\nimport { blue, green, yellow } from \"@material-ui/core/colors\";\r\nimport API from \"../../middleware/Api\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport { withRouter } from \"react-router\";\r\nimport TimeAgo from \"timeago-react\";\r\nimport QRCode from \"qrcode-react\";\r\nimport {\r\n    Brightness3,\r\n    Check,\r\n    ConfirmationNumber,\r\n    ListAlt,\r\n    PermContactCalendar,\r\n    Schedule,\r\n} from \"@material-ui/icons\";\r\nimport { transformTime } from \"../../utils\";\r\nimport Authn from \"./Authn\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport { formatLocalTime, timeZone } from \"../../utils/datetime\";\r\nimport TimeZoneDialog from \"../Modals/TimeZone\";\r\n\r\nconst styles = (theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            width: 700,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n    },\r\n    sectionTitle: {\r\n        paddingBottom: \"10px\",\r\n        paddingTop: \"30px\",\r\n    },\r\n    rightIcon: {\r\n        marginTop: \"4px\",\r\n        marginRight: \"10px\",\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    uploadFromFile: {\r\n        backgroundColor: blue[100],\r\n        color: blue[600],\r\n    },\r\n    userGravatar: {\r\n        backgroundColor: yellow[100],\r\n        color: yellow[800],\r\n    },\r\n    policySelected: {\r\n        backgroundColor: green[100],\r\n        color: green[800],\r\n    },\r\n    infoText: {\r\n        marginRight: \"17px\",\r\n    },\r\n    infoTextWithIcon: {\r\n        marginRight: \"17px\",\r\n        marginTop: \"1px\",\r\n    },\r\n    rightIconWithText: {\r\n        marginTop: \"0px\",\r\n        marginRight: \"10px\",\r\n        color: theme.palette.text.secondary,\r\n    },\r\n    iconFix: {\r\n        marginRight: \"11px\",\r\n        marginLeft: \"7px\",\r\n        minWidth: 40,\r\n    },\r\n    flexContainer: {\r\n        display: \"flex\",\r\n    },\r\n    desenList: {\r\n        paddingTop: 0,\r\n        paddingBottom: 0,\r\n    },\r\n    flexContainerResponse: {\r\n        display: \"flex\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"initial\",\r\n        },\r\n    },\r\n    desText: {\r\n        marginTop: \"10px\",\r\n    },\r\n    secondColor: {\r\n        height: \"20px\",\r\n        width: \"20px\",\r\n        backgroundColor: theme.palette.secondary.main,\r\n        borderRadius: \"50%\",\r\n        marginRight: \"17px\",\r\n    },\r\n    firstColor: {\r\n        height: \"20px\",\r\n        width: \"20px\",\r\n        backgroundColor: theme.palette.primary.main,\r\n        borderRadius: \"50%\",\r\n        marginRight: \"6px\",\r\n    },\r\n    themeBlock: {\r\n        height: \"20px\",\r\n        width: \"20px\",\r\n    },\r\n    paddingBottom: {\r\n        marginBottom: \"30px\",\r\n    },\r\n    paddingText: {\r\n        paddingRight: theme.spacing(2),\r\n    },\r\n    qrcode: {\r\n        width: 128,\r\n        marginTop: 16,\r\n        marginRight: 16,\r\n    },\r\n});\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        title: state.siteConfig.title,\r\n        authn: state.siteConfig.authn,\r\n        viewMethod: state.viewUpdate.explorerViewMethod,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n        applyThemes: (color) => {\r\n            dispatch(applyThemes(color));\r\n        },\r\n        toggleDaylightMode: () => {\r\n            dispatch(toggleDaylightMode());\r\n        },\r\n        changeView: (method) => {\r\n            dispatch(changeViewMethod(method));\r\n        },\r\n    };\r\n};\r\n\r\nclass UserSettingCompoment extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.fileInput = React.createRef();\r\n    }\r\n\r\n    state = {\r\n        avatarModal: false,\r\n        nickModal: false,\r\n        changePassword: false,\r\n        loading: \"\",\r\n        oldPwd: \"\",\r\n        newPwd: \"\",\r\n        webdavPwd: \"\",\r\n        newPwdRepeat: \"\",\r\n        twoFactor: false,\r\n        authCode: \"\",\r\n        changeTheme: false,\r\n        chosenTheme: null,\r\n        showWebDavUrl: false,\r\n        showWebDavUserName: false,\r\n        changeWebDavPwd: false,\r\n        groupBackModal: false,\r\n        changePolicy: false,\r\n        changeTimeZone: false,\r\n        settings: {\r\n            uid: 0,\r\n            group_expires: 0,\r\n            policy: {\r\n                current: {\r\n                    name: \"-\",\r\n                    id: \"\",\r\n                },\r\n                options: [],\r\n            },\r\n            qq: \"\",\r\n            homepage: true,\r\n            two_factor: \"\",\r\n            two_fa_secret: \"\",\r\n            prefer_theme: \"\",\r\n            themes: {},\r\n            authn: [],\r\n        },\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({\r\n            avatarModal: false,\r\n            nickModal: false,\r\n            changePassword: false,\r\n            loading: \"\",\r\n            twoFactor: false,\r\n            changeTheme: false,\r\n            showWebDavUrl: false,\r\n            showWebDavUserName: false,\r\n            changeWebDavPwd: false,\r\n            groupBackModal: false,\r\n            changePolicy: false,\r\n        });\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.loadSetting();\r\n    }\r\n\r\n    toggleViewMethod = () => {\r\n        const newMethod =\r\n            this.props.viewMethod === \"icon\"\r\n                ? \"list\"\r\n                : this.props.viewMethod === \"list\"\r\n                ? \"smallIcon\"\r\n                : \"icon\";\r\n        Auth.SetPreference(\"view_method\", newMethod);\r\n        this.props.changeView(newMethod);\r\n    };\r\n\r\n    loadSetting = () => {\r\n        API.get(\"/user/setting\")\r\n            .then((response) => {\r\n                const theme = JSON.parse(response.data.themes);\r\n                response.data.themes = theme;\r\n                this.setState({\r\n                    settings: response.data,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    doChangeGroup = () => {\r\n        API.patch(\"/user/setting/vip\", {})\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"解约成功，更改会在数分钟后生效\",\r\n                    \"success\"\r\n                );\r\n                this.handleClose();\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    useGravatar = () => {\r\n        this.setState({\r\n            loading: \"gravatar\",\r\n        });\r\n        API.put(\"/user/setting/avatar\")\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"头像已更新，刷新后生效\",\r\n                    \"success\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    changePolicy = (id) => {\r\n        API.patch(\"/user/setting/policy\", {\r\n            id: id,\r\n        })\r\n            .then(() => {\r\n                window.location.reload();\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    changeNick = () => {\r\n        this.setState({\r\n            loading: \"nick\",\r\n        });\r\n        API.patch(\"/user/setting/nick\", {\r\n            nick: this.state.nick,\r\n        })\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"昵称已更改，刷新后生效\",\r\n                    \"success\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n                this.handleClose();\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    bindQQ = () => {\r\n        this.setState({\r\n            loading: \"nick\",\r\n        });\r\n        API.patch(\"/user/setting/qq\", {})\r\n            .then((response) => {\r\n                if (response.data === \"\") {\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        \"已解除与QQ账户的关联\",\r\n                        \"success\"\r\n                    );\r\n                    this.setState({\r\n                        settings: {\r\n                            ...this.state.settings,\r\n                            qq: false,\r\n                        },\r\n                    });\r\n                } else {\r\n                    window.location.href = response.data;\r\n                }\r\n                this.handleClose();\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            })\r\n            .then(() => {\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    uploadAvatar = () => {\r\n        this.setState({\r\n            loading: \"avatar\",\r\n        });\r\n        const formData = new FormData();\r\n        formData.append(\"avatar\", this.fileInput.current.files[0]);\r\n        API.post(\"/user/setting/avatar\", formData, {\r\n            headers: {\r\n                \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n        })\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"头像已更新，刷新后生效\",\r\n                    \"success\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    handleToggle = () => {\r\n        API.patch(\"/user/setting/homepage\", {\r\n            status: !this.state.settings.homepage,\r\n        })\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"设置已保存\",\r\n                    \"success\"\r\n                );\r\n                this.setState({\r\n                    settings: {\r\n                        ...this.state.settings,\r\n                        homepage: !this.state.settings.homepage,\r\n                    },\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    changhePwd = () => {\r\n        if (this.state.newPwd !== this.state.newPwdRepeat) {\r\n            this.props.toggleSnackbar(\r\n                \"top\",\r\n                \"right\",\r\n                \"两次密码输入不一致\",\r\n                \"warning\"\r\n            );\r\n            return;\r\n        }\r\n        this.setState({\r\n            loading: \"changePassword\",\r\n        });\r\n        API.patch(\"/user/setting/password\", {\r\n            old: this.state.oldPwd,\r\n            new: this.state.newPwd,\r\n        })\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"密码已更新\",\r\n                    \"success\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n                this.handleClose();\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    changeTheme = () => {\r\n        this.setState({\r\n            loading: \"changeTheme\",\r\n        });\r\n        API.patch(\"/user/setting/theme\", {\r\n            theme: this.state.chosenTheme,\r\n        })\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"主题配色已更换\",\r\n                    \"success\"\r\n                );\r\n                this.props.applyThemes(this.state.chosenTheme);\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    changheWebdavPwd = () => {\r\n        this.setState({\r\n            loading: \"changheWebdavPwd\",\r\n        });\r\n        axios\r\n            .post(\"/Member/setWebdavPwd\", {\r\n                pwd: this.state.webdavPwd,\r\n            })\r\n            .then((response) => {\r\n                if (response.data.error === \"1\") {\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        response.data.msg,\r\n                        \"error\"\r\n                    );\r\n                    this.setState({\r\n                        loading: \"\",\r\n                    });\r\n                } else {\r\n                    this.props.toggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        response.data.msg,\r\n                        \"success\"\r\n                    );\r\n                    this.setState({\r\n                        loading: \"\",\r\n                        changeWebDavPwd: false,\r\n                    });\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    init2FA = () => {\r\n        if (this.state.settings.two_factor) {\r\n            this.setState({ twoFactor: true });\r\n            return;\r\n        }\r\n        API.get(\"/user/setting/2fa\")\r\n            .then((response) => {\r\n                this.setState({\r\n                    two_fa_secret: response.data,\r\n                    twoFactor: true,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n            });\r\n    };\r\n\r\n    twoFactor = () => {\r\n        this.setState({\r\n            loading: \"twoFactor\",\r\n        });\r\n        API.patch(\"/user/setting/2fa\", {\r\n            code: this.state.authCode,\r\n        })\r\n            .then(() => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"设定已保存\",\r\n                    \"success\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                    settings: {\r\n                        ...this.state.settings,\r\n                        two_factor: !this.state.settings.two_factor,\r\n                    },\r\n                });\r\n                this.handleClose();\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"error\"\r\n                );\r\n                this.setState({\r\n                    loading: \"\",\r\n                });\r\n            });\r\n    };\r\n\r\n    handleChange = (name) => (event) => {\r\n        this.setState({ [name]: event.target.value });\r\n    };\r\n\r\n    handleAlignment = (event, chosenTheme) => this.setState({ chosenTheme });\r\n\r\n    toggleThemeMode = (current) => {\r\n        if (current !== null) {\r\n            this.props.toggleDaylightMode();\r\n            Auth.SetPreference(\"theme_mode\", null);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        const user = Auth.GetUser();\r\n        const dark = Auth.GetPreference(\"theme_mode\");\r\n\r\n        return (\r\n            <div>\r\n                <div className={classes.layout}>\r\n                    <Typography\r\n                        className={classes.sectionTitle}\r\n                        variant=\"subtitle2\"\r\n                    >\r\n                        个人资料\r\n                    </Typography>\r\n                    <Paper>\r\n                        <List className={classes.desenList}>\r\n                            <ListItem\r\n                                button\r\n                                onClick={() =>\r\n                                    this.setState({ avatarModal: true })\r\n                                }\r\n                            >\r\n                                <ListItemAvatar>\r\n                                    <Avatar\r\n                                        src={\r\n                                            \"/api/v3/user/avatar/\" +\r\n                                            user.id +\r\n                                            \"/l\"\r\n                                        }\r\n                                    />\r\n                                </ListItemAvatar>\r\n                                <ListItemText primary=\"头像\" />\r\n                                <ListItemSecondaryAction>\r\n                                    <RightIcon className={classes.rightIcon} />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem button>\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <PermContactCalendar />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"UID\" />\r\n\r\n                                <ListItemSecondaryAction>\r\n                                    <Typography\r\n                                        className={classes.infoTextWithIcon}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {this.state.settings.uid}\r\n                                    </Typography>\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem\r\n                                button\r\n                                onClick={() =>\r\n                                    this.setState({ nickModal: true })\r\n                                }\r\n                            >\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <NickIcon />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"昵称\" />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    onClick={() =>\r\n                                        this.setState({ nickModal: true })\r\n                                    }\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <Typography\r\n                                        className={classes.infoTextWithIcon}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {user.nickname}\r\n                                    </Typography>\r\n                                    <RightIcon\r\n                                        className={classes.rightIconWithText}\r\n                                    />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem button>\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <EmailIcon />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"Email\" />\r\n\r\n                                <ListItemSecondaryAction>\r\n                                    <Typography\r\n                                        className={classes.infoText}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {user.user_name}\r\n                                    </Typography>\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem\r\n                                button\r\n                                onClick={() =>\r\n                                    this.props.history.push(\"/buy?tab=1\")\r\n                                }\r\n                            >\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <GroupIcon />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"用户组\" />\r\n\r\n                                <ListItemSecondaryAction>\r\n                                    <Typography\r\n                                        className={classes.infoText}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {user.group.name}\r\n                                        {this.state.settings.group_expires && (\r\n                                            <span>\r\n                                                {\" \"}\r\n                                                <Tooltip\r\n                                                    title={formatLocalTime(\r\n                                                        this.state.settings\r\n                                                            .group_expires,\r\n                                                        \"YYYY-MM-DD H:mm:ss\"\r\n                                                    )}\r\n                                                >\r\n                                                    <TimeAgo\r\n                                                        datetime={\r\n                                                            this.state.settings\r\n                                                                .group_expires\r\n                                                        }\r\n                                                        locale=\"zh_CN\"\r\n                                                    />\r\n                                                </Tooltip>{\" \"}\r\n                                                过期\r\n                                            </span>\r\n                                        )}\r\n                                    </Typography>\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            {this.state.settings.group_expires > 0 && (\r\n                                <div>\r\n                                    <Divider />\r\n                                    <ListItem\r\n                                        button\r\n                                        onClick={() =>\r\n                                            this.setState({\r\n                                                groupBackModal: true,\r\n                                            })\r\n                                        }\r\n                                    >\r\n                                        <ListItemIcon\r\n                                            className={classes.iconFix}\r\n                                        >\r\n                                            <AlarmOff />\r\n                                        </ListItemIcon>\r\n                                        <ListItemText primary=\"手动解约当前用户组\" />\r\n\r\n                                        <ListItemSecondaryAction>\r\n                                            <RightIcon\r\n                                                className={classes.rightIcon}\r\n                                            />\r\n                                        </ListItemSecondaryAction>\r\n                                    </ListItem>\r\n                                </div>\r\n                            )}\r\n                            <Divider />\r\n                            <ListItem button onClick={() => this.bindQQ()}>\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <SettingsInputHdmi />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"QQ账号\" />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <Typography\r\n                                        className={classes.infoTextWithIcon}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {this.state.settings.qq\r\n                                            ? \"解除绑定\"\r\n                                            : \"绑定\"}\r\n                                    </Typography>\r\n                                    <RightIcon\r\n                                        className={classes.rightIconWithText}\r\n                                    />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem\r\n                                button\r\n                                onClick={() =>\r\n                                    this.setState({ changePolicy: true })\r\n                                }\r\n                            >\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <Backup />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"存储策略\" />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <Typography\r\n                                        className={classes.infoTextWithIcon}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {\r\n                                            this.state.settings.policy.current\r\n                                                .name\r\n                                        }\r\n                                    </Typography>\r\n                                    <RightIcon\r\n                                        className={classes.rightIconWithText}\r\n                                    />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem button>\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <ConfirmationNumber />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"积分\" />\r\n\r\n                                <ListItemSecondaryAction>\r\n                                    <Typography\r\n                                        className={classes.infoText}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {user.score}\r\n                                    </Typography>\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem button>\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <DateIcon />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"注册时间\" />\r\n\r\n                                <ListItemSecondaryAction>\r\n                                    <Typography\r\n                                        className={classes.infoText}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {formatLocalTime(\r\n                                            user.created_at,\r\n                                            \"YYYY-MM-DD H:mm:ss\"\r\n                                        )}\r\n                                    </Typography>\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                        </List>\r\n                    </Paper>\r\n                    <Typography\r\n                        className={classes.sectionTitle}\r\n                        variant=\"subtitle2\"\r\n                    >\r\n                        安全隐私\r\n                    </Typography>\r\n                    <Paper>\r\n                        <List className={classes.desenList}>\r\n                            <ListItem button>\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <HomeIcon />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"个人主页\" />\r\n\r\n                                <ListItemSecondaryAction>\r\n                                    <Switch\r\n                                        onChange={this.handleToggle}\r\n                                        checked={this.state.settings.homepage}\r\n                                    />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem\r\n                                button\r\n                                onClick={() =>\r\n                                    this.setState({ changePassword: true })\r\n                                }\r\n                            >\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <LockIcon />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"登录密码\" />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <RightIcon className={classes.rightIcon} />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem button onClick={() => this.init2FA()}>\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <VerifyIcon />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"二步验证\" />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <Typography\r\n                                        className={classes.infoTextWithIcon}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {!this.state.settings.two_factor\r\n                                            ? \"未开启\"\r\n                                            : \"已开启\"}\r\n                                    </Typography>\r\n                                    <RightIcon\r\n                                        className={classes.rightIconWithText}\r\n                                    />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                        </List>\r\n                    </Paper>\r\n\r\n                    <Authn\r\n                        list={this.state.settings.authn}\r\n                        add={(credential) => {\r\n                            this.setState({\r\n                                settings: {\r\n                                    ...this.state.settings,\r\n                                    authn: [\r\n                                        ...this.state.settings.authn,\r\n                                        credential,\r\n                                    ],\r\n                                },\r\n                            });\r\n                        }}\r\n                        remove={(id) => {\r\n                            let credentials = [...this.state.settings.authn];\r\n                            credentials = credentials.filter((v) => {\r\n                                return v.id !== id;\r\n                            });\r\n                            this.setState({\r\n                                settings: {\r\n                                    ...this.state.settings,\r\n                                    authn: credentials,\r\n                                },\r\n                            });\r\n                        }}\r\n                    />\r\n\r\n                    <Typography\r\n                        className={classes.sectionTitle}\r\n                        variant=\"subtitle2\"\r\n                    >\r\n                        个性化\r\n                    </Typography>\r\n                    <Paper>\r\n                        <List className={classes.desenList}>\r\n                            <ListItem\r\n                                button\r\n                                onClick={() =>\r\n                                    this.setState({ changeTheme: true })\r\n                                }\r\n                            >\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <ColorIcon />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"主题配色\" />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <div className={classes.firstColor}></div>\r\n                                    <div className={classes.secondColor}></div>\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem\r\n                                button\r\n                                onClick={() => this.toggleThemeMode(dark)}\r\n                            >\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <Brightness3 />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"黑暗模式\" />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <Typography\r\n                                        className={classes.infoTextWithIcon}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {dark &&\r\n                                            (dark === \"dark\"\r\n                                                ? \"偏好开启\"\r\n                                                : \"偏好关闭\")}\r\n                                        {dark === null && \"跟随系统\"}\r\n                                    </Typography>\r\n                                    <RightIcon\r\n                                        className={classes.rightIconWithText}\r\n                                    />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem\r\n                                button\r\n                                onClick={() => this.toggleViewMethod()}\r\n                            >\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <ListAlt />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"文件列表\" />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <Typography\r\n                                        className={classes.infoTextWithIcon}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {this.props.viewMethod === \"icon\" &&\r\n                                            \"大图标\"}\r\n                                        {this.props.viewMethod === \"list\" &&\r\n                                            \"列表\"}\r\n                                        {this.props.viewMethod ===\r\n                                            \"smallIcon\" && \"小图标\"}\r\n                                    </Typography>\r\n                                    <RightIcon\r\n                                        className={classes.rightIconWithText}\r\n                                    />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                            <Divider />\r\n                            <ListItem\r\n                                onClick={() =>\r\n                                    this.setState({ changeTimeZone: true })\r\n                                }\r\n                                button\r\n                            >\r\n                                <ListItemIcon className={classes.iconFix}>\r\n                                    <Schedule />\r\n                                </ListItemIcon>\r\n                                <ListItemText primary=\"时区\" />\r\n\r\n                                <ListItemSecondaryAction\r\n                                    className={classes.flexContainer}\r\n                                >\r\n                                    <Typography\r\n                                        className={classes.infoTextWithIcon}\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {timeZone}\r\n                                    </Typography>\r\n                                    <RightIcon\r\n                                        className={classes.rightIconWithText}\r\n                                    />\r\n                                </ListItemSecondaryAction>\r\n                            </ListItem>\r\n                        </List>\r\n                    </Paper>\r\n                    {user.group.webdav && (\r\n                        <div>\r\n                            <Typography\r\n                                className={classes.sectionTitle}\r\n                                variant=\"subtitle2\"\r\n                            >\r\n                                WebDAV\r\n                            </Typography>\r\n                            <Paper>\r\n                                <List className={classes.desenList}>\r\n                                    <ListItem\r\n                                        button\r\n                                        onClick={() =>\r\n                                            this.setState({\r\n                                                showWebDavUrl: true,\r\n                                            })\r\n                                        }\r\n                                    >\r\n                                        <ListItemIcon\r\n                                            className={classes.iconFix}\r\n                                        >\r\n                                            <LinkIcon />\r\n                                        </ListItemIcon>\r\n                                        <ListItemText primary=\"连接地址\" />\r\n\r\n                                        <ListItemSecondaryAction\r\n                                            className={classes.flexContainer}\r\n                                        >\r\n                                            <RightIcon\r\n                                                className={classes.rightIcon}\r\n                                            />\r\n                                        </ListItemSecondaryAction>\r\n                                    </ListItem>\r\n                                    <Divider />\r\n                                    <ListItem\r\n                                        button\r\n                                        onClick={() =>\r\n                                            this.setState({\r\n                                                showWebDavUserName: true,\r\n                                            })\r\n                                        }\r\n                                    >\r\n                                        <ListItemIcon\r\n                                            className={classes.iconFix}\r\n                                        >\r\n                                            <InputIcon />\r\n                                        </ListItemIcon>\r\n                                        <ListItemText primary=\"用户名\" />\r\n\r\n                                        <ListItemSecondaryAction\r\n                                            className={classes.flexContainer}\r\n                                        >\r\n                                            <RightIcon\r\n                                                className={classes.rightIcon}\r\n                                            />\r\n                                        </ListItemSecondaryAction>\r\n                                    </ListItem>\r\n                                    <Divider />\r\n                                    <ListItem\r\n                                        button\r\n                                        onClick={() =>\r\n                                            this.props.history.push(\"/webdav?\")\r\n                                        }\r\n                                    >\r\n                                        <ListItemIcon\r\n                                            className={classes.iconFix}\r\n                                        >\r\n                                            <SecurityIcon />\r\n                                        </ListItemIcon>\r\n                                        <ListItemText primary=\"账号管理\" />\r\n\r\n                                        <ListItemSecondaryAction\r\n                                            className={classes.flexContainer}\r\n                                        >\r\n                                            <RightIcon\r\n                                                className={classes.rightIcon}\r\n                                            />\r\n                                        </ListItemSecondaryAction>\r\n                                    </ListItem>\r\n                                </List>\r\n                            </Paper>\r\n                        </div>\r\n                    )}\r\n                    <div className={classes.paddingBottom}></div>\r\n                </div>\r\n                <TimeZoneDialog\r\n                    onClose={() => this.setState({ changeTimeZone: false })}\r\n                    open={this.state.changeTimeZone}\r\n                />\r\n                <Dialog\r\n                    open={this.state.changePolicy}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle>切换存储策略</DialogTitle>\r\n                    <List>\r\n                        {this.state.settings.policy.options.map(\r\n                            (value, index) => (\r\n                                <ListItem\r\n                                    button\r\n                                    component=\"label\"\r\n                                    key={index}\r\n                                    onClick={() => this.changePolicy(value.id)}\r\n                                >\r\n                                    <ListItemAvatar>\r\n                                        {value.id ===\r\n                                            this.state.settings.policy.current\r\n                                                .id && (\r\n                                            <Avatar\r\n                                                className={\r\n                                                    classes.policySelected\r\n                                                }\r\n                                            >\r\n                                                <Check />\r\n                                            </Avatar>\r\n                                        )}\r\n                                        {value.id !==\r\n                                            this.state.settings.policy.current\r\n                                                .id && (\r\n                                            <Avatar\r\n                                                className={\r\n                                                    classes.uploadFromFile\r\n                                                }\r\n                                            >\r\n                                                <Backup />\r\n                                            </Avatar>\r\n                                        )}\r\n                                    </ListItemAvatar>\r\n                                    <ListItemText primary={value.name} />\r\n                                </ListItem>\r\n                            )\r\n                        )}\r\n                    </List>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.state.avatarModal}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle>修改头像</DialogTitle>\r\n                    <List>\r\n                        <ListItem\r\n                            button\r\n                            component=\"label\"\r\n                            disabled={this.state.loading === \"avatar\"}\r\n                        >\r\n                            <input\r\n                                type=\"file\"\r\n                                accept=\"image/*\"\r\n                                style={{ display: \"none\" }}\r\n                                ref={this.fileInput}\r\n                                onChange={this.uploadAvatar}\r\n                            />\r\n                            <ListItemAvatar>\r\n                                <Avatar className={classes.uploadFromFile}>\r\n                                    <PhotoIcon />\r\n                                </Avatar>\r\n                            </ListItemAvatar>\r\n                            <ListItemText primary=\"从文件上传\" />\r\n                        </ListItem>\r\n                        <ListItem\r\n                            button\r\n                            onClick={this.useGravatar}\r\n                            disabled={this.state.loading === \"gravatar\"}\r\n                        >\r\n                            <ListItemAvatar>\r\n                                <Avatar className={classes.userGravatar}>\r\n                                    <FingerprintIcon />\r\n                                </Avatar>\r\n                            </ListItemAvatar>\r\n                            <ListItemText\r\n                                className={classes.paddingText}\r\n                                primary=\"使用 Gravatar 头像 \"\r\n                            />\r\n                        </ListItem>\r\n                    </List>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"primary\">\r\n                            取消\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog open={this.state.nickModal} onClose={this.handleClose}>\r\n                    <DialogTitle>修改昵称</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField\r\n                            id=\"standard-name\"\r\n                            label=\"昵称\"\r\n                            className={classes.textField}\r\n                            value={this.state.nick}\r\n                            onChange={this.handleChange(\"nick\")}\r\n                            margin=\"normal\"\r\n                            autoFocus\r\n                        />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"default\">\r\n                            取消\r\n                        </Button>\r\n                        <Button\r\n                            onClick={this.changeNick}\r\n                            color=\"primary\"\r\n                            disabled={\r\n                                this.state.loading === \"nick\" ||\r\n                                this.state.nick === \"\"\r\n                            }\r\n                        >\r\n                            保存\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.state.groupBackModal}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle>解约用户组</DialogTitle>\r\n                    <DialogContent>\r\n                        将要退回到初始用户组，且所支付金额无法退还，确定要继续吗？\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"default\">\r\n                            取消\r\n                        </Button>\r\n                        <Button onClick={this.doChangeGroup} color=\"primary\">\r\n                            确定\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.state.changePassword}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle>修改登录密码</DialogTitle>\r\n                    <DialogContent>\r\n                        <div>\r\n                            <TextField\r\n                                id=\"standard-name\"\r\n                                label=\"原密码\"\r\n                                type=\"password\"\r\n                                className={classes.textField}\r\n                                value={this.state.oldPwd}\r\n                                onChange={this.handleChange(\"oldPwd\")}\r\n                                margin=\"normal\"\r\n                                autoFocus\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <TextField\r\n                                id=\"standard-name\"\r\n                                label=\"新密码\"\r\n                                type=\"password\"\r\n                                className={classes.textField}\r\n                                value={this.state.newPwd}\r\n                                onChange={this.handleChange(\"newPwd\")}\r\n                                margin=\"normal\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <TextField\r\n                                id=\"standard-name\"\r\n                                label=\"确认新密码\"\r\n                                type=\"password\"\r\n                                className={classes.textField}\r\n                                value={this.state.newPwdRepeat}\r\n                                onChange={this.handleChange(\"newPwdRepeat\")}\r\n                                margin=\"normal\"\r\n                            />\r\n                        </div>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"default\">\r\n                            取消\r\n                        </Button>\r\n                        <Button\r\n                            onClick={this.changhePwd}\r\n                            color=\"primary\"\r\n                            disabled={\r\n                                this.state.loading === \"changePassword\" ||\r\n                                this.state.oldPwd === \"\" ||\r\n                                this.state.newPwdRepeat === \"\" ||\r\n                                this.state.newPwd === \"\"\r\n                            }\r\n                        >\r\n                            保存\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog open={this.state.twoFactor} onClose={this.handleClose}>\r\n                    <DialogTitle>\r\n                        {this.state.settings.two_factor ? \"关闭\" : \"启用\"}\r\n                        二步验证\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                        <div className={classes.flexContainerResponse}>\r\n                            {!this.state.settings.two_factor && (\r\n                                <div className={classes.qrcode}>\r\n                                    <QRCode\r\n                                        value={\r\n                                            \"otpauth://totp/\" +\r\n                                            this.props.title +\r\n                                            \"?secret=\" +\r\n                                            this.state.two_fa_secret\r\n                                        }\r\n                                    />\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className={classes.desText}>\r\n                                {!this.state.settings.two_factor && (\r\n                                    <Typography>\r\n                                        请使用任意二步验证APP或者支持二步验证的密码管理软件扫描左侧二维码添加本站。扫描完成后请填写二步验证APP给出的6位验证码以开启二步验证。\r\n                                    </Typography>\r\n                                )}\r\n                                {this.state.settings.two_factor && (\r\n                                    <Typography>\r\n                                        请验证当前二步验证代码。\r\n                                    </Typography>\r\n                                )}\r\n                                <TextField\r\n                                    id=\"standard-name\"\r\n                                    label=\"6位验证码\"\r\n                                    type=\"number\"\r\n                                    className={classes.textField}\r\n                                    value={this.state.authCode}\r\n                                    onChange={this.handleChange(\"authCode\")}\r\n                                    margin=\"normal\"\r\n                                    autoFocus\r\n                                    fullWidth\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"default\">\r\n                            取消\r\n                        </Button>\r\n                        <Button\r\n                            onClick={this.twoFactor}\r\n                            color=\"primary\"\r\n                            disabled={\r\n                                this.state.loading === \"twoFactor\" ||\r\n                                this.state.authCode === \"\"\r\n                            }\r\n                        >\r\n                            {this.state.settings.two_factor ? \"关闭\" : \"启用\"}\r\n                            二步验证\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.state.changeTheme}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle>更改主题配色</DialogTitle>\r\n                    <DialogContent>\r\n                        <ToggleButtonGroup\r\n                            value={this.state.chosenTheme}\r\n                            exclusive\r\n                            onChange={this.handleAlignment}\r\n                        >\r\n                            {Object.keys(this.state.settings.themes).map(\r\n                                (value, key) => (\r\n                                    <ToggleButton value={value} key={key}>\r\n                                        <div\r\n                                            className={classes.themeBlock}\r\n                                            style={{ backgroundColor: value }}\r\n                                        />\r\n                                    </ToggleButton>\r\n                                )\r\n                            )}\r\n                        </ToggleButtonGroup>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"default\">\r\n                            取消\r\n                        </Button>\r\n                        <Button\r\n                            onClick={this.changeTheme}\r\n                            color=\"primary\"\r\n                            disabled={\r\n                                this.state.loading === \"changeTheme\" ||\r\n                                this.state.chosenTheme === null\r\n                            }\r\n                        >\r\n                            保存\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.state.showWebDavUrl}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle>WebDAV连接地址</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField\r\n                            id=\"standard-name\"\r\n                            className={classes.textField}\r\n                            value={window.location.origin + \"/dav\"}\r\n                            margin=\"normal\"\r\n                            autoFocus\r\n                        />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"default\">\r\n                            关闭\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n                <Dialog\r\n                    open={this.state.showWebDavUserName}\r\n                    onClose={this.handleClose}\r\n                >\r\n                    <DialogTitle>WebDAV用户名</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField\r\n                            id=\"standard-name\"\r\n                            className={classes.textField}\r\n                            value={user.user_name}\r\n                            margin=\"normal\"\r\n                            autoFocus\r\n                        />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose} color=\"default\">\r\n                            关闭\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst UserSetting = connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(withRouter(UserSettingCompoment)));\r\n\r\nexport default UserSetting;\r\n","import React, { useCallback, useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { applyThemes, setSessionStatus, toggleSnackbar } from \"../../actions\";\r\nimport Notice from \"../Share/NotFound\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\nimport API from \"../../middleware/Api\";\r\nimport Auth from \"../../middleware/Auth\";\r\nimport { enableUploaderLoad } from \"../../middleware/Init\";\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function QQCallback() {\r\n    const query = useQuery();\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const ApplyThemes = useCallback((theme) => dispatch(applyThemes(theme)), [\r\n        dispatch,\r\n    ]);\r\n    const SetSessionStatus = useCallback(\r\n        (status) => dispatch(setSessionStatus(status)),\r\n        [dispatch]\r\n    );\r\n\r\n    const [msg, setMsg] = useState(\"\");\r\n\r\n    const getCookie =(name)=> {\r\n        const strcookie = document.cookie;//获取cookie字符串\r\n            const arrcookie = strcookie.split(\"; \");//分割\r\n            //遍历匹配\r\n            for ( let i = 0; i < arrcookie.length; i++) {\r\n                const arr = arrcookie[i].split(\"=\");\r\n                if (arr[0] == name){\r\n                    return unescape(arr[1]);\r\n                }\r\n            }\r\n        return null;\r\n    }\r\n\r\n    const GetQueryString =(name)=> {\r\n        const reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\",\"i\"); \r\n        const r = window.location.search.substr(1).match(reg); \r\n        if (r!=null) return (r[2]); return \"\"; \r\n    }\r\n    \r\n    const afterLogin = (data) => {\r\n        Auth.authenticate(data);\r\n\r\n        // 设置用户主题色\r\n        if (data[\"preferred_theme\"] !== \"\") {\r\n            ApplyThemes(data[\"preferred_theme\"]);\r\n        }\r\n        enableUploaderLoad();\r\n\r\n        // 设置登录状态\r\n        SetSessionStatus(true);\r\n        const backurl = GetQueryString(\"backurl\");\r\n        if (backurl==\"\"){\r\n            history.push(\"/home\");\r\n        }else{\r\n            const backurl_path = backurl.split(\".\");\r\n            if (backurl_path[1]!=\"bilnn\"){\r\n                history.push(\"/home\");\r\n            }else{\r\n                window.location.href = decodeURIComponent(backurl)+\"?token=\"+getCookie(\"token\");\r\n            } \r\n        }\r\n        ToggleSnackbar(\"top\", \"right\", \"登录成功\", \"success\");\r\n\r\n        localStorage.removeItem(\"siteConfigCache\");\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (query.get(\"error_description\")) {\r\n            setMsg(query.get(\"error_description\"));\r\n            return;\r\n        }\r\n        if (query.get(\"code\") === null) {\r\n            return;\r\n        }\r\n        API.post(\"/callback/qq\", {\r\n            code: query.get(\"code\"),\r\n            state: query.get(\"state\"),\r\n        })\r\n            .then((response) => {\r\n                if (response.rawData.code === 203) {\r\n                    afterLogin(response.data);\r\n                } else {\r\n                    history.push(response.data);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                setMsg(error.message);\r\n            });\r\n        // eslint-disable-next-line\r\n    }, [location]);\r\n\r\n    return <>{msg !== \"\" && <Notice msg={msg} />}</>;\r\n}\r\n","import React, { useCallback, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport RegIcon from \"@material-ui/icons/AssignmentIndOutlined\";\r\nimport {\r\n    Avatar,\r\n    Button,\r\n    Divider,\r\n    FormControl,\r\n    Input,\r\n    InputLabel,\r\n    Link,\r\n    makeStyles,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport { toggleSnackbar } from \"../../actions/index\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport API from \"../../middleware/Api\";\r\nimport EmailIcon from \"@material-ui/icons/EmailOutlined\";\r\nimport { useCaptcha } from \"../../hooks/useCaptcha\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"110px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            width: 400,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: 110,\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        padding: `${theme.spacing(2)}px ${theme.spacing(3)}px ${theme.spacing(\r\n            3\r\n        )}px`,\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: \"100%\", // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    link: {\r\n        marginTop: \"20px\",\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    captchaContainer: {\r\n        display: \"flex\",\r\n        marginTop: \"10px\",\r\n        [theme.breakpoints.down(\"sm\")]: {\r\n            display: \"block\",\r\n        },\r\n    },\r\n    captchaPlaceholder: {\r\n        width: 200,\r\n    },\r\n    buttonContainer: {\r\n        display: \"flex\",\r\n    },\r\n    authnLink: {\r\n        textAlign: \"center\",\r\n        marginTop: 16,\r\n    },\r\n    avatarSuccess: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.primary.main,\r\n    },\r\n}));\r\n\r\nfunction Register() {\r\n    const [input, setInput] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n        password_repeat: \"\",\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n    const [emailActive, setEmailActive] = useState(false);\r\n\r\n    const title = useSelector((state) => state.siteConfig.title);\r\n    const regCaptcha = useSelector((state) => state.siteConfig.regCaptcha);\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const history = useHistory();\r\n\r\n    const handleInputChange = (name) => (e) => {\r\n        setInput({\r\n            ...input,\r\n            [name]: e.target.value,\r\n        });\r\n    };\r\n\r\n    const {\r\n        captchaLoading,\r\n        isValidate,\r\n        validate,\r\n        CaptchaRender,\r\n        captchaRefreshRef,\r\n        captchaParamsRef,\r\n    } = useCaptcha();\r\n    const classes = useStyles();\r\n\r\n    const register = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (input.password !== input.password_repeat) {\r\n            ToggleSnackbar(\"top\", \"right\", \"两次密码输入不一致\", \"warning\");\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        if (!isValidate.current.isValidate && regCaptcha) {\r\n            validate(() => register(e), setLoading);\r\n            return;\r\n        }\r\n        API.post(\"/user\", {\r\n            userName: input.email,\r\n            Password: input.password,\r\n            ...captchaParamsRef.current,\r\n        })\r\n            .then((response) => {\r\n                setLoading(false);\r\n                if (response.rawData.code === 203) {\r\n                    setEmailActive(true);\r\n                } else {\r\n                    history.push(\"/login?username=\" + input.email);\r\n                    ToggleSnackbar(\"top\", \"right\", \"注册成功\", \"success\");\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false);\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"warning\");\r\n                captchaRefreshRef.current();\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.layout}>\r\n            <>\r\n                {!emailActive && (\r\n                    <Paper className={classes.paper}>\r\n                        <Avatar className={classes.avatar}>\r\n                            <RegIcon />\r\n                        </Avatar>\r\n                        <Typography component=\"h1\" variant=\"h5\">\r\n                            注册 {title}\r\n                        </Typography>\r\n\r\n                        <form className={classes.form} onSubmit={register}>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"email\">\r\n                                    电子邮箱\r\n                                </InputLabel>\r\n                                <Input\r\n                                    id=\"email\"\r\n                                    type=\"email\"\r\n                                    name=\"email\"\r\n                                    onChange={handleInputChange(\"email\")}\r\n                                    autoComplete\r\n                                    value={input.email}\r\n                                    autoFocus\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">密码</InputLabel>\r\n                                <Input\r\n                                    name=\"password\"\r\n                                    onChange={handleInputChange(\"password\")}\r\n                                    type=\"password\"\r\n                                    id=\"password\"\r\n                                    value={input.password}\r\n                                    autoComplete\r\n                                />\r\n                            </FormControl>\r\n                            <FormControl margin=\"normal\" required fullWidth>\r\n                                <InputLabel htmlFor=\"password\">\r\n                                    确认密码\r\n                                </InputLabel>\r\n                                <Input\r\n                                    name=\"pwdRepeat\"\r\n                                    onChange={handleInputChange(\r\n                                        \"password_repeat\"\r\n                                    )}\r\n                                    type=\"password\"\r\n                                    id=\"pwdRepeat\"\r\n                                    value={input.password_repeat}\r\n                                    autoComplete\r\n                                />\r\n                            </FormControl>\r\n                            {regCaptcha && <CaptchaRender />}\r\n\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                disabled={\r\n                                    loading ||\r\n                                    (regCaptcha ? captchaLoading : false)\r\n                                }\r\n                                className={classes.submit}\r\n                            >\r\n                                注册账号\r\n                            </Button>\r\n                        </form>\r\n\r\n                        <Divider />\r\n                        <div className={classes.link}>\r\n                            <div>\r\n                                <Link href={\"/login\"}>返回登录</Link>\r\n                            </div>\r\n                            <div>\r\n                                <Link href={\"https://support.qq.com/products/261676/blog/480523\"} target=\"_blank\">注册协议</Link>\r\n                            </div>\r\n                        </div>\r\n                    </Paper>\r\n                )}\r\n                {emailActive && (\r\n                    <Paper className={classes.paper}>\r\n                        <Avatar className={classes.avatarSuccess}>\r\n                            <EmailIcon />\r\n                        </Avatar>\r\n                        <Typography component=\"h1\" variant=\"h5\">\r\n                            邮件激活\r\n                        </Typography>\r\n                        <Typography style={{ marginTop: \"10px\" }}>\r\n                            一封激活邮件已经发送至您的邮箱，请访问邮件中的链接以继续完成注册。\r\n                        </Typography>\r\n                    </Paper>\r\n                )}\r\n            </>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n","import React, { useCallback, useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction Apps() {\r\n\r\n    const JumpUrl = () =>{\r\n        const history = useHistory();\r\n        const Days = 365;\r\n        const exp = new Date(); \r\n        exp.setTime(exp.getTime() + Days*24*60*60*1000);\r\n        document.cookie = \"thisapp=ok; expires=\"+exp.toGMTString()+\"; path=/\";\r\n        history.push(\"/home\");\r\n    }\r\n\r\n    return (\r\n        <div>{JumpUrl()}</div>\r\n    );\r\n}\r\n\r\nexport default Apps;\r\n","import React, { useCallback, useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { toggleSnackbar } from \"../../actions/index\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport API from \"../../middleware/Api\";\r\nimport { Button, Paper, Avatar, Typography } from \"@material-ui/core\";\r\nimport EmailIcon from \"@material-ui/icons/EmailOutlined\";\r\nimport { useLocation } from \"react-router\";\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"110px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            width: 400,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: 110,\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        padding: `${theme.spacing(2)}px ${theme.spacing(3)}px ${theme.spacing(\r\n            3\r\n        )}px`,\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    submit: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction Activation() {\r\n    const query = useQuery();\r\n    const location = useLocation();\r\n\r\n    const [success, setSuccess] = useState(false);\r\n    const [email, setEmail] = useState(\"\");\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const history = useHistory();\r\n\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        API.get(\r\n            \"/user/activate/\" + query.get(\"id\") + \"?sign=\" + query.get(\"sign\")\r\n        )\r\n            .then((response) => {\r\n                setEmail(response.data);\r\n                setSuccess(true);\r\n            })\r\n            .catch((error) => {\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"warning\");\r\n                history.push(\"/login\");\r\n            });\r\n        // eslint-disable-next-line\r\n    }, [location]);\r\n\r\n    return (\r\n        <div className={classes.layout}>\r\n            {success && (\r\n                <Paper className={classes.paper}>\r\n                    <Avatar className={classes.avatar}>\r\n                        <EmailIcon />\r\n                    </Avatar>\r\n                    <Typography component=\"h1\" variant=\"h5\">\r\n                        激活成功\r\n                    </Typography>\r\n                    <Typography style={{ marginTop: \"20px\" }}>\r\n                        您的账号已被成功激活。\r\n                    </Typography>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.submit}\r\n                        onClick={() => history.push(\"/login?username=\" + email)}\r\n                    >\r\n                        返回登录\r\n                    </Button>\r\n                </Paper>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Activation;\r\n","import React, { useCallback, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport { toggleSnackbar } from \"../../actions/index\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport API from \"../../middleware/Api\";\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    Divider,\r\n    Link,\r\n    Input,\r\n    InputLabel,\r\n    Paper,\r\n    Avatar,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport { useLocation } from \"react-router\";\r\nimport KeyIcon from \"@material-ui/icons/VpnKeyOutlined\";\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"110px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            width: 400,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: 110,\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        padding: `${theme.spacing(2)}px ${theme.spacing(3)}px ${theme.spacing(\r\n            3\r\n        )}px`,\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    submit: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    link: {\r\n        marginTop: \"20px\",\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction ResetForm() {\r\n    const query = useQuery();\r\n    const [input, setInput] = useState({\r\n        password: \"\",\r\n        password_repeat: \"\",\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n    const handleInputChange = (name) => (e) => {\r\n        setInput({\r\n            ...input,\r\n            [name]: e.target.value,\r\n        });\r\n    };\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const history = useHistory();\r\n\r\n    const submit = (e) => {\r\n        e.preventDefault();\r\n        if (input.password !== input.password_repeat) {\r\n            ToggleSnackbar(\"top\", \"right\", \"两次密码输入不一致\", \"warning\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        API.patch(\"/user/reset\", {\r\n            secret: query.get(\"sign\"),\r\n            id: query.get(\"id\"),\r\n            Password: input.password,\r\n        })\r\n            .then(() => {\r\n                setLoading(false);\r\n                history.push(\"/login\");\r\n                ToggleSnackbar(\"top\", \"right\", \"密码已重设\", \"success\");\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false);\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"warning\");\r\n            });\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.layout}>\r\n            <Paper className={classes.paper}>\r\n                <Avatar className={classes.avatar}>\r\n                    <KeyIcon />\r\n                </Avatar>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    找回密码\r\n                </Typography>\r\n                <form className={classes.form} onSubmit={submit}>\r\n                    <FormControl margin=\"normal\" required fullWidth>\r\n                        <InputLabel htmlFor=\"email\">新密码</InputLabel>\r\n                        <Input\r\n                            id=\"pwd\"\r\n                            type=\"password\"\r\n                            name=\"pwd\"\r\n                            onChange={handleInputChange(\"password\")}\r\n                            autoComplete\r\n                            value={input.password}\r\n                            autoFocus\r\n                        />\r\n                    </FormControl>\r\n                    <FormControl margin=\"normal\" required fullWidth>\r\n                        <InputLabel htmlFor=\"email\">重复新密码</InputLabel>\r\n                        <Input\r\n                            id=\"pwdRepeat\"\r\n                            type=\"password\"\r\n                            name=\"pwdRepeat\"\r\n                            onChange={handleInputChange(\"password_repeat\")}\r\n                            autoComplete\r\n                            value={input.password_repeat}\r\n                            autoFocus\r\n                        />\r\n                    </FormControl>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={loading}\r\n                        className={classes.submit}\r\n                    >\r\n                        重设密码\r\n                    </Button>{\" \"}\r\n                </form>{\" \"}\r\n                <Divider />\r\n                <div className={classes.link}>\r\n                    <div>\r\n                        <Link href={\"/login\"}>返回登录</Link>\r\n                    </div>\r\n                    <div>\r\n                        <Link href={\"/signup\"}>注册账号</Link>\r\n                    </div>\r\n                </div>\r\n            </Paper>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ResetForm;\r\n","import React, { useCallback, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n    Avatar,\r\n    Button,\r\n    Divider,\r\n    FormControl,\r\n    Input,\r\n    InputLabel,\r\n    Link,\r\n    makeStyles,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport { toggleSnackbar } from \"../../actions/index\";\r\nimport API from \"../../middleware/Api\";\r\nimport KeyIcon from \"@material-ui/icons/VpnKeyOutlined\";\r\nimport { useCaptcha } from \"../../hooks/useCaptcha\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        width: \"auto\",\r\n        marginTop: \"110px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(\"sm\")]: {\r\n            width: 400,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: 110,\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        padding: `${theme.spacing(2)}px ${theme.spacing(3)}px ${theme.spacing(\r\n            3\r\n        )}px`,\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    submit: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    captchaContainer: {\r\n        display: \"flex\",\r\n        marginTop: \"10px\",\r\n    },\r\n    captchaPlaceholder: {\r\n        width: 200,\r\n    },\r\n    link: {\r\n        marginTop: \"20px\",\r\n        display: \"flex\",\r\n        width: \"100%\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n}));\r\n\r\nfunction Reset() {\r\n    const [input, setInput] = useState({\r\n        email: \"\",\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n    const forgetCaptcha = useSelector(\r\n        (state) => state.siteConfig.forgetCaptcha\r\n    );\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const handleInputChange = (name) => (e) => {\r\n        setInput({\r\n            ...input,\r\n            [name]: e.target.value,\r\n        });\r\n    };\r\n\r\n    const {\r\n        captchaLoading,\r\n        isValidate,\r\n        validate,\r\n        CaptchaRender,\r\n        captchaRefreshRef,\r\n        captchaParamsRef,\r\n    } = useCaptcha();\r\n\r\n    const submit = (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        if (!isValidate.current.isValidate && forgetCaptcha) {\r\n            validate(() => submit(e), setLoading);\r\n            return;\r\n        }\r\n        API.post(\"/user/reset\", {\r\n            userName: input.email,\r\n            ...captchaParamsRef.current,\r\n        })\r\n            .then(() => {\r\n                setLoading(false);\r\n                ToggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    \"密码重置邮件已发送，请注意查收\",\r\n                    \"success\"\r\n                );\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false);\r\n                ToggleSnackbar(\"top\", \"right\", error.message, \"warning\");\r\n                captchaRefreshRef.current();\r\n            });\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.layout}>\r\n            <Paper className={classes.paper}>\r\n                <Avatar className={classes.avatar}>\r\n                    <KeyIcon />\r\n                </Avatar>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    找回密码\r\n                </Typography>\r\n                <form className={classes.form} onSubmit={submit}>\r\n                    <FormControl margin=\"normal\" required fullWidth>\r\n                        <InputLabel htmlFor=\"email\">注册邮箱</InputLabel>\r\n                        <Input\r\n                            id=\"email\"\r\n                            type=\"email\"\r\n                            name=\"email\"\r\n                            onChange={handleInputChange(\"email\")}\r\n                            autoComplete\r\n                            value={input.email}\r\n                            autoFocus\r\n                        />\r\n                    </FormControl>\r\n                    {forgetCaptcha && <CaptchaRender />}\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        disabled={\r\n                            loading || (forgetCaptcha ? captchaLoading : false)\r\n                        }\r\n                        className={classes.submit}\r\n                    >\r\n                        发送密码重置邮件\r\n                    </Button>{\" \"}\r\n                </form>{\" \"}\r\n                <Divider />\r\n                <div className={classes.link}>\r\n                    <div>\r\n                        <Link href={\"/login\"}>返回登录</Link>\r\n                    </div>\r\n                    <div>\r\n                        <Link href={\"/signup\"}>注册账号</Link>\r\n                    </div>\r\n                </div>\r\n            </Paper>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Reset;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { FormControl, makeStyles, TextField } from \"@material-ui/core\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport { toggleSnackbar } from \"../../actions/index\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport API from \"../../middleware/Api\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport { reportReasons } from \"../../config\";\r\nimport Auth from \"../../middleware/Auth\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    widthAnimation: {},\r\n    content: {\r\n        overflowWrap: \"break-word\",\r\n    },\r\n}));\r\n\r\nexport default function SiteNotice() {\r\n    const content = useSelector((state) => state.siteConfig.site_notice);\r\n    const classes = useStyles();\r\n    const [show, setShow] = useState(false);\r\n    const setRead = () => {\r\n        setShow(false);\r\n        Auth.SetPreference(\"notice_read\", content);\r\n    };\r\n    useEffect(() => {\r\n        const newNotice = Auth.GetPreference(\"notice_read\");\r\n        if (content !== \"\" && newNotice !== content) {\r\n            setShow(true);\r\n        }\r\n    }, [content]);\r\n    return (\r\n        <Dialog\r\n            open={show}\r\n            onClose={() => setShow(false)}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            maxWidth=\"sm\"\r\n            fullWidth\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">公告</DialogTitle>\r\n            <DialogContent\r\n                className={classes.content}\r\n                dangerouslySetInnerHTML={{ __html: content }}\r\n            />\r\n\r\n            <DialogActions>\r\n                <Button onClick={() => setRead()} color=\"primary\">\r\n                    不再显示\r\n                </Button>\r\n                <Button onClick={() => setShow(false)}>关闭</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n}\r\n","import React, { Suspense } from \"react\";\r\nimport AuthRoute from \"./middleware/AuthRoute\";\r\nimport Navbar from \"./component/Navbar/Navbar.js\";\r\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\r\nimport AlertBar from \"./component/Common/Snackbar\";\r\nimport { createMuiTheme, lighten } from \"@material-ui/core/styles\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Redirect, Route, Switch, useRouteMatch } from \"react-router-dom\";\r\nimport Auth from \"./middleware/Auth\";\r\nimport { CssBaseline, makeStyles, ThemeProvider } from \"@material-ui/core\";\r\nimport PageLoading from \"./component/Placeholder/PageLoading.js\";\r\nimport { changeThemeColor } from \"./utils\";\r\nimport NotFound from \"./component/Share/NotFound\";\r\n// Lazy loads\r\nimport LoginForm from \"./component/Login/LoginForm\";\r\nimport FileManager from \"./component/FileManager/FileManager.js\";\r\nimport VideoPreview from \"./component/Viewer/Video.js\";\r\nimport SearchResult from \"./component/Share/SearchResult\";\r\nimport MyShare from \"./component/Share/MyShare\";\r\nimport Download from \"./component/Download/Download\";\r\nimport SharePreload from \"./component/Share/SharePreload\";\r\nimport DocViewer from \"./component/Viewer/Doc\";\r\nimport TextViewer from \"./component/Viewer/Text\";\r\nimport Quota from \"./component/VAS/Quota\";\r\nimport BuyQuota from \"./component/VAS/BuyQuota\";\r\nimport WebDAV from \"./component/Setting/WebDAV\";\r\nimport Tasks from \"./component/Setting/Tasks\";\r\nimport Ifm from \"./component/Setting/Ifm\";\r\nimport Profile from \"./component/Setting/Profile\";\r\nimport UserSetting from \"./component/Setting/UserSetting\";\r\nimport QQCallback from \"./component/Login/QQ\";\r\nimport Register from \"./component/Login/Register\";\r\nimport Apps from \"./component/Login/Apps\";\r\nimport Activation from \"./component/Login/Activication\";\r\nimport ResetForm from \"./component/Login/ResetForm\";\r\nimport Reset from \"./component/Login/Reset\";\r\nimport CodeViewer from \"./component/Viewer/Code\";\r\nimport SiteNotice from \"./component/Modals/SiteNotice\";\r\n\r\nconst PDFViewer = React.lazy(() =>\r\n    import(/* webpackChunkName: \"pdf\" */ \"./component/Viewer/PDF\")\r\n);\r\n\r\nexport default function App() {\r\n    const themeConfig = useSelector((state) => state.siteConfig.theme);\r\n    const isLogin = useSelector((state) => state.viewUpdate.isLogin);\r\n    const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\r\n\r\n    const theme = React.useMemo(() => {\r\n        themeConfig.palette.type = prefersDarkMode ? \"dark\" : \"light\";\r\n        const prefer = Auth.GetPreference(\"theme_mode\");\r\n        if (prefer) {\r\n            themeConfig.palette.type = prefer;\r\n        }\r\n        const theme = createMuiTheme({\r\n            ...themeConfig,\r\n            palette: {\r\n                ...themeConfig.palette,\r\n                primary: {\r\n                    ...themeConfig.palette.primary,\r\n                    main:\r\n                        themeConfig.palette.type === \"dark\"\r\n                            ? lighten(themeConfig.palette.primary.main, 0.3)\r\n                            : themeConfig.palette.primary.main,\r\n                },\r\n            },\r\n        });\r\n        changeThemeColor(\r\n            themeConfig.palette.type === \"dark\"\r\n                ? theme.palette.background.default\r\n                : theme.palette.primary.main\r\n        );\r\n        return theme;\r\n    }, [prefersDarkMode, themeConfig]);\r\n\r\n    const useStyles = makeStyles((theme) => ({\r\n        root: {\r\n            display: \"flex\",\r\n        },\r\n        content: {\r\n            flexGrow: 1,\r\n            padding: theme.spacing(0),\r\n            minWidth: 0,\r\n        },\r\n        toolbar: theme.mixins.toolbar,\r\n    }));\r\n\r\n    const classes = useStyles();\r\n\r\n    const { path } = useRouteMatch();\r\n    return (\r\n        <React.Fragment>\r\n            <ThemeProvider theme={theme}>\r\n                <div className={classes.root} id=\"container\">\r\n                    <CssBaseline />\r\n                    <AlertBar />\r\n                    <Navbar />\r\n                    <main className={classes.content}>\r\n                        <div className={classes.toolbar} />\r\n                        <Switch>\r\n                            <AuthRoute exact path={path} isLogin={isLogin}>\r\n                                <Redirect\r\n                                    to={{\r\n                                        pathname: \"/home\",\r\n                                    }}\r\n                                />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}home`} isLogin={isLogin}>\r\n                                <>\r\n                                    <SiteNotice />\r\n                                    <FileManager />\r\n                                </>\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}video`} isLogin={isLogin}>\r\n                                <VideoPreview />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}text`} isLogin={isLogin}>\r\n                                <TextViewer />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}doc`} isLogin={isLogin}>\r\n                                <DocViewer />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}pdf`} isLogin={isLogin}>\r\n                                <Suspense fallback={<PageLoading />}>\r\n                                    <PDFViewer />\r\n                                </Suspense>\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}code`} isLogin={isLogin}>\r\n                                <CodeViewer />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}aria2`} isLogin={isLogin}>\r\n                                <Download />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}shares`} isLogin={isLogin}>\r\n                                <MyShare />\r\n                            </AuthRoute>\r\n\r\n                            <Route path={`${path}search`} isLogin={isLogin}>\r\n                                <SearchResult />\r\n                            </Route>\r\n\r\n                            <AuthRoute path={`${path}quota`} isLogin={isLogin}>\r\n                                <Quota />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}buy`} isLogin={isLogin}>\r\n                                <BuyQuota />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute\r\n                                path={`${path}setting`}\r\n                                isLogin={isLogin}\r\n                            >\r\n                                <UserSetting />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute\r\n                                path={`${path}profile/:id`}\r\n                                isLogin={isLogin}\r\n                            >\r\n                                <Profile />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}webdav`} isLogin={isLogin}>\r\n                                <WebDAV />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}tasks`} isLogin={isLogin}>\r\n                                <Tasks />\r\n                            </AuthRoute>\r\n\r\n                            <AuthRoute path={`${path}ifm/:action`} isLogin={isLogin}>\r\n                                <Ifm />\r\n                            </AuthRoute>\r\n\r\n                            <Route path={`${path}apps`} exact>\r\n                                <Apps />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}login`} exact>\r\n                                <LoginForm />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}signup`} exact>\r\n                                <Register />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}activate`} exact>\r\n                                <Activation />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}reset`} exact>\r\n                                <ResetForm />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}forget`} exact>\r\n                                <Reset />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}login/qq`}>\r\n                                <QQCallback />\r\n                            </Route>\r\n\r\n                            <Route exact path={`${path}s/:id`}>\r\n                                <SharePreload />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}s/:id/video(/)*`}>\r\n                                <VideoPreview />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}s/:id/doc(/)*`}>\r\n                                <DocViewer />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}s/:id/text(/)*`}>\r\n                                <TextViewer />\r\n                            </Route>\r\n\r\n                            <Route path={`${path}s/:id/pdf(/)*`}>\r\n                                <Suspense fallback={<PageLoading />}>\r\n                                    <PDFViewer />\r\n                                </Suspense>\r\n                            </Route>\r\n\r\n                            <Route path={`${path}s/:id/code(/)*`}>\r\n                                <CodeViewer />\r\n                            </Route>\r\n\r\n                            <Route path=\"*\">\r\n                                <NotFound msg={\"页面不存在\"} />\r\n                            </Route>\r\n                        </Switch>\r\n                    </main>\r\n                </div>\r\n            </ThemeProvider>\r\n        </React.Fragment>\r\n    );\r\n}\r\n","import { AnyAction } from \"redux\";\r\nimport Auth from \"../../middleware/Auth\";\r\n\r\ndeclare global {\r\n    interface Window {\r\n        shareKey: any;\r\n    }\r\n}\r\n\r\nexport interface ViewUpdateState {\r\n    isLogin: boolean;\r\n    loadUploader: boolean;\r\n    open: boolean;\r\n    explorerViewMethod: string;\r\n    sortMethod:\r\n        | \"sizePos\"\r\n        | \"sizeRes\"\r\n        | \"namePos\"\r\n        | \"nameRev\"\r\n        | \"timePos\"\r\n        | \"timeRev\";\r\n    subTitle: string | null;\r\n    contextType: string;\r\n    contextOpen: boolean;\r\n    menuOpen: boolean;\r\n    navigatorLoading: boolean;\r\n    navigatorError: boolean;\r\n    navigatorErrorMsg: string | null;\r\n    modalsLoading: boolean;\r\n    storageRefresh: boolean;\r\n    userPopoverAnchorEl: any;\r\n    shareUserPopoverAnchorEl: any;\r\n    modals: {\r\n        createNewFolder: boolean;\r\n        createNewFile: boolean;\r\n        rename: boolean;\r\n        move: boolean;\r\n        remove: boolean;\r\n        share: boolean;\r\n        music: boolean;\r\n        remoteDownload: boolean;\r\n        torrentDownload: boolean;\r\n        getSource: boolean;\r\n        copy: boolean;\r\n        resave: boolean;\r\n        compress: boolean;\r\n        decompress: boolean;\r\n        relocate: boolean;\r\n        loading: boolean;\r\n        loadingText: string;\r\n    };\r\n    snackbar: {\r\n        toggle: boolean;\r\n        vertical: string;\r\n        horizontal: string;\r\n        msg: string;\r\n        color: string;\r\n    };\r\n}\r\nexport const initState: ViewUpdateState = {\r\n    // 是否登录\r\n    isLogin: Auth.Check(),\r\n    loadUploader: false,\r\n    open: false,\r\n    explorerViewMethod: \"icon\",\r\n    sortMethod: \"timePos\",\r\n    subTitle: null,\r\n    contextType: \"none\",\r\n    contextOpen: false,\r\n    menuOpen: false,\r\n    navigatorLoading: true,\r\n    navigatorError: false,\r\n    navigatorErrorMsg: null,\r\n    modalsLoading: false,\r\n    storageRefresh: false,\r\n    userPopoverAnchorEl: null,\r\n    shareUserPopoverAnchorEl: null,\r\n    modals: {\r\n        createNewFolder: false,\r\n        createNewFile: false,\r\n        rename: false,\r\n        move: false,\r\n        remove: false,\r\n        share: false,\r\n        music: false,\r\n        remoteDownload: false,\r\n        torrentDownload: false,\r\n        getSource: false,\r\n        copy: false,\r\n        resave: false,\r\n        compress: false,\r\n        relocate: false,\r\n        decompress: false,\r\n        loading: false,\r\n        loadingText: \"\",\r\n    },\r\n    snackbar: {\r\n        toggle: false,\r\n        vertical: \"top\",\r\n        horizontal: \"center\",\r\n        msg: \"\",\r\n        color: \"\",\r\n    },\r\n};\r\nconst viewUpdate = (state: ViewUpdateState = initState, action: AnyAction) => {\r\n    switch (action.type) {\r\n        case \"DRAWER_TOGGLE\":\r\n            return Object.assign({}, state, {\r\n                open: action.open,\r\n            });\r\n        case \"CHANGE_VIEW_METHOD\":\r\n            return Object.assign({}, state, {\r\n                explorerViewMethod: action.method,\r\n            });\r\n        case \"SET_NAVIGATOR_LOADING_STATUE\":\r\n            return Object.assign({}, state, {\r\n                navigatorLoading: action.status,\r\n            });\r\n        case \"SET_NAVIGATOR_ERROR\":\r\n            return Object.assign({}, state, {\r\n                navigatorError: action.status,\r\n                navigatorErrorMsg: action.msg,\r\n            });\r\n        case \"OPEN_CREATE_FOLDER_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    createNewFolder: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_CREATE_FILE_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    createNewFile: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_RENAME_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    rename: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_REMOVE_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    remove: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_MOVE_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    move: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_RESAVE_DIALOG\":\r\n            window.shareKey = action.key;\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    resave: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"SET_USER_POPOVER\":\r\n            return Object.assign({}, state, {\r\n                userPopoverAnchorEl: action.anchor,\r\n            });\r\n        case \"SET_SHARE_USER_POPOVER\":\r\n            return Object.assign({}, state, {\r\n                shareUserPopoverAnchorEl: action.anchor,\r\n            });\r\n        case \"OPEN_SHARE_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    share: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_MUSIC_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    music: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_REMOTE_DOWNLOAD_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    remoteDownload: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_TORRENT_DOWNLOAD_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    torrentDownload: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_DECOMPRESS_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    decompress: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_COMPRESS_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    compress: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_GET_SOURCE_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    getSource: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_RELOCATE_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    relocate: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_COPY_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    copy: true,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"OPEN_LOADING_DIALOG\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    loading: true,\r\n                    loadingText: action.text,\r\n                }),\r\n                contextOpen: false,\r\n            });\r\n        case \"CLOSE_CONTEXT_MENU\":\r\n            return Object.assign({}, state, {\r\n                contextOpen: false,\r\n            });\r\n        case \"CLOSE_ALL_MODALS\":\r\n            return Object.assign({}, state, {\r\n                modals: Object.assign({}, state.modals, {\r\n                    createNewFolder: false,\r\n                    createNewFile: false,\r\n                    rename: false,\r\n                    move: false,\r\n                    remove: false,\r\n                    share: false,\r\n                    music: false,\r\n                    remoteDownload: false,\r\n                    torrentDownload: false,\r\n                    getSource: false,\r\n                    resave: false,\r\n                    copy: false,\r\n                    loading: false,\r\n                    relocate: false,\r\n                    compress: false,\r\n                    decompress: false,\r\n                }),\r\n            });\r\n        case \"TOGGLE_SNACKBAR\":\r\n            return Object.assign({}, state, {\r\n                snackbar: {\r\n                    toggle: !state.snackbar.toggle,\r\n                    vertical: action.vertical,\r\n                    horizontal: action.horizontal,\r\n                    msg: action.msg,\r\n                    color: action.color,\r\n                },\r\n            });\r\n        case \"SET_MODALS_LOADING\":\r\n            return Object.assign({}, state, {\r\n                modalsLoading: action.status,\r\n            });\r\n        case \"SET_SESSION_STATUS\":\r\n            return {\r\n                ...state,\r\n                isLogin: action.status,\r\n            };\r\n        case \"ENABLE_LOAD_UPLOADER\":\r\n            return Object.assign({}, state, {\r\n                loadUploader: true,\r\n            });\r\n        case \"REFRESH_STORAGE\":\r\n            return Object.assign({}, state, {\r\n                storageRefresh: !state.storageRefresh,\r\n            });\r\n        case \"SEARCH_MY_FILE\":\r\n            return Object.assign({}, state, {\r\n                contextOpen: false,\r\n                navigatorError: false,\r\n                navigatorLoading: true,\r\n            });\r\n        case \"CHANGE_CONTEXT_MENU\":\r\n            if (state.contextOpen && action.open) {\r\n                return Object.assign({}, state);\r\n            }\r\n            return Object.assign({}, state, {\r\n                contextOpen: action.open,\r\n                contextType: action.menuType,\r\n            });\r\n        case \"SET_SUBTITLE\":\r\n            return Object.assign({}, state, {\r\n                subTitle: action.title,\r\n            });\r\n        case \"SET_SORT_METHOD\":\r\n            return {\r\n                ...state,\r\n                sortMethod: action.method,\r\n            };\r\n        case \"SET_NAVIGATOR\":\r\n            return {\r\n                ...state,\r\n                contextOpen: false,\r\n                navigatorError: false,\r\n                navigatorLoading: action.navigatorLoading,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default viewUpdate;\r\n","import { InitSiteConfig } from \"../middleware/Init\";\r\nimport { combineReducers } from \"../redux/combineReducers\";\r\nimport viewUpdate from \"../redux/viewUpdate/reducer\";\r\nimport explorer from \"../redux/explorer/reducer\";\r\nimport { connectRouter } from \"connected-react-router\";\r\n\r\nconst doNavigate = (path, state) => {\r\n    window.currntPath = path;\r\n    return Object.assign({}, state, {\r\n        navigator: Object.assign({}, state.navigator, {\r\n            path: path,\r\n        }),\r\n    });\r\n};\r\n\r\nexport const initState = {\r\n    siteConfig: {\r\n        title: window.subTitle,\r\n        siteICPId: \"\",\r\n        loginCaptcha: false,\r\n        regCaptcha: false,\r\n        forgetCaptcha: false,\r\n        emailActive: false,\r\n        QQLogin: false,\r\n        themes: null,\r\n        authn: false,\r\n        theme: {\r\n            palette: {\r\n                common: { black: \"#000\", white: \"#fff\" },\r\n                background: { paper: \"#fff\", default: \"#fafafa\" },\r\n                primary: {\r\n                    light: \"#7986cb\",\r\n                    main: \"#3f51b5\",\r\n                    dark: \"#303f9f\",\r\n                    contrastText: \"#fff\",\r\n                },\r\n                secondary: {\r\n                    light: \"#ff4081\",\r\n                    main: \"#f50057\",\r\n                    dark: \"#c51162\",\r\n                    contrastText: \"#fff\",\r\n                },\r\n                error: {\r\n                    light: \"#e57373\",\r\n                    main: \"#f44336\",\r\n                    dark: \"#d32f2f\",\r\n                    contrastText: \"#fff\",\r\n                },\r\n                text: {\r\n                    primary: \"rgba(0, 0, 0, 0.87)\",\r\n                    secondary: \"rgba(0, 0, 0, 0.54)\",\r\n                    disabled: \"rgba(0, 0, 0, 0.38)\",\r\n                    hint: \"rgba(0, 0, 0, 0.38)\",\r\n                },\r\n                explorer: {\r\n                    filename: \"#474849\",\r\n                    icon: \"#8f8f8f\",\r\n                    bgSelected: \"#D5DAF0\",\r\n                    emptyIcon: \"#e8e8e8\",\r\n                },\r\n            },\r\n        },\r\n        captcha_ReCaptchaKey: \"defaultKey\",\r\n        site_notice: \"\",\r\n        captcha_type: \"normal\",\r\n        tcaptcha_captcha_app_id: \"\",\r\n    },\r\n    navigator: {\r\n        path: \"/\",\r\n        refresh: true,\r\n    },\r\n};\r\n\r\nconst defaultStatus = InitSiteConfig(initState);\r\n\r\n// TODO: 将cloureveApp切分成小的reducer\r\nconst cloudreveApp = (state = defaultStatus, action) => {\r\n    switch (action.type) {\r\n        case \"SET_NAVIGATOR\":\r\n            return doNavigate(action.path, state);\r\n        case \"TOGGLE_DAYLIGHT_MODE\": {\r\n            const copy = Object.assign({}, state);\r\n            if (\r\n                copy.siteConfig.theme.palette.type === undefined ||\r\n                copy.siteConfig.theme.palette.type === \"light\"\r\n            ) {\r\n                return {\r\n                    ...state,\r\n                    siteConfig: {\r\n                        ...state.siteConfig,\r\n                        theme: {\r\n                            ...state.siteConfig.theme,\r\n                            palette: {\r\n                                ...state.siteConfig.theme.palette,\r\n                                type: \"dark\",\r\n                            },\r\n                        },\r\n                    },\r\n                };\r\n            }\r\n            return {\r\n                ...state,\r\n                siteConfig: {\r\n                    ...state.siteConfig,\r\n                    theme: {\r\n                        ...state.siteConfig.theme,\r\n                        palette: {\r\n                            ...state.siteConfig.theme.palette,\r\n                            type: \"light\",\r\n                        },\r\n                    },\r\n                },\r\n            };\r\n        }\r\n        case \"APPLY_THEME\":\r\n            if (state.siteConfig.themes !== null) {\r\n                const themes = JSON.parse(state.siteConfig.themes);\r\n                if (themes[action.theme] === undefined) {\r\n                    return state;\r\n                }\r\n                return Object.assign({}, state, {\r\n                    siteConfig: Object.assign({}, state.siteConfig, {\r\n                        theme: themes[action.theme],\r\n                    }),\r\n                });\r\n            }\r\n            break;\r\n        case \"NAVIGATOR_UP\":\r\n            return doNavigate(action.path, state);\r\n        case \"SET_SITE_CONFIG\":\r\n            return Object.assign({}, state, {\r\n                siteConfig: action.config,\r\n            });\r\n\r\n        case \"REFRESH_FILE_LIST\":\r\n            return Object.assign({}, state, {\r\n                navigator: Object.assign({}, state.navigator, {\r\n                    refresh: !state.navigator.refresh,\r\n                }),\r\n            });\r\n        case \"SEARCH_MY_FILE\":\r\n            return Object.assign({}, state, {\r\n                navigator: Object.assign({}, state.navigator, {\r\n                    path: \"/搜索结果\",\r\n                    refresh:\r\n                        state.explorer.keywords === \"\"\r\n                            ? state.navigator.refresh\r\n                            : !state.navigator.refresh,\r\n                }),\r\n            });\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default (history) => (state, action) => {\r\n    const { viewUpdate: viewUpdateState, explorer: explorerState } =\r\n        state || {};\r\n    const appState = cloudreveApp(state, action);\r\n    const combinedState = combineReducers({\r\n        viewUpdate,\r\n        explorer,\r\n        router: connectRouter(history),\r\n    })({ viewUpdate: viewUpdateState, explorer: explorerState }, action);\r\n    return {\r\n        ...appState,\r\n        ...combinedState,\r\n    };\r\n};\r\n","import React from \"react\";\r\nimport { withStyles } from \"@material-ui/core\";\r\n\r\nconst styles = {\r\n    h1: {\r\n        color: \"#a4a4a4\",\r\n        margin: \"5px 0px\",\r\n    },\r\n    h2: {\r\n        margin: \"15px 0px\",\r\n    },\r\n};\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { hasError: false, error: null, errorInfo: null };\r\n    }\r\n\r\n    static getDerivedStateFromError() {\r\n        // 更新 state 使下一次渲染能够显示降级后的 UI\r\n        return { hasError: true };\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        this.setState({\r\n            error: error,\r\n            errorInfo: errorInfo,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n        if (this.state.hasError) {\r\n            // 你可以自定义降级后的 UI 并渲染\r\n            return (\r\n                <>\r\n                    <h1 className={classes.h1}>:(</h1>\r\n                    <h2 className={classes.h2}>\r\n                        页面渲染出现错误，请尝试刷新此页面。\r\n                    </h2>\r\n                    {this.state.error &&\r\n                        this.state.errorInfo &&\r\n                        this.state.errorInfo.componentStack && (\r\n                            <details>\r\n                                <summary>错误详情</summary>\r\n                                <pre>\r\n                                    <code>{this.state.error.toString()}</code>\r\n                                </pre>\r\n                                <pre>\r\n                                    <code>\r\n                                        {this.state.errorInfo.componentStack}\r\n                                    </code>\r\n                                </pre>\r\n                            </details>\r\n                        )}\r\n                </>\r\n            );\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(ErrorBoundary);\r\n","import 'babel-polyfill'\r\nimport 'url-search-params-polyfill'\r\nimport React, { Suspense } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport App from \"./App\";\r\nimport cloureveApp from \"./reducers\";\r\nimport { UpdateSiteConfig } from \"./middleware/Init\";\r\nimport ErrorBoundary from \"./component/Placeholder/ErrorBoundary\";\r\nimport { createBrowserHistory } from \"history\";\r\nimport { routerMiddleware } from \"connected-react-router\";\r\nimport { ConnectedRouter } from \"connected-react-router\";\r\nconst Admin = React.lazy(() => import(\"./Admin\"));\r\n\r\nif (window.location.hash !== \"\") {\r\n    window.location.href = window.location.hash.split(\"#\")[1];\r\n}\r\n\r\nserviceWorker.register();\r\nexport const history = createBrowserHistory();\r\nlet reduxEnhance = applyMiddleware(routerMiddleware(history), thunk);\r\nif (\r\n    process.env.NODE_ENV === \"development\" &&\r\n    window.__REDUX_DEVTOOLS_EXTENSION__\r\n) {\r\n    reduxEnhance = compose(reduxEnhance, window.__REDUX_DEVTOOLS_EXTENSION__());\r\n}\r\n\r\nconst store = createStore(cloureveApp(history), reduxEnhance);\r\nUpdateSiteConfig(store);\r\n\r\nReactDOM.render(\r\n    <ErrorBoundary>\r\n        <Provider store={store}>\r\n            <ConnectedRouter history={history}>\r\n                <Switch>\r\n                    <Route path=\"/admin\">\r\n                        <Suspense fallback={\"Loading...\"}>\r\n                            <Admin />\r\n                        </Suspense>\r\n                    </Route>\r\n                    <Route exact path=\"\">\r\n                        <App />\r\n                    </Route>\r\n                </Switch>\r\n            </ConnectedRouter>\r\n        </Provider>\r\n    </ErrorBoundary>,\r\n    document.getElementById(\"root\")\r\n);\r\n","import {\r\n    combineReducers as combine,\r\n    ReducersMapObject,\r\n    AnyAction,\r\n} from \"redux\";\r\nimport invariant from \"invariant\";\r\n\r\nexport const combineReducers = (reducers: ReducersMapObject) => {\r\n    const combinedReducer = combine(reducers);\r\n    // TODO: define state type\r\n    return (state: any, action: AnyAction) => {\r\n        if (\r\n            action.type &&\r\n            !action.type.startsWith(\"@@\") &&\r\n            action.type.split(\"/\").length > 1\r\n        ) {\r\n            const namespace = action.type.split(\"/\")[0];\r\n            const reducer = reducers[namespace];\r\n            invariant(!!reducer, `reducer ${namespace} doesn't exist`);\r\n            return reducer && reducer(state, action);\r\n        }\r\n        return combinedReducer(state, action);\r\n    };\r\n};\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\nimport RightIcon from \"@material-ui/icons/KeyboardArrowRight\";\r\nimport UpIcon from \"@material-ui/icons/ArrowUpward\";\r\nimport { connect } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\nimport { toggleSnackbar } from \"../../actions/index\";\r\n\r\nimport {\r\n    MenuList,\r\n    MenuItem,\r\n    IconButton,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    withStyles,\r\n    ListItemSecondaryAction,\r\n} from \"@material-ui/core\";\r\nimport API from \"../../middleware/Api\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        keywords: state.explorer.keywords,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        toggleSnackbar: (vertical, horizontal, msg, color) => {\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color));\r\n        },\r\n    };\r\n};\r\n\r\nconst styles = (theme) => ({\r\n    iconWhite: {\r\n        color: theme.palette.common.white,\r\n    },\r\n    selected: {\r\n        backgroundColor: theme.palette.primary.main + \"!important\",\r\n        \"& $primary, & $icon\": {\r\n            color: theme.palette.common.white,\r\n        },\r\n    },\r\n    primary: {},\r\n    icon: {},\r\n    buttonIcon: {},\r\n    selector: {\r\n        minWidth: \"300px\",\r\n    },\r\n    container: {\r\n        maxHeight: \"330px\",\r\n        overflowY: \" auto\",\r\n    },\r\n});\r\n\r\nclass PathSelectorCompoment extends Component {\r\n    state = {\r\n        presentPath: \"/\",\r\n        dirList: [],\r\n        selectedTarget: null,\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        const toBeLoad = this.props.presentPath;\r\n        this.enterFolder(this.props.keywords === \"\" ? toBeLoad : \"/\");\r\n    };\r\n\r\n    back = () => {\r\n        const paths = this.state.presentPath.split(\"/\");\r\n        paths.pop();\r\n        const toBeLoad = paths.join(\"/\");\r\n        this.enterFolder(toBeLoad === \"\" ? \"/\" : toBeLoad);\r\n    };\r\n\r\n    enterFolder = (toBeLoad) => {\r\n        const thisurl = window.location.href;\r\n        const va = thisurl.split('/');\r\n        if (va[3]==\"s\") toBeLoad = \"/\";\r\n        API.get(\r\n            (this.props.api ? this.props.api : \"/directory\") +\r\n                encodeURIComponent(toBeLoad)\r\n        )\r\n            .then((response) => {\r\n                const dirList = response.data.objects.filter((x) => {\r\n                    return (\r\n                        x.type === \"dir\" &&\r\n                        this.props.selected.findIndex((value) => {\r\n                            return (\r\n                                value.name === x.name && value.path === x.path\r\n                            );\r\n                        }) === -1\r\n                    );\r\n                });\r\n                if (toBeLoad === \"/\") {\r\n                    dirList.unshift({ name: \"/\", path: \"\" });\r\n                }\r\n                this.setState({\r\n                    presentPath: toBeLoad,\r\n                    dirList: dirList,\r\n                    selectedTarget: null,\r\n                });\r\n            })\r\n            .catch((error) => {\r\n                this.props.toggleSnackbar(\r\n                    \"top\",\r\n                    \"right\",\r\n                    error.message,\r\n                    \"warning\"\r\n                );\r\n            });\r\n    };\r\n\r\n    handleSelect = (index) => {\r\n        this.setState({ selectedTarget: index });\r\n        this.props.onSelect(this.state.dirList[index]);\r\n    };\r\n\r\n    render() {\r\n        const { classes } = this.props;\r\n\r\n        return (\r\n            <div className={classes.container}>\r\n                <MenuList className={classes.selector}>\r\n                    {this.state.presentPath !== \"/\" && (\r\n                        <MenuItem onClick={this.back}>\r\n                            <ListItemIcon>\r\n                                <UpIcon />\r\n                            </ListItemIcon>\r\n                            <ListItemText primary=\"返回上一层\" />\r\n                        </MenuItem>\r\n                    )}\r\n                    {this.state.dirList.map((value, index) => (\r\n                        <MenuItem\r\n                            classes={{\r\n                                selected: classes.selected,\r\n                            }}\r\n                            key={index}\r\n                            selected={this.state.selectedTarget === index}\r\n                            onClick={() => this.handleSelect(index)}\r\n                        >\r\n                            <ListItemIcon className={classes.icon}>\r\n                                <FolderIcon />\r\n                            </ListItemIcon>\r\n                            <ListItemText\r\n                                classes={{ primary: classes.primary }}\r\n                                primary={value.name}\r\n                                primaryTypographyProps={{\r\n                                    style: { whiteSpace: \"normal\" },\r\n                                }}\r\n                            />\r\n                            {value.name !== \"/\" && (\r\n                                <ListItemSecondaryAction\r\n                                    className={classes.buttonIcon}\r\n                                >\r\n                                    <IconButton\r\n                                        className={classNames({\r\n                                            [classes.iconWhite]:\r\n                                                this.state.selectedTarget ===\r\n                                                index,\r\n                                        })}\r\n                                        onClick={() =>\r\n                                            this.enterFolder(\r\n                                                value.path === \"/\"\r\n                                                    ? value.path + value.name\r\n                                                    : value.path +\r\n                                                          \"/\" +\r\n                                                          value.name\r\n                                            )\r\n                                        }\r\n                                    >\r\n                                        <RightIcon />\r\n                                    </IconButton>\r\n                                </ListItemSecondaryAction>\r\n                            )}\r\n                        </MenuItem>\r\n                    ))}\r\n                </MenuList>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nPathSelectorCompoment.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    presentPath: PropTypes.string.isRequired,\r\n    selected: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(withStyles(styles)(PathSelectorCompoment));\r\n","import { ThunkAction } from \"redux-thunk\";\r\nimport { AnyAction } from \"redux\";\r\nexport interface ActionSetSubtitle extends AnyAction {\r\n    type: \"SET_SUBTITLE\";\r\n    title: string;\r\n}\r\n\r\nexport const setSubtitle = (title: string): ActionSetSubtitle => {\r\n    return {\r\n        type: \"SET_SUBTITLE\",\r\n        title,\r\n    };\r\n};\r\n\r\nexport const closeContextMenu = () => {\r\n    return {\r\n        type: \"CLOSE_CONTEXT_MENU\",\r\n    };\r\n};\r\n\r\nexport const changeSubTitle = (\r\n    title: string\r\n): ThunkAction<any, any, any, any> => {\r\n    return (dispatch, getState) => {\r\n        const state = getState();\r\n        document.title =\r\n            title === null || title === undefined\r\n                ? state.siteConfig.title\r\n                : title + \" - \" + state.siteConfig.title;\r\n        dispatch(setSubtitle(title));\r\n    };\r\n};\r\n"],"sourceRoot":""}